{"version":3,"file":"module.js","mappings":"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AUE,GAClB,OAAOs2B,EAAUM,cAAc52B,EAAK,GAAIA,EAAK,GAC/C,IAKA,CACE,CAAC,MAAO,IACR,CAAC,SAAU,MACX,CAAC,gEAAiE,QAClE,CAAC,kCAAmC,OACpC,CAAC,QAAS,KACV,CAAC,uFAAwF,QACzF,CAAC,oBAAqB,QACtB,CAAC,uBAAwB,UACzB,CAAC,sBAAuB,MACxB,CAAC,2FAA4F,MAC7F,CAAC,qEAAsE,SACvE,CAAC,iCAAkC,MACnC,CAAC,oBAAqB,QACtB,CAAC,4FAA6F,QAC9F,CAAC,yGAA0G,QAC3G,CAAC,8FAA+F,QAChG,CAAC,0BAA2B,OAC5B,CAAC,+BAAgC,QACjC,CAAC,sBAAuB,QACxB,CAAC,oBAAqB,UACtB,CAAC,eAAgB,MACjB,CAAC,YAAa,MACd,CAAC,QAAS,QACVF,SAAQ,SAAUE,GAClB,OAAOs2B,EAAUO,gBAAgB72B,EAAK,GAAIA,EAAK,GACjD,IAKA,CAEE,YACA,SACA,SACA,MACA,WACA,UACA,OACA,YACA,QACA,YACA,QACA,QACA,QACA,QACA,UACA,SACA,OACA,OACA,UACA,QACA,WACA,MACA,WACA,cACA,QACA,SACA,WACA,YACA,MACA,SACA,YACA,YACA,YACA,WACA,WACA,MACA,UACA,UACA,WACA,WACA,eACA,SACA,SACA,YACA,WACA,YACA,cACA,QACA,UACA,QACA,SACA,aACA,YACA,WACA,OACA,QACA,OACA,QACA,QACA,MACA,QACA,OACA,OACA,YACA,OACA,WACA,SACA,SACA,YACA,WACA,OACA,WACA,OACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,UACA,QACA,QACA,SACA,UACA,iBACA,QACA,OACA,SACA,UACA,UACA,aACA,WACA,MACA,eAEA,gBACA,SACA,SACA,YACA,WACA,QACA,WACAF,QAAQw2B,EAAUQ,oBAEbR,CACT,CAhfqBA,aCJrB,IAAIW,EAAoC,oBAAZC,QACxBC,EAAwB,mBAARrO,IAChBsO,EAAwB,mBAARnX,IAChBoX,EAAwC,mBAAhBC,eAAgCA,YAAYC,OAIxE,SAASC,EA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","sources":["webpack:///webpack/runtime/load script","webpack:///../node_modules/@grafana/async-query-data/dist/index.js","webpack:///../node_modules/@grafana/aws-sdk/dist/index.js","webpack:///../node_modules/@grafana/experimental/dist/index.production.js","webpack:///../node_modules/@grafana/experimental/index.js","webpack:///../node_modules/debounce-promise/dist/index.js","webpack:///../node_modules/pluralize/pluralize.js","webpack:///../node_modules/react-fast-compare/index.js","webpack:///../node_modules/react-highlight-words/dist/main.js","webpack:///external amd \"@emotion/css\"","webpack:///external amd \"@grafana/data\"","webpack:///external amd \"@grafana/runtime\"","webpack:///external amd \"@grafana/ui\"","webpack:///external amd \"lodash\"","webpack:///external amd \"prismjs\"","webpack:///external amd \"react\"","webpack:///external amd \"react-dom\"","webpack:///external amd \"react-redux\"","webpack:///external amd \"redux\"","webpack:///external amd \"rxjs\"","webpack:///../node_modules/tslib/tslib.es6.mjs","webpack:///webpack/bootstrap","webpack:///webpack/runtime/amd options","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/ensure chunk","webpack:///webpack/runtime/get javascript chunk filename","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/publicPath","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/runtime/nonce","webpack:///./components/PrettifyQuery.tsx","webpack:///./components/QueryEditor/AccessoryButton.tsx","webpack:///./components/QueryEditor/Stack.tsx","webpack:///./components/QueryEditor/EditorFieldGroup.tsx","webpack:///./components/QueryEditor/EditorHeader.tsx","webpack:///./components/QueryEditor/Space.tsx","webpack:///./components/QueryEditor/EditorField.tsx","webpack:///./components/QueryEditor/EditorRow.tsx","webpack:///./components/QueryEditor/EditorList.tsx","webpack:///./components/QueryEditor/EditorRows.tsx","webpack:///./components/QueryEditor/EditorSwitch.tsx","webpack:///./components/QueryEditor/FlexItem.tsx","webpack:///./components/QueryEditor/InlineSelect.tsx","webpack:///./components/QueryEditor/InputGroup.tsx","webpack:///./utils/time.ts","webpack:///./components/VmuiLink.tsx","webpack:///./components/WithTemplateConfig/WarningSavedDashboard/WarningSavedDashboard.tsx","webpack:///../node_modules/lru-cache/dist/mjs/index.js","webpack:///../node_modules/lezer-metricsql/node_modules/@lezer/common/dist/index.js","webpack:///../node_modules/lezer-metricsql/node_modules/@lezer/lr/dist/index.js","webpack:///../node_modules/lezer-metricsql/node_modules/@lezer/highlight/dist/index.js","webpack:///../node_modules/lezer-metricsql/dist/index.es.js","webpack:///./metricsql.ts","webpack:///./consts.ts","webpack:///./querybuilder/components/LabelParamEditor.tsx","webpack:///./querybuilder/shared/operationUtils.ts","webpack:///./querybuilder/types.ts","webpack:///./querybuilder/binaryScalarOperations.ts","webpack:///./querybuilder/operations.ts","webpack:///./querybuilder/aggregations.ts","webpack:///./querybuilder/metricsql-functions/aggregations/operations.ts","webpack:///./querybuilder/metricsql-functions/aggregations/overTime.ts","webpack:///./querybuilder/metricsql-functions/basic/index.ts","webpack:///./querybuilder/metricsql-functions/bitmap/index.ts","webpack:///./querybuilder/metricsql-functions/label/labelsBasic.ts","webpack:///./querybuilder/metricsql-functions/label/labelsCopyMove.ts","webpack:///./querybuilder/metricsql-functions/rand/index.ts","webpack:///./querybuilder/metricsql-functions/range/index.ts","webpack:///./querybuilder/metricsql-functions/time/time.ts","webpack:///./querybuilder/metricsql-functions/time/timezoneOffset.ts","webpack:///./querybuilder/metricsql-functions/topbottomk/index.ts","webpack:///./querybuilder/shared/LokiAndPromQueryModellerBase.ts","webpack:///./querybuilder/PromQueryModeller.ts","webpack:///./querybuilder/metricsql-functions/label/index.ts","webpack:///./querybuilder/metricsql-functions/label/labelMap.ts","webpack:///./querybuilder/metricsql-functions/label/labelSet.ts","webpack:///./querybuilder/shared/parsingUtils.ts","webpack:///./querybuilder/parsing.ts","webpack:///./add_label_to_query.ts","webpack:///./language_utils.ts","webpack:///./language_provider.ts","webpack:///../node_modules/monaco-promql/promql/promql.contribution.js","webpack:///../node_modules/react-use/esm/useLatest.js","webpack:///../node_modules/@grafana/e2e-selectors/dist/esm/selectors/components.js","webpack:///../node_modules/@grafana/e2e-selectors/dist/esm/selectors/index.js","webpack:///../node_modules/@grafana/e2e-selectors/dist/esm/selectors/pages.js","webpack:///./components/monaco-query-field/getOverrideServices.ts","webpack:///./components/monaco-query-field/monaco-completion-provider/util.ts","webpack:///./components/monaco-query-field/monaco-completion-provider/completions.ts","webpack:///./components/monaco-query-field/monaco-completion-provider/situation.ts","webpack:///./components/monaco-query-field/monaco-completion-provider/index.ts","webpack:///./components/monaco-query-field/MonacoQueryField.tsx","webpack:///./components/monaco-query-field/MonacoQueryFieldLazy.tsx","webpack:///./components/monaco-query-field/MonacoQueryFieldWrapper.tsx","webpack:///./components/WithTemplateConfig/TemplateEditor/TemplateEditor.tsx","webpack:///./components/WithTemplateConfig/hooks/useUpdateDatasource.ts","webpack:///./components/WithTemplateConfig/hooks/useValidateExpr.ts","webpack:///./components/WithTemplateConfig/WithTemplateBody/style.ts","webpack:///./components/WithTemplateConfig/WithTemplateBody/WithTemplateBody.tsx","webpack:///./components/WithTemplateConfig/api/getDashboardList.ts","webpack:///./components/WithTemplateConfig/index.tsx","webpack:///./components/WithTemplateConfig/utils/getArrayFromTemplate.ts","webpack:///./components/WithTemplateConfig/utils/splitByCommaOutsideBrackets.ts","webpack:///./querybuilder/shared/types.ts","webpack:///./querybuilder/shared/QueryEditorModeToggle.tsx","webpack:///./querybuilder/shared/QueryHeaderSwitch.tsx","webpack:///./store.ts","webpack:///./types.ts","webpack:///./querybuilder/state.ts","webpack:///../node_modules/immer/dist/immer.esm.mjs","webpack:///../node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js","webpack:///./querybuilder/shared/LabelFilterItem.tsx","webpack:///./querybuilder/shared/LabelFilters.tsx","webpack:///./querybuilder/shared/OperationExplainedBox.tsx","webpack:///../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack:///../node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///../node_modules/use-memo-one/dist/use-memo-one.esm.js","webpack:///../node_modules/css-box-model/dist/css-box-model.esm.js","webpack:///../node_modules/tiny-invariant/dist/esm/tiny-invariant.js","webpack:///../node_modules/memoize-one/dist/memoize-one.esm.js","webpack:///../node_modules/raf-schd/dist/raf-schd.esm.js","webpack:///../node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getWindow.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","webpack:///../node_modules/@popperjs/core/lib/utils/math.js","webpack:///../node_modules/@popperjs/core/lib/utils/userAgent.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","webpack:///../node_modules/@popperjs/core/lib/enums.js","webpack:///../node_modules/@popperjs/core/lib/utils/orderModifiers.js","webpack:///../node_modules/@popperjs/core/lib/utils/debounce.js","webpack:///../node_modules/@popperjs/core/lib/createPopper.js","webpack:///../node_modules/@popperjs/core/lib/utils/mergeByName.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/eventListeners.js","webpack:///../node_modules/@popperjs/core/lib/utils/getBasePlacement.js","webpack:///../node_modules/@popperjs/core/lib/utils/getVariation.js","webpack:///../node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","webpack:///../node_modules/@popperjs/core/lib/utils/computeOffsets.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/computeStyles.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/applyStyles.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/offset.js","webpack:///../node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","webpack:///../node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/contains.js","webpack:///../node_modules/@popperjs/core/lib/utils/rectToClientRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","webpack:///../node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","webpack:///../node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","webpack:///../node_modules/@popperjs/core/lib/utils/expandToHashMap.js","webpack:///../node_modules/@popperjs/core/lib/utils/detectOverflow.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/flip.js","webpack:///../node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","webpack:///../node_modules/@popperjs/core/lib/utils/within.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","webpack:///../node_modules/@popperjs/core/lib/utils/getAltAxis.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/arrow.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/hide.js","webpack:///../node_modules/@popperjs/core/lib/popper.js","webpack:///../node_modules/react-popper/lib/esm/utils.js","webpack:///../node_modules/react-popper/lib/esm/usePopper.js","webpack:///../node_modules/react-popper-tooltip/dist/esm/react-popper-tooltip.js","webpack:///./querybuilder/shared/OperationInfoButton.tsx","webpack:///../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./querybuilder/shared/OperationHeader.tsx","webpack:///./components/QueryEditor/AutoSizeInput.tsx","webpack:///./querybuilder/shared/OperationParamEditor.tsx","webpack:///./querybuilder/shared/OperationEditor/callParamChangedThenOnChange.tsx","webpack:///./querybuilder/shared/OperationEditor/renderAddRestParamButton.tsx","webpack:///./querybuilder/shared/OperationEditor/style.ts","webpack:///./querybuilder/shared/OperationEditor/useFlash.tsx","webpack:///./querybuilder/shared/OperationEditor/OperationEditor.tsx","webpack:///./querybuilder/shared/OperationList.tsx","webpack:///../node_modules/react-use/esm/useMountedState.js","webpack:///../node_modules/react-use/esm/usePrevious.js","webpack:///./querybuilder/shared/RawQuery.tsx","webpack:///./querybuilder/shared/OperationListExplained.tsx","webpack:///./querybuilder/shared/OperationsEditorRow.tsx","webpack:///./querybuilder/shared/QueryBuilderHints.tsx","webpack:///./querybuilder/components/MetricSelect.tsx","webpack:///./querybuilder/components/NestedQuery.tsx","webpack:///./querybuilder/components/NestedQueryList.tsx","webpack:///./querybuilder/components/PromQueryBuilderExplained.tsx","webpack:///./querybuilder/components/PromQueryBuilder.tsx","webpack:///./querybuilder/components/PromQueryBuilderContainer.tsx","webpack:///./components/PromExploreExtraField.tsx","webpack:///../node_modules/react-use/esm/useToggle.js","webpack:///./querybuilder/shared/QueryOptionGroup.tsx","webpack:///./querybuilder/components/PromQueryLegendEditor.tsx","webpack:///./querybuilder/components/PromQueryBuilderOptions.tsx","webpack:///./components/LocalStorageValueProvider.tsx","webpack:///../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///../node_modules/react-window/dist/index.esm.js","webpack:///./components/PrometheusMetricsBrowser.tsx","webpack:///./components/PromQueryField.tsx","webpack:///./utils/CancelablePromise.ts","webpack:///./querybuilder/components/PromQueryCodeEditor.tsx","webpack:///./querybuilder/components/QueryPreview.tsx","webpack:///./querybuilder/components/Trace/NestedNav/style.ts","webpack:///./querybuilder/components/Trace/NestedNav/NestedNav.tsx","webpack:///./querybuilder/components/Trace/Trace.ts","webpack:///./querybuilder/components/Trace/style.ts","webpack:///./querybuilder/components/Trace/index.tsx","webpack:///./querybuilder/components/PromQueryEditorSelector.tsx","webpack:///./querybuilder/shared/hooks/useFlag.ts","webpack:///./components/PromQueryEditorForAlerting.tsx","webpack:///./components/PromQueryEditorByApp.tsx","webpack:///./configuration/AzureCredentials.ts","webpack:///./configuration/AzureCredentialsConfig.ts","webpack:///./configuration/AzureCredentialsForm.tsx","webpack:///./configuration/AzureAuthSettings.tsx","webpack:///./configuration/HelpfulLinks.tsx","webpack:///./configuration/PromSettings.tsx","webpack:///./configuration/LimitsSettings.tsx","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack:///../node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack:///../node_modules/rxjs/dist/esm5/internal/config.js","webpack:///../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack:///../node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack:///../node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/filter.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","webpack:///../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/Observable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack:///../node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","webpack:///../node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/catchError.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isPromise.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isIterable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","webpack:///./components/Annotations/AnnotationQueryEditor.tsx","webpack:///./legend.ts","webpack:///./migrations/variableMigration.ts","webpack:///./metric_find_query.ts","webpack:///./query_hints.ts","webpack:///./result_transformer.ts","webpack:///./types/events.ts","webpack:///./utils/timePicker.ts","webpack:///./services/app_events.ts","webpack:///./services/context_srv.ts","webpack:///./services/TimeSrv.ts","webpack:///./utils/getRefreshFromUrl.ts","webpack:///./utils/safeStringifyValue.ts","webpack:///./querybuilder/parsingUtils.ts","webpack:///./querybuilder/components/LabelFilterItem.tsx","webpack:///./querybuilder/components/LabelFilters.tsx","webpack:///./querybuilder/components/MetricsLabelsSection.tsx","webpack:///./components/VariableQueryEditor.tsx","webpack:///./variables.ts","webpack:///./datasource.tsx","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/tap.js","webpack:///./module.ts","webpack:///./configuration/ConfigEditor.tsx"],"sourcesContent":["var inProgress = {};\n// data-webpack is not used as build has no uniqueName\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar runtime = require('@grafana/runtime');\nvar rxjs = require('rxjs');\nvar data = require('@grafana/data');\nvar tslib = require('tslib');\nvar React = require('react');\nvar ui = require('@grafana/ui');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\n\nfunction hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nfunction operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n\nfunction createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n\nvar UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n\nfunction arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = tslib.__values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = tslib.__values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = tslib.__spreadArray(tslib.__spreadArray([], tslib.__read(errors)), tslib.__read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nSubscription.EMPTY;\nfunction isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n\nvar config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n\nvar timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        return setTimeout.apply(void 0, tslib.__spreadArray([handler, timeout], tslib.__read(args)));\n    },\n    clearTimeout: function (handle) {\n        return (clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n\nfunction reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        {\n            throw err;\n        }\n    });\n}\n\nfunction noop() { }\n\nvar Subscriber = (function (_super) {\n    tslib.__extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) ;\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) ;\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) ;\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    tslib.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nfunction handleUnhandledError(error) {\n    {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nvar EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n\nfunction createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    tslib.__extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\n\nfunction map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defProps$1 = Object.defineProperties;\nvar __getOwnPropDescs$1 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$1 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$1 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$1 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$1 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$1.call(b, prop))\n      __defNormalProp$1(a, prop, b[prop]);\n  if (__getOwnPropSymbols$1)\n    for (var prop of __getOwnPropSymbols$1(b)) {\n      if (__propIsEnum$1.call(b, prop))\n        __defNormalProp$1(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$1 = (a, b) => __defProps$1(a, __getOwnPropDescs$1(b));\nfunction getRequestLooper(req, options) {\n  return new rxjs.Observable((subscriber) => {\n    let nextQuery = void 0;\n    let subscription = void 0;\n    let loadingState = data.LoadingState.Loading;\n    let nextRequestDelay = 1;\n    let count = 1;\n    let shouldCancel = false;\n    const observer = {\n      next: (rsp) => {\n        loadingState = rsp.state;\n        let checkstate = false;\n        if (loadingState !== data.LoadingState.Error) {\n          nextQuery = options.getNextQuery(rsp);\n          const _shouldCancel = options.shouldCancel();\n          if (nextQuery && _shouldCancel) {\n            shouldCancel = _shouldCancel;\n            nextQuery = void 0;\n          }\n          checkstate = true;\n        }\n        const data$1 = options.process(rsp.data);\n        if (checkstate) {\n          if (nextQuery) {\n            if (data$1.length && data$1[0].length) {\n              loadingState = data.LoadingState.Streaming;\n            } else {\n              loadingState = data.LoadingState.Loading;\n            }\n            nextRequestDelay = nextRequestDelay * 2 > 10 ? 10 : nextRequestDelay * 2;\n          } else {\n            loadingState = data.LoadingState.Done;\n            nextRequestDelay = 0;\n          }\n        }\n        subscriber.next(__spreadProps$1(__spreadValues$1({}, rsp), { data: data$1, state: loadingState, key: req.requestId }));\n      },\n      error: (err) => {\n        subscriber.error(err);\n      },\n      complete: () => {\n        if (subscription) {\n          subscription.unsubscribe();\n          subscription = void 0;\n        }\n        if (nextQuery) {\n          const next = nextQuery;\n          setTimeout(() => {\n            subscription = options.query(__spreadProps$1(__spreadValues$1({}, req), { requestId: `${req.requestId}.${++count}`, targets: [next] })).subscribe(observer);\n            nextQuery = void 0;\n          }, nextRequestDelay * 1e3);\n        } else {\n          subscriber.complete();\n        }\n      }\n    };\n    subscription = options.query(req).subscribe(observer);\n    return function unsubscribe() {\n      observer.complete();\n      if (nextQuery || shouldCancel) {\n        options.onCancel();\n      }\n      nextQuery = void 0;\n    };\n  });\n}\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst RUNNING_STATUSES = [\"started\", \"submitted\", \"running\"];\nconst isRunning = (status = \"\") => RUNNING_STATUSES.includes(status);\nconst isCustomMeta = (meta) => {\n  return !!(typeof meta === \"object\" && (meta == null ? void 0 : meta.hasOwnProperty(\"queryID\")) && (meta == null ? void 0 : meta.hasOwnProperty(\"status\")));\n};\nclass DatasourceWithAsyncBackend extends runtime.DataSourceWithBackend {\n  constructor(instanceSettings, asyncQueryDataSupport = false) {\n    super(instanceSettings);\n    this.runningQueries = {};\n    this.requestCounter = 100;\n    // cancel sets shouldCancel to tell requestLooper to cancel the query\n    this.cancel = (target) => {\n      this.storeQuery(target, { shouldCancel: true });\n    };\n    this.asyncQueryDataSupport = asyncQueryDataSupport;\n  }\n  query(request) {\n    if (this.asyncQueryDataSupport) {\n      const targets = this.filterQuery ? request.targets.filter(this.filterQuery) : request.targets;\n      if (!targets.length) {\n        return rxjs.of({ data: [] });\n      }\n      const all = [];\n      for (let target of targets) {\n        if (target.hide) {\n          continue;\n        }\n        all.push(this.doSingle(target, request));\n      }\n      return rxjs.merge(...all);\n    } else {\n      return super.query(request);\n    }\n  }\n  storeQuery(target, queryInfo) {\n    const key = JSON.stringify(target);\n    const existingQueryInfo = this.runningQueries[key] || {};\n    this.runningQueries[key] = __spreadValues(__spreadValues({}, existingQueryInfo), queryInfo);\n  }\n  getQuery(target) {\n    const key = JSON.stringify(target);\n    return this.runningQueries[key] || {};\n  }\n  removeQuery(target) {\n    const key = JSON.stringify(target);\n    delete this.runningQueries[key];\n  }\n  doSingle(target, request) {\n    let queryID = void 0;\n    let status = void 0;\n    let allData = [];\n    return getRequestLooper(\n      __spreadProps(__spreadValues({}, request), { targets: [target], requestId: `aws_ts_${this.requestCounter++}` }),\n      {\n        /**\n         * Additional query to execute if the current query is still in a running state\n         */\n        getNextQuery: (rsp) => {\n          var _a, _b;\n          if ((_a = rsp.data) == null ? void 0 : _a.length) {\n            const first = rsp.data[0];\n            const meta = (_b = first.meta) == null ? void 0 : _b.custom;\n            if (isCustomMeta(meta) && isRunning(meta.status)) {\n              queryID = meta.queryID;\n              status = meta.status;\n              this.storeQuery(target, { queryID });\n              return __spreadProps(__spreadValues({}, target), { queryID });\n            }\n          }\n          this.removeQuery(target);\n          return void 0;\n        },\n        /**\n         * The original request\n         */\n        query: (request2) => {\n          const { range, targets, requestId, intervalMs, maxDataPoints } = request2;\n          const [_query] = targets;\n          const query = __spreadValues(__spreadValues({}, _query), this.asyncQueryDataSupport ? { meta: { queryFlow: \"async\" } } : {});\n          const data = {\n            queries: [\n              __spreadValues(__spreadProps(__spreadValues({}, query), {\n                intervalMs,\n                maxDataPoints,\n                // getRef optionally chained to support < v8.3.x of Grafana\n                datasource: this == null ? void 0 : this.getRef(),\n                datasourceId: this.id\n              }), this.applyTemplateVariables(query, request2.scopedVars))\n            ],\n            range,\n            from: range.from.valueOf().toString(),\n            to: range.to.valueOf().toString()\n          };\n          let headers = {};\n          if (isRunning(status)) {\n            headers = { \"X-Cache-Skip\": true };\n          }\n          const options = {\n            method: \"POST\",\n            url: \"/api/ds/query\",\n            data,\n            requestId,\n            headers\n          };\n          return runtime.getBackendSrv().fetch(options).pipe(map((result) => ({ data: runtime.toDataQueryResponse(result).data })));\n        },\n        /**\n         * Process the results\n         */\n        process: (data) => {\n          for (const frame of data) {\n            if (frame.fields.length > 0) {\n              allData.push(frame);\n            }\n          }\n          return allData;\n        },\n        shouldCancel: () => {\n          const { shouldCancel } = this.getQuery(target);\n          return !!shouldCancel;\n        },\n        /**\n         * Callback that gets executed when unsubscribed\n         */\n        onCancel: () => {\n          if (queryID) {\n            this.removeQuery(target);\n            this.postResource(\"cancel\", {\n              queryId: queryID\n            }).catch((err) => {\n              err.isHandled = true;\n              console.error(`error cancelling query ID: ${queryID}`, err);\n            });\n          }\n        }\n      }\n    );\n  }\n}\n\nconst RunQueryButtons = (props) => {\n  const { state } = props;\n  const [running, setRunning] = React.useState(false);\n  const [stopping, setStopping] = React.useState(false);\n  const [lastState, setLastState] = React.useState(state);\n  const [lastQuery, setLastQuery] = React.useState(props.query);\n  React.useEffect(() => {\n    if (state && lastState !== state && state !== data.LoadingState.Loading) {\n      setRunning(false);\n      setStopping(false);\n    }\n    setLastState(state);\n  }, [state, lastState]);\n  const onRunQuery = () => {\n    setRunning(true);\n    setLastQuery(props.query);\n    props.onRunQuery();\n  };\n  const onCancelQuery = props.onCancelQuery ? () => {\n    var _a;\n    (_a = props.onCancelQuery) == null ? void 0 : _a.call(props, lastQuery);\n    setStopping(true);\n  } : void 0;\n  return /* @__PURE__ */ React__default[\"default\"].createElement(React__default[\"default\"].Fragment, null, /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.Button,\n    {\n      variant: props.enableRun ? \"primary\" : \"secondary\",\n      size: \"sm\",\n      onClick: onRunQuery,\n      icon: running && !stopping ? \"fa fa-spinner\" : void 0,\n      disabled: state === data.LoadingState.Loading || !props.enableRun\n    },\n    \"Run query\"\n  ), onCancelQuery && /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.Button,\n    {\n      variant: running && !stopping ? \"primary\" : \"secondary\",\n      size: \"sm\",\n      disabled: !running || stopping,\n      icon: stopping ? \"fa fa-spinner\" : void 0,\n      onClick: onCancelQuery\n    },\n    \"Stop query\"\n  ));\n};\n\nexports.DatasourceWithAsyncBackend = DatasourceWithAsyncBackend;\nexports.RunQueryButtons = RunQueryButtons;\n//# sourceMappingURL=index.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar ui = require('@grafana/ui');\nvar data = require('@grafana/data');\nvar runtime = require('@grafana/runtime');\nvar lodash = require('lodash');\nvar experimental = require('@grafana/experimental');\nvar asyncQueryData = require('@grafana/async-query-data');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nconst standardRegions = [\n  \"af-south-1\",\n  \"ap-east-1\",\n  \"ap-northeast-1\",\n  \"ap-northeast-2\",\n  \"ap-northeast-3\",\n  \"ap-south-1\",\n  \"ap-southeast-1\",\n  \"ap-southeast-2\",\n  \"ca-central-1\",\n  \"cn-north-1\",\n  \"cn-northwest-1\",\n  \"eu-central-1\",\n  \"eu-north-1\",\n  \"eu-west-1\",\n  \"eu-west-2\",\n  \"eu-west-3\",\n  \"me-south-1\",\n  \"sa-east-1\",\n  \"us-east-1\",\n  \"us-east-2\",\n  \"us-gov-east-1\",\n  \"us-gov-west-1\",\n  \"us-iso-east-1\",\n  \"us-isob-east-1\",\n  \"us-west-1\",\n  \"us-west-2\"\n];\n\nvar AwsAuthType = /* @__PURE__ */ ((AwsAuthType2) => {\n  AwsAuthType2[\"Keys\"] = \"keys\";\n  AwsAuthType2[\"Credentials\"] = \"credentials\";\n  AwsAuthType2[\"Default\"] = \"default\";\n  AwsAuthType2[\"EC2IAMRole\"] = \"ec2_iam_role\";\n  AwsAuthType2[\"ARN\"] = \"arn\";\n  AwsAuthType2[\"GrafanaAssumeRole\"] = \"grafana_assume_role\";\n  return AwsAuthType2;\n})(AwsAuthType || {});\n\nconst awsAuthProviderOptions = [\n  {\n    label: \"Workspace IAM Role\",\n    value: AwsAuthType.EC2IAMRole\n  },\n  {\n    label: \"Grafana Assume Role\",\n    value: AwsAuthType.GrafanaAssumeRole\n  },\n  {\n    label: \"AWS SDK Default\",\n    value: AwsAuthType.Default\n  },\n  {\n    label: \"Access & secret key\",\n    value: AwsAuthType.Keys\n  },\n  {\n    label: \"Credentials file\",\n    value: AwsAuthType.Credentials\n  }\n];\n\n/*\n\nBased off glamor's StyleSheet, thanks Sunil ❤️\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  tag.setAttribute('data-s', '');\n  return tag;\n}\n\nvar StyleSheet = /*#__PURE__*/function () {\n  // Using Node instead of HTMLElement since container may be a ShadowRoot\n  function StyleSheet(options) {\n    var _this = this;\n\n    this._insertTag = function (tag) {\n      var before;\n\n      if (_this.tags.length === 0) {\n        if (_this.insertionPoint) {\n          before = _this.insertionPoint.nextSibling;\n        } else if (_this.prepend) {\n          before = _this.container.firstChild;\n        } else {\n          before = _this.before;\n        }\n      } else {\n        before = _this.tags[_this.tags.length - 1].nextSibling;\n      }\n\n      _this.container.insertBefore(tag, before);\n\n      _this.tags.push(tag);\n    };\n\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.prepend = options.prepend;\n    this.insertionPoint = options.insertionPoint;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.hydrate = function hydrate(nodes) {\n    nodes.forEach(this._insertTag);\n  };\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      this._insertTag(createStyleElement(this));\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (process.env.NODE_ENV !== 'production') {\n      var isImportRule = rule.charCodeAt(0) === 64 && rule.charCodeAt(1) === 105;\n\n      if (isImportRule && this._alreadyInsertedOrderInsensitiveRule) {\n        // this would only cause problem in speedy mode\n        // but we don't want enabling speedy to affect the observable behavior\n        // so we report this error at all times\n        console.error(\"You're attempting to insert the following rule:\\n\" + rule + '\\n\\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules.');\n      }\n      this._alreadyInsertedOrderInsensitiveRule = this._alreadyInsertedOrderInsensitiveRule || !isImportRule;\n    }\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production' && !/:(-moz-placeholder|-moz-focus-inner|-moz-focusring|-ms-input-placeholder|-moz-read-write|-moz-read-only|-ms-clear|-ms-expand|-ms-reveal){/.test(rule)) {\n          console.error(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode && tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._alreadyInsertedOrderInsensitiveRule = false;\n    }\n  };\n\n  return StyleSheet;\n}();\n\nvar MS = '-ms-';\nvar MOZ = '-moz-';\nvar WEBKIT = '-webkit-';\n\nvar COMMENT = 'comm';\nvar RULESET = 'rule';\nvar DECLARATION = 'decl';\nvar IMPORT = '@import';\nvar KEYFRAMES = '@keyframes';\n\n/**\n * @param {number}\n * @return {number}\n */\nvar abs = Math.abs;\n\n/**\n * @param {number}\n * @return {string}\n */\nvar from = String.fromCharCode;\n\n/**\n * @param {object}\n * @return {object}\n */\nvar assign = Object.assign;\n\n/**\n * @param {string} value\n * @param {number} length\n * @return {number}\n */\nfunction hash (value, length) {\n\treturn charat(value, 0) ^ 45 ? (((((((length << 2) ^ charat(value, 0)) << 2) ^ charat(value, 1)) << 2) ^ charat(value, 2)) << 2) ^ charat(value, 3) : 0\n}\n\n/**\n * @param {string} value\n * @return {string}\n */\nfunction trim (value) {\n\treturn value.trim()\n}\n\n/**\n * @param {string} value\n * @param {RegExp} pattern\n * @return {string?}\n */\nfunction match (value, pattern) {\n\treturn (value = pattern.exec(value)) ? value[0] : value\n}\n\n/**\n * @param {string} value\n * @param {(string|RegExp)} pattern\n * @param {string} replacement\n * @return {string}\n */\nfunction replace (value, pattern, replacement) {\n\treturn value.replace(pattern, replacement)\n}\n\n/**\n * @param {string} value\n * @param {string} search\n * @return {number}\n */\nfunction indexof (value, search) {\n\treturn value.indexOf(search)\n}\n\n/**\n * @param {string} value\n * @param {number} index\n * @return {number}\n */\nfunction charat (value, index) {\n\treturn value.charCodeAt(index) | 0\n}\n\n/**\n * @param {string} value\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nfunction substr (value, begin, end) {\n\treturn value.slice(begin, end)\n}\n\n/**\n * @param {string} value\n * @return {number}\n */\nfunction strlen (value) {\n\treturn value.length\n}\n\n/**\n * @param {any[]} value\n * @return {number}\n */\nfunction sizeof (value) {\n\treturn value.length\n}\n\n/**\n * @param {any} value\n * @param {any[]} array\n * @return {any}\n */\nfunction append (value, array) {\n\treturn array.push(value), value\n}\n\n/**\n * @param {string[]} array\n * @param {function} callback\n * @return {string}\n */\nfunction combine (array, callback) {\n\treturn array.map(callback).join('')\n}\n\nvar line = 1;\nvar column = 1;\nvar length = 0;\nvar position = 0;\nvar character = 0;\nvar characters = '';\n\n/**\n * @param {string} value\n * @param {object | null} root\n * @param {object | null} parent\n * @param {string} type\n * @param {string[] | string} props\n * @param {object[] | string} children\n * @param {number} length\n */\nfunction node (value, root, parent, type, props, children, length) {\n\treturn {value: value, root: root, parent: parent, type: type, props: props, children: children, line: line, column: column, length: length, return: ''}\n}\n\n/**\n * @param {object} root\n * @param {object} props\n * @return {object}\n */\nfunction copy (root, props) {\n\treturn assign(node('', null, null, '', null, null, 0), root, {length: -root.length}, props)\n}\n\n/**\n * @return {number}\n */\nfunction char () {\n\treturn character\n}\n\n/**\n * @return {number}\n */\nfunction prev () {\n\tcharacter = position > 0 ? charat(characters, --position) : 0;\n\n\tif (column--, character === 10)\n\t\tcolumn = 1, line--;\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nfunction next () {\n\tcharacter = position < length ? charat(characters, position++) : 0;\n\n\tif (column++, character === 10)\n\t\tcolumn = 1, line++;\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nfunction peek () {\n\treturn charat(characters, position)\n}\n\n/**\n * @return {number}\n */\nfunction caret () {\n\treturn position\n}\n\n/**\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nfunction slice (begin, end) {\n\treturn substr(characters, begin, end)\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nfunction token (type) {\n\tswitch (type) {\n\t\t// \\0 \\t \\n \\r \\s whitespace token\n\t\tcase 0: case 9: case 10: case 13: case 32:\n\t\t\treturn 5\n\t\t// ! + , / > @ ~ isolate token\n\t\tcase 33: case 43: case 44: case 47: case 62: case 64: case 126:\n\t\t// ; { } breakpoint token\n\t\tcase 59: case 123: case 125:\n\t\t\treturn 4\n\t\t// : accompanied token\n\t\tcase 58:\n\t\t\treturn 3\n\t\t// \" ' ( [ opening delimit token\n\t\tcase 34: case 39: case 40: case 91:\n\t\t\treturn 2\n\t\t// ) ] closing delimit token\n\t\tcase 41: case 93:\n\t\t\treturn 1\n\t}\n\n\treturn 0\n}\n\n/**\n * @param {string} value\n * @return {any[]}\n */\nfunction alloc (value) {\n\treturn line = column = 1, length = strlen(characters = value), position = 0, []\n}\n\n/**\n * @param {any} value\n * @return {any}\n */\nfunction dealloc (value) {\n\treturn characters = '', value\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nfunction delimit (type) {\n\treturn trim(slice(position - 1, delimiter(type === 91 ? type + 2 : type === 40 ? type + 1 : type)))\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nfunction whitespace (type) {\n\twhile (character = peek())\n\t\tif (character < 33)\n\t\t\tnext();\n\t\telse\n\t\t\tbreak\n\n\treturn token(type) > 2 || token(character) > 3 ? '' : ' '\n}\n\n/**\n * @param {number} index\n * @param {number} count\n * @return {string}\n */\nfunction escaping (index, count) {\n\twhile (--count && next())\n\t\t// not 0-9 A-F a-f\n\t\tif (character < 48 || character > 102 || (character > 57 && character < 65) || (character > 70 && character < 97))\n\t\t\tbreak\n\n\treturn slice(index, caret() + (count < 6 && peek() == 32 && next() == 32))\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nfunction delimiter (type) {\n\twhile (next())\n\t\tswitch (character) {\n\t\t\t// ] ) \" '\n\t\t\tcase type:\n\t\t\t\treturn position\n\t\t\t// \" '\n\t\t\tcase 34: case 39:\n\t\t\t\tif (type !== 34 && type !== 39)\n\t\t\t\t\tdelimiter(character);\n\t\t\t\tbreak\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (type === 41)\n\t\t\t\t\tdelimiter(type);\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tnext();\n\t\t\t\tbreak\n\t\t}\n\n\treturn position\n}\n\n/**\n * @param {number} type\n * @param {number} index\n * @return {number}\n */\nfunction commenter (type, index) {\n\twhile (next())\n\t\t// //\n\t\tif (type + character === 47 + 10)\n\t\t\tbreak\n\t\t// /*\n\t\telse if (type + character === 42 + 42 && peek() === 47)\n\t\t\tbreak\n\n\treturn '/*' + slice(index, position - 1) + '*' + from(type === 47 ? type : next())\n}\n\n/**\n * @param {number} index\n * @return {string}\n */\nfunction identifier (index) {\n\twhile (!token(peek()))\n\t\tnext();\n\n\treturn slice(index, position)\n}\n\n/**\n * @param {string} value\n * @return {object[]}\n */\nfunction compile (value) {\n\treturn dealloc(parse('', null, null, null, [''], value = alloc(value), 0, [0], value))\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {string[]} rule\n * @param {string[]} rules\n * @param {string[]} rulesets\n * @param {number[]} pseudo\n * @param {number[]} points\n * @param {string[]} declarations\n * @return {object}\n */\nfunction parse (value, root, parent, rule, rules, rulesets, pseudo, points, declarations) {\n\tvar index = 0;\n\tvar offset = 0;\n\tvar length = pseudo;\n\tvar atrule = 0;\n\tvar property = 0;\n\tvar previous = 0;\n\tvar variable = 1;\n\tvar scanning = 1;\n\tvar ampersand = 1;\n\tvar character = 0;\n\tvar type = '';\n\tvar props = rules;\n\tvar children = rulesets;\n\tvar reference = rule;\n\tvar characters = type;\n\n\twhile (scanning)\n\t\tswitch (previous = character, character = next()) {\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (previous != 108 && charat(characters, length - 1) == 58) {\n\t\t\t\t\tif (indexof(characters += replace(delimit(character), '&', '&\\f'), '&\\f') != -1)\n\t\t\t\t\t\tampersand = -1;\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t// \" ' [\n\t\t\tcase 34: case 39: case 91:\n\t\t\t\tcharacters += delimit(character);\n\t\t\t\tbreak\n\t\t\t// \\t \\n \\r \\s\n\t\t\tcase 9: case 10: case 13: case 32:\n\t\t\t\tcharacters += whitespace(previous);\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tcharacters += escaping(caret() - 1, 7);\n\t\t\t\tcontinue\n\t\t\t// /\n\t\t\tcase 47:\n\t\t\t\tswitch (peek()) {\n\t\t\t\t\tcase 42: case 47:\n\t\t\t\t\t\tappend(comment(commenter(next(), caret()), root, parent), declarations);\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcharacters += '/';\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t// {\n\t\t\tcase 123 * variable:\n\t\t\t\tpoints[index++] = strlen(characters) * ampersand;\n\t\t\t// } ; \\0\n\t\t\tcase 125 * variable: case 59: case 0:\n\t\t\t\tswitch (character) {\n\t\t\t\t\t// \\0 }\n\t\t\t\t\tcase 0: case 125: scanning = 0;\n\t\t\t\t\t// ;\n\t\t\t\t\tcase 59 + offset:\n\t\t\t\t\t\tif (property > 0 && (strlen(characters) - length))\n\t\t\t\t\t\t\tappend(property > 32 ? declaration(characters + ';', rule, parent, length - 1) : declaration(replace(characters, ' ', '') + ';', rule, parent, length - 2), declarations);\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @ ;\n\t\t\t\t\tcase 59: characters += ';';\n\t\t\t\t\t// { rule/at-rule\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tappend(reference = ruleset(characters, root, parent, index, offset, rules, points, type, props = [], children = [], length), rulesets);\n\n\t\t\t\t\t\tif (character === 123)\n\t\t\t\t\t\t\tif (offset === 0)\n\t\t\t\t\t\t\t\tparse(characters, root, reference, reference, props, rulesets, length, points, children);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tswitch (atrule === 99 && charat(characters, 3) === 110 ? 100 : atrule) {\n\t\t\t\t\t\t\t\t\t// d m s\n\t\t\t\t\t\t\t\t\tcase 100: case 109: case 115:\n\t\t\t\t\t\t\t\t\t\tparse(value, reference, reference, rule && append(ruleset(value, reference, reference, 0, 0, rules, points, type, rules, props = [], length), children), rules, children, length, points, rule ? props : children);\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tparse(characters, reference, reference, reference, [''], children, 0, points, children);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tindex = offset = property = 0, variable = ampersand = 1, type = characters = '', length = pseudo;\n\t\t\t\tbreak\n\t\t\t// :\n\t\t\tcase 58:\n\t\t\t\tlength = 1 + strlen(characters), property = previous;\n\t\t\tdefault:\n\t\t\t\tif (variable < 1)\n\t\t\t\t\tif (character == 123)\n\t\t\t\t\t\t--variable;\n\t\t\t\t\telse if (character == 125 && variable++ == 0 && prev() == 125)\n\t\t\t\t\t\tcontinue\n\n\t\t\t\tswitch (characters += from(character), character * variable) {\n\t\t\t\t\t// &\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\tampersand = offset > 0 ? 1 : (characters += '\\f', -1);\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// ,\n\t\t\t\t\tcase 44:\n\t\t\t\t\t\tpoints[index++] = (strlen(characters) - 1) * ampersand, ampersand = 1;\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @\n\t\t\t\t\tcase 64:\n\t\t\t\t\t\t// -\n\t\t\t\t\t\tif (peek() === 45)\n\t\t\t\t\t\t\tcharacters += delimit(next());\n\n\t\t\t\t\t\tatrule = peek(), offset = length = strlen(type = characters += identifier(caret())), character++;\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// -\n\t\t\t\t\tcase 45:\n\t\t\t\t\t\tif (previous === 45 && strlen(characters) == 2)\n\t\t\t\t\t\t\tvariable = 0;\n\t\t\t\t}\n\t\t}\n\n\treturn rulesets\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} index\n * @param {number} offset\n * @param {string[]} rules\n * @param {number[]} points\n * @param {string} type\n * @param {string[]} props\n * @param {string[]} children\n * @param {number} length\n * @return {object}\n */\nfunction ruleset (value, root, parent, index, offset, rules, points, type, props, children, length) {\n\tvar post = offset - 1;\n\tvar rule = offset === 0 ? rules : [''];\n\tvar size = sizeof(rule);\n\n\tfor (var i = 0, j = 0, k = 0; i < index; ++i)\n\t\tfor (var x = 0, y = substr(value, post + 1, post = abs(j = points[i])), z = value; x < size; ++x)\n\t\t\tif (z = trim(j > 0 ? rule[x] + ' ' + y : replace(y, /&\\f/g, rule[x])))\n\t\t\t\tprops[k++] = z;\n\n\treturn node(value, root, parent, offset === 0 ? RULESET : type, props, children, length)\n}\n\n/**\n * @param {number} value\n * @param {object} root\n * @param {object?} parent\n * @return {object}\n */\nfunction comment (value, root, parent) {\n\treturn node(value, root, parent, COMMENT, from(char()), substr(value, 2, -2), 0)\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} length\n * @return {object}\n */\nfunction declaration (value, root, parent, length) {\n\treturn node(value, root, parent, DECLARATION, substr(value, 0, length), substr(value, length + 1, -1), length)\n}\n\n/**\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nfunction serialize (children, callback) {\n\tvar output = '';\n\tvar length = sizeof(children);\n\n\tfor (var i = 0; i < length; i++)\n\t\toutput += callback(children[i], i, children, callback) || '';\n\n\treturn output\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nfunction stringify (element, index, children, callback) {\n\tswitch (element.type) {\n\t\tcase IMPORT: case DECLARATION: return element.return = element.return || element.value\n\t\tcase COMMENT: return ''\n\t\tcase KEYFRAMES: return element.return = element.value + '{' + serialize(element.children, callback) + '}'\n\t\tcase RULESET: element.value = element.props.join(',');\n\t}\n\n\treturn strlen(children = serialize(element.children, callback)) ? element.return = element.value + '{' + children + '}' : ''\n}\n\n/**\n * @param {function[]} collection\n * @return {function}\n */\nfunction middleware (collection) {\n\tvar length = sizeof(collection);\n\n\treturn function (element, index, children, callback) {\n\t\tvar output = '';\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\toutput += collection[i](element, index, children, callback) || '';\n\n\t\treturn output\n\t}\n}\n\n/**\n * @param {function} callback\n * @return {function}\n */\nfunction rulesheet (callback) {\n\treturn function (element) {\n\t\tif (!element.root)\n\t\t\tif (element = element.return)\n\t\t\t\tcallback(element);\n\t}\n}\n\nvar weakMemoize = function weakMemoize(func) {\n  // $FlowFixMe flow doesn't include all non-primitive types as allowed for weakmaps\n  var cache = new WeakMap();\n  return function (arg) {\n    if (cache.has(arg)) {\n      // $FlowFixMe\n      return cache.get(arg);\n    }\n\n    var ret = func(arg);\n    cache.set(arg, ret);\n    return ret;\n  };\n};\n\nfunction memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nvar identifierWithPointTracking = function identifierWithPointTracking(begin, points, index) {\n  var previous = 0;\n  var character = 0;\n\n  while (true) {\n    previous = character;\n    character = peek(); // &\\f\n\n    if (previous === 38 && character === 12) {\n      points[index] = 1;\n    }\n\n    if (token(character)) {\n      break;\n    }\n\n    next();\n  }\n\n  return slice(begin, position);\n};\n\nvar toRules = function toRules(parsed, points) {\n  // pretend we've started with a comma\n  var index = -1;\n  var character = 44;\n\n  do {\n    switch (token(character)) {\n      case 0:\n        // &\\f\n        if (character === 38 && peek() === 12) {\n          // this is not 100% correct, we don't account for literal sequences here - like for example quoted strings\n          // stylis inserts \\f after & to know when & where it should replace this sequence with the context selector\n          // and when it should just concatenate the outer and inner selectors\n          // it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here\n          points[index] = 1;\n        }\n\n        parsed[index] += identifierWithPointTracking(position - 1, points, index);\n        break;\n\n      case 2:\n        parsed[index] += delimit(character);\n        break;\n\n      case 4:\n        // comma\n        if (character === 44) {\n          // colon\n          parsed[++index] = peek() === 58 ? '&\\f' : '';\n          points[index] = parsed[index].length;\n          break;\n        }\n\n      // fallthrough\n\n      default:\n        parsed[index] += from(character);\n    }\n  } while (character = next());\n\n  return parsed;\n};\n\nvar getRules = function getRules(value, points) {\n  return dealloc(toRules(alloc(value), points));\n}; // WeakSet would be more appropriate, but only WeakMap is supported in IE11\n\n\nvar fixedElements = /* #__PURE__ */new WeakMap();\nvar compat = function compat(element) {\n  if (element.type !== 'rule' || !element.parent || // positive .length indicates that this rule contains pseudo\n  // negative .length indicates that this rule has been already prefixed\n  element.length < 1) {\n    return;\n  }\n\n  var value = element.value,\n      parent = element.parent;\n  var isImplicitRule = element.column === parent.column && element.line === parent.line;\n\n  while (parent.type !== 'rule') {\n    parent = parent.parent;\n    if (!parent) return;\n  } // short-circuit for the simplest case\n\n\n  if (element.props.length === 1 && value.charCodeAt(0) !== 58\n  /* colon */\n  && !fixedElements.get(parent)) {\n    return;\n  } // if this is an implicitly inserted rule (the one eagerly inserted at the each new nested level)\n  // then the props has already been manipulated beforehand as they that array is shared between it and its \"rule parent\"\n\n\n  if (isImplicitRule) {\n    return;\n  }\n\n  fixedElements.set(element, true);\n  var points = [];\n  var rules = getRules(value, points);\n  var parentRules = parent.props;\n\n  for (var i = 0, k = 0; i < rules.length; i++) {\n    for (var j = 0; j < parentRules.length; j++, k++) {\n      element.props[k] = points[i] ? rules[i].replace(/&\\f/g, parentRules[j]) : parentRules[j] + \" \" + rules[i];\n    }\n  }\n};\nvar removeLabel = function removeLabel(element) {\n  if (element.type === 'decl') {\n    var value = element.value;\n\n    if ( // charcode for l\n    value.charCodeAt(0) === 108 && // charcode for b\n    value.charCodeAt(2) === 98) {\n      // this ignores label\n      element[\"return\"] = '';\n      element.value = '';\n    }\n  }\n};\nvar ignoreFlag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n\nvar isIgnoringComment = function isIgnoringComment(element) {\n  return element.type === 'comm' && element.children.indexOf(ignoreFlag) > -1;\n};\n\nvar createUnsafeSelectorsAlarm = function createUnsafeSelectorsAlarm(cache) {\n  return function (element, index, children) {\n    if (element.type !== 'rule' || cache.compat) return;\n    var unsafePseudoClasses = element.value.match(/(:first|:nth|:nth-last)-child/g);\n\n    if (unsafePseudoClasses) {\n      var isNested = element.parent === children[0]; // in nested rules comments become children of the \"auto-inserted\" rule\n      //\n      // considering this input:\n      // .a {\n      //   .b /* comm */ {}\n      //   color: hotpink;\n      // }\n      // we get output corresponding to this:\n      // .a {\n      //   & {\n      //     /* comm */\n      //     color: hotpink;\n      //   }\n      //   .b {}\n      // }\n\n      var commentContainer = isNested ? children[0].children : // global rule at the root level\n      children;\n\n      for (var i = commentContainer.length - 1; i >= 0; i--) {\n        var node = commentContainer[i];\n\n        if (node.line < element.line) {\n          break;\n        } // it is quite weird but comments are *usually* put at `column: element.column - 1`\n        // so we seek *from the end* for the node that is earlier than the rule's `element` and check that\n        // this will also match inputs like this:\n        // .a {\n        //   /* comm */\n        //   .b {}\n        // }\n        //\n        // but that is fine\n        //\n        // it would be the easiest to change the placement of the comment to be the first child of the rule:\n        // .a {\n        //   .b { /* comm */ }\n        // }\n        // with such inputs we wouldn't have to search for the comment at all\n        // TODO: consider changing this comment placement in the next major version\n\n\n        if (node.column < element.column) {\n          if (isIgnoringComment(node)) {\n            return;\n          }\n\n          break;\n        }\n      }\n\n      unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n        console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n      });\n    }\n  };\n};\n\nvar isImportRule = function isImportRule(element) {\n  return element.type.charCodeAt(1) === 105 && element.type.charCodeAt(0) === 64;\n};\n\nvar isPrependedWithRegularRules = function isPrependedWithRegularRules(index, children) {\n  for (var i = index - 1; i >= 0; i--) {\n    if (!isImportRule(children[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}; // use this to remove incorrect elements from further processing\n// so they don't get handed to the `sheet` (or anything else)\n// as that could potentially lead to additional logs which in turn could be overhelming to the user\n\n\nvar nullifyElement = function nullifyElement(element) {\n  element.type = '';\n  element.value = '';\n  element[\"return\"] = '';\n  element.children = '';\n  element.props = '';\n};\n\nvar incorrectImportAlarm = function incorrectImportAlarm(element, index, children) {\n  if (!isImportRule(element)) {\n    return;\n  }\n\n  if (element.parent) {\n    console.error(\"`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles.\");\n    nullifyElement(element);\n  } else if (isPrependedWithRegularRules(index, children)) {\n    console.error(\"`@import` rules can't be after other rules. Please put your `@import` rules before your other rules.\");\n    nullifyElement(element);\n  }\n};\n\n/* eslint-disable no-fallthrough */\n\nfunction prefix(value, length) {\n  switch (hash(value, length)) {\n    // color-adjust\n    case 5103:\n      return WEBKIT + 'print-' + value + value;\n    // animation, animation-(delay|direction|duration|fill-mode|iteration-count|name|play-state|timing-function)\n\n    case 5737:\n    case 4201:\n    case 3177:\n    case 3433:\n    case 1641:\n    case 4457:\n    case 2921: // text-decoration, filter, clip-path, backface-visibility, column, box-decoration-break\n\n    case 5572:\n    case 6356:\n    case 5844:\n    case 3191:\n    case 6645:\n    case 3005: // mask, mask-image, mask-(mode|clip|size), mask-(repeat|origin), mask-position, mask-composite,\n\n    case 6391:\n    case 5879:\n    case 5623:\n    case 6135:\n    case 4599:\n    case 4855: // background-clip, columns, column-(count|fill|gap|rule|rule-color|rule-style|rule-width|span|width)\n\n    case 4215:\n    case 6389:\n    case 5109:\n    case 5365:\n    case 5621:\n    case 3829:\n      return WEBKIT + value + value;\n    // appearance, user-select, transform, hyphens, text-size-adjust\n\n    case 5349:\n    case 4246:\n    case 4810:\n    case 6968:\n    case 2756:\n      return WEBKIT + value + MOZ + value + MS + value + value;\n    // flex, flex-direction\n\n    case 6828:\n    case 4268:\n      return WEBKIT + value + MS + value + value;\n    // order\n\n    case 6165:\n      return WEBKIT + value + MS + 'flex-' + value + value;\n    // align-items\n\n    case 5187:\n      return WEBKIT + value + replace(value, /(\\w+).+(:[^]+)/, WEBKIT + 'box-$1$2' + MS + 'flex-$1$2') + value;\n    // align-self\n\n    case 5443:\n      return WEBKIT + value + MS + 'flex-item-' + replace(value, /flex-|-self/, '') + value;\n    // align-content\n\n    case 4675:\n      return WEBKIT + value + MS + 'flex-line-pack' + replace(value, /align-content|flex-|-self/, '') + value;\n    // flex-shrink\n\n    case 5548:\n      return WEBKIT + value + MS + replace(value, 'shrink', 'negative') + value;\n    // flex-basis\n\n    case 5292:\n      return WEBKIT + value + MS + replace(value, 'basis', 'preferred-size') + value;\n    // flex-grow\n\n    case 6060:\n      return WEBKIT + 'box-' + replace(value, '-grow', '') + WEBKIT + value + MS + replace(value, 'grow', 'positive') + value;\n    // transition\n\n    case 4554:\n      return WEBKIT + replace(value, /([^-])(transform)/g, '$1' + WEBKIT + '$2') + value;\n    // cursor\n\n    case 6187:\n      return replace(replace(replace(value, /(zoom-|grab)/, WEBKIT + '$1'), /(image-set)/, WEBKIT + '$1'), value, '') + value;\n    // background, background-image\n\n    case 5495:\n    case 3959:\n      return replace(value, /(image-set\\([^]*)/, WEBKIT + '$1' + '$`$1');\n    // justify-content\n\n    case 4968:\n      return replace(replace(value, /(.+:)(flex-)?(.*)/, WEBKIT + 'box-pack:$3' + MS + 'flex-pack:$3'), /s.+-b[^;]+/, 'justify') + WEBKIT + value + value;\n    // (margin|padding)-inline-(start|end)\n\n    case 4095:\n    case 3583:\n    case 4068:\n    case 2532:\n      return replace(value, /(.+)-inline(.+)/, WEBKIT + '$1$2') + value;\n    // (min|max)?(width|height|inline-size|block-size)\n\n    case 8116:\n    case 7059:\n    case 5753:\n    case 5535:\n    case 5445:\n    case 5701:\n    case 4933:\n    case 4677:\n    case 5533:\n    case 5789:\n    case 5021:\n    case 4765:\n      // stretch, max-content, min-content, fill-available\n      if (strlen(value) - 1 - length > 6) switch (charat(value, length + 1)) {\n        // (m)ax-content, (m)in-content\n        case 109:\n          // -\n          if (charat(value, length + 4) !== 45) break;\n        // (f)ill-available, (f)it-content\n\n        case 102:\n          return replace(value, /(.+:)(.+)-([^]+)/, '$1' + WEBKIT + '$2-$3' + '$1' + MOZ + (charat(value, length + 3) == 108 ? '$3' : '$2-$3')) + value;\n        // (s)tretch\n\n        case 115:\n          return ~indexof(value, 'stretch') ? prefix(replace(value, 'stretch', 'fill-available'), length) + value : value;\n      }\n      break;\n    // position: sticky\n\n    case 4949:\n      // (s)ticky?\n      if (charat(value, length + 1) !== 115) break;\n    // display: (flex|inline-flex)\n\n    case 6444:\n      switch (charat(value, strlen(value) - 3 - (~indexof(value, '!important') && 10))) {\n        // stic(k)y\n        case 107:\n          return replace(value, ':', ':' + WEBKIT) + value;\n        // (inline-)?fl(e)x\n\n        case 101:\n          return replace(value, /(.+:)([^;!]+)(;|!.+)?/, '$1' + WEBKIT + (charat(value, 14) === 45 ? 'inline-' : '') + 'box$3' + '$1' + WEBKIT + '$2$3' + '$1' + MS + '$2box$3') + value;\n      }\n\n      break;\n    // writing-mode\n\n    case 5936:\n      switch (charat(value, length + 11)) {\n        // vertical-l(r)\n        case 114:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb') + value;\n        // vertical-r(l)\n\n        case 108:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb-rl') + value;\n        // horizontal(-)tb\n\n        case 45:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'lr') + value;\n      }\n\n      return WEBKIT + value + MS + value + value;\n  }\n\n  return value;\n}\n\nvar prefixer = function prefixer(element, index, children, callback) {\n  if (element.length > -1) if (!element[\"return\"]) switch (element.type) {\n    case DECLARATION:\n      element[\"return\"] = prefix(element.value, element.length);\n      break;\n\n    case KEYFRAMES:\n      return serialize([copy(element, {\n        value: replace(element.value, '@', '@' + WEBKIT)\n      })], callback);\n\n    case RULESET:\n      if (element.length) return combine(element.props, function (value) {\n        switch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n          // :read-(only|write)\n          case ':read-only':\n          case ':read-write':\n            return serialize([copy(element, {\n              props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]\n            })], callback);\n          // :placeholder\n\n          case '::placeholder':\n            return serialize([copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]\n            })], callback);\n        }\n\n        return '';\n      });\n  }\n};\n\nvar isBrowser$1 = typeof document !== 'undefined';\nvar getServerStylisCache = isBrowser$1 ? undefined : weakMemoize(function () {\n  return memoize(function () {\n    var cache = {};\n    return function (name) {\n      return cache[name];\n    };\n  });\n});\nvar defaultStylisPlugins = [prefixer];\n\nvar createCache = function createCache(options) {\n  var key = options.key;\n\n  if (process.env.NODE_ENV !== 'production' && !key) {\n    throw new Error(\"You have to configure `key` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.\\n\" + \"If multiple caches share the same key they might \\\"fight\\\" for each other's style elements.\");\n  }\n\n  if (isBrowser$1 && key === 'css') {\n    var ssrStyles = document.querySelectorAll(\"style[data-emotion]:not([data-s])\"); // get SSRed styles out of the way of React's hydration\n    // document.head is a safe place to move them to(though note document.head is not necessarily the last place they will be)\n    // note this very very intentionally targets all style elements regardless of the key to ensure\n    // that creating a cache works inside of render of a React component\n\n    Array.prototype.forEach.call(ssrStyles, function (node) {\n      // we want to only move elements which have a space in the data-emotion attribute value\n      // because that indicates that it is an Emotion 11 server-side rendered style elements\n      // while we will already ignore Emotion 11 client-side inserted styles because of the :not([data-s]) part in the selector\n      // Emotion 10 client-side inserted styles did not have data-s (but importantly did not have a space in their data-emotion attributes)\n      // so checking for the space ensures that loading Emotion 11 after Emotion 10 has inserted some styles\n      // will not result in the Emotion 10 styles being destroyed\n      var dataEmotionAttribute = node.getAttribute('data-emotion');\n\n      if (dataEmotionAttribute.indexOf(' ') === -1) {\n        return;\n      }\n      document.head.appendChild(node);\n      node.setAttribute('data-s', '');\n    });\n  }\n\n  var stylisPlugins = options.stylisPlugins || defaultStylisPlugins;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {};\n  var container;\n  var nodesToHydrate = [];\n\n  if (isBrowser$1) {\n    container = options.container || document.head;\n    Array.prototype.forEach.call( // this means we will ignore elements which don't have a space in them which\n    // means that the style elements we're looking at are only Emotion 11 server-rendered style elements\n    document.querySelectorAll(\"style[data-emotion^=\\\"\" + key + \" \\\"]\"), function (node) {\n      var attrib = node.getAttribute(\"data-emotion\").split(' '); // $FlowFixMe\n\n      for (var i = 1; i < attrib.length; i++) {\n        inserted[attrib[i]] = true;\n      }\n\n      nodesToHydrate.push(node);\n    });\n  }\n\n  var _insert;\n\n  var omnipresentPlugins = [compat, removeLabel];\n\n  if (process.env.NODE_ENV !== 'production') {\n    omnipresentPlugins.push(createUnsafeSelectorsAlarm({\n      get compat() {\n        return cache.compat;\n      }\n\n    }), incorrectImportAlarm);\n  }\n\n  if (isBrowser$1) {\n    var currentSheet;\n    var finalizingPlugins = [stringify, process.env.NODE_ENV !== 'production' ? function (element) {\n      if (!element.root) {\n        if (element[\"return\"]) {\n          currentSheet.insert(element[\"return\"]);\n        } else if (element.value && element.type !== COMMENT) {\n          // insert empty rule in non-production environments\n          // so @emotion/jest can grab `key` from the (JS)DOM for caches without any rules inserted yet\n          currentSheet.insert(element.value + \"{}\");\n        }\n      }\n    } : rulesheet(function (rule) {\n      currentSheet.insert(rule);\n    })];\n    var serializer = middleware(omnipresentPlugins.concat(stylisPlugins, finalizingPlugins));\n\n    var stylis = function stylis(styles) {\n      return serialize(compile(styles), serializer);\n    };\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      currentSheet = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        currentSheet = {\n          insert: function insert(rule) {\n            sheet.insert(rule + serialized.map);\n          }\n        };\n      }\n\n      stylis(selector ? selector + \"{\" + serialized.styles + \"}\" : serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[serialized.name] = true;\n      }\n    };\n  } else {\n    var _finalizingPlugins = [stringify];\n\n    var _serializer = middleware(omnipresentPlugins.concat(stylisPlugins, _finalizingPlugins));\n\n    var _stylis = function _stylis(styles) {\n      return serialize(compile(styles), _serializer);\n    }; // $FlowFixMe\n\n\n    var serverStylisCache = getServerStylisCache(stylisPlugins)(key);\n\n    var getRules = function getRules(selector, serialized) {\n      var name = serialized.name;\n\n      if (serverStylisCache[name] === undefined) {\n        serverStylisCache[name] = _stylis(selector ? selector + \"{\" + serialized.styles + \"}\" : serialized.styles);\n      }\n\n      return serverStylisCache[name];\n    };\n\n    _insert = function _insert(selector, serialized, sheet, shouldCache) {\n      var name = serialized.name;\n      var rules = getRules(selector, serialized);\n\n      if (cache.compat === undefined) {\n        // in regular mode, we don't set the styles on the inserted cache\n        // since we don't need to and that would be wasting memory\n        // we return them so that they are rendered in a style tag\n        if (shouldCache) {\n          cache.inserted[name] = true;\n        }\n\n        if ( // using === development instead of !== production\n        // because if people do ssr in tests, the source maps showing up would be annoying\n        process.env.NODE_ENV === 'development' && serialized.map !== undefined) {\n          return rules + serialized.map;\n        }\n\n        return rules;\n      } else {\n        // in compat mode, we put the styles on the inserted cache so\n        // that emotion-server can pull out the styles\n        // except when we don't want to cache it which was in Global but now\n        // is nowhere but we don't want to do a major right now\n        // and just in case we're going to leave the case here\n        // it's also not affecting client side bundle size\n        // so it's really not a big deal\n        if (shouldCache) {\n          cache.inserted[name] = rules;\n        } else {\n          return rules;\n        }\n      }\n    };\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy,\n      prepend: options.prepend,\n      insertionPoint: options.insertionPoint\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  cache.sheet.hydrate(nodesToHydrate);\n  return cache;\n};\n\n/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nvar unitlessKeys = {\n  animationIterationCount: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = /* #__PURE__ */memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitlessKeys[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(var|attr|counters?|url|element|(((repeating-)?(linear|radial))|conic)-gradient)\\(|(no-)?(open|close)-quote/;\n  var contentValues = ['normal', 'none', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        throw new Error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar noComponentSelectorMessage = 'Component selectors can only be used in conjunction with ' + '@emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware ' + 'compiler transform.';\n\nfunction handleInterpolation(mergedProps, registered, interpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error(noComponentSelectorMessage);\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n  return cached !== undefined ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i]) + \";\";\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error(noComponentSelectorMessage);\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*(;|$)/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//g;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i]);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = murmur2(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nvar isBrowser = typeof document !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className] + \";\");\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar registerStyles = function registerStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false && cache.compat !== undefined) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n};\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  registerStyles(cache, serialized, isStringTag);\n  var className = cache.key + \"-\" + serialized.name;\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var stylesForSSR = '';\n    var current = serialized;\n\n    do {\n      var maybeStyles = cache.insert(serialized === current ? \".\" + className : '', current, cache.sheet, true);\n\n      if (!isBrowser && maybeStyles !== undefined) {\n        stylesForSSR += maybeStyles;\n      }\n\n      current = current.next;\n    } while (current !== undefined);\n\n    if (!isBrowser && stylesForSSR.length !== 0) {\n      return stylesForSSR;\n    }\n  }\n};\n\nfunction insertWithoutScoping(cache, serialized) {\n  if (cache.inserted[serialized.name] === undefined) {\n    return cache.insert('', serialized, cache.sheet, true);\n  }\n}\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar createEmotion = function createEmotion(options) {\n  var cache = createCache(options); // $FlowFixMe\n\n  cache.sheet.speedy = function (value) {\n    if (process.env.NODE_ENV !== 'production' && this.ctr !== 0) {\n      throw new Error('speedy must be changed before any rules are inserted');\n    }\n\n    this.isSpeedy = value;\n  };\n\n  cache.compat = true;\n\n  var css = function css() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serialized = serializeStyles(args, cache.registered, undefined);\n    insertStyles(cache, serialized, false);\n    return cache.key + \"-\" + serialized.name;\n  };\n\n  var keyframes = function keyframes() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    var animation = \"animation-\" + serialized.name;\n    insertWithoutScoping(cache, {\n      name: serialized.name,\n      styles: \"@keyframes \" + animation + \"{\" + serialized.styles + \"}\"\n    });\n    return animation;\n  };\n\n  var injectGlobal = function injectGlobal() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    insertWithoutScoping(cache, serialized);\n  };\n\n  var cx = function cx() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return merge(cache.registered, css, classnames(args));\n  };\n\n  return {\n    css: css,\n    cx: cx,\n    injectGlobal: injectGlobal,\n    keyframes: keyframes,\n    hydrate: function hydrate(ids) {\n      ids.forEach(function (key) {\n        cache.inserted[key] = true;\n      });\n    },\n    flush: function flush() {\n      cache.registered = {};\n      cache.inserted = {};\n      cache.sheet.flush();\n    },\n    // $FlowFixMe\n    sheet: cache.sheet,\n    cache: cache,\n    getRegisteredStyles: getRegisteredStyles.bind(null, cache.registered),\n    merge: merge.bind(null, cache.registered, css)\n  };\n};\n\nvar classnames = function classnames(args) {\n  var cls = '';\n\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nvar _createEmotion = createEmotion({\n  key: 'css'\n}),\n    css = _createEmotion.css;\n\nvar __defProp$7 = Object.defineProperty;\nvar __defProps$6 = Object.defineProperties;\nvar __getOwnPropDescs$6 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$7 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$7 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$7 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$7 = (obj, key, value) => key in obj ? __defProp$7(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$7 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$7.call(b, prop))\n      __defNormalProp$7(a, prop, b[prop]);\n  if (__getOwnPropSymbols$7)\n    for (var prop of __getOwnPropSymbols$7(b)) {\n      if (__propIsEnum$7.call(b, prop))\n        __defNormalProp$7(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$6 = (a, b) => __defProps$6(a, __getOwnPropDescs$6(b));\nconst DEFAULT_LABEL_WIDTH = 28;\nconst DS_TYPES_THAT_SUPPORT_TEMP_CREDS = [\"cloudwatch\"];\nconst toOption = (value) => ({ value, label: value });\nconst isAwsAuthType = (value) => {\n  return typeof value === \"string\" && awsAuthProviderOptions.some((opt) => opt.value === value);\n};\nconst ConnectionConfig = (props) => {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  const [isARNInstructionsOpen, setIsARNInstructionsOpen] = React.useState(false);\n  const [regions, setRegions] = React.useState((props.standardRegions || standardRegions).map(toOption));\n  const { loadRegions, onOptionsChange, skipHeader = false, skipEndpoint = false } = props;\n  const { labelWidth = DEFAULT_LABEL_WIDTH, options, inExperimentalAuthComponent } = props;\n  let profile = options.jsonData.profile;\n  if (profile === void 0) {\n    profile = options.database;\n  }\n  const tempCredsFeatureEnabled = runtime.config.featureToggles.awsDatasourcesTempCredentials && DS_TYPES_THAT_SUPPORT_TEMP_CREDS.includes(options.type);\n  const awsAssumeRoleEnabled = (_a = runtime.config.awsAssumeRoleEnabled) != null ? _a : true;\n  const awsAllowedAuthProviders = React.useMemo(\n    () => runtime.config.awsAllowedAuthProviders.filter((provider) => provider === AwsAuthType.GrafanaAssumeRole ? tempCredsFeatureEnabled : true).filter(isAwsAuthType),\n    [tempCredsFeatureEnabled]\n  );\n  const currentProvider = awsAuthProviderOptions.find((p) => p.value === options.jsonData.authType);\n  React.useEffect(() => {\n    if (!currentProvider && awsAllowedAuthProviders.length) {\n      onOptionsChange(__spreadProps$6(__spreadValues$7({}, options), {\n        jsonData: __spreadProps$6(__spreadValues$7({}, options.jsonData), {\n          authType: awsAllowedAuthProviders[0]\n        })\n      }));\n    }\n  }, [currentProvider, options, onOptionsChange, awsAllowedAuthProviders]);\n  React.useEffect(() => {\n    if (!loadRegions) {\n      return;\n    }\n    loadRegions().then((regions2) => setRegions(regions2.map(toOption)));\n  }, [loadRegions]);\n  const inputWidth = inExperimentalAuthComponent ? \"width-20\" : \"width-30\";\n  const styles = ui.useStyles2(getStyles);\n  return /* @__PURE__ */ React__default[\"default\"].createElement(ui.FieldSet, { label: skipHeader ? \"\" : \"Connection Details\", \"data-testid\": \"connection-config\" }, /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.InlineField,\n    {\n      label: \"Authentication Provider\",\n      labelWidth,\n      tooltip: \"Specify which AWS credentials chain to use.\"\n    },\n    /* @__PURE__ */ React__default[\"default\"].createElement(\n      ui.Select,\n      {\n        \"aria-label\": \"Authentication Provider\",\n        className: inputWidth,\n        value: currentProvider,\n        options: awsAuthProviderOptions.filter((opt) => awsAllowedAuthProviders.includes(opt.value)),\n        defaultValue: options.jsonData.authType,\n        onChange: (option) => {\n          data.onUpdateDatasourceJsonDataOptionSelect(props, \"authType\")(option);\n        },\n        menuShouldPortal: true\n      }\n    )\n  ), options.jsonData.authType === \"credentials\" && /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.InlineField,\n    {\n      label: \"Credentials Profile Name\",\n      labelWidth,\n      tooltip: \"Credentials profile name, as specified in ~/.aws/credentials, leave blank for default.\"\n    },\n    /* @__PURE__ */ React__default[\"default\"].createElement(\n      ui.Input,\n      {\n        \"aria-label\": \"Credentials Profile Name\",\n        className: inputWidth,\n        placeholder: \"default\",\n        value: profile,\n        onChange: data.onUpdateDatasourceJsonDataOption(props, \"profile\")\n      }\n    )\n  ), options.jsonData.authType === \"keys\" && /* @__PURE__ */ React__default[\"default\"].createElement(React__default[\"default\"].Fragment, null, /* @__PURE__ */ React__default[\"default\"].createElement(ui.InlineField, { label: \"Access Key ID\", labelWidth }, ((_b = props.options.secureJsonFields) == null ? void 0 : _b.accessKey) ? /* @__PURE__ */ React__default[\"default\"].createElement(ui.ButtonGroup, { className: inputWidth }, /* @__PURE__ */ React__default[\"default\"].createElement(ui.Input, { disabled: true, placeholder: \"Configured\" }), /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.ToolbarButton,\n    {\n      icon: \"edit\",\n      tooltip: \"Edit Access Key ID\",\n      type: \"button\",\n      onClick: data.onUpdateDatasourceResetOption(props, \"accessKey\")\n    }\n  )) : /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.Input,\n    {\n      \"aria-label\": \"Access Key ID\",\n      className: inputWidth,\n      value: (_d = (_c = options.secureJsonData) == null ? void 0 : _c.accessKey) != null ? _d : \"\",\n      onChange: data.onUpdateDatasourceSecureJsonDataOption(props, \"accessKey\")\n    }\n  )), /* @__PURE__ */ React__default[\"default\"].createElement(ui.InlineField, { label: \"Secret Access Key\", labelWidth }, ((_e = props.options.secureJsonFields) == null ? void 0 : _e.secretKey) ? /* @__PURE__ */ React__default[\"default\"].createElement(ui.ButtonGroup, { className: inputWidth }, /* @__PURE__ */ React__default[\"default\"].createElement(ui.Input, { disabled: true, placeholder: \"Configured\" }), /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.ToolbarButton,\n    {\n      icon: \"edit\",\n      type: \"button\",\n      tooltip: \"Edit Secret Access Key\",\n      onClick: data.onUpdateDatasourceResetOption(props, \"secretKey\")\n    }\n  )) : /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.Input,\n    {\n      \"aria-label\": \"Secret Access Key\",\n      className: inputWidth,\n      value: (_g = (_f = options.secureJsonData) == null ? void 0 : _f.secretKey) != null ? _g : \"\",\n      onChange: data.onUpdateDatasourceSecureJsonDataOption(props, \"secretKey\")\n    }\n  ))), options.jsonData.authType === AwsAuthType.GrafanaAssumeRole && /* @__PURE__ */ React__default[\"default\"].createElement(\"div\", { className: styles.assumeRoleInstructions }, /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.Collapse,\n    {\n      label: \"How to create an IAM role for grafana to assume:\",\n      collapsible: true,\n      isOpen: isARNInstructionsOpen,\n      onToggle: () => setIsARNInstructionsOpen(!isARNInstructionsOpen)\n    },\n    /* @__PURE__ */ React__default[\"default\"].createElement(\"ol\", null, /* @__PURE__ */ React__default[\"default\"].createElement(\"li\", null, /* @__PURE__ */ React__default[\"default\"].createElement(\"p\", null, \"1. Create a new IAM role in the AWS console, and select \", /* @__PURE__ */ React__default[\"default\"].createElement(\"code\", null, \"Another AWS account\"), \" as the\", \" \", /* @__PURE__ */ React__default[\"default\"].createElement(\"code\", null, \"Trusted entity\"), \".\")), /* @__PURE__ */ React__default[\"default\"].createElement(\"li\", null, /* @__PURE__ */ React__default[\"default\"].createElement(\"p\", null, \"2. Enter the account ID of the Grafana account that has permission to assume this role:\", /* @__PURE__ */ React__default[\"default\"].createElement(\"code\", null, \" 008923505280 \"), \" and check the \", /* @__PURE__ */ React__default[\"default\"].createElement(\"code\", null, \"Require external ID\"), \" box.\")), /* @__PURE__ */ React__default[\"default\"].createElement(\"li\", null, /* @__PURE__ */ React__default[\"default\"].createElement(\"p\", null, \"3. Enter the following external ID:\", \" \", /* @__PURE__ */ React__default[\"default\"].createElement(\"code\", null, props.externalId || \"External Id is currently unavailable\"), \" and click \", /* @__PURE__ */ React__default[\"default\"].createElement(\"code\", null, \"Next\"), \".\")), /* @__PURE__ */ React__default[\"default\"].createElement(\"li\", null, /* @__PURE__ */ React__default[\"default\"].createElement(\"p\", null, \"4. Add any required permissions you would like Grafana to be able to access on your behalf. For more details on our permissions please\", \" \", /* @__PURE__ */ React__default[\"default\"].createElement(\n      \"a\",\n      {\n        href: \"https://grafana.com/docs/grafana/latest/datasources/aws-cloudwatch/\",\n        target: \"_blank\",\n        rel: \"noreferrer\"\n      },\n      \"read through our documentation\"\n    ), \".\")), /* @__PURE__ */ React__default[\"default\"].createElement(\"li\", null, /* @__PURE__ */ React__default[\"default\"].createElement(\"p\", null, \"5. Give the role a name and description, and click \", /* @__PURE__ */ React__default[\"default\"].createElement(\"code\", null, \"Create role\"), \".\")), /* @__PURE__ */ React__default[\"default\"].createElement(\"li\", null, /* @__PURE__ */ React__default[\"default\"].createElement(\"p\", null, \"6. Copy the ARN of the role you just created and paste it into the \", /* @__PURE__ */ React__default[\"default\"].createElement(\"code\", null, \"Assume Role ARN\"), \" field below.\")))\n  )), awsAssumeRoleEnabled && /* @__PURE__ */ React__default[\"default\"].createElement(React__default[\"default\"].Fragment, null, /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.InlineField,\n    {\n      label: \"Assume Role ARN\",\n      labelWidth,\n      tooltip: \"Optionally, specify the ARN of a role to assume. Specifying a role here will ensure that the selected authentication provider is used to assume the specified role rather than using the credentials directly. Leave blank if you don't need to assume a role at all\"\n    },\n    /* @__PURE__ */ React__default[\"default\"].createElement(\n      ui.Input,\n      {\n        \"aria-label\": \"Assume Role ARN\",\n        className: inputWidth,\n        placeholder: \"arn:aws:iam:*\",\n        value: options.jsonData.assumeRoleArn || \"\",\n        onChange: data.onUpdateDatasourceJsonDataOption(props, \"assumeRoleArn\")\n      }\n    )\n  ), options.jsonData.authType !== AwsAuthType.GrafanaAssumeRole && /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.InlineField,\n    {\n      label: \"External ID\",\n      labelWidth,\n      tooltip: \"If you are assuming a role in another account, that has been created with an external ID, specify the external ID here.\"\n    },\n    /* @__PURE__ */ React__default[\"default\"].createElement(\n      ui.Input,\n      {\n        \"aria-label\": \"External ID\",\n        className: inputWidth,\n        placeholder: \"External ID\",\n        value: options.jsonData.externalId || \"\",\n        onChange: data.onUpdateDatasourceJsonDataOption(props, \"externalId\")\n      }\n    )\n  )), !skipEndpoint && options.jsonData.authType !== AwsAuthType.GrafanaAssumeRole && /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.InlineField,\n    {\n      label: \"Endpoint\",\n      labelWidth,\n      tooltip: \"Optionally, specify a custom endpoint for the service\"\n    },\n    /* @__PURE__ */ React__default[\"default\"].createElement(\n      ui.Input,\n      {\n        \"aria-label\": \"Endpoint\",\n        className: inputWidth,\n        placeholder: (_h = props.defaultEndpoint) != null ? _h : \"https://{service}.{region}.amazonaws.com\",\n        value: options.jsonData.endpoint || \"\",\n        onChange: data.onUpdateDatasourceJsonDataOption(props, \"endpoint\")\n      }\n    )\n  ), /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.InlineField,\n    {\n      label: \"Default Region\",\n      labelWidth,\n      tooltip: \"Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region.\"\n    },\n    /* @__PURE__ */ React__default[\"default\"].createElement(\n      ui.Select,\n      {\n        \"aria-label\": \"Default Region\",\n        className: inputWidth,\n        value: regions.find((region) => region.value === options.jsonData.defaultRegion),\n        options: regions,\n        defaultValue: options.jsonData.defaultRegion,\n        allowCustomValue: true,\n        onChange: data.onUpdateDatasourceJsonDataOptionSelect(props, \"defaultRegion\"),\n        formatCreateLabel: (r) => `Use region: ${r}`,\n        menuShouldPortal: true\n      }\n    )\n  ), props.children);\n};\nfunction getStyles() {\n  return {\n    assumeRoleInstructions: css({\n      maxWidth: \"715px\"\n    })\n  };\n}\n\nvar __defProp$6 = Object.defineProperty;\nvar __defProps$5 = Object.defineProperties;\nvar __getOwnPropDescs$5 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$6 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$6 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$6 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$6 = (obj, key, value) => key in obj ? __defProp$6(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$6 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$6.call(b, prop))\n      __defNormalProp$6(a, prop, b[prop]);\n  if (__getOwnPropSymbols$6)\n    for (var prop of __getOwnPropSymbols$6(b)) {\n      if (__propIsEnum$6.call(b, prop))\n        __defNormalProp$6(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$5 = (a, b) => __defProps$5(a, __getOwnPropDescs$5(b));\nconst SIGV4ConnectionConfig = (props) => {\n  var _a, _b, _c, _d;\n  const { onOptionsChange, options } = props;\n  const connectionConfigProps = {\n    onOptionsChange: (awsDataSourceSettings) => {\n      var _a2, _b2, _c2, _d2;\n      const dataSourceSettings = __spreadProps$5(__spreadValues$6({}, options), {\n        jsonData: __spreadProps$5(__spreadValues$6({}, options.jsonData), {\n          sigV4AuthType: awsDataSourceSettings.jsonData.authType,\n          sigV4Profile: awsDataSourceSettings.jsonData.profile,\n          sigV4AssumeRoleArn: awsDataSourceSettings.jsonData.assumeRoleArn,\n          sigV4ExternalId: awsDataSourceSettings.jsonData.externalId,\n          sigV4Region: awsDataSourceSettings.jsonData.defaultRegion,\n          sigV4Endpoint: awsDataSourceSettings.jsonData.endpoint\n        }),\n        secureJsonFields: {\n          sigV4AccessKey: (_a2 = awsDataSourceSettings.secureJsonFields) == null ? void 0 : _a2.accessKey,\n          sigV4SecretKey: (_b2 = awsDataSourceSettings.secureJsonFields) == null ? void 0 : _b2.secretKey\n        },\n        secureJsonData: {\n          sigV4AccessKey: (_c2 = awsDataSourceSettings.secureJsonData) == null ? void 0 : _c2.accessKey,\n          sigV4SecretKey: (_d2 = awsDataSourceSettings.secureJsonData) == null ? void 0 : _d2.secretKey\n        }\n      });\n      onOptionsChange(dataSourceSettings);\n    },\n    options: __spreadProps$5(__spreadValues$6({}, options), {\n      jsonData: __spreadProps$5(__spreadValues$6({}, options.jsonData), {\n        authType: options.jsonData.sigV4AuthType,\n        profile: options.jsonData.sigV4Profile,\n        assumeRoleArn: options.jsonData.sigV4AssumeRoleArn,\n        externalId: options.jsonData.sigV4ExternalId,\n        defaultRegion: options.jsonData.sigV4Region,\n        endpoint: options.jsonData.sigV4Endpoint\n      }),\n      secureJsonFields: {\n        accessKey: (_a = options.secureJsonFields) == null ? void 0 : _a.sigV4AccessKey,\n        secretKey: (_b = options.secureJsonFields) == null ? void 0 : _b.sigV4SecretKey\n      },\n      secureJsonData: {\n        accessKey: (_c = options.secureJsonData) == null ? void 0 : _c.sigV4AccessKey,\n        secretKey: (_d = options.secureJsonData) == null ? void 0 : _d.sigV4SecretKey\n      }\n    }),\n    inExperimentalAuthComponent: props.inExperimentalAuthComponent\n  };\n  return /* @__PURE__ */ React__default[\"default\"].createElement(React__default[\"default\"].Fragment, null, /* @__PURE__ */ React__default[\"default\"].createElement(\"div\", { className: \"gf-form\" }, /* @__PURE__ */ React__default[\"default\"].createElement(\"h6\", null, \"SigV4 Auth Details\")), /* @__PURE__ */ React__default[\"default\"].createElement(ConnectionConfig, __spreadProps$5(__spreadValues$6({}, connectionConfigProps), { skipHeader: true, skipEndpoint: true })));\n};\n\nconst defaultKey = \"__default\";\n\nvar __defProp$5 = Object.defineProperty;\nvar __defProps$4 = Object.defineProperties;\nvar __getOwnPropDescs$4 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$5 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$5 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$5 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$5 = (obj, key, value) => key in obj ? __defProp$5(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$5 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$5.call(b, prop))\n      __defNormalProp$5(a, prop, b[prop]);\n  if (__getOwnPropSymbols$5)\n    for (var prop of __getOwnPropSymbols$5(b)) {\n      if (__propIsEnum$5.call(b, prop))\n        __defNormalProp$5(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$4 = (a, b) => __defProps$4(a, __getOwnPropDescs$4(b));\nfunction ResourceSelector(props) {\n  const propsDependencies = props.dependencies;\n  const propsOnChange = props.onChange;\n  const dependencies = React.useRef(props.dependencies);\n  const fetched = React.useRef(false);\n  const resource = React.useRef(props.value || props.default || null);\n  const [resources, setResources] = React.useState(\n    resource.current ? [resource.current] : []\n  );\n  const [isLoading, setIsLoading] = React.useState(false);\n  const defaultOpts = React.useMemo(() => {\n    const opts = [\n      {\n        label: `default (${props.default})`,\n        value: defaultKey,\n        description: `Default value set in the data source`\n      }\n    ];\n    if (props.value && props.value !== defaultKey) {\n      opts.push({ label: props.value, value: props.value });\n    }\n    return opts;\n  }, [props.default, props.value]);\n  const [options, setOptions] = React.useState(props.default ? defaultOpts : []);\n  React.useEffect(() => {\n    if (props.resources !== void 0) {\n      setResources(props.resources);\n    }\n  }, [props.resources]);\n  React.useEffect(() => {\n    const newOptions = props.default ? defaultOpts : [];\n    if (resources.length) {\n      resources.forEach((r) => {\n        const value = typeof r === \"string\" ? r : r.value;\n        if (!newOptions.find((o) => o.value === value)) {\n          typeof r === \"string\" ? newOptions.push({ label: r, value: r }) : newOptions.push(r);\n        }\n      });\n      setOptions(newOptions);\n    } else {\n      setOptions([]);\n    }\n  }, [resources, defaultOpts, props.default]);\n  React.useEffect(() => {\n    if (!lodash.isEqual(propsDependencies, dependencies.current)) {\n      fetched.current = false;\n      resource.current = null;\n      dependencies.current = propsDependencies;\n      propsOnChange(null);\n    }\n  }, [propsDependencies, propsOnChange]);\n  const fetch = async () => {\n    var _a;\n    if (fetched.current) {\n      return;\n    }\n    if (props.saveOptions) {\n      await props.saveOptions();\n    }\n    try {\n      const resources2 = await ((_a = props.fetch) == null ? void 0 : _a.call(props)) || [];\n      setResources(resources2);\n    } finally {\n      fetched.current = true;\n    }\n  };\n  const onChange = (e) => {\n    propsOnChange(e);\n    if (e.value) {\n      resource.current = e.value;\n    }\n  };\n  const onClick = async () => {\n    setIsLoading(true);\n    try {\n      await fetch();\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /* @__PURE__ */ React__default[\"default\"].createElement(ui.InlineField, { label: props.label, labelWidth: props.labelWidth, tooltip: props.tooltip, hidden: props.hidden }, /* @__PURE__ */ React__default[\"default\"].createElement(\"div\", { \"data-testid\": props[\"data-testid\"], title: props.title }, /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.Select,\n    __spreadProps$4(__spreadValues$5({}, props), {\n      \"aria-label\": props.label,\n      options,\n      onChange,\n      isLoading,\n      className: props.className || \"min-width-6\",\n      onOpenMenu: () => props.fetch && onClick(),\n      menuShouldPortal: true\n    })\n  )));\n}\n\nvar __defProp$4 = Object.defineProperty;\nvar __getOwnPropSymbols$4 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$4 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$4 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$4 = (obj, key, value) => key in obj ? __defProp$4(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$4 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$4.call(b, prop))\n      __defNormalProp$4(a, prop, b[prop]);\n  if (__getOwnPropSymbols$4)\n    for (var prop of __getOwnPropSymbols$4(b)) {\n      if (__propIsEnum$4.call(b, prop))\n        __defNormalProp$4(a, prop, b[prop]);\n    }\n  return a;\n};\nfunction ConfigSelect(props) {\n  var _a, _b, _c;\n  const { jsonData } = props.options;\n  const commonProps = {\n    title: jsonData.defaultRegion ? \"\" : \"select a default region\",\n    labelWidth: (_a = props.labelWidth) != null ? _a : DEFAULT_LABEL_WIDTH,\n    className: \"width-30\"\n  };\n  const dependencies = [\n    props.options.jsonData.assumeRoleArn,\n    props.options.jsonData.authType,\n    props.options.jsonData.defaultRegion,\n    props.options.jsonData.endpoint,\n    props.options.jsonData.externalId,\n    props.options.jsonData.profile,\n    (_b = props.options.secureJsonData) == null ? void 0 : _b.accessKey,\n    (_c = props.options.secureJsonData) == null ? void 0 : _c.secretKey\n  ].concat(props.dependencies);\n  return /* @__PURE__ */ React__default[\"default\"].createElement(\n    ResourceSelector,\n    __spreadValues$4({\n      label: props.label,\n      \"data-testid\": props[\"data-testid\"],\n      onChange: props.onChange,\n      fetch: props.fetch,\n      value: props.value,\n      saveOptions: props.saveOptions,\n      dependencies,\n      hidden: props.hidden,\n      disabled: props.disabled || !jsonData.defaultRegion,\n      allowCustomValue: props.allowCustomValue,\n      autoFocus: props.autoFocus,\n      backspaceRemovesValue: props.backspaceRemovesValue,\n      invalid: props.invalid,\n      isClearable: props.isClearable,\n      isMulti: props.isMulti,\n      inputId: props.inputId,\n      showAllSelectedWhenOpen: props.showAllSelectedWhenOpen,\n      maxMenuHeight: props.maxMenuHeight,\n      minMenuHeight: props.minMenuHeight,\n      maxVisibleValues: props.maxVisibleValues,\n      menuPlacement: props.menuPlacement,\n      menuPosition: props.menuPosition,\n      noOptionsMessage: props.noOptionsMessage,\n      onBlur: props.onBlur,\n      onCreateOption: props.onCreateOption,\n      onInputChange: props.onInputChange,\n      placeholder: props.placeholder,\n      width: props.width,\n      isOptionDisabled: props.isOptionDisabled\n    }, commonProps)\n  );\n}\n\nfunction InlineInput(props) {\n  var _a;\n  return /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.InlineField,\n    {\n      label: props.label,\n      labelWidth: (_a = props.labelWidth) != null ? _a : DEFAULT_LABEL_WIDTH,\n      tooltip: props.tooltip,\n      hidden: props.hidden,\n      disabled: props.disabled\n    },\n    /* @__PURE__ */ React__default[\"default\"].createElement(\n      ui.Input,\n      {\n        \"data-testid\": props[\"data-testid\"],\n        className: \"width-30\",\n        value: props.value,\n        onChange: props.onChange,\n        placeholder: props.placeholder,\n        disabled: props.disabled\n      }\n    )\n  );\n}\n\nvar __defProp$3 = Object.defineProperty;\nvar __defProps$3 = Object.defineProperties;\nvar __getOwnPropDescs$3 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$3 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$3 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$3 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$3 = (obj, key, value) => key in obj ? __defProp$3(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$3 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$3.call(b, prop))\n      __defNormalProp$3(a, prop, b[prop]);\n  if (__getOwnPropSymbols$3)\n    for (var prop of __getOwnPropSymbols$3(b)) {\n      if (__propIsEnum$3.call(b, prop))\n        __defNormalProp$3(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$3 = (a, b) => __defProps$3(a, __getOwnPropDescs$3(b));\nfunction QueryCodeEditor(props) {\n  const { getSuggestions, query } = props;\n  const { rawSQL } = lodash.defaults(props.query, { rawSQL: \"\" });\n  const onRawSqlChange = (rawSQL2) => {\n    const query2 = __spreadProps$3(__spreadValues$3({}, props.query), {\n      rawSQL: rawSQL2\n    });\n    props.onChange(query2);\n    props.onRunQuery();\n  };\n  const suggestionsRef = React.useRef([]);\n  React.useEffect(() => {\n    suggestionsRef.current = getSuggestions(query);\n  }, [getSuggestions, query]);\n  return /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.CodeEditor,\n    __spreadValues$3({\n      language: props.language,\n      value: rawSQL,\n      onBlur: onRawSqlChange,\n      showMiniMap: false,\n      showLineNumbers: true,\n      getSuggestions: () => suggestionsRef.current,\n      height: \"240px\"\n    }, props.editorProps)\n  );\n}\n\nfunction QueryEditorHeader({\n  query,\n  showAsyncQueryButtons,\n  extraHeaderElementLeft,\n  extraHeaderElementRight,\n  enableRunButton,\n  onRunQuery,\n  data: data$1,\n  cancel\n}) {\n  return /* @__PURE__ */ React__default[\"default\"].createElement(experimental.EditorHeader, null, extraHeaderElementLeft, /* @__PURE__ */ React__default[\"default\"].createElement(experimental.FlexItem, { grow: 1 }), showAsyncQueryButtons ? /* @__PURE__ */ React__default[\"default\"].createElement(\n    asyncQueryData.RunQueryButtons,\n    {\n      onRunQuery,\n      enableRun: enableRunButton,\n      query,\n      onCancelQuery: cancel,\n      state: data$1 == null ? void 0 : data$1.state\n    }\n  ) : /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.Button,\n    {\n      variant: enableRunButton ? \"primary\" : \"secondary\",\n      size: \"sm\",\n      onClick: onRunQuery,\n      icon: (data$1 == null ? void 0 : data$1.state) === data.LoadingState.Loading ? \"fa fa-spinner\" : void 0,\n      disabled: (data$1 == null ? void 0 : data$1.state) === data.LoadingState.Loading || !enableRunButton\n    },\n    \"Run query\"\n  ), extraHeaderElementRight);\n}\n\nvar __defProp$2 = Object.defineProperty;\nvar __defProps$2 = Object.defineProperties;\nvar __getOwnPropDescs$2 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$2 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$2 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$2 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$2 = (obj, key, value) => key in obj ? __defProp$2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$2 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$2.call(b, prop))\n      __defNormalProp$2(a, prop, b[prop]);\n  if (__getOwnPropSymbols$2)\n    for (var prop of __getOwnPropSymbols$2(b)) {\n      if (__propIsEnum$2.call(b, prop))\n        __defNormalProp$2(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$2 = (a, b) => __defProps$2(a, __getOwnPropDescs$2(b));\nfunction FormatSelect(props) {\n  const onChangeFormat = (e) => {\n    var _a;\n    props.onChange(__spreadProps$2(__spreadValues$2({}, props.query), {\n      format: e.value || 0\n    }));\n    (_a = props.onRunQuery) == null ? void 0 : _a.call(props);\n  };\n  return /* @__PURE__ */ React__default[\"default\"].createElement(ui.InlineField, { label: \"Format as\", labelWidth: 11 }, /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.Select,\n    {\n      \"aria-label\": \"Format as\",\n      options: props.options,\n      value: props.query.format,\n      onChange: onChangeFormat,\n      className: \"width-12\",\n      menuShouldPortal: true\n    }\n  ));\n}\n\nvar __defProp$1 = Object.defineProperty;\nvar __defProps$1 = Object.defineProperties;\nvar __getOwnPropDescs$1 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$1 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$1 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$1 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$1 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$1.call(b, prop))\n      __defNormalProp$1(a, prop, b[prop]);\n  if (__getOwnPropSymbols$1)\n    for (var prop of __getOwnPropSymbols$1(b)) {\n      if (__propIsEnum$1.call(b, prop))\n        __defNormalProp$1(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$1 = (a, b) => __defProps$1(a, __getOwnPropDescs$1(b));\nvar FillValueOptions = /* @__PURE__ */ ((FillValueOptions2) => {\n  FillValueOptions2[FillValueOptions2[\"Previous\"] = 0] = \"Previous\";\n  FillValueOptions2[FillValueOptions2[\"Null\"] = 1] = \"Null\";\n  FillValueOptions2[FillValueOptions2[\"Value\"] = 2] = \"Value\";\n  return FillValueOptions2;\n})(FillValueOptions || {});\nconst SelectableFillValueOptions = [\n  {\n    label: \"Previous Value\",\n    value: 0 /* Previous */\n  },\n  {\n    label: \"NULL\",\n    value: 1 /* Null */\n  },\n  {\n    label: \"Value\",\n    value: 2 /* Value */\n  }\n];\nfunction FillValueSelect(props) {\n  var _a, _b, _c;\n  return /* @__PURE__ */ React__default[\"default\"].createElement(React__default[\"default\"].Fragment, null, /* @__PURE__ */ React__default[\"default\"].createElement(ui.InlineField, { label: \"Fill value\", tooltip: \"value to fill missing points\" }, /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.Select,\n    {\n      \"aria-label\": \"Fill value\",\n      options: SelectableFillValueOptions,\n      value: (_b = (_a = props.query.fillMode) == null ? void 0 : _a.mode) != null ? _b : 0 /* Previous */,\n      onChange: ({ value }) => {\n        var _a2;\n        props.onChange(__spreadProps$1(__spreadValues$1({}, props.query), {\n          fillMode: __spreadProps$1(__spreadValues$1({}, props.query.fillMode), { mode: value })\n        }));\n        (_a2 = props.onRunQuery) == null ? void 0 : _a2.call(props);\n      },\n      className: \"width-12\",\n      menuShouldPortal: true\n    }\n  )), ((_c = props.query.fillMode) == null ? void 0 : _c.mode) === 2 /* Value */ && /* @__PURE__ */ React__default[\"default\"].createElement(ui.InlineField, { label: \"Value\", labelWidth: 11 }, /* @__PURE__ */ React__default[\"default\"].createElement(\n    ui.Input,\n    {\n      type: \"number\",\n      \"aria-label\": \"Value\",\n      value: props.query.fillMode.value,\n      onChange: ({ currentTarget }) => props.onChange(__spreadProps$1(__spreadValues$1({}, props.query), {\n        fillMode: {\n          mode: 2 /* Value */,\n          value: currentTarget.valueAsNumber\n        }\n      })),\n      onBlur: () => {\n        var _a2;\n        return (_a2 = props.onRunQuery) == null ? void 0 : _a2.call(props);\n      }\n    }\n  )));\n}\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction filterSQLQuery(query) {\n  return !!query.rawSQL;\n}\nfunction applySQLTemplateVariables(query, scopedVars, getTemplateSrv) {\n  const templateSrv = getTemplateSrv();\n  return __spreadProps(__spreadValues({}, query), {\n    rawSQL: templateSrv.replace(query.rawSQL, scopedVars, interpolateVariable)\n  });\n}\nfunction interpolateVariable(value) {\n  if (typeof value === \"string\" || typeof value === \"number\") {\n    return value;\n  }\n  const quotedValues = value.map((v) => {\n    return quoteLiteral(v);\n  });\n  return quotedValues.join(\",\");\n}\nfunction quoteLiteral(value) {\n  return \"'\" + String(value).replace(/'/g, \"''\") + \"'\";\n}\nconst appendTemplateVariablesAsSuggestions = (getTemplateSrv, sugs) => {\n  const templateSrv = getTemplateSrv();\n  const templateSugs = [];\n  templateSrv.getVariables().forEach((variable) => {\n    const label = \"$\" + variable.name;\n    let val = templateSrv.replace(label);\n    if (val === label) {\n      val = \"\";\n    }\n    templateSugs.push({\n      label,\n      kind: ui.CodeEditorSuggestionItemKind.Text,\n      detail: `(Template Variable) ${val}`\n    });\n  });\n  return sugs.concat(templateSugs);\n};\n\nexports.AwsAuthType = AwsAuthType;\nexports.ConfigSelect = ConfigSelect;\nexports.ConnectionConfig = ConnectionConfig;\nexports.DEFAULT_LABEL_WIDTH = DEFAULT_LABEL_WIDTH;\nexports.FillValueOptions = FillValueOptions;\nexports.FillValueSelect = FillValueSelect;\nexports.FormatSelect = FormatSelect;\nexports.InlineInput = InlineInput;\nexports.QueryCodeEditor = QueryCodeEditor;\nexports.QueryEditorHeader = QueryEditorHeader;\nexports.ResourceSelector = ResourceSelector;\nexports.SIGV4ConnectionConfig = SIGV4ConnectionConfig;\nexports.appendTemplateVariablesAsSuggestions = appendTemplateVariablesAsSuggestions;\nexports.applySQLTemplateVariables = applySQLTemplateVariables;\nexports.awsAuthProviderOptions = awsAuthProviderOptions;\nexports.filterSQLQuery = filterSQLQuery;\nexports.standardRegions = standardRegions;\n//# sourceMappingURL=index.js.map\n","Object.defineProperty(exports,\"__esModule\",{value:!0});var e,t,o,n,s,r,i,l,a,u,p=require(\"@grafana/ui\"),f=require(\"react\"),g=(e=f)&&\"object\"==typeof e&&\"default\"in e?e.default:e,d=require(\"@grafana/data\"),y=require(\"@grafana/runtime\"),c=require(\"@emotion/css\"),m=function(){return(m=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var s in t=arguments[o])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function E(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(o[n[s]]=e[n[s]])}return o}function q(e,t,o,n){return new(o||(o=Promise))((function(s,r){function i(e){try{a(n.next(e))}catch(e){r(e)}}function l(e){try{a(n.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}a((n=n.apply(e,t||[])).next())}))}function T(e,t){var o,n,s,r,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},\"function\"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(o)throw new TypeError(\"Generator is already executing.\");for(;i;)try{if(o=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){i.label=r[1];break}if(6===r[0]&&i.label<s[1]){i.label=s[1],s=r;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(r);break}s[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],n=0}finally{o=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}function S(e){var t=\"function\"==typeof Symbol&&Symbol.iterator,o=t&&e[t],n=0;if(o)return o.call(e);if(e&&\"number\"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}function R(e,t){var o=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,s,r=o.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return i}function I(e,t,o){if(o||2===arguments.length)for(var n,s=0,r=t.length;s<r;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}function A(e,t){var o,n,s,r=null==e?void 0:e.getPreviousNonWhiteSpaceToken(),i=null==e?void 0:e.getPreviousKeyword(),l=null===(s=null==e?void 0:e.getPreviousNonWhiteSpaceToken())||void 0===s?void 0:s.is(exports.TokenType.Operator,\"/\"),a=t.list(),u=[];try{for(var p=S(a),f=p.next();!f.done;f=p.next()){var g=f.value;g.resolve(e,null!=i?i:null,null!=r?r:null,Boolean(l))&&u.push(g.id)}}catch(e){o={error:e}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(o)throw o.error}}return 0===u.length?[exports.StatementPosition.Unknown]:u}(t=exports.OperatorType||(exports.OperatorType={}))[t.Comparison=0]=\"Comparison\",t[t.Logical=1]=\"Logical\",(o=exports.MacroType||(exports.MacroType={}))[o.Value=0]=\"Value\",o[o.Filter=1]=\"Filter\",o[o.Group=2]=\"Group\",o[o.Column=3]=\"Column\",o[o.Table=4]=\"Table\",(n=exports.TokenType||(exports.TokenType={})).Parenthesis=\"delimiter.parenthesis.sql\",n.Whitespace=\"white.sql\",n.Keyword=\"keyword.sql\",n.Delimiter=\"delimiter.sql\",n.Operator=\"operator.sql\",n.Identifier=\"identifier.sql\",n.IdentifierQuote=\"identifier.quote.sql\",n.Type=\"type.sql\",n.Function=\"predefined.sql\",n.Number=\"number.sql\",n.String=\"string.sql\",n.Variable=\"variable.sql\",(s=exports.StatementPosition||(exports.StatementPosition={})).Unknown=\"unknown\",s.SelectKeyword=\"selectKeyword\",s.WithKeyword=\"withKeyword\",s.AfterSelectKeyword=\"afterSelectKeyword\",s.AfterSelectArguments=\"afterSelectArguments\",s.AfterSelectFuncFirstArgument=\"afterSelectFuncFirstArgument\",s.SelectAlias=\"selectAlias\",s.AfterFromKeyword=\"afterFromKeyword\",s.AfterTable=\"afterTable\",s.SchemaFuncFirstArgument=\"schemaFuncFirstArgument\",s.SchemaFuncExtraArgument=\"schemaFuncExtraArgument\",s.FromKeyword=\"fromKeyword\",s.AfterFrom=\"afterFrom\",s.WhereKeyword=\"whereKeyword\",s.WhereComparisonOperator=\"whereComparisonOperator\",s.WhereValue=\"whereValue\",s.AfterWhereFunctionArgument=\"afterWhereFunctionArgument\",s.AfterGroupByFunctionArgument=\"afterGroupByFunctionArgument\",s.AfterWhereValue=\"afterWhereValue\",s.AfterGroupByKeywords=\"afterGroupByKeywords\",s.AfterGroupBy=\"afterGroupBy\",s.AfterOrderByKeywords=\"afterOrderByKeywords\",s.AfterOrderByFunction=\"afterOrderByFunction\",s.AfterOrderByDirection=\"afterOrderByDirection\",s.AfterIsOperator=\"afterIsOperator\",s.AfterIsNotOperator=\"afterIsNotOperator\",s.AfterSchema=\"afterSchema\",(r=exports.SuggestionKind||(exports.SuggestionKind={})).Schemas=\"schemas\",r.Tables=\"tables\",r.Columns=\"columns\",r.SelectKeyword=\"selectKeyword\",r.WithKeyword=\"withKeyword\",r.FunctionsWithArguments=\"functionsWithArguments\",r.FromKeyword=\"fromKeyword\",r.WhereKeyword=\"whereKeyword\",r.GroupByKeywords=\"groupByKeywords\",r.OrderByKeywords=\"orderByKeywords\",r.FunctionsWithoutArguments=\"functionsWithoutArguments\",r.LimitKeyword=\"limitKeyword\",r.SortOrderDirectionKeyword=\"sortOrderDirectionKeyword\",r.ComparisonOperators=\"comparisonOperators\",r.LogicalOperators=\"logicalOperators\",r.SelectMacro=\"selectMacro\",r.TableMacro=\"tableMacro\",r.FilterMacro=\"filterMacro\",r.GroupMacro=\"groupMacro\",r.BoolValues=\"boolValues\",r.NullValue=\"nullValue\",r.NotKeyword=\"notKeyword\",r.TemplateVariables=\"templateVariables\",r.StarWildCard=\"starWildCard\",(i=exports.CompletionItemPriority||(exports.CompletionItemPriority={})).High=\"a\",i.MediumHigh=\"d\",i.Medium=\"g\",i.MediumLow=\"k\",i.Low=\"q\",(l=exports.CompletionItemKind||(exports.CompletionItemKind={}))[l.Method=0]=\"Method\",l[l.Function=1]=\"Function\",l[l.Constructor=2]=\"Constructor\",l[l.Field=3]=\"Field\",l[l.Variable=4]=\"Variable\",l[l.Class=5]=\"Class\",l[l.Struct=6]=\"Struct\",l[l.Interface=7]=\"Interface\",l[l.Module=8]=\"Module\",l[l.Property=9]=\"Property\",l[l.Event=10]=\"Event\",l[l.Operator=11]=\"Operator\",l[l.Unit=12]=\"Unit\",l[l.Value=13]=\"Value\",l[l.Constant=14]=\"Constant\",l[l.Enum=15]=\"Enum\",l[l.EnumMember=16]=\"EnumMember\",l[l.Keyword=17]=\"Keyword\",l[l.Text=18]=\"Text\",l[l.Color=19]=\"Color\",l[l.File=20]=\"File\",l[l.Reference=21]=\"Reference\",l[l.Customcolor=22]=\"Customcolor\",l[l.Folder=23]=\"Folder\",l[l.TypeParameter=24]=\"TypeParameter\",l[l.User=25]=\"User\",l[l.Issue=26]=\"Issue\",l[l.Snippet=27]=\"Snippet\",(a=exports.CompletionItemInsertTextRule||(exports.CompletionItemInsertTextRule={}))[a.KeepWhitespace=1]=\"KeepWhitespace\",a[a.InsertAsSnippet=4]=\"InsertAsSnippet\",(u=exports.EditorMode||(exports.EditorMode={})).Builder=\"builder\",u.Code=\"code\";var x=function(e,t,o,n,s){return q(void 0,void 0,void 0,(function(){var r,i,l,a,u,p,f,g,d,y,c;return T(this,(function(E){switch(E.label){case 0:r=[],i=(null==t?void 0:t.isWhiteSpace())||(null==t?void 0:t.isParenthesis())||(null==t?void 0:t.isIdentifier())&&t.value.endsWith(\".\"),l=i||!(null==t?void 0:t.range)?e.Range.fromPositions(n.position):null==t?void 0:t.range,E.label=1;case 1:E.trys.push([1,6,7,8]),a=S(I([],R(new Set(o)),!1)),u=a.next(),E.label=2;case 2:return u.done?[3,5]:(p=u.value,(f=s.getIfExists(p))?[4,f.suggestions(m(m({},n),{range:l}),e)]:[3,4]);case 3:g=E.sent(),r=I(I([],R(r),!1),R(g.map((function(e){return function(e,t,o){return void 0===o&&(o={}),m({label:e,insertText:e,kind:exports.CompletionItemKind.Field,sortText:exports.CompletionItemPriority.Medium,range:t},o)}(e.label,l,m({kind:e.kind},e))}))),!1),E.label=4;case 4:return u=a.next(),[3,2];case 5:return[3,8];case 6:return d=E.sent(),y={error:d},[3,8];case 7:try{u&&!u.done&&(c=a.return)&&c.call(a)}finally{if(y)throw y.error}return[7];case 8:return[2,Promise.resolve(r)]}}))}))},w=function(){return[{id:exports.StatementPosition.SelectKeyword,name:exports.StatementPosition.SelectKeyword,kind:[exports.SuggestionKind.SelectKeyword]},{id:exports.StatementPosition.WithKeyword,name:exports.StatementPosition.WithKeyword,kind:[exports.SuggestionKind.WithKeyword]},{id:exports.StatementPosition.AfterSelectKeyword,name:exports.StatementPosition.AfterSelectKeyword,kind:[exports.SuggestionKind.StarWildCard,exports.SuggestionKind.FunctionsWithArguments,exports.SuggestionKind.Columns,exports.SuggestionKind.SelectMacro]},{id:exports.StatementPosition.AfterSelectFuncFirstArgument,name:exports.StatementPosition.AfterSelectFuncFirstArgument,kind:[exports.SuggestionKind.Columns]},{id:exports.StatementPosition.AfterGroupByFunctionArgument,name:exports.StatementPosition.AfterGroupByFunctionArgument,kind:[exports.SuggestionKind.Columns]},{id:exports.StatementPosition.AfterWhereFunctionArgument,name:exports.StatementPosition.AfterWhereFunctionArgument,kind:[exports.SuggestionKind.Columns]},{id:exports.StatementPosition.AfterSelectArguments,name:exports.StatementPosition.AfterSelectArguments,kind:[exports.SuggestionKind.Columns]},{id:exports.StatementPosition.AfterFromKeyword,name:exports.StatementPosition.AfterFromKeyword,kind:[exports.SuggestionKind.Schemas,exports.SuggestionKind.Tables,exports.SuggestionKind.TableMacro]},{id:exports.StatementPosition.AfterSchema,name:exports.StatementPosition.AfterSchema,kind:[exports.SuggestionKind.Tables,exports.SuggestionKind.TableMacro]},{id:exports.StatementPosition.SelectAlias,name:exports.StatementPosition.SelectAlias,kind:[exports.SuggestionKind.Columns,exports.SuggestionKind.FunctionsWithArguments]},{id:exports.StatementPosition.FromKeyword,name:exports.StatementPosition.FromKeyword,kind:[exports.SuggestionKind.FromKeyword]},{id:exports.StatementPosition.AfterFrom,name:exports.StatementPosition.AfterFrom,kind:[exports.SuggestionKind.WhereKeyword,exports.SuggestionKind.GroupByKeywords,exports.SuggestionKind.OrderByKeywords,exports.SuggestionKind.LimitKeyword]},{id:exports.StatementPosition.AfterTable,name:exports.StatementPosition.AfterTable,kind:[exports.SuggestionKind.WhereKeyword,exports.SuggestionKind.GroupByKeywords,exports.SuggestionKind.OrderByKeywords,exports.SuggestionKind.LimitKeyword]},{id:exports.StatementPosition.WhereKeyword,name:exports.StatementPosition.WhereKeyword,kind:[exports.SuggestionKind.Columns,exports.SuggestionKind.FilterMacro,exports.SuggestionKind.TemplateVariables]},{id:exports.StatementPosition.WhereComparisonOperator,name:exports.StatementPosition.WhereComparisonOperator,kind:[exports.SuggestionKind.ComparisonOperators]},{id:exports.StatementPosition.WhereValue,name:exports.StatementPosition.WhereValue,kind:[exports.SuggestionKind.FilterMacro,exports.SuggestionKind.TemplateVariables]},{id:exports.StatementPosition.AfterWhereValue,name:exports.StatementPosition.AfterWhereValue,kind:[exports.SuggestionKind.LogicalOperators,exports.SuggestionKind.GroupByKeywords,exports.SuggestionKind.OrderByKeywords,exports.SuggestionKind.LimitKeyword,exports.SuggestionKind.Columns,exports.SuggestionKind.TemplateVariables]},{id:exports.StatementPosition.AfterGroupByKeywords,name:exports.StatementPosition.AfterGroupByKeywords,kind:[exports.SuggestionKind.GroupMacro,exports.SuggestionKind.Columns]},{id:exports.StatementPosition.AfterGroupBy,name:exports.StatementPosition.AfterGroupBy,kind:[exports.SuggestionKind.OrderByKeywords,exports.SuggestionKind.LimitKeyword]},{id:exports.StatementPosition.AfterOrderByKeywords,name:exports.StatementPosition.AfterOrderByKeywords,kind:[exports.SuggestionKind.Columns]},{id:exports.StatementPosition.AfterOrderByFunction,name:exports.StatementPosition.AfterOrderByFunction,kind:[exports.SuggestionKind.SortOrderDirectionKeyword,exports.SuggestionKind.LimitKeyword]},{id:exports.StatementPosition.AfterOrderByDirection,name:exports.StatementPosition.AfterOrderByDirection,kind:[exports.SuggestionKind.LimitKeyword]},{id:exports.StatementPosition.AfterIsOperator,name:exports.StatementPosition.AfterOrderByDirection,kind:[exports.SuggestionKind.NotKeyword,exports.SuggestionKind.NullValue,exports.SuggestionKind.BoolValues]},{id:exports.StatementPosition.AfterIsNotOperator,name:exports.StatementPosition.AfterOrderByDirection,kind:[exports.SuggestionKind.NullValue,exports.SuggestionKind.BoolValues]}]};var h=function(){function e(e,t,o,n,s){this.type=e,this.value=t,this.range=o,this.previous=n,this.next=s}return e.prototype.isKeyword=function(){return this.type===exports.TokenType.Keyword},e.prototype.isWhiteSpace=function(){return this.type===exports.TokenType.Whitespace},e.prototype.isParenthesis=function(){return this.type===exports.TokenType.Parenthesis},e.prototype.isIdentifier=function(){return this.type===exports.TokenType.Identifier},e.prototype.isString=function(){return this.type===exports.TokenType.String},e.prototype.isNumber=function(){return this.type===exports.TokenType.Number},e.prototype.isDoubleQuotedString=function(){return this.type===exports.TokenType.Type},e.prototype.isVariable=function(){return this.type===exports.TokenType.Variable},e.prototype.isFunction=function(){return this.type===exports.TokenType.Function},e.prototype.isOperator=function(){return this.type===exports.TokenType.Operator},e.prototype.isTemplateVariable=function(){return this.type===exports.TokenType.Variable},e.prototype.is=function(e,t){var o=this.type===e;return void 0!==t?o&&v(e,this,t):o},e.prototype.getPreviousNonWhiteSpaceToken=function(){for(var e=this.previous;null!=e;){if(!e.isWhiteSpace())return e;e=e.previous}return null},e.prototype.getPreviousOfType=function(e,t){for(var o=this.previous;null!=o;){var n=o.type===e;if(void 0!==t?n&&v(e,o,t):n)return o;o=o.previous}return null},e.prototype.getPreviousUntil=function(e,t,o){for(var n=[],s=this.previous;null!=s;)if(t.some((function(e){return e===(null==s?void 0:s.type)})))s=s.previous;else{var r=s.type===e;if(void 0!==o?r&&v(e,s,o):r)return n;s.isWhiteSpace()||n.push(s),s=s.previous}return n},e.prototype.getNextUntil=function(e,t,o){for(var n=[],s=this.next;null!=s;)if(t.some((function(e){return e===(null==s?void 0:s.type)})))s=s.next;else{var r=s.type===e;if(void 0!==o?r&&v(e,s,o):r)return n;s.isWhiteSpace()||n.push(s),s=s.next}return n},e.prototype.getPreviousKeyword=function(){for(var e=this.previous;null!=e;){if(e.isKeyword())return e;e=e.previous}return null},e.prototype.getNextNonWhiteSpaceToken=function(){for(var e=this.next;null!=e;){if(!e.isWhiteSpace())return e;e=e.next}return null},e.prototype.getNextOfType=function(e,t){for(var o=this.next;null!=o;){var n=o.type===e;if(void 0!==t?n&&v(e,o,t):n)return o;o=o.next}return null},e}();function v(e,t,o){return e===exports.TokenType.Keyword||e===exports.TokenType.Operator?t.value.toLowerCase()===o.toString().toLowerCase():t.value===o}function O(e,t,o,n){var s;void 0===n&&(n=\"sql\");for(var r=null,i=null,l=e.editor.tokenize(null!==(s=t.getValue())&&void 0!==s?s:\"\",n),a=0;a<l.length;a++){var u=l[a];if(!u.length&&i){var p={offset:0,type:exports.TokenType.Whitespace,language:n,_tokenBrand:void 0};u.push(p)}for(var f=0;f<u.length;f++){p=u[f];var g=u.length>f+1?u[f+1].offset+1:t.getLineLength(a+1)+1,d={startLineNumber:a+1,startColumn:0===p.offset?0:p.offset+1,endLineNumber:a+1,endColumn:g},y=t.getValueInRange(d),c=new h(p.type,y,d,i,null);e.Range.containsPosition(d,o)&&(r=c),i&&(i.next=c),i=c}}return r}var C,N=\"select\",P=\"from\",L=\"by\",K=\"desc\",k=\"asc\",M=[\"AND\",\"OR\"],b=[\"=\",\"!=\"],D=I([],R(b),!1),F={comments:{lineComment:\"--\",blockComment:[\"/*\",\"*/\"]},brackets:[[\"{\",\"}\"],[\"[\",\"]\"],[\"(\",\")\"]],autoClosingPairs:[{open:\"{\",close:\"}\"},{open:\"[\",close:\"]\"},{open:\"(\",close:\")\"},{open:'\"',close:'\"'},{open:\"'\",close:\"'\"}],surroundingPairs:[{open:\"{\",close:\"}\"},{open:\"[\",close:\"]\"},{open:\"(\",close:\")\"},{open:'\"',close:'\"'},{open:\"'\",close:\"'\"}]},U={defaultToken:\"\",tokenPostfix:\".sql\",ignoreCase:!0,brackets:[{open:\"[\",close:\"]\",token:\"delimiter.square\"},{open:\"(\",close:\")\",token:\"delimiter.parenthesis\"}],keywords:[\"ABORT\",\"ABSOLUTE\",\"ACTION\",\"ADA\",\"ADD\",\"AFTER\",\"ALL\",\"ALLOCATE\",\"ALTER\",\"ALWAYS\",\"ANALYZE\",\"AND\",\"ANY\",\"ARE\",\"AS\",\"ASC\",\"ASSERTION\",\"AT\",\"ATTACH\",\"AUTHORIZATION\",\"AUTOINCREMENT\",\"AVG\",\"BACKUP\",\"BEFORE\",\"BEGIN\",\"BETWEEN\",\"BIT\",\"BIT_LENGTH\",\"BOTH\",\"BREAK\",\"BROWSE\",\"BULK\",\"BY\",\"CASCADE\",\"CASCADED\",\"CASE\",\"CAST\",\"CATALOG\",\"CHAR\",\"CHARACTER\",\"CHARACTER_LENGTH\",\"CHAR_LENGTH\",\"CHECK\",\"CHECKPOINT\",\"CLOSE\",\"CLUSTERED\",\"COALESCE\",\"COLLATE\",\"COLLATION\",\"COLUMN\",\"COMMIT\",\"COMPUTE\",\"CONFLICT\",\"CONNECT\",\"CONNECTION\",\"CONSTRAINT\",\"CONSTRAINTS\",\"CONTAINS\",\"CONTAINSTABLE\",\"CONTINUE\",\"CONVERT\",\"CORRESPONDING\",\"COUNT\",\"CREATE\",\"CROSS\",\"CURRENT\",\"CURRENT_DATE\",\"CURRENT_TIME\",\"CURRENT_TIMESTAMP\",\"CURRENT_USER\",\"CURSOR\",\"DATABASE\",\"DATE\",\"DAY\",\"DBCC\",\"DEALLOCATE\",\"DEC\",\"DECIMAL\",\"DECLARE\",\"DEFAULT\",\"DEFERRABLE\",\"DEFERRED\",\"DELETE\",\"DENY\",\"DESC\",\"DESCRIBE\",\"DESCRIPTOR\",\"DETACH\",\"DIAGNOSTICS\",\"DISCONNECT\",\"DISK\",\"DISTINCT\",\"DISTRIBUTED\",\"DO\",\"DOMAIN\",\"DOUBLE\",\"DROP\",\"DUMP\",\"EACH\",\"ELSE\",\"END\",\"END-EXEC\",\"ERRLVL\",\"ESCAPE\",\"EXCEPT\",\"EXCEPTION\",\"EXCLUDE\",\"EXCLUSIVE\",\"EXEC\",\"EXECUTE\",\"EXISTS\",\"EXIT\",\"EXPLAIN\",\"EXTERNAL\",\"EXTRACT\",\"FAIL\",\"FALSE\",\"FETCH\",\"FILE\",\"FILLFACTOR\",\"FILTER\",\"FIRST\",\"FLOAT\",\"FOLLOWING\",\"FOR\",\"FOREIGN\",\"FORTRAN\",\"FOUND\",\"FREETEXT\",\"FREETEXTTABLE\",\"FROM\",\"FULL\",\"FUNCTION\",\"GENERATED\",\"GET\",\"GLOB\",\"GLOBAL\",\"GO\",\"GOTO\",\"GRANT\",\"GROUP\",\"GROUPS\",\"HAVING\",\"HOLDLOCK\",\"HOUR\",\"IDENTITY\",\"IDENTITYCOL\",\"IDENTITY_INSERT\",\"IF\",\"IGNORE\",\"IMMEDIATE\",\"IN\",\"INCLUDE\",\"INDEX\",\"INDEXED\",\"INDICATOR\",\"INITIALLY\",\"INNER\",\"INPUT\",\"INSENSITIVE\",\"INSERT\",\"INSTEAD\",\"INT\",\"INTEGER\",\"INTERSECT\",\"INTERVAL\",\"INTO\",\"IS\",\"ISNULL\",\"ISOLATION\",\"JOIN\",\"KEY\",\"KILL\",\"LANGUAGE\",\"LAST\",\"LEADING\",\"LEFT\",\"LEVEL\",\"LIKE\",\"LIMIT\",\"LINENO\",\"LOAD\",\"LOCAL\",\"LOWER\",\"MATCH\",\"MATERIALIZED\",\"MAX\",\"MERGE\",\"MIN\",\"MINUTE\",\"MODULE\",\"MONTH\",\"NAMES\",\"NATIONAL\",\"NATURAL\",\"NCHAR\",\"NEXT\",\"NO\",\"NOCHECK\",\"NONCLUSTERED\",\"NONE\",\"NOT\",\"NOTHING\",\"NOTNULL\",\"NULL\",\"NULLIF\",\"NULLS\",\"NUMERIC\",\"OCTET_LENGTH\",\"OF\",\"OFF\",\"OFFSET\",\"OFFSETS\",\"ON\",\"ONLY\",\"OPEN\",\"OPENDATASOURCE\",\"OPENQUERY\",\"OPENROWSET\",\"OPENXML\",\"OPTION\",\"OR\",\"ORDER\",\"OTHERS\",\"OUTER\",\"OUTPUT\",\"OVER\",\"OVERLAPS\",\"PAD\",\"PARTIAL\",\"PARTITION\",\"PASCAL\",\"PERCENT\",\"PIVOT\",\"PLAN\",\"POSITION\",\"PRAGMA\",\"PRECEDING\",\"PRECISION\",\"PREPARE\",\"PRESERVE\",\"PRIMARY\",\"PRINT\",\"PRIOR\",\"PRIVILEGES\",\"PROC\",\"PROCEDURE\",\"PUBLIC\",\"QUERY\",\"RAISE\",\"RAISERROR\",\"RANGE\",\"READ\",\"READTEXT\",\"REAL\",\"RECONFIGURE\",\"RECURSIVE\",\"REFERENCES\",\"REGEXP\",\"REINDEX\",\"RELATIVE\",\"RELEASE\",\"RENAME\",\"REPLACE\",\"REPLICATION\",\"RESTORE\",\"RESTRICT\",\"RETURN\",\"RETURNING\",\"REVERT\",\"REVOKE\",\"RIGHT\",\"ROLLBACK\",\"ROW\",\"ROWCOUNT\",\"ROWGUIDCOL\",\"ROWS\",\"RULE\",\"SAVE\",\"SAVEPOINT\",\"SCHEMA\",\"SCROLL\",\"SECOND\",\"SECTION\",\"SECURITYAUDIT\",\"SELECT\",\"SEMANTICKEYPHRASETABLE\",\"SEMANTICSIMILARITYDETAILSTABLE\",\"SEMANTICSIMILARITYTABLE\",\"SESSION\",\"SESSION_USER\",\"SET\",\"SETUSER\",\"SHUTDOWN\",\"SIZE\",\"SMALLINT\",\"SOME\",\"SPACE\",\"SQL\",\"SQLCA\",\"SQLCODE\",\"SQLERROR\",\"SQLSTATE\",\"SQLWARNING\",\"STATISTICS\",\"SUBSTRING\",\"SUM\",\"SYSTEM_USER\",\"TABLE\",\"TABLESAMPLE\",\"TEMP\",\"TEMPORARY\",\"TEXTSIZE\",\"THEN\",\"TIES\",\"TIME\",\"TIMESTAMP\",\"TIMEZONE_HOUR\",\"TIMEZONE_MINUTE\",\"TO\",\"TOP\",\"TRAILING\",\"TRAN\",\"TRANSACTION\",\"TRANSLATE\",\"TRANSLATION\",\"TRIGGER\",\"TRIM\",\"TRUE\",\"TRUNCATE\",\"TRY_CONVERT\",\"TSEQUAL\",\"UNBOUNDED\",\"UNION\",\"UNIQUE\",\"UNKNOWN\",\"UNPIVOT\",\"UPDATE\",\"UPDATETEXT\",\"UPPER\",\"USAGE\",\"USE\",\"USER\",\"USING\",\"VACUUM\",\"VALUE\",\"VALUES\",\"VARCHAR\",\"VARYING\",\"VIEW\",\"VIRTUAL\",\"WAITFOR\",\"WHEN\",\"WHENEVER\",\"WHERE\",\"WHILE\",\"WINDOW\",\"WITH\",\"WITHIN GROUP\",\"WITHOUT\",\"WORK\",\"WRITE\",\"WRITETEXT\",\"YEAR\",\"ZONE\"],operators:[\"EXCEPT\",\"INTERSECT\",\"UNION\",\"APPLY\",\"CROSS\",\"FULL\",\"INNER\",\"JOIN\",\"LEFT\",\"OUTER\",\"RIGHT\",\"CONTAINS\",\"FREETEXT\",\"IS\",\"NULL\",\"PIVOT\",\"UNPIVOT\",\"MATCHED\"],logicalOperators:[\"ALL\",\"AND\",\"ANY\",\"BETWEEN\",\"EXISTS\",\"IN\",\"LIKE\",\"NOT\",\"OR\",\"SOME\"],comparisonOperators:[\"<>\",\">\",\"<\",\">=\",\"<=\",\"=\",\"!=\",\"&\",\"~\",\"^\",\"%\"],builtinFunctions:[\"AVG\",\"CHECKSUM_AGG\",\"COUNT\",\"COUNT_BIG\",\"GROUPING\",\"GROUPING_ID\",\"MAX\",\"MIN\",\"SUM\",\"STDEV\",\"STDEVP\",\"VAR\",\"VARP\",\"CUME_DIST\",\"FIRST_VALUE\",\"LAG\",\"LAST_VALUE\",\"LEAD\",\"PERCENTILE_CONT\",\"PERCENTILE_DISC\",\"PERCENT_RANK\",\"COLLATE\",\"COLLATIONPROPERTY\",\"TERTIARY_WEIGHTS\",\"FEDERATION_FILTERING_VALUE\",\"CAST\",\"CONVERT\",\"PARSE\",\"TRY_CAST\",\"TRY_CONVERT\",\"TRY_PARSE\",\"ASYMKEY_ID\",\"ASYMKEYPROPERTY\",\"CERTPROPERTY\",\"CERT_ID\",\"CRYPT_GEN_RANDOM\",\"DECRYPTBYASYMKEY\",\"DECRYPTBYCERT\",\"DECRYPTBYKEY\",\"DECRYPTBYKEYAUTOASYMKEY\",\"DECRYPTBYKEYAUTOCERT\",\"DECRYPTBYPASSPHRASE\",\"ENCRYPTBYASYMKEY\",\"ENCRYPTBYCERT\",\"ENCRYPTBYKEY\",\"ENCRYPTBYPASSPHRASE\",\"HASHBYTES\",\"IS_OBJECTSIGNED\",\"KEY_GUID\",\"KEY_ID\",\"KEY_NAME\",\"SIGNBYASYMKEY\",\"SIGNBYCERT\",\"SYMKEYPROPERTY\",\"VERIFYSIGNEDBYCERT\",\"VERIFYSIGNEDBYASYMKEY\",\"CURSOR_STATUS\",\"DATALENGTH\",\"IDENT_CURRENT\",\"IDENT_INCR\",\"IDENT_SEED\",\"IDENTITY\",\"SQL_VARIANT_PROPERTY\",\"CURRENT_TIMESTAMP\",\"DATEADD\",\"DATEDIFF\",\"DATEFROMPARTS\",\"DATENAME\",\"DATEPART\",\"DATETIME2FROMPARTS\",\"DATETIMEFROMPARTS\",\"DATETIMEOFFSETFROMPARTS\",\"DAY\",\"EOMONTH\",\"GETDATE\",\"GETUTCDATE\",\"ISDATE\",\"MONTH\",\"SMALLDATETIMEFROMPARTS\",\"SWITCHOFFSET\",\"SYSDATETIME\",\"SYSDATETIMEOFFSET\",\"SYSUTCDATETIME\",\"TIMEFROMPARTS\",\"TODATETIMEOFFSET\",\"YEAR\",\"CHOOSE\",\"COALESCE\",\"IIF\",\"NULLIF\",\"ABS\",\"ACOS\",\"ASIN\",\"ATAN\",\"ATN2\",\"CEILING\",\"COS\",\"COT\",\"DEGREES\",\"EXP\",\"FLOOR\",\"LOG\",\"LOG10\",\"PI\",\"POWER\",\"RADIANS\",\"RAND\",\"ROUND\",\"SIGN\",\"SIN\",\"SQRT\",\"SQUARE\",\"TAN\",\"APP_NAME\",\"APPLOCK_MODE\",\"APPLOCK_TEST\",\"ASSEMBLYPROPERTY\",\"COL_LENGTH\",\"COL_NAME\",\"COLUMNPROPERTY\",\"DATABASE_PRINCIPAL_ID\",\"DATABASEPROPERTYEX\",\"DB_ID\",\"DB_NAME\",\"FILE_ID\",\"FILE_IDEX\",\"FILE_NAME\",\"FILEGROUP_ID\",\"FILEGROUP_NAME\",\"FILEGROUPPROPERTY\",\"FILEPROPERTY\",\"FULLTEXTCATALOGPROPERTY\",\"FULLTEXTSERVICEPROPERTY\",\"INDEX_COL\",\"INDEXKEY_PROPERTY\",\"INDEXPROPERTY\",\"OBJECT_DEFINITION\",\"OBJECT_ID\",\"OBJECT_NAME\",\"OBJECT_SCHEMA_NAME\",\"OBJECTPROPERTY\",\"OBJECTPROPERTYEX\",\"ORIGINAL_DB_NAME\",\"PARSENAME\",\"SCHEMA_ID\",\"SCHEMA_NAME\",\"SCOPE_IDENTITY\",\"SERVERPROPERTY\",\"STATS_DATE\",\"TYPE_ID\",\"TYPE_NAME\",\"TYPEPROPERTY\",\"DENSE_RANK\",\"NTILE\",\"RANK\",\"ROW_NUMBER\",\"PUBLISHINGSERVERNAME\",\"OPENDATASOURCE\",\"OPENQUERY\",\"OPENROWSET\",\"OPENXML\",\"CERTENCODED\",\"CERTPRIVATEKEY\",\"CURRENT_USER\",\"HAS_DBACCESS\",\"HAS_PERMS_BY_NAME\",\"IS_MEMBER\",\"IS_ROLEMEMBER\",\"IS_SRVROLEMEMBER\",\"LOGINPROPERTY\",\"ORIGINAL_LOGIN\",\"PERMISSIONS\",\"PWDENCRYPT\",\"PWDCOMPARE\",\"SESSION_USER\",\"SESSIONPROPERTY\",\"SUSER_ID\",\"SUSER_NAME\",\"SUSER_SID\",\"SUSER_SNAME\",\"SYSTEM_USER\",\"USER\",\"USER_ID\",\"USER_NAME\",\"ASCII\",\"CHAR\",\"CHARINDEX\",\"CONCAT\",\"DIFFERENCE\",\"FORMAT\",\"LEFT\",\"LEN\",\"LOWER\",\"LTRIM\",\"NCHAR\",\"PATINDEX\",\"QUOTENAME\",\"REPLACE\",\"REPLICATE\",\"REVERSE\",\"RIGHT\",\"RTRIM\",\"SOUNDEX\",\"SPACE\",\"STR\",\"STUFF\",\"SUBSTRING\",\"UNICODE\",\"UPPER\",\"BINARY_CHECKSUM\",\"CHECKSUM\",\"CONNECTIONPROPERTY\",\"CONTEXT_INFO\",\"CURRENT_REQUEST_ID\",\"ERROR_LINE\",\"ERROR_NUMBER\",\"ERROR_MESSAGE\",\"ERROR_PROCEDURE\",\"ERROR_SEVERITY\",\"ERROR_STATE\",\"FORMATMESSAGE\",\"GETANSINULL\",\"GET_FILESTREAM_TRANSACTION_CONTEXT\",\"HOST_ID\",\"HOST_NAME\",\"ISNULL\",\"ISNUMERIC\",\"MIN_ACTIVE_ROWVERSION\",\"NEWID\",\"NEWSEQUENTIALID\",\"ROWCOUNT_BIG\",\"XACT_STATE\",\"TEXTPTR\",\"TEXTVALID\",\"COLUMNS_UPDATED\",\"EVENTDATA\",\"TRIGGER_NESTLEVEL\",\"UPDATE\",\"CHANGETABLE\",\"CHANGE_TRACKING_CONTEXT\",\"CHANGE_TRACKING_CURRENT_VERSION\",\"CHANGE_TRACKING_IS_COLUMN_IN_MASK\",\"CHANGE_TRACKING_MIN_VALID_VERSION\",\"CONTAINSTABLE\",\"FREETEXTTABLE\",\"SEMANTICKEYPHRASETABLE\",\"SEMANTICSIMILARITYDETAILSTABLE\",\"SEMANTICSIMILARITYTABLE\",\"FILETABLEROOTPATH\",\"GETFILENAMESPACEPATH\",\"GETPATHLOCATOR\",\"PATHNAME\",\"GET_TRANSMISSION_STATUS\"],builtinVariables:[\"@@DATEFIRST\",\"@@DBTS\",\"@@LANGID\",\"@@LANGUAGE\",\"@@LOCK_TIMEOUT\",\"@@MAX_CONNECTIONS\",\"@@MAX_PRECISION\",\"@@NESTLEVEL\",\"@@OPTIONS\",\"@@REMSERVER\",\"@@SERVERNAME\",\"@@SERVICENAME\",\"@@SPID\",\"@@TEXTSIZE\",\"@@VERSION\",\"@@CURSOR_ROWS\",\"@@FETCH_STATUS\",\"@@DATEFIRST\",\"@@PROCID\",\"@@ERROR\",\"@@IDENTITY\",\"@@ROWCOUNT\",\"@@TRANCOUNT\",\"@@CONNECTIONS\",\"@@CPU_BUSY\",\"@@IDLE\",\"@@IO_BUSY\",\"@@PACKET_ERRORS\",\"@@PACK_RECEIVED\",\"@@PACK_SENT\",\"@@TIMETICKS\",\"@@TOTAL_ERRORS\",\"@@TOTAL_READ\",\"@@TOTAL_WRITE\"],pseudoColumns:[\"$ACTION\",\"$IDENTITY\",\"$ROWGUID\",\"$PARTITION\"],tokenizer:{root:[{include:\"@templateVariables\"},{include:\"@macros\"},{include:\"@comments\"},{include:\"@whitespace\"},{include:\"@pseudoColumns\"},{include:\"@numbers\"},{include:\"@strings\"},{include:\"@complexIdentifiers\"},{include:\"@scopes\"},{include:\"@schemaTable\"},[/[;,.]/,\"delimiter\"],[/[()]/,\"@brackets\"],[/[\\w@#$|<|>|=|!|%|&|+|\\|-|*|/|~|^]+/,{cases:{\"@operators\":\"operator\",\"@comparisonOperators\":\"operator\",\"@logicalOperators\":\"operator\",\"@builtinVariables\":\"predefined\",\"@builtinFunctions\":\"predefined\",\"@keywords\":\"keyword\",\"@default\":\"identifier\"}}]],templateVariables:[[/\\$[a-zA-Z0-9]+/,\"variable\"]],macros:[[/\\$__[a-zA-Z0-9-_]+/,\"type\"]],schemaTable:[[/(\\w+)\\./,\"identifier\"],[/(\\w+\\.\\w+)/,\"identifier\"]],whitespace:[[/\\s+/,\"white\"]],comments:[[/--+.*/,\"comment\"],[/\\/\\*/,{token:\"comment.quote\",next:\"@comment\"}]],comment:[[/[^*/]+/,\"comment\"],[/\\*\\//,{token:\"comment.quote\",next:\"@pop\"}],[/./,\"comment\"]],pseudoColumns:[[/[$][A-Za-z_][\\w@#$]*/,{cases:{\"@pseudoColumns\":\"predefined\",\"@default\":\"identifier\"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,\"number\"],[/[$][+-]*\\d*(\\.\\d*)?/,\"number\"],[/((\\d+(\\.\\d*)?)|(\\.\\d+))([eE][\\-+]?\\d+)?/,\"number\"]],strings:[[/N'/,{token:\"string\",next:\"@string\"}],[/'/,{token:\"string\",next:\"@string\"}]],string:[[/[^']+/,\"string\"],[/''/,\"string\"],[/'/,{token:\"string\",next:\"@pop\"}]],complexIdentifiers:[[/\\[/,{token:\"identifier.quote\",next:\"@bracketedIdentifier\"}],[/\"/,{token:\"identifier.quote\",next:\"@quotedIdentifier\"}]],bracketedIdentifier:[[/[^\\]]+/,\"identifier\"],[/]]/,\"identifier\"],[/]/,{token:\"identifier.quote\",next:\"@pop\"}]],quotedIdentifier:[[/[^\"]+/,\"identifier\"],[/\"\"/,\"identifier\"],[/\"/,{token:\"identifier.quote\",next:\"@pop\"}]],scopes:[[/BEGIN\\s+(DISTRIBUTED\\s+)?TRAN(SACTION)?\\b/i,\"keyword\"],[/BEGIN\\s+TRY\\b/i,{token:\"keyword.try\"}],[/END\\s+TRY\\b/i,{token:\"keyword.try\"}],[/BEGIN\\s+CATCH\\b/i,{token:\"keyword.catch\"}],[/END\\s+CATCH\\b/i,{token:\"keyword.catch\"}],[/(BEGIN|CASE)\\b/i,{token:\"keyword.block\"}],[/END\\b/i,{token:\"keyword.block\"}],[/WHEN\\b/i,{token:\"keyword.choice\"}],[/THEN\\b/i,{token:\"keyword.choice\"}]]}},B=Object.freeze({__proto__:null,SELECT:N,FROM:P,WHERE:\"where\",GROUP:\"group\",ORDER:\"order\",BY:L,DESC:K,ASC:k,LIMIT:\"limit\",WITH:\"with\",AS:\"as\",SCHEMA:\"schema\",AND:\"AND\",OR:\"OR\",LOGICAL_OPERATORS:M,EQUALS:\"=\",NOT_EQUALS:\"!=\",COMPARISON_OPERATORS:b,STD_OPERATORS:D,conf:F,language:U}),_=function(e){var t=function(e){var t;return null!==(t=null==e?void 0:e.getPreviousOfType(exports.TokenType.Keyword,N))&&void 0!==t?t:null}(e);return null==t?void 0:t.getNextOfType(exports.TokenType.Keyword,P)},G=function(e){var t,o=_(e),n=null==o?void 0:o.getNextNonWhiteSpaceToken();return(null==n?void 0:n.isVariable())||(null==n?void 0:n.isKeyword())&&(null===(t=n.next)||void 0===t?void 0:t.is(exports.TokenType.Parenthesis,\"(\"))?null:n},W=function(e){var t=null==e?void 0:e.value.split(\".\");return 1===(null==t?void 0:t.length)?{table:t[0]}:2===(null==t?void 0:t.length)?{schema:t[0],table:t[1]}:null},Y={id:\"editor.action.triggerSuggest\",title:\"\"},V=new Uint8Array(16);function H(){if(!C&&!(C=\"undefined\"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!=typeof msCrypto&&\"function\"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");return C(V)}var X=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $(e){return\"string\"==typeof e&&X.test(e)}for(var Q=[],z=0;z<256;++z)Q.push((z+256).toString(16).substr(1));function j(e,t,o){var n=(e=e||{}).random||(e.rng||H)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){o=o||0;for(var s=0;s<16;++s)t[o+s]=n[s];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(Q[e[t+0]]+Q[e[t+1]]+Q[e[t+2]]+Q[e[t+3]]+\"-\"+Q[e[t+4]]+Q[e[t+5]]+\"-\"+Q[e[t+6]]+Q[e[t+7]]+\"-\"+Q[e[t+8]]+Q[e[t+9]]+\"-\"+Q[e[t+10]]+Q[e[t+11]]+Q[e[t+12]]+Q[e[t+13]]+Q[e[t+14]]+Q[e[t+15]]).toLowerCase();if(!$(o))throw TypeError(\"Stringified UUID is invalid\");return o}(n)}function Z(e){return{label:e.name,insertText:\"\".concat(\"\\\\\"+e.text).concat(J(e.args),\" \"),insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet,kind:exports.CompletionItemKind.Snippet,documentation:e.description,command:Y}}function J(e){return e?\"(\".concat(e.map((function(e,t){return\"${\".concat(t,\":\").concat(e,\"}\")})).join(\", \")).concat(\")\"):\"()\"}function ee(){return[{id:exports.StatementPosition.SelectKeyword,name:exports.StatementPosition.SelectKeyword,resolve:function(e,t,o,n){return Boolean(null===e||e.isWhiteSpace()&&null===e.previous||e.is(exports.TokenType.Keyword,N)||e.is(exports.TokenType.Keyword,N)&&null===e.previous||n||e.isIdentifier()&&(n||null===(null==e?void 0:e.previous))||e.isIdentifier()&&N.startsWith(e.value.toLowerCase()))}},{id:exports.StatementPosition.WithKeyword,name:exports.StatementPosition.WithKeyword,resolve:function(e,t,o,n){return Boolean(null===e||e.isWhiteSpace()&&null===e.previous||e.is(exports.TokenType.Keyword,\"with\")&&null===e.previous||e.isIdentifier()&&\"with\".toLowerCase().startsWith(e.value.toLowerCase()))}},{id:exports.StatementPosition.AfterSelectKeyword,name:exports.StatementPosition.AfterSelectKeyword,resolve:function(e,t,o,n){return Boolean((null==o?void 0:o.value.toLowerCase())===N)}},{id:exports.StatementPosition.AfterSelectArguments,name:exports.StatementPosition.AfterSelectArguments,resolve:function(e,t,o,n){return Boolean((null==t?void 0:t.value.toLowerCase())===N&&\",\"===(null==o?void 0:o.value))}},{id:exports.StatementPosition.AfterSelectFuncFirstArgument,name:exports.StatementPosition.AfterSelectFuncFirstArgument,resolve:function(e,t,o,n){return Boolean(((null==t?void 0:t.value.toLowerCase())===N||\"as\"===(null==t?void 0:t.value.toLowerCase()))&&((null==o?void 0:o.is(exports.TokenType.Parenthesis,\"(\"))||(null==e?void 0:e.is(exports.TokenType.Parenthesis,\"()\"))))}},{id:exports.StatementPosition.AfterWhereFunctionArgument,name:exports.StatementPosition.AfterWhereFunctionArgument,resolve:function(e,t,o,n){return Boolean((null==t?void 0:t.is(exports.TokenType.Keyword,\"where\"))&&((null==o?void 0:o.is(exports.TokenType.Parenthesis,\"(\"))||(null==e?void 0:e.is(exports.TokenType.Parenthesis,\"()\"))))}},{id:exports.StatementPosition.AfterGroupBy,name:exports.StatementPosition.AfterGroupBy,resolve:function(e,t,o,n){var s;return Boolean((null==t?void 0:t.is(exports.TokenType.Keyword,L))&&(null===(s=null==t?void 0:t.getPreviousKeyword())||void 0===s?void 0:s.is(exports.TokenType.Keyword,\"group\"))&&((null==o?void 0:o.isIdentifier())||(null==o?void 0:o.isDoubleQuotedString())||(null==o?void 0:o.is(exports.TokenType.Parenthesis,\")\"))||(null==o?void 0:o.is(exports.TokenType.Parenthesis,\"()\"))))}},{id:exports.StatementPosition.SelectAlias,name:exports.StatementPosition.SelectAlias,resolve:function(e,t,o,n){return\",\"===(null==o?void 0:o.value)&&\"as\"===(null==t?void 0:t.value.toLowerCase())}},{id:exports.StatementPosition.FromKeyword,name:exports.StatementPosition.FromKeyword,resolve:function(e,t,o,n){return Boolean((null==t?void 0:t.value.toLowerCase())===N&&\",\"!==(null==o?void 0:o.value)||((null==e?void 0:e.isKeyword())||(null==e?void 0:e.isIdentifier()))&&P.toLowerCase().startsWith(e.value.toLowerCase()))}},{id:exports.StatementPosition.AfterFromKeyword,name:exports.StatementPosition.AfterFromKeyword,resolve:function(e,t,o,n){return Boolean(!(null==e?void 0:e.value.includes(\".\"))&&(null==o?void 0:o.value.toLowerCase())===P)}},{id:exports.StatementPosition.AfterSchema,name:exports.StatementPosition.AfterSchema,resolve:function(e,t,o,n){return(null==e?void 0:e.isWhiteSpace())&&(null==e?void 0:e.next)&&(o=null==(e=null==e?void 0:e.previous)?void 0:e.getPreviousNonWhiteSpaceToken()),Boolean((null==e?void 0:e.isIdentifier())&&(null==e?void 0:e.value.endsWith(\".\"))&&(null==o?void 0:o.value.toLowerCase())===P)}},{id:exports.StatementPosition.AfterFrom,name:exports.StatementPosition.AfterFrom,resolve:function(e,t,o,n){return Boolean((null==t?void 0:t.value.toLowerCase())===P&&(null==o?void 0:o.isDoubleQuotedString())||(null==t?void 0:t.value.toLowerCase())===P&&(null==o?void 0:o.isIdentifier())||(null==t?void 0:t.value.toLowerCase())===P&&(null==o?void 0:o.isVariable()))}},{id:exports.StatementPosition.AfterTable,name:exports.StatementPosition.AfterTable,resolve:function(e,t,o,n){return Boolean((null==t?void 0:t.value.toLowerCase())===P&&((null==o?void 0:o.isVariable())||\"\"!==(null==o?void 0:o.value)&&(null==o?void 0:o.value.toLowerCase())!==P))}},{id:exports.StatementPosition.WhereKeyword,name:exports.StatementPosition.WhereKeyword,resolve:function(e,t,o,n){return Boolean(\"where\"===(null==t?void 0:t.value.toLowerCase())&&((null==o?void 0:o.isKeyword())||(null==o?void 0:o.is(exports.TokenType.Parenthesis,\"(\"))||(null==o?void 0:o.is(exports.TokenType.Operator,\"AND\"))))}},{id:exports.StatementPosition.WhereComparisonOperator,name:exports.StatementPosition.WhereComparisonOperator,resolve:function(e,t,o,n){return Boolean(\"where\"===(null==t?void 0:t.value.toLowerCase())&&!(null==o?void 0:o.getPreviousNonWhiteSpaceToken().isOperator())&&!e.is(exports.TokenType.Delimiter,\".\")&&!e.isParenthesis()&&((null==o?void 0:o.isIdentifier())||(null==o?void 0:o.isDoubleQuotedString())))}},{id:exports.StatementPosition.WhereValue,name:exports.StatementPosition.WhereValue,resolve:function(e,t,o,n){return Boolean(\"where\"===(null==t?void 0:t.value.toLowerCase())&&(null==o?void 0:o.isOperator()))}},{id:exports.StatementPosition.AfterWhereValue,name:exports.StatementPosition.AfterWhereValue,resolve:function(e,t,o,n){var s,r,i;return Boolean(\"where\"===(null==t?void 0:t.value.toLowerCase())&&(o.is(exports.TokenType.Operator,\"and\")||o.is(exports.TokenType.Operator,\"or\")||(null==o?void 0:o.isString())||(null==o?void 0:o.isNumber())||(null==o?void 0:o.is(exports.TokenType.Parenthesis,\")\"))||(null==o?void 0:o.is(exports.TokenType.Parenthesis,\"()\"))||(null==o?void 0:o.isTemplateVariable())||(null==o?void 0:o.is(exports.TokenType.IdentifierQuote))&&(null===(s=o.getPreviousNonWhiteSpaceToken())||void 0===s?void 0:s.is(exports.TokenType.Identifier))&&(null===(i=null===(r=null==o?void 0:o.getPreviousNonWhiteSpaceToken())||void 0===r?void 0:r.getPreviousNonWhiteSpaceToken())||void 0===i?void 0:i.is(exports.TokenType.IdentifierQuote))))}},{id:exports.StatementPosition.AfterGroupByKeywords,name:exports.StatementPosition.AfterGroupByKeywords,resolve:function(e,t,o,n){var s;return Boolean((null==t?void 0:t.is(exports.TokenType.Keyword,L))&&(null===(s=null==t?void 0:t.getPreviousKeyword())||void 0===s?void 0:s.is(exports.TokenType.Keyword,\"group\"))&&((null==o?void 0:o.is(exports.TokenType.Keyword,L))||(null==o?void 0:o.is(exports.TokenType.Delimiter,\",\"))))}},{id:exports.StatementPosition.AfterGroupByFunctionArgument,name:exports.StatementPosition.AfterGroupByFunctionArgument,resolve:function(e,t,o,n){var s;return Boolean((null==t?void 0:t.is(exports.TokenType.Keyword,L))&&(null===(s=null==t?void 0:t.getPreviousKeyword())||void 0===s?void 0:s.is(exports.TokenType.Keyword,\"group\"))&&((null==o?void 0:o.is(exports.TokenType.Parenthesis,\"(\"))||(null==e?void 0:e.is(exports.TokenType.Parenthesis,\"()\"))))}},{id:exports.StatementPosition.AfterOrderByKeywords,name:exports.StatementPosition.AfterOrderByKeywords,resolve:function(e,t,o,n){var s;return Boolean((null==o?void 0:o.is(exports.TokenType.Keyword,L))&&(null===(s=null==o?void 0:o.getPreviousKeyword())||void 0===s?void 0:s.is(exports.TokenType.Keyword,\"order\")))}},{id:exports.StatementPosition.AfterOrderByFunction,name:exports.StatementPosition.AfterOrderByFunction,resolve:function(e,t,o,n){var s,r;return Boolean((null==t?void 0:t.is(exports.TokenType.Keyword,L))&&(null===(s=null==t?void 0:t.getPreviousKeyword())||void 0===s?void 0:s.is(exports.TokenType.Keyword,\"order\"))&&(null==o?void 0:o.is(exports.TokenType.Parenthesis))&&(null===(r=null==o?void 0:o.getPreviousNonWhiteSpaceToken())||void 0===r?void 0:r.is(exports.TokenType.Function)))}},{id:exports.StatementPosition.AfterOrderByDirection,name:exports.StatementPosition.AfterOrderByDirection,resolve:function(e,t,o,n){return Boolean((null==t?void 0:t.is(exports.TokenType.Keyword,K))||(null==t?void 0:t.is(exports.TokenType.Keyword,k)))}},{id:exports.StatementPosition.AfterIsOperator,name:exports.StatementPosition.AfterIsOperator,resolve:function(e,t,o,n){return Boolean(null==o?void 0:o.is(exports.TokenType.Operator,\"IS\"))}},{id:exports.StatementPosition.AfterIsNotOperator,name:exports.StatementPosition.AfterIsNotOperator,resolve:function(e,t,o,n){var s;return Boolean((null==o?void 0:o.is(exports.TokenType.Operator,\"NOT\"))&&(null===(s=o.getPreviousNonWhiteSpaceToken())||void 0===s?void 0:s.is(exports.TokenType.Operator,\"IS\")))}}]}var te={logger:function(){}},oe=function(){};p.attachDebugger&&p.createLogger&&(te=p.createLogger(\"SQLEditor\"),oe=te.logger,p.attachDebugger(\"sqleditor\",void 0,te));var ne=[{id:\"$__timeFilter(dateColumn)\",name:\"$__timeFilter(dateColumn)\",text:\"$__timeFilter\",args:[\"column\"],type:exports.MacroType.Filter,description:\"Will be replaced by a time range filter using the specified column name. For example, dateColumn BETWEEN FROM_UNIXTIME(1494410783) AND FROM_UNIXTIME(1494410983)\"},{id:\"$__timeFrom()\",name:\"$__timeFrom()\",text:\"$__timeFrom\",args:[],type:exports.MacroType.Filter,description:\"Will be replaced by the start of the currently active time selection. For example, FROM_UNIXTIME(1494410783)\"},{id:\"$__timeTo()\",name:\"$__timeTo()\",text:\"$__timeTo\",args:[],type:exports.MacroType.Filter,description:\"Will be replaced by the end of the currently active time selection. For example, FROM_UNIXTIME(1494410983)\"},{id:\"$__timeGroup(dateColumn, '5m')\",name:\"$__timeGroup(dateColumn, '5m')\",text:\"$__timeGroup\",args:[\"column\",\"'5m'\"],type:exports.MacroType.Value,description:\"Will be replaced by an expression usable in GROUP BY clause. For example, *cast(cast(UNIX_TIMESTAMP(dateColumn)/(300) as signed)*300 as signed),*\"},{id:\"$__table\",name:\"$__table\",text:\"$__table\",args:[],type:exports.MacroType.Table,description:\"Will be replaced by the query table.\"},{id:\"$__column\",name:\"$__column\",text:\"$__column\",args:[],type:exports.MacroType.Column,description:\"Will be replaced by the query column.\"}];function se(e,t){var o,n,s,r={triggerCharacters:[\".\",\" \",\"$\",\",\",\"(\",\"'\"]};(null==t?void 0:t.builtinFunctions.length)&&(r.supportedFunctions=function(){return t.builtinFunctions.map((function(e){return{id:e,name:e}}))});var i=[];return(null===(o=null==t?void 0:t.comparisonOperators)||void 0===o?void 0:o.length)&&i.push.apply(i,I([],R(t.comparisonOperators.map((function(e){return{id:e.toLocaleLowerCase(),operator:e,type:exports.OperatorType.Comparison}}))),!1)),t.logicalOperators=null!==(n=t.logicalOperators)&&void 0!==n?n:t.operators,(null===(s=null==t?void 0:t.logicalOperators)||void 0===s?void 0:s.length)&&i.push.apply(i,I([],R(t.logicalOperators.map((function(e){return{id:e.toLocaleLowerCase(),operator:e,type:exports.OperatorType.Logical}}))),!1)),r.supportedOperators=function(){return i},r.supportedMacros=function(){return ne},r}var re={id:\"standardSql\",extensions:[\".sql\"],aliases:[\"sql\"],mimetypes:[],loader:function(){return Promise.resolve().then((function(){return B}))},completionProvider:se},ie=new Map,le=new Map,ae=function(e,t,o){return q(void 0,void 0,void 0,(function(){var n,s,r,i,l,a,u,p;return T(this,(function(f){switch(f.label){case 0:return[4,(n=function(e,t){if(\"sql\"!==(null==t?void 0:t.id)&&!t.loader){oe(\"Loading language '\".concat(null==t?void 0:t.id,\"' from Monaco registry\"),!1);var o=e.languages.getLanguages().find((function(e){return e.id===(null==t?void 0:t.id)}));if(!o)throw Error(\"Unknown Monaco language \".concat(null==t?void 0:t.id));return m(m({completionProvider:se},o),t)}return m(m({},re),t)}(e,t)).loader(e)];case 1:return s=f.sent(),r=s.language,i=s.conf,e.languages.register({id:o}),e.languages.setMonarchTokensProvider(o,m({},r)),e.languages.setLanguageConfiguration(o,m({},i)),n.formatter&&e.languages.registerDocumentFormattingEditProvider(o,{provideDocumentFormattingEdits:function(e){var o=t.formatter(e.getValue());return[{range:e.getFullModelRange(),text:o}]}}),n.completionProvider&&(l=n.completionProvider(e,r),function(e,t,o){var n,s,r,i,l,a,u,p,f,g,c,E=this;ie.has(e)||function(e){ie.has(e)||ie.set(e,{functions:new d.Registry,operators:new d.Registry,suggestionKinds:new d.Registry(w),positionResolvers:new d.Registry(ee),macros:new d.Registry});ie.get(e)}(e);var A=ie.get(e);le.has(t)||le.set(t,new d.Registry((x=A.functions,h=A.operators,v=A.macros,function(){return[{id:exports.SuggestionKind.SelectKeyword,name:exports.SuggestionKind.SelectKeyword,suggestions:function(e,t){return Promise.resolve([{label:\"SELECT <column>\",insertText:\"SELECT $0\",insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet,kind:exports.CompletionItemKind.Snippet,command:Y,sortText:exports.CompletionItemPriority.Medium},{label:\"SELECT <column> FROM <table>\",insertText:\"SELECT $2 FROM $1\",insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet,kind:exports.CompletionItemKind.Snippet,command:Y,sortText:exports.CompletionItemPriority.Medium}])}},{id:exports.SuggestionKind.TemplateVariables,name:exports.SuggestionKind.TemplateVariables,suggestions:function(e,t){var o=y.getTemplateSrv();return o?Promise.resolve(o.getVariables().map((function(e){var t=\"$\".concat(e.name),n=o.replace(t);return{label:t,detail:\"(Template Variable) \".concat(n),kind:exports.CompletionItemKind.Snippet,documentation:\"(Template Variable) \".concat(n),insertText:\"\\\\$\".concat(e.name,\" \"),insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet,command:Y,sortText:exports.CompletionItemPriority.Low}}))):Promise.resolve([])}},{id:exports.SuggestionKind.SelectMacro,name:exports.SuggestionKind.SelectMacro,suggestions:function(e,t){return Promise.resolve(I([],R(v.list().filter((function(e){return e.type===exports.MacroType.Value||e.type===exports.MacroType.Column})).map(Z)),!1))}},{id:exports.SuggestionKind.TableMacro,name:exports.SuggestionKind.TableMacro,suggestions:function(e,t){return Promise.resolve(I([],R(v.list().filter((function(e){return e.type===exports.MacroType.Table})).map(Z)),!1))}},{id:exports.SuggestionKind.GroupMacro,name:exports.SuggestionKind.GroupMacro,suggestions:function(e,t){return Promise.resolve(I([],R(v.list().filter((function(e){return e.type===exports.MacroType.Group})).map(Z)),!1))}},{id:exports.SuggestionKind.FilterMacro,name:exports.SuggestionKind.FilterMacro,suggestions:function(e,t){return Promise.resolve(I([],R(v.list().filter((function(e){return e.type===exports.MacroType.Filter})).map(Z)),!1))}},{id:exports.SuggestionKind.WithKeyword,name:exports.SuggestionKind.WithKeyword,suggestions:function(e,t){return Promise.resolve([{label:\"WITH <alias> AS ( ... )\",insertText:\"WITH $1  AS ( $2 )\",insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet,kind:exports.CompletionItemKind.Snippet,command:Y,sortText:exports.CompletionItemPriority.Medium}])}},{id:exports.SuggestionKind.StarWildCard,name:exports.SuggestionKind.StarWildCard,suggestions:function(e,t){return Promise.resolve([{label:\"*\",insertText:\"* $0\",insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet,kind:exports.CompletionItemKind.Field,command:Y,sortText:exports.CompletionItemPriority.High}])}},{id:exports.SuggestionKind.FunctionsWithArguments,name:exports.SuggestionKind.FunctionsWithArguments,suggestions:function(e,t){return Promise.resolve(I([],R(x.list().map((function(e){return{label:e.name,insertText:\"\".concat(e.name,\"($0)\"),documentation:e.description,insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet,kind:exports.CompletionItemKind.Function,command:Y,sortText:exports.CompletionItemPriority.MediumLow}}))),!1))}},{id:exports.SuggestionKind.FunctionsWithoutArguments,name:exports.SuggestionKind.FunctionsWithoutArguments,suggestions:function(e,t){return Promise.resolve(I([],R(x.list().map((function(e){return{label:e.name,insertText:\"\".concat(e.name,\"()\"),documentation:e.description,insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet,kind:exports.CompletionItemKind.Function,command:Y,sortText:exports.CompletionItemPriority.MediumHigh}}))),!1))}},{id:exports.SuggestionKind.FromKeyword,name:exports.SuggestionKind.FromKeyword,suggestions:function(e,t){return Promise.resolve([{label:\"FROM\",insertText:\"FROM $0\",command:Y,insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet,kind:exports.CompletionItemKind.Keyword}])}},{id:exports.SuggestionKind.Schemas,name:exports.SuggestionKind.Schemas,suggestions:function(e,t){return Promise.resolve([])}},{id:exports.SuggestionKind.Tables,name:exports.SuggestionKind.Tables,suggestions:function(e,t){return Promise.resolve([])}},{id:exports.SuggestionKind.Columns,name:exports.SuggestionKind.Columns,suggestions:function(e,t){return Promise.resolve([])}},{id:exports.SuggestionKind.LogicalOperators,name:exports.SuggestionKind.LogicalOperators,suggestions:function(e,t){return Promise.resolve(h.list().filter((function(e){return e.type===exports.OperatorType.Logical})).map((function(e){return{label:e.operator,insertText:\"\".concat(e.operator,\" \"),documentation:e.description,command:Y,sortText:exports.CompletionItemPriority.MediumHigh,kind:exports.CompletionItemKind.Operator}})))}},{id:exports.SuggestionKind.WhereKeyword,name:exports.SuggestionKind.WhereKeyword,suggestions:function(e,t){return Promise.resolve([{label:\"WHERE\",insertText:\"WHERE \",command:Y,sortText:exports.CompletionItemPriority.MediumHigh,kind:exports.CompletionItemKind.Keyword}])}},{id:exports.SuggestionKind.ComparisonOperators,name:exports.SuggestionKind.ComparisonOperators,suggestions:function(e,t){return Promise.resolve(I(I([],R(h.list().filter((function(e){return e.type===exports.OperatorType.Comparison})).map((function(e){return{label:e.operator,insertText:\"\".concat(e.operator,\" \"),documentation:e.description,command:Y,sortText:exports.CompletionItemPriority.MediumHigh,kind:exports.CompletionItemKind.Operator}}))),!1),[{label:\"IN (...)\",insertText:\"IN ( $0 )\",command:Y,sortText:exports.CompletionItemPriority.Medium,kind:exports.CompletionItemKind.Operator,insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet},{label:\"NOT IN (...)\",insertText:\"NOT IN ( $0 )\",command:Y,sortText:exports.CompletionItemPriority.Medium,kind:exports.CompletionItemKind.Operator,insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet},{label:\"IS\",insertText:\"IS\",command:Y,sortText:exports.CompletionItemPriority.Medium,kind:exports.CompletionItemKind.Operator},{label:\"IS NOT\",insertText:\"IS NOT\",command:Y,sortText:exports.CompletionItemPriority.Medium,kind:exports.CompletionItemKind.Operator}],!1))}},{id:exports.SuggestionKind.GroupByKeywords,name:exports.SuggestionKind.GroupByKeywords,suggestions:function(e,t){return Promise.resolve([{label:\"GROUP BY\",insertText:\"GROUP BY \",command:Y,sortText:exports.CompletionItemPriority.MediumHigh,kind:exports.CompletionItemKind.Keyword}])}},{id:exports.SuggestionKind.OrderByKeywords,name:exports.SuggestionKind.OrderByKeywords,suggestions:function(e,t){return Promise.resolve([{label:\"ORDER BY\",insertText:\"ORDER BY \",command:Y,sortText:exports.CompletionItemPriority.Medium,kind:exports.CompletionItemKind.Keyword},{label:\"ORDER BY(ascending)\",insertText:\"ORDER BY $1 ASC \",command:Y,sortText:exports.CompletionItemPriority.MediumLow,kind:exports.CompletionItemKind.Snippet,insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet},{label:\"ORDER BY(descending)\",insertText:\"ORDER BY $1 DESC\",command:Y,sortText:exports.CompletionItemPriority.MediumLow,kind:exports.CompletionItemKind.Snippet,insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet}])}},{id:exports.SuggestionKind.LimitKeyword,name:exports.SuggestionKind.LimitKeyword,suggestions:function(e,t){return Promise.resolve([{label:\"LIMIT\",insertText:\"LIMIT \",command:Y,sortText:exports.CompletionItemPriority.MediumLow,kind:exports.CompletionItemKind.Keyword}])}},{id:exports.SuggestionKind.SortOrderDirectionKeyword,name:exports.SuggestionKind.SortOrderDirectionKeyword,suggestions:function(e,t){return Promise.resolve([k,K].map((function(e){return{label:e,insertText:\"\".concat(e,\" \"),command:Y,kind:exports.CompletionItemKind.Keyword}})))}},{id:exports.SuggestionKind.NotKeyword,name:exports.SuggestionKind.NotKeyword,suggestions:function(){return Promise.resolve([{label:\"NOT\",insertText:\"NOT\",command:Y,kind:exports.CompletionItemKind.Keyword,sortText:exports.CompletionItemPriority.High}])}},{id:exports.SuggestionKind.BoolValues,name:exports.SuggestionKind.BoolValues,suggestions:function(){return Promise.resolve([\"TRUE\",\"FALSE\"].map((function(e){return{label:e,insertText:\"\".concat(e),command:Y,kind:exports.CompletionItemKind.Keyword,sortText:exports.CompletionItemPriority.Medium}})))}},{id:exports.SuggestionKind.NullValue,name:exports.SuggestionKind.NullValue,suggestions:function(){return Promise.resolve([\"NULL\"].map((function(e){return{label:e,insertText:\"\".concat(e),command:Y,kind:exports.CompletionItemKind.Keyword,sortText:exports.CompletionItemPriority.Low}})))}}]})));var x,h,v;var O=le.get(t);if(o.supportedFunctions)try{for(var C=S(o.supportedFunctions()),N=C.next();!N.done;N=C.next()){var P=N.value;A.functions.getIfExists(P.id)||A.functions.register(P)}}catch(e){n={error:e}}finally{try{N&&!N.done&&(s=C.return)&&s.call(C)}finally{if(n)throw n.error}}if(o.supportedOperators)try{for(var L=S(o.supportedOperators()),M=L.next();!M.done;M=L.next()){var b=M.value;A.operators.getIfExists(b.id)||A.operators.register(m(m({},b),{name:b.id}))}}catch(e){r={error:e}}finally{try{M&&!M.done&&(i=L.return)&&i.call(L)}finally{if(r)throw r.error}}if(o.supportedMacros)try{for(var D=S(o.supportedMacros()),F=D.next();!F.done;F=D.next()){var U=F.value;A.macros.getIfExists(U.id)||A.macros.register(m(m({},U),{name:U.id}))}}catch(e){l={error:e}}finally{try{F&&!F.done&&(a=D.return)&&a.call(D)}finally{if(l)throw l.error}}if(o.customStatementPlacement){var B=function(e){var t=A.positionResolvers.getIfExists(e.id);if(t){var o=t.resolve;t.resolve=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var s=e.resolve.apply(e,I([],R(t),!1));if(e.overrideDefault)return s;var r=o.apply(void 0,I([],R(t),!1));return r||s}}else A.positionResolvers.register(m(m({},e),{id:e.id,name:e.id})),A.suggestionKinds.register({id:e.id,name:e.id,kind:[]})};try{for(var _=S(o.customStatementPlacement()),V=_.next();!V.done;V=_.next()){var H=V.value;B(H)}}catch(e){u={error:e}}finally{try{V&&!V.done&&(p=_.return)&&p.call(_)}finally{if(u)throw u.error}}}if(o.customSuggestionKinds){var X=function(e){if(null===(c=e.applyTo)||void 0===c||c.forEach((function(t){var o=A.suggestionKinds.getIfExists(t);o&&-1===o.kind.indexOf(e.id)&&o.kind.push(e.id)})),e.overrideDefault){var t=O.get(e.id);if(void 0!==t)return t.suggestions=e.suggestionsResolver,\"continue\"}O.register({id:e.id,name:e.id,suggestions:e.suggestionsResolver})};try{for(var $=S(o.customSuggestionKinds()),Q=$.next();!Q.done;Q=$.next()){var z=Q.value;X(z)}}catch(e){f={error:e}}finally{try{Q&&!Q.done&&(g=$.return)&&g.call($)}finally{if(f)throw f.error}}}if(o.schemas){var j=(te=O.get(exports.SuggestionKind.Schemas)).suggestions;te.suggestions=function(e,t){return q(E,void 0,void 0,(function(){var n,s,r;return T(this,(function(i){switch(i.label){case 0:return[4,j(e,t)];case 1:return n=i.sent(),[4,o.schemas.resolve()];case 2:return s=i.sent(),r=s.map((function(e){var t;return{label:e.name,insertText:\"\".concat(null!==(t=e.completion)&&void 0!==t?t:e.name,\".\"),command:Y,kind:exports.CompletionItemKind.Module,sortText:exports.CompletionItemPriority.High}})),[2,I(I([],R(n),!1),R(r),!1)]}}))}))}}if(o.tables){var J=(te=O.get(exports.SuggestionKind.Tables)).suggestions;te.suggestions=function(e,t){return q(E,void 0,void 0,(function(){var n,s,r,i,l,a,u;return T(this,(function(p){switch(p.label){case 0:return[4,J(e,t)];case 1:return n=p.sent(),s=G(e.currentToken),r=null!==(u=null===(a=o.tables)||void 0===a?void 0:a.parseName)&&void 0!==u?u:W,i=r(s),[4,o.tables.resolve(i)];case 2:return l=p.sent().map((function(e){var t;return{label:e.name,insertText:\"\".concat(null!==(t=e.completion)&&void 0!==t?t:e.name).concat(e.completion===e.name?\" $0\":\"\"),insertTextRules:exports.CompletionItemInsertTextRule.InsertAsSnippet,command:Y,kind:exports.CompletionItemKind.Field,sortText:exports.CompletionItemPriority.MediumHigh}})),[2,I(I([],R(n),!1),R(l),!1)]}}))}))}}if(o.columns){var te,oe=(te=O.get(exports.SuggestionKind.Columns)).suggestions;te.suggestions=function(e,t){return q(E,void 0,void 0,(function(){var n,s,r,i,l,a,u,p,f;return T(this,(function(g){switch(g.label){case 0:return[4,oe(e,t)];case 1:return n=g.sent(),s=G(e.currentToken),i=null!==(p=null===(u=o.tables)||void 0===u?void 0:u.parseName)&&void 0!==p?p:W,s&&s.value&&(r=i(s)),l=[],r?[4,null===(f=o.columns)||void 0===f?void 0:f.resolve(r)]:[3,3];case 2:a=g.sent(),l=a?a.map((function(e){var t;return{label:e.name,insertText:null!==(t=e.completion)&&void 0!==t?t:e.name,kind:exports.CompletionItemKind.Field,sortText:exports.CompletionItemPriority.High,detail:e.type,documentation:e.description}})):[],g.label=3;case 3:return[2,I(I([],R(n),!1),R(l),!1)]}}))}))}}}(t.id,o,l),a=ie.get(t.id),u=le.get(o),p=function(t,n,s,r){return q(void 0,void 0,void 0,(function(){var s,r,i,l;return T(this,(function(p){switch(p.label){case 0:return s=O(e,t,n,o),r=A(s,a.positionResolvers),i=function(e,t){for(var o=[],n=0;n<e.length;n++){var s=t.getIfExists(e[n]);s&&(o=o.concat(s.kind))}return o}(r,a.suggestionKinds),oe(\"Statement position\",!1,r),oe(\"Suggestion kinds\",!1,i),l={position:n,currentToken:s,statementPosition:r,kind:i,range:e.Range.fromPositions(n)},[4,x(e,s,i,l,u)];case 1:return[2,{suggestions:p.sent()}]}}))}))},e.languages.registerCompletionItemProvider(o,m(m({},l),{provideCompletionItems:p}))),[2]}}))}))};var ue={testData:Object.freeze({__proto__:null,singleLineFullQuery:{query:'SELECT column1, FROM table1 WHERE column1 = \"value1\" GROUP BY column1 ORDER BY column1 DESC LIMIT 10',tokens:[[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:6,type:\"white.sql\",language:\"sql\"},{offset:7,type:\"identifier.sql\",language:\"sql\"},{offset:14,type:\"delimiter.sql\",language:\"sql\"},{offset:15,type:\"white.sql\",language:\"sql\"},{offset:16,type:\"keyword.sql\",language:\"sql\"},{offset:20,type:\"white.sql\",language:\"sql\"},{offset:21,type:\"identifier.sql\",language:\"sql\"},{offset:27,type:\"white.sql\",language:\"sql\"},{offset:28,type:\"keyword.sql\",language:\"sql\"},{offset:33,type:\"white.sql\",language:\"sql\"},{offset:34,type:\"identifier.sql\",language:\"sql\"},{offset:41,type:\"white.sql\",language:\"sql\"},{offset:42,type:\"operator.sql\",language:\"sql\"},{offset:43,type:\"white.sql\",language:\"sql\"},{offset:44,type:\"identifier.quote.sql\",language:\"sql\"},{offset:45,type:\"identifier.sql\",language:\"sql\"},{offset:51,type:\"identifier.quote.sql\",language:\"sql\"},{offset:52,type:\"white.sql\",language:\"sql\"},{offset:53,type:\"keyword.sql\",language:\"sql\"},{offset:58,type:\"white.sql\",language:\"sql\"},{offset:59,type:\"keyword.sql\",language:\"sql\"},{offset:61,type:\"white.sql\",language:\"sql\"},{offset:62,type:\"identifier.sql\",language:\"sql\"},{offset:69,type:\"white.sql\",language:\"sql\"},{offset:70,type:\"keyword.sql\",language:\"sql\"},{offset:75,type:\"white.sql\",language:\"sql\"},{offset:76,type:\"keyword.sql\",language:\"sql\"},{offset:78,type:\"white.sql\",language:\"sql\"},{offset:79,type:\"identifier.sql\",language:\"sql\"},{offset:86,type:\"white.sql\",language:\"sql\"},{offset:87,type:\"keyword.sql\",language:\"sql\"},{offset:91,type:\"white.sql\",language:\"sql\"},{offset:92,type:\"keyword.sql\",language:\"sql\"},{offset:97,type:\"white.sql\",language:\"sql\"},{offset:98,type:\"number.sql\",language:\"sql\"},{offset:100,type:\"delimiter.sql\",language:\"sql\"}]]},singleLineFullQueryWithAggregation:{query:'SELECT count(column1), FROM table1 WHERE column1 = \"value1\" GROUP BY column1 ORDER BY column1 DESC LIMIT 10;',tokens:[[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:6,type:\"white.sql\",language:\"sql\"},{offset:7,type:\"predefined.sql\",language:\"sql\"},{offset:12,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:13,type:\"identifier.sql\",language:\"sql\"},{offset:20,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:21,type:\"delimiter.sql\",language:\"sql\"},{offset:22,type:\"white.sql\",language:\"sql\"},{offset:23,type:\"keyword.sql\",language:\"sql\"},{offset:27,type:\"white.sql\",language:\"sql\"},{offset:28,type:\"identifier.sql\",language:\"sql\"},{offset:34,type:\"white.sql\",language:\"sql\"},{offset:35,type:\"keyword.sql\",language:\"sql\"},{offset:40,type:\"white.sql\",language:\"sql\"},{offset:41,type:\"identifier.sql\",language:\"sql\"},{offset:48,type:\"white.sql\",language:\"sql\"},{offset:49,type:\"operator.sql\",language:\"sql\"},{offset:50,type:\"white.sql\",language:\"sql\"},{offset:51,type:\"identifier.quote.sql\",language:\"sql\"},{offset:52,type:\"identifier.sql\",language:\"sql\"},{offset:58,type:\"identifier.quote.sql\",language:\"sql\"},{offset:59,type:\"white.sql\",language:\"sql\"},{offset:60,type:\"keyword.sql\",language:\"sql\"},{offset:65,type:\"white.sql\",language:\"sql\"},{offset:66,type:\"keyword.sql\",language:\"sql\"},{offset:68,type:\"white.sql\",language:\"sql\"},{offset:69,type:\"identifier.sql\",language:\"sql\"},{offset:76,type:\"white.sql\",language:\"sql\"},{offset:77,type:\"keyword.sql\",language:\"sql\"},{offset:82,type:\"white.sql\",language:\"sql\"},{offset:83,type:\"keyword.sql\",language:\"sql\"},{offset:85,type:\"white.sql\",language:\"sql\"},{offset:86,type:\"identifier.sql\",language:\"sql\"},{offset:93,type:\"white.sql\",language:\"sql\"},{offset:94,type:\"keyword.sql\",language:\"sql\"},{offset:98,type:\"white.sql\",language:\"sql\"},{offset:99,type:\"keyword.sql\",language:\"sql\"},{offset:104,type:\"white.sql\",language:\"sql\"},{offset:105,type:\"number.sql\",language:\"sql\"},{offset:107,type:\"delimiter.sql\",language:\"sql\"}]]},multiLineFullQuery:{query:'SELECT column1,  \\n  FROM table1 \\n  \\n  WHERE column1 = \"value1\" \\n  GROUP BY column1 ORDER BY column1 DESC \\n  LIMIT 10;',tokens:[[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:6,type:\"white.sql\",language:\"sql\"},{offset:7,type:\"identifier.sql\",language:\"sql\"},{offset:14,type:\"delimiter.sql\",language:\"sql\"},{offset:15,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:4,type:\"white.sql\",language:\"sql\"},{offset:5,type:\"identifier.sql\",language:\"sql\"},{offset:11,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:5,type:\"white.sql\",language:\"sql\"},{offset:6,type:\"identifier.sql\",language:\"sql\"},{offset:13,type:\"white.sql\",language:\"sql\"},{offset:14,type:\"operator.sql\",language:\"sql\"},{offset:15,type:\"white.sql\",language:\"sql\"},{offset:16,type:\"identifier.quote.sql\",language:\"sql\"},{offset:17,type:\"identifier.sql\",language:\"sql\"},{offset:23,type:\"identifier.quote.sql\",language:\"sql\"},{offset:24,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:5,type:\"white.sql\",language:\"sql\"},{offset:6,type:\"keyword.sql\",language:\"sql\"},{offset:8,type:\"white.sql\",language:\"sql\"},{offset:9,type:\"identifier.sql\",language:\"sql\"},{offset:16,type:\"white.sql\",language:\"sql\"},{offset:17,type:\"keyword.sql\",language:\"sql\"},{offset:22,type:\"white.sql\",language:\"sql\"},{offset:23,type:\"keyword.sql\",language:\"sql\"},{offset:25,type:\"white.sql\",language:\"sql\"},{offset:26,type:\"identifier.sql\",language:\"sql\"},{offset:33,type:\"white.sql\",language:\"sql\"},{offset:34,type:\"keyword.sql\",language:\"sql\"},{offset:38,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:5,type:\"white.sql\",language:\"sql\"},{offset:6,type:\"number.sql\",language:\"sql\"},{offset:8,type:\"delimiter.sql\",language:\"sql\"}]]},multiLineFullQueryWithAggregation:{query:'SELECT count(column1),  \\n  FROM table1 \\n  \\n  WHERE column1 = \"value1\" \\n  GROUP BY column1 ORDER BY column1 DESC \\n  LIMIT 10;',tokens:[[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:6,type:\"white.sql\",language:\"sql\"},{offset:7,type:\"predefined.sql\",language:\"sql\"},{offset:12,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:13,type:\"identifier.sql\",language:\"sql\"},{offset:20,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:21,type:\"delimiter.sql\",language:\"sql\"},{offset:22,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:4,type:\"white.sql\",language:\"sql\"},{offset:5,type:\"identifier.sql\",language:\"sql\"},{offset:11,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:5,type:\"white.sql\",language:\"sql\"},{offset:6,type:\"identifier.sql\",language:\"sql\"},{offset:13,type:\"white.sql\",language:\"sql\"},{offset:14,type:\"operator.sql\",language:\"sql\"},{offset:15,type:\"white.sql\",language:\"sql\"},{offset:16,type:\"identifier.quote.sql\",language:\"sql\"},{offset:17,type:\"identifier.sql\",language:\"sql\"},{offset:23,type:\"identifier.quote.sql\",language:\"sql\"},{offset:24,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:5,type:\"white.sql\",language:\"sql\"},{offset:6,type:\"keyword.sql\",language:\"sql\"},{offset:8,type:\"white.sql\",language:\"sql\"},{offset:9,type:\"identifier.sql\",language:\"sql\"},{offset:16,type:\"white.sql\",language:\"sql\"},{offset:17,type:\"keyword.sql\",language:\"sql\"},{offset:22,type:\"white.sql\",language:\"sql\"},{offset:23,type:\"keyword.sql\",language:\"sql\"},{offset:25,type:\"white.sql\",language:\"sql\"},{offset:26,type:\"identifier.sql\",language:\"sql\"},{offset:33,type:\"white.sql\",language:\"sql\"},{offset:34,type:\"keyword.sql\",language:\"sql\"},{offset:38,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:5,type:\"white.sql\",language:\"sql\"},{offset:6,type:\"number.sql\",language:\"sql\"},{offset:8,type:\"delimiter.sql\",language:\"sql\"}]]},singleLineEmptyQuery:{query:\"\",tokens:[]},singleLineTwoQueries:{query:'SELECT column1, FROM table1 WHERE column1 = \"value1\" GROUP BY column1 ORDER BY column1 DESC LIMIT 10; SELECT column2, FROM table2 WHERE column2 = \"value2\" GROUP BY column1 ORDER BY column2 DESC LIMIT 10;',tokens:[[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:6,type:\"white.sql\",language:\"sql\"},{offset:7,type:\"identifier.sql\",language:\"sql\"},{offset:14,type:\"delimiter.sql\",language:\"sql\"},{offset:15,type:\"white.sql\",language:\"sql\"},{offset:16,type:\"keyword.sql\",language:\"sql\"},{offset:20,type:\"white.sql\",language:\"sql\"},{offset:21,type:\"identifier.sql\",language:\"sql\"},{offset:27,type:\"white.sql\",language:\"sql\"},{offset:28,type:\"keyword.sql\",language:\"sql\"},{offset:33,type:\"white.sql\",language:\"sql\"},{offset:34,type:\"identifier.sql\",language:\"sql\"},{offset:41,type:\"white.sql\",language:\"sql\"},{offset:42,type:\"operator.sql\",language:\"sql\"},{offset:43,type:\"white.sql\",language:\"sql\"},{offset:44,type:\"identifier.quote.sql\",language:\"sql\"},{offset:45,type:\"identifier.sql\",language:\"sql\"},{offset:51,type:\"identifier.quote.sql\",language:\"sql\"},{offset:52,type:\"white.sql\",language:\"sql\"},{offset:53,type:\"keyword.sql\",language:\"sql\"},{offset:58,type:\"white.sql\",language:\"sql\"},{offset:59,type:\"keyword.sql\",language:\"sql\"},{offset:61,type:\"white.sql\",language:\"sql\"},{offset:62,type:\"identifier.sql\",language:\"sql\"},{offset:69,type:\"white.sql\",language:\"sql\"},{offset:70,type:\"keyword.sql\",language:\"sql\"},{offset:75,type:\"white.sql\",language:\"sql\"},{offset:76,type:\"keyword.sql\",language:\"sql\"},{offset:78,type:\"white.sql\",language:\"sql\"},{offset:79,type:\"identifier.sql\",language:\"sql\"},{offset:86,type:\"white.sql\",language:\"sql\"},{offset:87,type:\"keyword.sql\",language:\"sql\"},{offset:91,type:\"white.sql\",language:\"sql\"},{offset:92,type:\"keyword.sql\",language:\"sql\"},{offset:97,type:\"white.sql\",language:\"sql\"},{offset:98,type:\"number.sql\",language:\"sql\"},{offset:100,type:\"delimiter.sql\",language:\"sql\"},{offset:101,type:\"white.sql\",language:\"sql\"},{offset:102,type:\"keyword.sql\",language:\"sql\"},{offset:108,type:\"white.sql\",language:\"sql\"},{offset:109,type:\"identifier.sql\",language:\"sql\"},{offset:116,type:\"delimiter.sql\",language:\"sql\"},{offset:117,type:\"white.sql\",language:\"sql\"},{offset:118,type:\"keyword.sql\",language:\"sql\"},{offset:122,type:\"white.sql\",language:\"sql\"},{offset:123,type:\"identifier.sql\",language:\"sql\"},{offset:129,type:\"white.sql\",language:\"sql\"},{offset:130,type:\"keyword.sql\",language:\"sql\"},{offset:135,type:\"white.sql\",language:\"sql\"},{offset:136,type:\"identifier.sql\",language:\"sql\"},{offset:143,type:\"white.sql\",language:\"sql\"},{offset:144,type:\"operator.sql\",language:\"sql\"},{offset:145,type:\"white.sql\",language:\"sql\"},{offset:146,type:\"identifier.quote.sql\",language:\"sql\"},{offset:147,type:\"identifier.sql\",language:\"sql\"},{offset:153,type:\"identifier.quote.sql\",language:\"sql\"},{offset:154,type:\"white.sql\",language:\"sql\"},{offset:155,type:\"keyword.sql\",language:\"sql\"},{offset:160,type:\"white.sql\",language:\"sql\"},{offset:161,type:\"keyword.sql\",language:\"sql\"},{offset:163,type:\"white.sql\",language:\"sql\"},{offset:164,type:\"identifier.sql\",language:\"sql\"},{offset:171,type:\"white.sql\",language:\"sql\"},{offset:172,type:\"keyword.sql\",language:\"sql\"},{offset:177,type:\"white.sql\",language:\"sql\"},{offset:178,type:\"keyword.sql\",language:\"sql\"},{offset:180,type:\"white.sql\",language:\"sql\"},{offset:181,type:\"identifier.sql\",language:\"sql\"},{offset:188,type:\"white.sql\",language:\"sql\"},{offset:189,type:\"keyword.sql\",language:\"sql\"},{offset:193,type:\"white.sql\",language:\"sql\"},{offset:194,type:\"keyword.sql\",language:\"sql\"},{offset:199,type:\"white.sql\",language:\"sql\"},{offset:200,type:\"number.sql\",language:\"sql\"},{offset:202,type:\"delimiter.sql\",language:\"sql\"}]]},singleLineTwoQueriesWithAggregation:{query:'SELECT count(column1), FROM table1 WHERE column1 = \"value1\" GROUP BY column1 ORDER BY column1 DESC LIMIT 10; SELECT count(column2), FROM table2 WHERE column2 = \"value2\" GROUP BY column1 ORDER BY column2 DESC LIMIT 10;',tokens:[[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:6,type:\"white.sql\",language:\"sql\"},{offset:7,type:\"predefined.sql\",language:\"sql\"},{offset:12,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:13,type:\"identifier.sql\",language:\"sql\"},{offset:20,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:21,type:\"delimiter.sql\",language:\"sql\"},{offset:22,type:\"white.sql\",language:\"sql\"},{offset:23,type:\"keyword.sql\",language:\"sql\"},{offset:27,type:\"white.sql\",language:\"sql\"},{offset:28,type:\"identifier.sql\",language:\"sql\"},{offset:34,type:\"white.sql\",language:\"sql\"},{offset:35,type:\"keyword.sql\",language:\"sql\"},{offset:40,type:\"white.sql\",language:\"sql\"},{offset:41,type:\"identifier.sql\",language:\"sql\"},{offset:48,type:\"white.sql\",language:\"sql\"},{offset:49,type:\"operator.sql\",language:\"sql\"},{offset:50,type:\"white.sql\",language:\"sql\"},{offset:51,type:\"identifier.quote.sql\",language:\"sql\"},{offset:52,type:\"identifier.sql\",language:\"sql\"},{offset:58,type:\"identifier.quote.sql\",language:\"sql\"},{offset:59,type:\"white.sql\",language:\"sql\"},{offset:60,type:\"keyword.sql\",language:\"sql\"},{offset:65,type:\"white.sql\",language:\"sql\"},{offset:66,type:\"keyword.sql\",language:\"sql\"},{offset:68,type:\"white.sql\",language:\"sql\"},{offset:69,type:\"identifier.sql\",language:\"sql\"},{offset:76,type:\"white.sql\",language:\"sql\"},{offset:77,type:\"keyword.sql\",language:\"sql\"},{offset:82,type:\"white.sql\",language:\"sql\"},{offset:83,type:\"keyword.sql\",language:\"sql\"},{offset:85,type:\"white.sql\",language:\"sql\"},{offset:86,type:\"identifier.sql\",language:\"sql\"},{offset:93,type:\"white.sql\",language:\"sql\"},{offset:94,type:\"keyword.sql\",language:\"sql\"},{offset:98,type:\"white.sql\",language:\"sql\"},{offset:99,type:\"keyword.sql\",language:\"sql\"},{offset:104,type:\"white.sql\",language:\"sql\"},{offset:105,type:\"number.sql\",language:\"sql\"},{offset:107,type:\"delimiter.sql\",language:\"sql\"},{offset:108,type:\"white.sql\",language:\"sql\"},{offset:109,type:\"keyword.sql\",language:\"sql\"},{offset:115,type:\"white.sql\",language:\"sql\"},{offset:116,type:\"predefined.sql\",language:\"sql\"},{offset:121,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:122,type:\"identifier.sql\",language:\"sql\"},{offset:129,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:130,type:\"delimiter.sql\",language:\"sql\"},{offset:131,type:\"white.sql\",language:\"sql\"},{offset:132,type:\"keyword.sql\",language:\"sql\"},{offset:136,type:\"white.sql\",language:\"sql\"},{offset:137,type:\"identifier.sql\",language:\"sql\"},{offset:143,type:\"white.sql\",language:\"sql\"},{offset:144,type:\"keyword.sql\",language:\"sql\"},{offset:149,type:\"white.sql\",language:\"sql\"},{offset:150,type:\"identifier.sql\",language:\"sql\"},{offset:157,type:\"white.sql\",language:\"sql\"},{offset:158,type:\"operator.sql\",language:\"sql\"},{offset:159,type:\"white.sql\",language:\"sql\"},{offset:160,type:\"identifier.quote.sql\",language:\"sql\"},{offset:161,type:\"identifier.sql\",language:\"sql\"},{offset:167,type:\"identifier.quote.sql\",language:\"sql\"},{offset:168,type:\"white.sql\",language:\"sql\"},{offset:169,type:\"keyword.sql\",language:\"sql\"},{offset:174,type:\"white.sql\",language:\"sql\"},{offset:175,type:\"keyword.sql\",language:\"sql\"},{offset:177,type:\"white.sql\",language:\"sql\"},{offset:178,type:\"identifier.sql\",language:\"sql\"},{offset:185,type:\"white.sql\",language:\"sql\"},{offset:186,type:\"keyword.sql\",language:\"sql\"},{offset:191,type:\"white.sql\",language:\"sql\"},{offset:192,type:\"keyword.sql\",language:\"sql\"},{offset:194,type:\"white.sql\",language:\"sql\"},{offset:195,type:\"identifier.sql\",language:\"sql\"},{offset:202,type:\"white.sql\",language:\"sql\"},{offset:203,type:\"keyword.sql\",language:\"sql\"},{offset:207,type:\"white.sql\",language:\"sql\"},{offset:208,type:\"keyword.sql\",language:\"sql\"},{offset:213,type:\"white.sql\",language:\"sql\"},{offset:214,type:\"number.sql\",language:\"sql\"},{offset:216,type:\"delimiter.sql\",language:\"sql\"}]]},singleLineMultipleColumns:{query:'SELECT count(column1), column2 FROM table1 WHERE column1 = \"value1\" GROUP BY column1 ORDER BY column1, avg(column2) DESC LIMIT 10;',tokens:[[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:6,type:\"white.sql\",language:\"sql\"},{offset:7,type:\"predefined.sql\",language:\"sql\"},{offset:12,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:13,type:\"identifier.sql\",language:\"sql\"},{offset:20,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:21,type:\"delimiter.sql\",language:\"sql\"},{offset:22,type:\"white.sql\",language:\"sql\"},{offset:23,type:\"identifier.sql\",language:\"sql\"},{offset:30,type:\"white.sql\",language:\"sql\"},{offset:31,type:\"keyword.sql\",language:\"sql\"},{offset:35,type:\"white.sql\",language:\"sql\"},{offset:36,type:\"identifier.sql\",language:\"sql\"},{offset:42,type:\"white.sql\",language:\"sql\"},{offset:43,type:\"keyword.sql\",language:\"sql\"},{offset:48,type:\"white.sql\",language:\"sql\"},{offset:49,type:\"identifier.sql\",language:\"sql\"},{offset:56,type:\"white.sql\",language:\"sql\"},{offset:57,type:\"operator.sql\",language:\"sql\"},{offset:58,type:\"white.sql\",language:\"sql\"},{offset:59,type:\"identifier.quote.sql\",language:\"sql\"},{offset:60,type:\"identifier.sql\",language:\"sql\"},{offset:66,type:\"identifier.quote.sql\",language:\"sql\"},{offset:67,type:\"white.sql\",language:\"sql\"},{offset:68,type:\"keyword.sql\",language:\"sql\"},{offset:73,type:\"white.sql\",language:\"sql\"},{offset:74,type:\"keyword.sql\",language:\"sql\"},{offset:76,type:\"white.sql\",language:\"sql\"},{offset:77,type:\"identifier.sql\",language:\"sql\"},{offset:84,type:\"white.sql\",language:\"sql\"},{offset:85,type:\"keyword.sql\",language:\"sql\"},{offset:90,type:\"white.sql\",language:\"sql\"},{offset:91,type:\"keyword.sql\",language:\"sql\"},{offset:93,type:\"white.sql\",language:\"sql\"},{offset:94,type:\"identifier.sql\",language:\"sql\"},{offset:101,type:\"delimiter.sql\",language:\"sql\"},{offset:102,type:\"white.sql\",language:\"sql\"},{offset:103,type:\"predefined.sql\",language:\"sql\"},{offset:106,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:107,type:\"identifier.sql\",language:\"sql\"},{offset:114,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:115,type:\"white.sql\",language:\"sql\"},{offset:116,type:\"keyword.sql\",language:\"sql\"},{offset:120,type:\"white.sql\",language:\"sql\"},{offset:121,type:\"keyword.sql\",language:\"sql\"},{offset:126,type:\"white.sql\",language:\"sql\"},{offset:127,type:\"number.sql\",language:\"sql\"},{offset:129,type:\"delimiter.sql\",language:\"sql\"}]]},multiLineMultipleColumns:{query:'SELECT count(column1), column2 \\n  FROM table1 \\n  \\n  WHERE column1 = \"value1\" \\n  GROUP BY column1 ORDER BY column1, avg(column2) DESC \\n  LIMIT 10;',tokens:[[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:6,type:\"white.sql\",language:\"sql\"},{offset:7,type:\"predefined.sql\",language:\"sql\"},{offset:12,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:13,type:\"identifier.sql\",language:\"sql\"},{offset:20,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:21,type:\"delimiter.sql\",language:\"sql\"},{offset:22,type:\"white.sql\",language:\"sql\"},{offset:23,type:\"identifier.sql\",language:\"sql\"},{offset:30,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:4,type:\"white.sql\",language:\"sql\"},{offset:5,type:\"identifier.sql\",language:\"sql\"},{offset:11,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:5,type:\"white.sql\",language:\"sql\"},{offset:6,type:\"identifier.sql\",language:\"sql\"},{offset:13,type:\"white.sql\",language:\"sql\"},{offset:14,type:\"operator.sql\",language:\"sql\"},{offset:15,type:\"white.sql\",language:\"sql\"},{offset:16,type:\"identifier.quote.sql\",language:\"sql\"},{offset:17,type:\"identifier.sql\",language:\"sql\"},{offset:23,type:\"identifier.quote.sql\",language:\"sql\"},{offset:24,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:5,type:\"white.sql\",language:\"sql\"},{offset:6,type:\"keyword.sql\",language:\"sql\"},{offset:8,type:\"white.sql\",language:\"sql\"},{offset:9,type:\"identifier.sql\",language:\"sql\"},{offset:16,type:\"white.sql\",language:\"sql\"},{offset:17,type:\"keyword.sql\",language:\"sql\"},{offset:22,type:\"white.sql\",language:\"sql\"},{offset:23,type:\"keyword.sql\",language:\"sql\"},{offset:25,type:\"white.sql\",language:\"sql\"},{offset:26,type:\"identifier.sql\",language:\"sql\"},{offset:33,type:\"delimiter.sql\",language:\"sql\"},{offset:34,type:\"white.sql\",language:\"sql\"},{offset:35,type:\"predefined.sql\",language:\"sql\"},{offset:38,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:39,type:\"identifier.sql\",language:\"sql\"},{offset:46,type:\"delimiter.parenthesis.sql\",language:\"sql\"},{offset:47,type:\"white.sql\",language:\"sql\"},{offset:48,type:\"keyword.sql\",language:\"sql\"},{offset:52,type:\"white.sql\",language:\"sql\"}],[{offset:0,type:\"keyword.sql\",language:\"sql\"},{offset:5,type:\"white.sql\",language:\"sql\"},{offset:6,type:\"number.sql\",language:\"sql\"},{offset:8,type:\"delimiter.sql\",language:\"sql\"}]]}}),testStatementPosition:function(e,t,o){describe(\"\".concat(e),(function(){var n,s;beforeEach((function(){var e=new Map;t.forEach((function(t){return e.set(t.query.query,t.query.tokens)})),n=function(e){return{editor:{tokenize:function(t,o){return e.get(t)}},Range:{containsPosition:function(e,t){return t.lineNumber>=e.startLineNumber&&t.lineNumber<=e.endLineNumber&&t.column>=e.startColumn&&t.column<=e.endColumn}},languages:{CompletionItemKind:{Snippet:2,Function:1,Keyword:3},CompletionItemInsertTextRule:{InsertAsSnippet:2}}}}(e),s=new d.Registry((function(){return o().map((function(e){return{id:e.id,name:e.name||e.id,resolve:e.resolve}}))}))})),t.forEach((function(t){test(\"\".concat(t.query.query),(function(){!function(e,t,o,n,s){var r,i=A(O(n,(r=e,{getValue:function(e,t){return r},getValueInRange:function(e,t){return r.split(\"\\n\")[e.startLineNumber-1].trim().slice(0===e.startColumn?0:e.startColumn-1,e.endColumn-1)},getLineLength:function(e){return r.split(\"\\n\")[e-1].trim().length}}),t),s);expect(i).toContain(o)}(t.query.query,{lineNumber:t.position.line,column:t.position.column},e,n,s)}))}))}))}},pe=function(e){return{button:c.css({paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)})}},fe=function(e){var t=e.children,o=E(e,[\"children\"]),n=p.useStyles2(f.useCallback((function(e){return ge(e,o)}),[o]));return g.createElement(\"div\",{className:n.root},t)},ge=function(e,t){var o,n,s;return{root:c.css({display:\"flex\",flexDirection:null!==(o=t.direction)&&void 0!==o?o:\"row\",flexWrap:null===(n=t.wrap)||void 0===n||n?\"wrap\":void 0,alignItems:t.alignItems,gap:e.spacing(null!==(s=t.gap)&&void 0!==s?s:2),flexGrow:t.flexGrow})}},de=function(e){return{root:c.css({display:\"flex\",flexWrap:\"wrap\",alignItems:\"center\",gap:e.spacing(3),minHeight:e.spacing(4)})}},ye=function(e){var t=p.useStyles2(f.useCallback((function(t){return ce(t,e)}),[e]));return g.createElement(\"span\",{className:c.cx(t.wrapper)})};ye.defaultProps={v:0,h:0,layout:\"block\"};var ce=function(e,t){var o,n;return{wrapper:c.css([{paddingRight:e.spacing(null!==(o=t.h)&&void 0!==o?o:0),paddingBottom:e.spacing(null!==(n=t.v)&&void 0!==n?n:0)},\"inline\"===t.layout&&{display:\"inline-block\"},\"block\"===t.layout&&{display:\"block\"}])}},me=function(e,t){return{root:c.css({minWidth:e.spacing(null!=t?t:0)}),label:c.css({fontSize:12,fontWeight:e.typography.fontWeightMedium}),optional:c.css({fontStyle:\"italic\",color:e.colors.text.secondary}),field:c.css({marginBottom:0}),icon:c.css({color:e.colors.text.secondary,marginLeft:e.spacing(1),\":hover\":{color:e.colors.text.primary}})}},Ee=function(e){return{root:c.css({padding:e.spacing(1),backgroundColor:e.colors.background.secondary,borderRadius:e.shape.borderRadius(1)})}},qe=g.forwardRef((function(e,t){var o=e.items,n=e.renderItem,s=e.onChange;return g.createElement(fe,null,o.map((function(e,t){return g.createElement(\"div\",{key:t},n(e,(function(e){return function(e,t){var n=I([],R(o),!1);n[e]=t,s(n)}(t,e)}),(function(){return e=t,(n=I([],R(o),!1)).splice(e,1),void s(n);var e,n})))})),g.createElement(p.Button,{ref:t,onClick:function(){var e=I(I([],R(o),!1),[{}],!1);s(e)},variant:\"secondary\",size:\"md\",icon:\"plus\",\"aria-label\":\"Add\",type:\"button\"}))})),Te=function(){return{switch:c.css({display:\"flex\",alignItems:\"center\",minHeight:30})}};var Se=function(e){var t=e.children,o=p.useStyles2(Ie);return g.createElement(p.SelectContainer,m({},e,{className:c.cx(e.className,o.container)}),t)},Re=function(e){var t=e.className,o=e.children,n=p.useStyles2(Ie);return g.createElement(\"div\",{className:c.cx(t,n.valueContainer)},o)},Ie=function(e){return{root:c.css({display:\"flex\",fontSize:12,alignItems:\"center\"}),label:c.css({color:e.colors.text.secondary,whiteSpace:\"nowrap\"}),container:c.css({background:\"none\",borderColor:\"transparent\"}),valueContainer:c.css({display:\"flex\",alignItems:\"center\",flex:\"initial\",color:e.colors.text.secondary,fontSize:12})}},Ae=[\"\",\"base\",\"hovered\",\"invalid\",\"focused\"],xe=function(){return{root:c.css({display:\"flex\",\"> *\":{\"&:not(:first-child)\":{marginLeft:-1},\"&:first-child\":{borderTopRightRadius:0,borderBottomRightRadius:0},\"&:last-child\":{borderTopLeftRadius:0,borderBottomLeftRadius:0},\"&:not(:first-child):not(:last-child)\":{borderRadius:0},position:\"relative\",zIndex:Ae.indexOf(\"base\"),\"&:hover\":{zIndex:Ae.indexOf(\"hovered\")},\"&:focus-within\":{zIndex:Ae.indexOf(\"focused\")}}}),invalidChild:c.css({zIndex:Ae.indexOf(\"invalid\")})}};exports.AccessoryButton=function(e){var t=e.className,o=E(e,[\"className\"]),n=p.useStyles2(pe);return g.createElement(p.Button,m({},o,{className:c.cx(t,n.button)}))},exports.EditorField=function(e){var t=e.label,o=e.optional,n=e.tooltip,s=e.tooltipInteractive,r=e.children,i=e.width,l=E(e,[\"label\",\"optional\",\"tooltip\",\"tooltipInteractive\",\"children\",\"width\"]),a=p.useStyles2(f.useCallback((function(e){return me(e,i)}),[i])),u=(null==l?void 0:l.htmlFor)||(null===p.ReactUtils||void 0===p.ReactUtils?void 0:p.ReactUtils.getChildId(r)),d=g.createElement(g.Fragment,null,g.createElement(\"label\",{className:a.label,htmlFor:u},t,o&&g.createElement(\"span\",{className:a.optional},\" - optional\"),n&&g.createElement(p.Tooltip,{placement:\"top\",content:n,theme:\"info\",interactive:s},g.createElement(p.Icon,{tabIndex:0,name:\"info-circle\",size:\"sm\",className:a.icon}))),g.createElement(ye,{v:.5}));return g.createElement(\"div\",{className:a.root},g.createElement(p.Field,m({className:a.field,label:d},l),r))},exports.EditorFieldGroup=function(e){var t=e.children;return g.createElement(fe,{gap:1},t)},exports.EditorHeader=function(e){var t=e.children,o=p.useStyles2(de);return g.createElement(\"div\",{className:o.root},t)},exports.EditorList=qe,exports.EditorRow=function(e){var t=e.children,o=p.useStyles2(Ee);return g.createElement(\"div\",{className:o.root},g.createElement(fe,{gap:2},t))},exports.EditorRows=function(e){var t=e.children;return g.createElement(fe,{gap:.5,direction:\"column\"},t)},exports.EditorSwitch=function(e){var t=Te();return g.createElement(\"div\",{className:t.switch},g.createElement(p.Switch,m({},e)))},exports.FlexItem=function(e){var t=e.grow,o=e.shrink;return g.createElement(\"div\",{style:{display:\"block\",flexGrow:t,flexShrink:o}})},exports.InlineSelect=function(e){var t=e.label,o=E(e,[\"label\"]),n=p.useStyles2(Ie),s=R(f.useState((function(){return Math.random().toString(16).slice(2)})),1)[0],r={SelectContainer:Se,ValueContainer:Re,SingleValue:Re};return g.createElement(\"div\",{className:n.root},t&&g.createElement(\"label\",{className:n.label,htmlFor:s},t,\":\",\" \"),g.createElement(p.Select,m({openMenuOnFocus:!0,inputId:s},o,{components:r})))},exports.InputGroup=function(e){var t=e.children,o=p.useStyles2(xe),n=f.Children.map(t,(function(e){return f.isValidElement(e)&&e.props.invalid?f.cloneElement(e,{className:c.cx(e.props.className,o.invalidChild)}):e}));return g.createElement(\"div\",{className:o.root},n)},exports.LinkedToken=h,exports.SQLEditor=function(e){var t=e.children,o=e.onBlur,n=e.onChange,s=e.query,r=e.language,i=void 0===r?{id:\"sql\"}:r,l=e.width,a=e.height,u=f.useRef(null),d=f.useRef(),y=f.useMemo((function(){var e=j(),t=\"\".concat(i.id,\"-\").concat(e);return d.current=t,t}),[i.id]);f.useEffect((function(){return function(){le.delete(d.current),oe(\"Removing instance cache \".concat(d.current),!1,le)}}),[]);var c=f.useCallback((function(){u.current&&u.current.getAction(\"editor.action.formatDocument\").run()}),[]);return g.createElement(\"div\",{style:{width:l}},g.createElement(p.CodeEditor,{height:a||\"240px\",width:l?\"\".concat(l-2,\"px\"):void 0,language:y,value:s,onBlur:function(e){n&&n(e,!1),o&&o()},showMiniMap:!1,showLineNumbers:!0,onEditorDidMount:function(e,t){u.current=e,e.onDidChangeModelContent((function(t){var o=e.getValue();n&&n(o,!1)})),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.Enter,(function(){var t=e.getValue();n&&n(t,!0)})),e.onKeyUp((function(t){84===t.keyCode&&e.trigger(Y.id,Y.id,{})})),ae(t,i,y)}}),t&&t({formatQuery:c}))},exports.SQLEditorTestUtils=ue,exports.Space=ye,exports.Stack=fe,exports.getStandardSQLCompletionProvider=se,exports.grafanaStandardSQLLanguage=U,exports.grafanaStandardSQLLanguageConf=F;\n//# sourceMappingURL=index.production.js.map\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./dist/index.production.js');\n} else {\n  module.exports = require('./dist/index.development.js');\n}\n","'use strict';\n\n/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce(fn) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var lastCallAt = void 0;\n  var deferred = void 0;\n  var timer = void 0;\n  var pendingArgs = [];\n  return function debounced() {\n    var currentWait = getWait(wait);\n    var currentTime = new Date().getTime();\n\n    var isCold = !lastCallAt || currentTime - lastCallAt > currentWait;\n\n    lastCallAt = currentTime;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (isCold && options.leading) {\n      return options.accumulate ? Promise.resolve(fn.call(this, [args])).then(function (result) {\n        return result[0];\n      }) : Promise.resolve(fn.call.apply(fn, [this].concat(args)));\n    }\n\n    if (deferred) {\n      clearTimeout(timer);\n    } else {\n      deferred = defer();\n    }\n\n    pendingArgs.push(args);\n    timer = setTimeout(flush.bind(this), currentWait);\n\n    if (options.accumulate) {\n      var argsIndex = pendingArgs.length - 1;\n      return deferred.promise.then(function (results) {\n        return results[argsIndex];\n      });\n    }\n\n    return deferred.promise;\n  };\n\n  function flush() {\n    var thisDeferred = deferred;\n    clearTimeout(timer);\n\n    Promise.resolve(options.accumulate ? fn.call(this, pendingArgs) : fn.apply(this, pendingArgs[pendingArgs.length - 1])).then(thisDeferred.resolve, thisDeferred.reject);\n\n    pendingArgs = [];\n    deferred = null;\n  }\n};\n\nfunction getWait(wait) {\n  return typeof wait === 'function' ? wait() : wait;\n}\n\nfunction defer() {\n  var deferred = {};\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n//# sourceMappingURL=index.js.map","/* global define */\n\n(function (root, pluralize) {\n  /* istanbul ignore else */\n  if (typeof require === 'function' && typeof exports === 'object' && typeof module === 'object') {\n    // Node.\n    module.exports = pluralize();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD, registers as an anonymous module.\n    define(function () {\n      return pluralize();\n    });\n  } else {\n    // Browser global.\n    root.pluralize = pluralize();\n  }\n})(this, function () {\n  // Rule storage - pluralize and singularize need to be run sequentially,\n  // while other rules can be optimized using an object for instant lookups.\n  var pluralRules = [];\n  var singularRules = [];\n  var uncountables = {};\n  var irregularPlurals = {};\n  var irregularSingles = {};\n\n  /**\n   * Sanitize a pluralization rule to a usable regular expression.\n   *\n   * @param  {(RegExp|string)} rule\n   * @return {RegExp}\n   */\n  function sanitizeRule (rule) {\n    if (typeof rule === 'string') {\n      return new RegExp('^' + rule + '$', 'i');\n    }\n\n    return rule;\n  }\n\n  /**\n   * Pass in a word token to produce a function that can replicate the case on\n   * another word.\n   *\n   * @param  {string}   word\n   * @param  {string}   token\n   * @return {Function}\n   */\n  function restoreCase (word, token) {\n    // Tokens are an exact match.\n    if (word === token) return token;\n\n    // Lower cased words. E.g. \"hello\".\n    if (word === word.toLowerCase()) return token.toLowerCase();\n\n    // Upper cased words. E.g. \"WHISKY\".\n    if (word === word.toUpperCase()) return token.toUpperCase();\n\n    // Title cased words. E.g. \"Title\".\n    if (word[0] === word[0].toUpperCase()) {\n      return token.charAt(0).toUpperCase() + token.substr(1).toLowerCase();\n    }\n\n    // Lower cased words. E.g. \"test\".\n    return token.toLowerCase();\n  }\n\n  /**\n   * Interpolate a regexp string.\n   *\n   * @param  {string} str\n   * @param  {Array}  args\n   * @return {string}\n   */\n  function interpolate (str, args) {\n    return str.replace(/\\$(\\d{1,2})/g, function (match, index) {\n      return args[index] || '';\n    });\n  }\n\n  /**\n   * Replace a word using a rule.\n   *\n   * @param  {string} word\n   * @param  {Array}  rule\n   * @return {string}\n   */\n  function replace (word, rule) {\n    return word.replace(rule[0], function (match, index) {\n      var result = interpolate(rule[1], arguments);\n\n      if (match === '') {\n        return restoreCase(word[index - 1], result);\n      }\n\n      return restoreCase(match, result);\n    });\n  }\n\n  /**\n   * Sanitize a word by passing in the word and sanitization rules.\n   *\n   * @param  {string}   token\n   * @param  {string}   word\n   * @param  {Array}    rules\n   * @return {string}\n   */\n  function sanitizeWord (token, word, rules) {\n    // Empty string or doesn't need fixing.\n    if (!token.length || uncountables.hasOwnProperty(token)) {\n      return word;\n    }\n\n    var len = rules.length;\n\n    // Iterate over the sanitization rules and use the first one to match.\n    while (len--) {\n      var rule = rules[len];\n\n      if (rule[0].test(word)) return replace(word, rule);\n    }\n\n    return word;\n  }\n\n  /**\n   * Replace a word with the updated word.\n   *\n   * @param  {Object}   replaceMap\n   * @param  {Object}   keepMap\n   * @param  {Array}    rules\n   * @return {Function}\n   */\n  function replaceWord (replaceMap, keepMap, rules) {\n    return function (word) {\n      // Get the correct token and case restoration functions.\n      var token = word.toLowerCase();\n\n      // Check against the keep object map.\n      if (keepMap.hasOwnProperty(token)) {\n        return restoreCase(word, token);\n      }\n\n      // Check against the replacement map for a direct word replacement.\n      if (replaceMap.hasOwnProperty(token)) {\n        return restoreCase(word, replaceMap[token]);\n      }\n\n      // Run all the rules against the word.\n      return sanitizeWord(token, word, rules);\n    };\n  }\n\n  /**\n   * Check if a word is part of the map.\n   */\n  function checkWord (replaceMap, keepMap, rules, bool) {\n    return function (word) {\n      var token = word.toLowerCase();\n\n      if (keepMap.hasOwnProperty(token)) return true;\n      if (replaceMap.hasOwnProperty(token)) return false;\n\n      return sanitizeWord(token, token, rules) === token;\n    };\n  }\n\n  /**\n   * Pluralize or singularize a word based on the passed in count.\n   *\n   * @param  {string}  word      The word to pluralize\n   * @param  {number}  count     How many of the word exist\n   * @param  {boolean} inclusive Whether to prefix with the number (e.g. 3 ducks)\n   * @return {string}\n   */\n  function pluralize (word, count, inclusive) {\n    var pluralized = count === 1\n      ? pluralize.singular(word) : pluralize.plural(word);\n\n    return (inclusive ? count + ' ' : '') + pluralized;\n  }\n\n  /**\n   * Pluralize a word.\n   *\n   * @type {Function}\n   */\n  pluralize.plural = replaceWord(\n    irregularSingles, irregularPlurals, pluralRules\n  );\n\n  /**\n   * Check if a word is plural.\n   *\n   * @type {Function}\n   */\n  pluralize.isPlural = checkWord(\n    irregularSingles, irregularPlurals, pluralRules\n  );\n\n  /**\n   * Singularize a word.\n   *\n   * @type {Function}\n   */\n  pluralize.singular = replaceWord(\n    irregularPlurals, irregularSingles, singularRules\n  );\n\n  /**\n   * Check if a word is singular.\n   *\n   * @type {Function}\n   */\n  pluralize.isSingular = checkWord(\n    irregularPlurals, irregularSingles, singularRules\n  );\n\n  /**\n   * Add a pluralization rule to the collection.\n   *\n   * @param {(string|RegExp)} rule\n   * @param {string}          replacement\n   */\n  pluralize.addPluralRule = function (rule, replacement) {\n    pluralRules.push([sanitizeRule(rule), replacement]);\n  };\n\n  /**\n   * Add a singularization rule to the collection.\n   *\n   * @param {(string|RegExp)} rule\n   * @param {string}          replacement\n   */\n  pluralize.addSingularRule = function (rule, replacement) {\n    singularRules.push([sanitizeRule(rule), replacement]);\n  };\n\n  /**\n   * Add an uncountable word rule.\n   *\n   * @param {(string|RegExp)} word\n   */\n  pluralize.addUncountableRule = function (word) {\n    if (typeof word === 'string') {\n      uncountables[word.toLowerCase()] = true;\n      return;\n    }\n\n    // Set singular and plural references for the word.\n    pluralize.addPluralRule(word, '$0');\n    pluralize.addSingularRule(word, '$0');\n  };\n\n  /**\n   * Add an irregular word definition.\n   *\n   * @param {string} single\n   * @param {string} plural\n   */\n  pluralize.addIrregularRule = function (single, plural) {\n    plural = plural.toLowerCase();\n    single = single.toLowerCase();\n\n    irregularSingles[single] = plural;\n    irregularPlurals[plural] = single;\n  };\n\n  /**\n   * Irregular rules.\n   */\n  [\n    // Pronouns.\n    ['I', 'we'],\n    ['me', 'us'],\n    ['he', 'they'],\n    ['she', 'they'],\n    ['them', 'them'],\n    ['myself', 'ourselves'],\n    ['yourself', 'yourselves'],\n    ['itself', 'themselves'],\n    ['herself', 'themselves'],\n    ['himself', 'themselves'],\n    ['themself', 'themselves'],\n    ['is', 'are'],\n    ['was', 'were'],\n    ['has', 'have'],\n    ['this', 'these'],\n    ['that', 'those'],\n    // Words ending in with a consonant and `o`.\n    ['echo', 'echoes'],\n    ['dingo', 'dingoes'],\n    ['volcano', 'volcanoes'],\n    ['tornado', 'tornadoes'],\n    ['torpedo', 'torpedoes'],\n    // Ends with `us`.\n    ['genus', 'genera'],\n    ['viscus', 'viscera'],\n    // Ends with `ma`.\n    ['stigma', 'stigmata'],\n    ['stoma', 'stomata'],\n    ['dogma', 'dogmata'],\n    ['lemma', 'lemmata'],\n    ['schema', 'schemata'],\n    ['anathema', 'anathemata'],\n    // Other irregular rules.\n    ['ox', 'oxen'],\n    ['axe', 'axes'],\n    ['die', 'dice'],\n    ['yes', 'yeses'],\n    ['foot', 'feet'],\n    ['eave', 'eaves'],\n    ['goose', 'geese'],\n    ['tooth', 'teeth'],\n    ['quiz', 'quizzes'],\n    ['human', 'humans'],\n    ['proof', 'proofs'],\n    ['carve', 'carves'],\n    ['valve', 'valves'],\n    ['looey', 'looies'],\n    ['thief', 'thieves'],\n    ['groove', 'grooves'],\n    ['pickaxe', 'pickaxes'],\n    ['passerby', 'passersby']\n  ].forEach(function (rule) {\n    return pluralize.addIrregularRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Pluralization rules.\n   */\n  [\n    [/s?$/i, 's'],\n    [/[^\\u0000-\\u007F]$/i, '$0'],\n    [/([^aeiou]ese)$/i, '$1'],\n    [/(ax|test)is$/i, '$1es'],\n    [/(alias|[^aou]us|t[lm]as|gas|ris)$/i, '$1es'],\n    [/(e[mn]u)s?$/i, '$1s'],\n    [/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i, '$1'],\n    [/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i, '$1i'],\n    [/(alumn|alg|vertebr)(?:a|ae)$/i, '$1ae'],\n    [/(seraph|cherub)(?:im)?$/i, '$1im'],\n    [/(her|at|gr)o$/i, '$1oes'],\n    [/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i, '$1a'],\n    [/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i, '$1a'],\n    [/sis$/i, 'ses'],\n    [/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i, '$1$2ves'],\n    [/([^aeiouy]|qu)y$/i, '$1ies'],\n    [/([^ch][ieo][ln])ey$/i, '$1ies'],\n    [/(x|ch|ss|sh|zz)$/i, '$1es'],\n    [/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i, '$1ices'],\n    [/\\b((?:tit)?m|l)(?:ice|ouse)$/i, '$1ice'],\n    [/(pe)(?:rson|ople)$/i, '$1ople'],\n    [/(child)(?:ren)?$/i, '$1ren'],\n    [/eaux$/i, '$0'],\n    [/m[ae]n$/i, 'men'],\n    ['thou', 'you']\n  ].forEach(function (rule) {\n    return pluralize.addPluralRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Singularization rules.\n   */\n  [\n    [/s$/i, ''],\n    [/(ss)$/i, '$1'],\n    [/(wi|kni|(?:after|half|high|low|mid|non|night|[^\\w]|^)li)ves$/i, '$1fe'],\n    [/(ar|(?:wo|[ae])l|[eo][ao])ves$/i, '$1f'],\n    [/ies$/i, 'y'],\n    [/\\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i, '$1ie'],\n    [/\\b(mon|smil)ies$/i, '$1ey'],\n    [/\\b((?:tit)?m|l)ice$/i, '$1ouse'],\n    [/(seraph|cherub)im$/i, '$1'],\n    [/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i, '$1'],\n    [/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i, '$1sis'],\n    [/(movie|twelve|abuse|e[mn]u)s$/i, '$1'],\n    [/(test)(?:is|es)$/i, '$1is'],\n    [/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i, '$1us'],\n    [/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i, '$1um'],\n    [/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i, '$1on'],\n    [/(alumn|alg|vertebr)ae$/i, '$1a'],\n    [/(cod|mur|sil|vert|ind)ices$/i, '$1ex'],\n    [/(matr|append)ices$/i, '$1ix'],\n    [/(pe)(rson|ople)$/i, '$1rson'],\n    [/(child)ren$/i, '$1'],\n    [/(eau)x?$/i, '$1'],\n    [/men$/i, 'man']\n  ].forEach(function (rule) {\n    return pluralize.addSingularRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Uncountable rules.\n   */\n  [\n    // Singular words with no plurals.\n    'adulthood',\n    'advice',\n    'agenda',\n    'aid',\n    'aircraft',\n    'alcohol',\n    'ammo',\n    'analytics',\n    'anime',\n    'athletics',\n    'audio',\n    'bison',\n    'blood',\n    'bream',\n    'buffalo',\n    'butter',\n    'carp',\n    'cash',\n    'chassis',\n    'chess',\n    'clothing',\n    'cod',\n    'commerce',\n    'cooperation',\n    'corps',\n    'debris',\n    'diabetes',\n    'digestion',\n    'elk',\n    'energy',\n    'equipment',\n    'excretion',\n    'expertise',\n    'firmware',\n    'flounder',\n    'fun',\n    'gallows',\n    'garbage',\n    'graffiti',\n    'hardware',\n    'headquarters',\n    'health',\n    'herpes',\n    'highjinks',\n    'homework',\n    'housework',\n    'information',\n    'jeans',\n    'justice',\n    'kudos',\n    'labour',\n    'literature',\n    'machinery',\n    'mackerel',\n    'mail',\n    'media',\n    'mews',\n    'moose',\n    'music',\n    'mud',\n    'manga',\n    'news',\n    'only',\n    'personnel',\n    'pike',\n    'plankton',\n    'pliers',\n    'police',\n    'pollution',\n    'premises',\n    'rain',\n    'research',\n    'rice',\n    'salmon',\n    'scissors',\n    'series',\n    'sewage',\n    'shambles',\n    'shrimp',\n    'software',\n    'species',\n    'staff',\n    'swine',\n    'tennis',\n    'traffic',\n    'transportation',\n    'trout',\n    'tuna',\n    'wealth',\n    'welfare',\n    'whiting',\n    'wildebeest',\n    'wildlife',\n    'you',\n    /pok[eé]mon$/i,\n    // Regexes.\n    /[^aeiou]ese$/i, // \"chinese\", \"japanese\"\n    /deer$/i, // \"deer\", \"reindeer\"\n    /fish$/i, // \"fish\", \"blowfish\", \"angelfish\"\n    /measles$/i,\n    /o[iu]s$/i, // \"carnivorous\"\n    /pox$/i, // \"chickpox\", \"smallpox\"\n    /sheep$/i\n  ].forEach(pluralize.addUncountableRule);\n\n  return pluralize;\n});\n","/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\n\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView;\n\n// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.3\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n    var it;\n    if (hasMap && (a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      return true;\n    }\n\n    if (hasSet && (a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      return true;\n    }\n    // END: Modifications\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    // START: Modifications:\n    // Apply guards for `Object.create(null)` handling. See:\n    // - https://github.com/FormidableLabs/react-fast-compare/issues/64\n    // - https://github.com/epoberezkin/fast-deep-equal/issues/49\n    if (a.valueOf !== Object.prototype.valueOf && typeof a.valueOf === 'function' && typeof b.valueOf === 'function') return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString && typeof a.toString === 'function' && typeof b.toString === 'function') return a.toString() === b.toString();\n    // END: Modifications\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    // END: fast-deep-equal\n\n    // START: react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element) return false;\n\n    // custom handling for React/Preact\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n\n        continue;\n      }\n\n      // all other properties should be traversed as usual\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    // END: react-fast-compare\n\n    // START: fast-deep-equal\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (((error.message || '').match(/stack|recursion/i))) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _Highlighter = __webpack_require__(2);\n\t\n\tvar _Highlighter2 = _interopRequireDefault(_Highlighter);\n\n\texports['default'] = _Highlighter2['default'];\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = Highlighter;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\t\n\tvar _highlightWordsCore = __webpack_require__(3);\n\t\n\tvar _propTypes = __webpack_require__(4);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _react = __webpack_require__(14);\n\t\n\tvar _memoizeOne = __webpack_require__(15);\n\t\n\tvar _memoizeOne2 = _interopRequireDefault(_memoizeOne);\n\t\n\tHighlighter.propTypes = {\n\t  activeClassName: _propTypes2['default'].string,\n\t  activeIndex: _propTypes2['default'].number,\n\t  activeStyle: _propTypes2['default'].object,\n\t  autoEscape: _propTypes2['default'].bool,\n\t  className: _propTypes2['default'].string,\n\t  findChunks: _propTypes2['default'].func,\n\t  highlightClassName: _propTypes2['default'].oneOfType([_propTypes2['default'].object, _propTypes2['default'].string]),\n\t  highlightStyle: _propTypes2['default'].object,\n\t  highlightTag: _propTypes2['default'].oneOfType([_propTypes2['default'].node, _propTypes2['default'].func, _propTypes2['default'].string]),\n\t  sanitize: _propTypes2['default'].func,\n\t  searchWords: _propTypes2['default'].arrayOf(_propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].instanceOf(RegExp)])).isRequired,\n\t  textToHighlight: _propTypes2['default'].string.isRequired,\n\t  unhighlightTag: _propTypes2['default'].oneOfType([_propTypes2['default'].node, _propTypes2['default'].func, _propTypes2['default'].string]),\n\t  unhighlightClassName: _propTypes2['default'].string,\n\t  unhighlightStyle: _propTypes2['default'].object\n\t};\n\t\n\t/**\r\n\t * Highlights all occurrences of search terms (searchText) within a string (textToHighlight).\r\n\t * This function returns an array of strings and <span>s (wrapping highlighted words).\r\n\t */\n\t\n\tfunction Highlighter(_ref) {\n\t  var _ref$activeClassName = _ref.activeClassName;\n\t  var activeClassName = _ref$activeClassName === undefined ? '' : _ref$activeClassName;\n\t  var _ref$activeIndex = _ref.activeIndex;\n\t  var activeIndex = _ref$activeIndex === undefined ? -1 : _ref$activeIndex;\n\t  var activeStyle = _ref.activeStyle;\n\t  var autoEscape = _ref.autoEscape;\n\t  var _ref$caseSensitive = _ref.caseSensitive;\n\t  var caseSensitive = _ref$caseSensitive === undefined ? false : _ref$caseSensitive;\n\t  var className = _ref.className;\n\t  var findChunks = _ref.findChunks;\n\t  var _ref$highlightClassName = _ref.highlightClassName;\n\t  var highlightClassName = _ref$highlightClassName === undefined ? '' : _ref$highlightClassName;\n\t  var _ref$highlightStyle = _ref.highlightStyle;\n\t  var highlightStyle = _ref$highlightStyle === undefined ? {} : _ref$highlightStyle;\n\t  var _ref$highlightTag = _ref.highlightTag;\n\t  var highlightTag = _ref$highlightTag === undefined ? 'mark' : _ref$highlightTag;\n\t  var sanitize = _ref.sanitize;\n\t  var searchWords = _ref.searchWords;\n\t  var textToHighlight = _ref.textToHighlight;\n\t  var _ref$unhighlightTag = _ref.unhighlightTag;\n\t  var unhighlightTag = _ref$unhighlightTag === undefined ? 'span' : _ref$unhighlightTag;\n\t  var _ref$unhighlightClassName = _ref.unhighlightClassName;\n\t  var unhighlightClassName = _ref$unhighlightClassName === undefined ? '' : _ref$unhighlightClassName;\n\t  var unhighlightStyle = _ref.unhighlightStyle;\n\t\n\t  var rest = _objectWithoutProperties(_ref, ['activeClassName', 'activeIndex', 'activeStyle', 'autoEscape', 'caseSensitive', 'className', 'findChunks', 'highlightClassName', 'highlightStyle', 'highlightTag', 'sanitize', 'searchWords', 'textToHighlight', 'unhighlightTag', 'unhighlightClassName', 'unhighlightStyle']);\n\t\n\t  var chunks = (0, _highlightWordsCore.findAll)({\n\t    autoEscape: autoEscape,\n\t    caseSensitive: caseSensitive,\n\t    findChunks: findChunks,\n\t    sanitize: sanitize,\n\t    searchWords: searchWords,\n\t    textToHighlight: textToHighlight\n\t  });\n\t  var HighlightTag = highlightTag;\n\t  var highlightIndex = -1;\n\t  var highlightClassNames = '';\n\t  var highlightStyles = undefined;\n\t\n\t  var lowercaseProps = function lowercaseProps(object) {\n\t    var mapped = {};\n\t    for (var key in object) {\n\t      mapped[key.toLowerCase()] = object[key];\n\t    }\n\t    return mapped;\n\t  };\n\t  var memoizedLowercaseProps = (0, _memoizeOne2['default'])(lowercaseProps);\n\t\n\t  return (0, _react.createElement)('span', _extends({\n\t    className: className\n\t  }, rest, {\n\t    children: chunks.map(function (chunk, index) {\n\t      var text = textToHighlight.substr(chunk.start, chunk.end - chunk.start);\n\t\n\t      if (chunk.highlight) {\n\t        highlightIndex++;\n\t\n\t        var highlightClass = undefined;\n\t        if (typeof highlightClassName === 'object') {\n\t          if (!caseSensitive) {\n\t            highlightClassName = memoizedLowercaseProps(highlightClassName);\n\t            highlightClass = highlightClassName[text.toLowerCase()];\n\t          } else {\n\t            highlightClass = highlightClassName[text];\n\t          }\n\t        } else {\n\t          highlightClass = highlightClassName;\n\t        }\n\t\n\t        var isActive = highlightIndex === +activeIndex;\n\t\n\t        highlightClassNames = highlightClass + ' ' + (isActive ? activeClassName : '');\n\t        highlightStyles = isActive === true && activeStyle != null ? Object.assign({}, highlightStyle, activeStyle) : highlightStyle;\n\t\n\t        var props = {\n\t          children: text,\n\t          className: highlightClassNames,\n\t          key: index,\n\t          style: highlightStyles\n\t        };\n\t\n\t        // Don't attach arbitrary props to DOM elements; this triggers React DEV warnings (https://fb.me/react-unknown-prop)\n\t        // Only pass through the highlightIndex attribute for custom components.\n\t        if (typeof HighlightTag !== 'string') {\n\t          props.highlightIndex = highlightIndex;\n\t        }\n\t\n\t        return (0, _react.createElement)(HighlightTag, props);\n\t      } else {\n\t        return (0, _react.createElement)(unhighlightTag, {\n\t          children: text,\n\t          className: unhighlightClassName,\n\t          key: index,\n\t          style: unhighlightStyle\n\t        });\n\t      }\n\t    })\n\t  }));\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports =\n\t/******/ (function(modules) { // webpackBootstrap\n\t/******/ \t// The module cache\n\t/******/ \tvar installedModules = {};\n\t/******/\n\t/******/ \t// The require function\n\t/******/ \tfunction __webpack_require__(moduleId) {\n\t/******/\n\t/******/ \t\t// Check if module is in cache\n\t/******/ \t\tif(installedModules[moduleId])\n\t/******/ \t\t\treturn installedModules[moduleId].exports;\n\t/******/\n\t/******/ \t\t// Create a new module (and put it into the cache)\n\t/******/ \t\tvar module = installedModules[moduleId] = {\n\t/******/ \t\t\texports: {},\n\t/******/ \t\t\tid: moduleId,\n\t/******/ \t\t\tloaded: false\n\t/******/ \t\t};\n\t/******/\n\t/******/ \t\t// Execute the module function\n\t/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\t/******/\n\t/******/ \t\t// Flag the module as loaded\n\t/******/ \t\tmodule.loaded = true;\n\t/******/\n\t/******/ \t\t// Return the exports of the module\n\t/******/ \t\treturn module.exports;\n\t/******/ \t}\n\t/******/\n\t/******/\n\t/******/ \t// expose the modules object (__webpack_modules__)\n\t/******/ \t__webpack_require__.m = modules;\n\t/******/\n\t/******/ \t// expose the module cache\n\t/******/ \t__webpack_require__.c = installedModules;\n\t/******/\n\t/******/ \t// __webpack_public_path__\n\t/******/ \t__webpack_require__.p = \"\";\n\t/******/\n\t/******/ \t// Load entry module and return exports\n\t/******/ \treturn __webpack_require__(0);\n\t/******/ })\n\t/************************************************************************/\n\t/******/ ([\n\t/* 0 */\n\t/***/ (function(module, exports, __webpack_require__) {\n\t\n\t\tmodule.exports = __webpack_require__(1);\n\t\n\t\n\t/***/ }),\n\t/* 1 */\n\t/***/ (function(module, exports, __webpack_require__) {\n\t\n\t\t'use strict';\n\t\t\n\t\tObject.defineProperty(exports, \"__esModule\", {\n\t\t  value: true\n\t\t});\n\t\t\n\t\tvar _utils = __webpack_require__(2);\n\t\t\n\t\tObject.defineProperty(exports, 'combineChunks', {\n\t\t  enumerable: true,\n\t\t  get: function get() {\n\t\t    return _utils.combineChunks;\n\t\t  }\n\t\t});\n\t\tObject.defineProperty(exports, 'fillInChunks', {\n\t\t  enumerable: true,\n\t\t  get: function get() {\n\t\t    return _utils.fillInChunks;\n\t\t  }\n\t\t});\n\t\tObject.defineProperty(exports, 'findAll', {\n\t\t  enumerable: true,\n\t\t  get: function get() {\n\t\t    return _utils.findAll;\n\t\t  }\n\t\t});\n\t\tObject.defineProperty(exports, 'findChunks', {\n\t\t  enumerable: true,\n\t\t  get: function get() {\n\t\t    return _utils.findChunks;\n\t\t  }\n\t\t});\n\t\n\t/***/ }),\n\t/* 2 */\n\t/***/ (function(module, exports) {\n\t\n\t\t'use strict';\n\t\t\n\t\tObject.defineProperty(exports, \"__esModule\", {\n\t\t  value: true\n\t\t});\n\t\t/**\n\t\t * Creates an array of chunk objects representing both higlightable and non highlightable pieces of text that match each search word.\n\t\t * @return Array of \"chunks\" (where a Chunk is { start:number, end:number, highlight:boolean })\n\t\t */\n\t\tvar findAll = exports.findAll = function findAll(_ref) {\n\t\t  var autoEscape = _ref.autoEscape,\n\t\t      _ref$caseSensitive = _ref.caseSensitive,\n\t\t      caseSensitive = _ref$caseSensitive === undefined ? false : _ref$caseSensitive,\n\t\t      _ref$findChunks = _ref.findChunks,\n\t\t      findChunks = _ref$findChunks === undefined ? defaultFindChunks : _ref$findChunks,\n\t\t      sanitize = _ref.sanitize,\n\t\t      searchWords = _ref.searchWords,\n\t\t      textToHighlight = _ref.textToHighlight;\n\t\t  return fillInChunks({\n\t\t    chunksToHighlight: combineChunks({\n\t\t      chunks: findChunks({\n\t\t        autoEscape: autoEscape,\n\t\t        caseSensitive: caseSensitive,\n\t\t        sanitize: sanitize,\n\t\t        searchWords: searchWords,\n\t\t        textToHighlight: textToHighlight\n\t\t      })\n\t\t    }),\n\t\t    totalLength: textToHighlight ? textToHighlight.length : 0\n\t\t  });\n\t\t};\n\t\t\n\t\t/**\n\t\t * Takes an array of {start:number, end:number} objects and combines chunks that overlap into single chunks.\n\t\t * @return {start:number, end:number}[]\n\t\t */\n\t\tvar combineChunks = exports.combineChunks = function combineChunks(_ref2) {\n\t\t  var chunks = _ref2.chunks;\n\t\t\n\t\t  chunks = chunks.sort(function (first, second) {\n\t\t    return first.start - second.start;\n\t\t  }).reduce(function (processedChunks, nextChunk) {\n\t\t    // First chunk just goes straight in the array...\n\t\t    if (processedChunks.length === 0) {\n\t\t      return [nextChunk];\n\t\t    } else {\n\t\t      // ... subsequent chunks get checked to see if they overlap...\n\t\t      var prevChunk = processedChunks.pop();\n\t\t      if (nextChunk.start <= prevChunk.end) {\n\t\t        // It may be the case that prevChunk completely surrounds nextChunk, so take the\n\t\t        // largest of the end indeces.\n\t\t        var endIndex = Math.max(prevChunk.end, nextChunk.end);\n\t\t        processedChunks.push({ start: prevChunk.start, end: endIndex });\n\t\t      } else {\n\t\t        processedChunks.push(prevChunk, nextChunk);\n\t\t      }\n\t\t      return processedChunks;\n\t\t    }\n\t\t  }, []);\n\t\t\n\t\t  return chunks;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Examine text for any matches.\n\t\t * If we find matches, add them to the returned array as a \"chunk\" object ({start:number, end:number}).\n\t\t * @return {start:number, end:number}[]\n\t\t */\n\t\tvar defaultFindChunks = function defaultFindChunks(_ref3) {\n\t\t  var autoEscape = _ref3.autoEscape,\n\t\t      caseSensitive = _ref3.caseSensitive,\n\t\t      _ref3$sanitize = _ref3.sanitize,\n\t\t      sanitize = _ref3$sanitize === undefined ? identity : _ref3$sanitize,\n\t\t      searchWords = _ref3.searchWords,\n\t\t      textToHighlight = _ref3.textToHighlight;\n\t\t\n\t\t  textToHighlight = sanitize(textToHighlight);\n\t\t\n\t\t  return searchWords.filter(function (searchWord) {\n\t\t    return searchWord;\n\t\t  }) // Remove empty words\n\t\t  .reduce(function (chunks, searchWord) {\n\t\t    searchWord = sanitize(searchWord);\n\t\t\n\t\t    if (autoEscape) {\n\t\t      searchWord = escapeRegExpFn(searchWord);\n\t\t    }\n\t\t\n\t\t    var regex = new RegExp(searchWord, caseSensitive ? 'g' : 'gi');\n\t\t\n\t\t    var match = void 0;\n\t\t    while (match = regex.exec(textToHighlight)) {\n\t\t      var start = match.index;\n\t\t      var end = regex.lastIndex;\n\t\t      // We do not return zero-length matches\n\t\t      if (end > start) {\n\t\t        chunks.push({ start: start, end: end });\n\t\t      }\n\t\t\n\t\t      // Prevent browsers like Firefox from getting stuck in an infinite loop\n\t\t      // See http://www.regexguru.com/2008/04/watch-out-for-zero-length-matches/\n\t\t      if (match.index == regex.lastIndex) {\n\t\t        regex.lastIndex++;\n\t\t      }\n\t\t    }\n\t\t\n\t\t    return chunks;\n\t\t  }, []);\n\t\t};\n\t\t// Allow the findChunks to be overridden in findAll,\n\t\t// but for backwards compatibility we export as the old name\n\t\texports.findChunks = defaultFindChunks;\n\t\t\n\t\t/**\n\t\t * Given a set of chunks to highlight, create an additional set of chunks\n\t\t * to represent the bits of text between the highlighted text.\n\t\t * @param chunksToHighlight {start:number, end:number}[]\n\t\t * @param totalLength number\n\t\t * @return {start:number, end:number, highlight:boolean}[]\n\t\t */\n\t\t\n\t\tvar fillInChunks = exports.fillInChunks = function fillInChunks(_ref4) {\n\t\t  var chunksToHighlight = _ref4.chunksToHighlight,\n\t\t      totalLength = _ref4.totalLength;\n\t\t\n\t\t  var allChunks = [];\n\t\t  var append = function append(start, end, highlight) {\n\t\t    if (end - start > 0) {\n\t\t      allChunks.push({\n\t\t        start: start,\n\t\t        end: end,\n\t\t        highlight: highlight\n\t\t      });\n\t\t    }\n\t\t  };\n\t\t\n\t\t  if (chunksToHighlight.length === 0) {\n\t\t    append(0, totalLength, false);\n\t\t  } else {\n\t\t    var lastIndex = 0;\n\t\t    chunksToHighlight.forEach(function (chunk) {\n\t\t      append(lastIndex, chunk.start, false);\n\t\t      append(chunk.start, chunk.end, true);\n\t\t      lastIndex = chunk.end;\n\t\t    });\n\t\t    append(lastIndex, totalLength, false);\n\t\t  }\n\t\t  return allChunks;\n\t\t};\n\t\t\n\t\tfunction identity(value) {\n\t\t  return value;\n\t\t}\n\t\t\n\t\tfunction escapeRegExpFn(str) {\n\t\t  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n\t\t}\n\t\n\t/***/ })\n\t/******/ ]);\n\t//# sourceMappingURL=index.js.map\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\tif (process.env.NODE_ENV !== 'production') {\n\t  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n\t    Symbol.for &&\n\t    Symbol.for('react.element')) ||\n\t    0xeac7;\n\t\n\t  var isValidElement = function(object) {\n\t    return typeof object === 'object' &&\n\t      object !== null &&\n\t      object.$$typeof === REACT_ELEMENT_TYPE;\n\t  };\n\t\n\t  // By explicitly using `prop-types` you are opting into new development behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  var throwOnDirectAccess = true;\n\t  module.exports = __webpack_require__(6)(isValidElement, throwOnDirectAccess);\n\t} else {\n\t  // By explicitly using `prop-types` you are opting into new production behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  module.exports = __webpack_require__(13)();\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(5)))\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\tprocess.prependListener = noop;\n\tprocess.prependOnceListener = noop;\n\t\n\tprocess.listeners = function (name) { return [] }\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tvar emptyFunction = __webpack_require__(7);\n\tvar invariant = __webpack_require__(8);\n\tvar warning = __webpack_require__(9);\n\tvar assign = __webpack_require__(10);\n\t\n\tvar ReactPropTypesSecret = __webpack_require__(11);\n\tvar checkPropTypes = __webpack_require__(12);\n\t\n\tmodule.exports = function(isValidElement, throwOnDirectAccess) {\n\t  /* global Symbol */\n\t  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n\t  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\t\n\t  /**\n\t   * Returns the iterator method function contained on the iterable object.\n\t   *\n\t   * Be sure to invoke the function with the iterable as context:\n\t   *\n\t   *     var iteratorFn = getIteratorFn(myIterable);\n\t   *     if (iteratorFn) {\n\t   *       var iterator = iteratorFn.call(myIterable);\n\t   *       ...\n\t   *     }\n\t   *\n\t   * @param {?object} maybeIterable\n\t   * @return {?function}\n\t   */\n\t  function getIteratorFn(maybeIterable) {\n\t    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n\t    if (typeof iteratorFn === 'function') {\n\t      return iteratorFn;\n\t    }\n\t  }\n\t\n\t  /**\n\t   * Collection of methods that allow declaration and validation of props that are\n\t   * supplied to React components. Example usage:\n\t   *\n\t   *   var Props = require('ReactPropTypes');\n\t   *   var MyArticle = React.createClass({\n\t   *     propTypes: {\n\t   *       // An optional string prop named \"description\".\n\t   *       description: Props.string,\n\t   *\n\t   *       // A required enum prop named \"category\".\n\t   *       category: Props.oneOf(['News','Photos']).isRequired,\n\t   *\n\t   *       // A prop named \"dialog\" that requires an instance of Dialog.\n\t   *       dialog: Props.instanceOf(Dialog).isRequired\n\t   *     },\n\t   *     render: function() { ... }\n\t   *   });\n\t   *\n\t   * A more formal specification of how these methods are used:\n\t   *\n\t   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n\t   *   decl := ReactPropTypes.{type}(.isRequired)?\n\t   *\n\t   * Each and every declaration produces a function with the same signature. This\n\t   * allows the creation of custom validation functions. For example:\n\t   *\n\t   *  var MyLink = React.createClass({\n\t   *    propTypes: {\n\t   *      // An optional string or URI prop named \"href\".\n\t   *      href: function(props, propName, componentName) {\n\t   *        var propValue = props[propName];\n\t   *        if (propValue != null && typeof propValue !== 'string' &&\n\t   *            !(propValue instanceof URI)) {\n\t   *          return new Error(\n\t   *            'Expected a string or an URI for ' + propName + ' in ' +\n\t   *            componentName\n\t   *          );\n\t   *        }\n\t   *      }\n\t   *    },\n\t   *    render: function() {...}\n\t   *  });\n\t   *\n\t   * @internal\n\t   */\n\t\n\t  var ANONYMOUS = '<<anonymous>>';\n\t\n\t  // Important!\n\t  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n\t  var ReactPropTypes = {\n\t    array: createPrimitiveTypeChecker('array'),\n\t    bool: createPrimitiveTypeChecker('boolean'),\n\t    func: createPrimitiveTypeChecker('function'),\n\t    number: createPrimitiveTypeChecker('number'),\n\t    object: createPrimitiveTypeChecker('object'),\n\t    string: createPrimitiveTypeChecker('string'),\n\t    symbol: createPrimitiveTypeChecker('symbol'),\n\t\n\t    any: createAnyTypeChecker(),\n\t    arrayOf: createArrayOfTypeChecker,\n\t    element: createElementTypeChecker(),\n\t    instanceOf: createInstanceTypeChecker,\n\t    node: createNodeChecker(),\n\t    objectOf: createObjectOfTypeChecker,\n\t    oneOf: createEnumTypeChecker,\n\t    oneOfType: createUnionTypeChecker,\n\t    shape: createShapeTypeChecker,\n\t    exact: createStrictShapeTypeChecker,\n\t  };\n\t\n\t  /**\n\t   * inlined Object.is polyfill to avoid requiring consumers ship their own\n\t   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n\t   */\n\t  /*eslint-disable no-self-compare*/\n\t  function is(x, y) {\n\t    // SameValue algorithm\n\t    if (x === y) {\n\t      // Steps 1-5, 7-10\n\t      // Steps 6.b-6.e: +0 != -0\n\t      return x !== 0 || 1 / x === 1 / y;\n\t    } else {\n\t      // Step 6.a: NaN == NaN\n\t      return x !== x && y !== y;\n\t    }\n\t  }\n\t  /*eslint-enable no-self-compare*/\n\t\n\t  /**\n\t   * We use an Error-like object for backward compatibility as people may call\n\t   * PropTypes directly and inspect their output. However, we don't use real\n\t   * Errors anymore. We don't inspect their stack anyway, and creating them\n\t   * is prohibitively expensive if they are created too often, such as what\n\t   * happens in oneOfType() for any type before the one that matched.\n\t   */\n\t  function PropTypeError(message) {\n\t    this.message = message;\n\t    this.stack = '';\n\t  }\n\t  // Make `instanceof Error` still work for returned errors.\n\t  PropTypeError.prototype = Error.prototype;\n\t\n\t  function createChainableTypeChecker(validate) {\n\t    if (process.env.NODE_ENV !== 'production') {\n\t      var manualPropTypeCallCache = {};\n\t      var manualPropTypeWarningCount = 0;\n\t    }\n\t    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n\t      componentName = componentName || ANONYMOUS;\n\t      propFullName = propFullName || propName;\n\t\n\t      if (secret !== ReactPropTypesSecret) {\n\t        if (throwOnDirectAccess) {\n\t          // New behavior only for users of `prop-types` package\n\t          invariant(\n\t            false,\n\t            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n\t            'Use `PropTypes.checkPropTypes()` to call them. ' +\n\t            'Read more at http://fb.me/use-check-prop-types'\n\t          );\n\t        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n\t          // Old behavior for people using React.PropTypes\n\t          var cacheKey = componentName + ':' + propName;\n\t          if (\n\t            !manualPropTypeCallCache[cacheKey] &&\n\t            // Avoid spamming the console because they are often not actionable except for lib authors\n\t            manualPropTypeWarningCount < 3\n\t          ) {\n\t            warning(\n\t              false,\n\t              'You are manually calling a React.PropTypes validation ' +\n\t              'function for the `%s` prop on `%s`. This is deprecated ' +\n\t              'and will throw in the standalone `prop-types` package. ' +\n\t              'You may be seeing this warning due to a third-party PropTypes ' +\n\t              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.',\n\t              propFullName,\n\t              componentName\n\t            );\n\t            manualPropTypeCallCache[cacheKey] = true;\n\t            manualPropTypeWarningCount++;\n\t          }\n\t        }\n\t      }\n\t      if (props[propName] == null) {\n\t        if (isRequired) {\n\t          if (props[propName] === null) {\n\t            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n\t          }\n\t          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n\t        }\n\t        return null;\n\t      } else {\n\t        return validate(props, propName, componentName, location, propFullName);\n\t      }\n\t    }\n\t\n\t    var chainedCheckType = checkType.bind(null, false);\n\t    chainedCheckType.isRequired = checkType.bind(null, true);\n\t\n\t    return chainedCheckType;\n\t  }\n\t\n\t  function createPrimitiveTypeChecker(expectedType) {\n\t    function validate(props, propName, componentName, location, propFullName, secret) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== expectedType) {\n\t        // `propValue` being instance of, say, date/regexp, pass the 'object'\n\t        // check, but we can offer a more precise error message here rather than\n\t        // 'of type `object`'.\n\t        var preciseType = getPreciseType(propValue);\n\t\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createAnyTypeChecker() {\n\t    return createChainableTypeChecker(emptyFunction.thatReturnsNull);\n\t  }\n\t\n\t  function createArrayOfTypeChecker(typeChecker) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (typeof typeChecker !== 'function') {\n\t        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n\t      }\n\t      var propValue = props[propName];\n\t      if (!Array.isArray(propValue)) {\n\t        var propType = getPropType(propValue);\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n\t      }\n\t      for (var i = 0; i < propValue.length; i++) {\n\t        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n\t        if (error instanceof Error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createElementTypeChecker() {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      if (!isValidElement(propValue)) {\n\t        var propType = getPropType(propValue);\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createInstanceTypeChecker(expectedClass) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (!(props[propName] instanceof expectedClass)) {\n\t        var expectedClassName = expectedClass.name || ANONYMOUS;\n\t        var actualClassName = getClassName(props[propName]);\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createEnumTypeChecker(expectedValues) {\n\t    if (!Array.isArray(expectedValues)) {\n\t      process.env.NODE_ENV !== 'production' ? warning(false, 'Invalid argument supplied to oneOf, expected an instance of array.') : void 0;\n\t      return emptyFunction.thatReturnsNull;\n\t    }\n\t\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      for (var i = 0; i < expectedValues.length; i++) {\n\t        if (is(propValue, expectedValues[i])) {\n\t          return null;\n\t        }\n\t      }\n\t\n\t      var valuesString = JSON.stringify(expectedValues);\n\t      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + propValue + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createObjectOfTypeChecker(typeChecker) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (typeof typeChecker !== 'function') {\n\t        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n\t      }\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n\t      }\n\t      for (var key in propValue) {\n\t        if (propValue.hasOwnProperty(key)) {\n\t          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n\t          if (error instanceof Error) {\n\t            return error;\n\t          }\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createUnionTypeChecker(arrayOfTypeCheckers) {\n\t    if (!Array.isArray(arrayOfTypeCheckers)) {\n\t      process.env.NODE_ENV !== 'production' ? warning(false, 'Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n\t      return emptyFunction.thatReturnsNull;\n\t    }\n\t\n\t    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n\t      var checker = arrayOfTypeCheckers[i];\n\t      if (typeof checker !== 'function') {\n\t        warning(\n\t          false,\n\t          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n\t          'received %s at index %s.',\n\t          getPostfixForTypeWarning(checker),\n\t          i\n\t        );\n\t        return emptyFunction.thatReturnsNull;\n\t      }\n\t    }\n\t\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n\t        var checker = arrayOfTypeCheckers[i];\n\t        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n\t          return null;\n\t        }\n\t      }\n\t\n\t      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createNodeChecker() {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (!isNode(props[propName])) {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createShapeTypeChecker(shapeTypes) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n\t      }\n\t      for (var key in shapeTypes) {\n\t        var checker = shapeTypes[key];\n\t        if (!checker) {\n\t          continue;\n\t        }\n\t        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n\t        if (error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createStrictShapeTypeChecker(shapeTypes) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n\t      }\n\t      // We need to check all keys in case some are required but missing from\n\t      // props.\n\t      var allKeys = assign({}, props[propName], shapeTypes);\n\t      for (var key in allKeys) {\n\t        var checker = shapeTypes[key];\n\t        if (!checker) {\n\t          return new PropTypeError(\n\t            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n\t            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n\t            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n\t          );\n\t        }\n\t        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n\t        if (error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function isNode(propValue) {\n\t    switch (typeof propValue) {\n\t      case 'number':\n\t      case 'string':\n\t      case 'undefined':\n\t        return true;\n\t      case 'boolean':\n\t        return !propValue;\n\t      case 'object':\n\t        if (Array.isArray(propValue)) {\n\t          return propValue.every(isNode);\n\t        }\n\t        if (propValue === null || isValidElement(propValue)) {\n\t          return true;\n\t        }\n\t\n\t        var iteratorFn = getIteratorFn(propValue);\n\t        if (iteratorFn) {\n\t          var iterator = iteratorFn.call(propValue);\n\t          var step;\n\t          if (iteratorFn !== propValue.entries) {\n\t            while (!(step = iterator.next()).done) {\n\t              if (!isNode(step.value)) {\n\t                return false;\n\t              }\n\t            }\n\t          } else {\n\t            // Iterator will provide entry [k,v] tuples rather than values.\n\t            while (!(step = iterator.next()).done) {\n\t              var entry = step.value;\n\t              if (entry) {\n\t                if (!isNode(entry[1])) {\n\t                  return false;\n\t                }\n\t              }\n\t            }\n\t          }\n\t        } else {\n\t          return false;\n\t        }\n\t\n\t        return true;\n\t      default:\n\t        return false;\n\t    }\n\t  }\n\t\n\t  function isSymbol(propType, propValue) {\n\t    // Native Symbol.\n\t    if (propType === 'symbol') {\n\t      return true;\n\t    }\n\t\n\t    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n\t    if (propValue['@@toStringTag'] === 'Symbol') {\n\t      return true;\n\t    }\n\t\n\t    // Fallback for non-spec compliant Symbols which are polyfilled.\n\t    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  }\n\t\n\t  // Equivalent of `typeof` but with special handling for array and regexp.\n\t  function getPropType(propValue) {\n\t    var propType = typeof propValue;\n\t    if (Array.isArray(propValue)) {\n\t      return 'array';\n\t    }\n\t    if (propValue instanceof RegExp) {\n\t      // Old webkits (at least until Android 4.0) return 'function' rather than\n\t      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n\t      // passes PropTypes.object.\n\t      return 'object';\n\t    }\n\t    if (isSymbol(propType, propValue)) {\n\t      return 'symbol';\n\t    }\n\t    return propType;\n\t  }\n\t\n\t  // This handles more types than `getPropType`. Only used for error messages.\n\t  // See `createPrimitiveTypeChecker`.\n\t  function getPreciseType(propValue) {\n\t    if (typeof propValue === 'undefined' || propValue === null) {\n\t      return '' + propValue;\n\t    }\n\t    var propType = getPropType(propValue);\n\t    if (propType === 'object') {\n\t      if (propValue instanceof Date) {\n\t        return 'date';\n\t      } else if (propValue instanceof RegExp) {\n\t        return 'regexp';\n\t      }\n\t    }\n\t    return propType;\n\t  }\n\t\n\t  // Returns a string that is postfixed to a warning about an invalid type.\n\t  // For example, \"undefined\" or \"of type array\"\n\t  function getPostfixForTypeWarning(value) {\n\t    var type = getPreciseType(value);\n\t    switch (type) {\n\t      case 'array':\n\t      case 'object':\n\t        return 'an ' + type;\n\t      case 'boolean':\n\t      case 'date':\n\t      case 'regexp':\n\t        return 'a ' + type;\n\t      default:\n\t        return type;\n\t    }\n\t  }\n\t\n\t  // Returns class name of the object, if any.\n\t  function getClassName(propValue) {\n\t    if (!propValue.constructor || !propValue.constructor.name) {\n\t      return ANONYMOUS;\n\t    }\n\t    return propValue.constructor.name;\n\t  }\n\t\n\t  ReactPropTypes.checkPropTypes = checkPropTypes;\n\t  ReactPropTypes.PropTypes = ReactPropTypes;\n\t\n\t  return ReactPropTypes;\n\t};\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(5)))\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * \n\t */\n\t\n\tfunction makeEmptyFunction(arg) {\n\t  return function () {\n\t    return arg;\n\t  };\n\t}\n\t\n\t/**\n\t * This function accepts and discards inputs; it has no side effects. This is\n\t * primarily useful idiomatically for overridable function endpoints which\n\t * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n\t */\n\tvar emptyFunction = function emptyFunction() {};\n\t\n\temptyFunction.thatReturns = makeEmptyFunction;\n\temptyFunction.thatReturnsFalse = makeEmptyFunction(false);\n\temptyFunction.thatReturnsTrue = makeEmptyFunction(true);\n\temptyFunction.thatReturnsNull = makeEmptyFunction(null);\n\temptyFunction.thatReturnsThis = function () {\n\t  return this;\n\t};\n\temptyFunction.thatReturnsArgument = function (arg) {\n\t  return arg;\n\t};\n\t\n\tmodule.exports = emptyFunction;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t */\n\t\n\t'use strict';\n\t\n\t/**\n\t * Use invariant() to assert state which your program assumes to be true.\n\t *\n\t * Provide sprintf-style format (only %s is supported) and arguments\n\t * to provide information about what broke and what you were\n\t * expecting.\n\t *\n\t * The invariant message will be stripped in production, but the invariant\n\t * will remain to ensure logic does not differ in production.\n\t */\n\t\n\tvar validateFormat = function validateFormat(format) {};\n\t\n\tif (process.env.NODE_ENV !== 'production') {\n\t  validateFormat = function validateFormat(format) {\n\t    if (format === undefined) {\n\t      throw new Error('invariant requires an error message argument');\n\t    }\n\t  };\n\t}\n\t\n\tfunction invariant(condition, format, a, b, c, d, e, f) {\n\t  validateFormat(format);\n\t\n\t  if (!condition) {\n\t    var error;\n\t    if (format === undefined) {\n\t      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n\t    } else {\n\t      var args = [a, b, c, d, e, f];\n\t      var argIndex = 0;\n\t      error = new Error(format.replace(/%s/g, function () {\n\t        return args[argIndex++];\n\t      }));\n\t      error.name = 'Invariant Violation';\n\t    }\n\t\n\t    error.framesToPop = 1; // we don't care about invariant's own frame\n\t    throw error;\n\t  }\n\t}\n\t\n\tmodule.exports = invariant;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(5)))\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * Copyright (c) 2014-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t */\n\t\n\t'use strict';\n\t\n\tvar emptyFunction = __webpack_require__(7);\n\t\n\t/**\n\t * Similar to invariant but only logs a warning if the condition is not met.\n\t * This can be used to log issues in development environments in critical\n\t * paths. Removing the logging code for production environments will keep the\n\t * same logic and follow the same code paths.\n\t */\n\t\n\tvar warning = emptyFunction;\n\t\n\tif (process.env.NODE_ENV !== 'production') {\n\t  var printWarning = function printWarning(format) {\n\t    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t      args[_key - 1] = arguments[_key];\n\t    }\n\t\n\t    var argIndex = 0;\n\t    var message = 'Warning: ' + format.replace(/%s/g, function () {\n\t      return args[argIndex++];\n\t    });\n\t    if (typeof console !== 'undefined') {\n\t      console.error(message);\n\t    }\n\t    try {\n\t      // --- Welcome to debugging React ---\n\t      // This error was thrown as a convenience so that you can use this stack\n\t      // to find the callsite that caused this warning to fire.\n\t      throw new Error(message);\n\t    } catch (x) {}\n\t  };\n\t\n\t  warning = function warning(condition, format) {\n\t    if (format === undefined) {\n\t      throw new Error('`warning(condition, format, ...args)` requires a warning ' + 'message argument');\n\t    }\n\t\n\t    if (format.indexOf('Failed Composite propType: ') === 0) {\n\t      return; // Ignore CompositeComponent proptype check.\n\t    }\n\t\n\t    if (!condition) {\n\t      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n\t        args[_key2 - 2] = arguments[_key2];\n\t      }\n\t\n\t      printWarning.apply(undefined, [format].concat(args));\n\t    }\n\t  };\n\t}\n\t\n\tmodule.exports = warning;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(5)))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\t/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/\n\t\n\t'use strict';\n\t/* eslint-disable no-unused-vars */\n\tvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\t\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\t\n\t\treturn Object(val);\n\t}\n\t\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\t\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\t\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (getOwnPropertySymbols) {\n\t\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn to;\n\t};\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\t\n\tmodule.exports = ReactPropTypesSecret;\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tif (process.env.NODE_ENV !== 'production') {\n\t  var invariant = __webpack_require__(8);\n\t  var warning = __webpack_require__(9);\n\t  var ReactPropTypesSecret = __webpack_require__(11);\n\t  var loggedTypeFailures = {};\n\t}\n\t\n\t/**\n\t * Assert that the values match with the type specs.\n\t * Error messages are memorized and will only be shown once.\n\t *\n\t * @param {object} typeSpecs Map of name to a ReactPropType\n\t * @param {object} values Runtime values that need to be type-checked\n\t * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n\t * @param {string} componentName Name of the component for error messages.\n\t * @param {?Function} getStack Returns the component stack.\n\t * @private\n\t */\n\tfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n\t  if (process.env.NODE_ENV !== 'production') {\n\t    for (var typeSpecName in typeSpecs) {\n\t      if (typeSpecs.hasOwnProperty(typeSpecName)) {\n\t        var error;\n\t        // Prop type validation may throw. In case they do, we don't want to\n\t        // fail the render phase where it didn't fail before. So we log it.\n\t        // After these have been cleaned up, we'll let them throw.\n\t        try {\n\t          // This is intentionally an invariant that gets caught. It's the same\n\t          // behavior as without this statement except with a better message.\n\t          invariant(typeof typeSpecs[typeSpecName] === 'function', '%s: %s type `%s` is invalid; it must be a function, usually from ' + 'the `prop-types` package, but received `%s`.', componentName || 'React class', location, typeSpecName, typeof typeSpecs[typeSpecName]);\n\t          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n\t        } catch (ex) {\n\t          error = ex;\n\t        }\n\t        warning(!error || error instanceof Error, '%s: type specification of %s `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error);\n\t        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n\t          // Only monitor this failure once because there tends to be a lot of the\n\t          // same error.\n\t          loggedTypeFailures[error.message] = true;\n\t\n\t          var stack = getStack ? getStack() : '';\n\t\n\t          warning(false, 'Failed %s type: %s%s', location, error.message, stack != null ? stack : '');\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\tmodule.exports = checkPropTypes;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(5)))\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tvar emptyFunction = __webpack_require__(7);\n\tvar invariant = __webpack_require__(8);\n\tvar ReactPropTypesSecret = __webpack_require__(11);\n\t\n\tmodule.exports = function() {\n\t  function shim(props, propName, componentName, location, propFullName, secret) {\n\t    if (secret === ReactPropTypesSecret) {\n\t      // It is still safe when called from React.\n\t      return;\n\t    }\n\t    invariant(\n\t      false,\n\t      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n\t      'Use PropTypes.checkPropTypes() to call them. ' +\n\t      'Read more at http://fb.me/use-check-prop-types'\n\t    );\n\t  };\n\t  shim.isRequired = shim;\n\t  function getShim() {\n\t    return shim;\n\t  };\n\t  // Important!\n\t  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\t  var ReactPropTypes = {\n\t    array: shim,\n\t    bool: shim,\n\t    func: shim,\n\t    number: shim,\n\t    object: shim,\n\t    string: shim,\n\t    symbol: shim,\n\t\n\t    any: shim,\n\t    arrayOf: getShim,\n\t    element: shim,\n\t    instanceOf: getShim,\n\t    node: shim,\n\t    objectOf: getShim,\n\t    oneOf: getShim,\n\t    oneOfType: getShim,\n\t    shape: getShim,\n\t    exact: getShim\n\t  };\n\t\n\t  ReactPropTypes.checkPropTypes = emptyFunction;\n\t  ReactPropTypes.PropTypes = ReactPropTypes;\n\t\n\t  return ReactPropTypes;\n\t};\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"react\");\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar simpleIsEqual = function simpleIsEqual(a, b) {\n\t  return a === b;\n\t};\n\t\n\tfunction index (resultFn) {\n\t  var isEqual = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : simpleIsEqual;\n\t\n\t  var lastThis = void 0;\n\t  var lastArgs = [];\n\t  var lastResult = void 0;\n\t  var calledOnce = false;\n\t\n\t  var isNewArgEqualToLast = function isNewArgEqualToLast(newArg, index) {\n\t    return isEqual(newArg, lastArgs[index]);\n\t  };\n\t\n\t  var result = function result() {\n\t    for (var _len = arguments.length, newArgs = Array(_len), _key = 0; _key < _len; _key++) {\n\t      newArgs[_key] = arguments[_key];\n\t    }\n\t\n\t    if (calledOnce && lastThis === this && newArgs.length === lastArgs.length && newArgs.every(isNewArgEqualToLast)) {\n\t      return lastResult;\n\t    }\n\t\n\t    calledOnce = true;\n\t    lastThis = this;\n\t    lastArgs = newArgs;\n\t    lastResult = resultFn.apply(this, newArgs);\n\t    return lastResult;\n\t  };\n\t\n\t  return result;\n\t}\n\t\n\tmodule.exports = index;\n\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=main.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__7644__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3305__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3545__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7388__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5980__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3342__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2650__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2729__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3929__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3129__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1177__;","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/public/plugins/victoriametrics-datasource/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t1261: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk\"] = self[\"webpackChunk\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","import React, { FC, useState, memo } from 'react';\n\nimport { IconButton } from \"@grafana/ui\";\n\nimport { PrometheusDatasource } from '../datasource';\nimport { PromQuery } from \"../types\";\n\ninterface Props {\n  datasource: PrometheusDatasource;\n  query: PromQuery;\n  onChange: (update: PromQuery) => void;\n}\n\nenum ResponseStatus {\n  Success = 'success',\n  Error = 'error'\n}\n\nconst PrettifyQuery: FC<Props> = ({\n  datasource,\n  query,\n  onChange\n}) => {\n  const [loading, setLoading] = useState(false)\n\n  const handleClickPrettify = async () => {\n    setLoading(true)\n    try {\n      const response = await datasource.prettifyRequest(query.expr)\n      const { data, status } = response\n      if (data?.status === ResponseStatus.Success) {\n        onChange({ ...query, expr: data.query });\n      } else {\n        console.error(`Error requesting /prettify-query, status: ${status}`)\n      }\n    } catch (e) {\n      console.error(e)\n    }\n    setLoading(false)\n  }\n\n  return (\n    <IconButton\n      key=\"run\"\n      name={loading ? 'fa fa-spinner' : 'brackets-curly'}\n      tooltip={'Prettify query'}\n      disabled={loading}\n      onClick={handleClickPrettify}\n    />\n  );\n};\n\nexport default memo(PrettifyQuery);\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-12: switch imports to @grafana/ui\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css, cx } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useTheme2, stylesFactory, Button, ButtonProps } from '@grafana/ui';\n\ninterface AccessoryButtonProps extends ButtonProps {}\n\nexport const AccessoryButton: React.FC<AccessoryButtonProps> = ({ className, ...props }) => {\n  const theme = useTheme2();\n  const styles = getButtonStyles(theme);\n\n  return <Button {...props} className={cx(className, styles.button)} />;\n};\n\nconst getButtonStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  button: css({\n    paddingLeft: theme.spacing(3 / 2),\n    paddingRight: theme.spacing(3 / 2),\n  }),\n}));\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-12: switch imports to @grafana/ui\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React, { CSSProperties, useCallback } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\ninterface StackProps {\n  direction?: CSSProperties['flexDirection'];\n  alignItems?: CSSProperties['alignItems'];\n  wrap?: boolean;\n  gap?: number;\n  flexGrow?: CSSProperties['flexGrow'];\n  children?: React.ReactNode;\n}\n\nexport const Stack: React.FC<StackProps> = ({ children, ...props }) => {\n  const styles = useStyles2(useCallback((theme) => getStyles(theme, props), [props]));\n\n  return <div className={styles.root}>{children}</div>;\n};\n\nconst getStyles = (theme: GrafanaTheme2, props: StackProps) => ({\n  root: css({\n    display: 'flex',\n    flexDirection: props.direction ?? 'row',\n    flexWrap: props.wrap ?? true ? 'wrap' : undefined,\n    alignItems: props.alignItems,\n    gap: theme.spacing(props.gap ?? 2),\n    flexGrow: props.flexGrow,\n  }),\n});\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react';\n\nimport { Stack } from './Stack';\n\ninterface EditorFieldGroupProps {\n  children: React.ReactNode;\n}\n\nexport const EditorFieldGroup: React.FC<EditorFieldGroupProps> = ({ children }) => {\n  return <Stack gap={1}>{children}</Stack>;\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-12: switch imports to @grafana/ui\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { stylesFactory, useTheme2 } from '@grafana/ui';\n\ninterface EditorHeaderProps {\n  children: React.ReactNode;\n}\n\nexport const EditorHeader: React.FC<EditorHeaderProps> = ({ children }) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  return <div className={styles.root}>{children}</div>;\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  root: css({\n    display: 'flex',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    gap: theme.spacing(1),\n    minHeight: theme.spacing(4),\n  }),\n}));\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-12: switch imports to @grafana/ui\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css, cx } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { stylesFactory, useTheme2 } from '@grafana/ui';\n\nexport interface SpaceProps {\n  v?: number;\n  h?: number;\n  layout?: 'block' | 'inline';\n}\n\nexport const Space = (props: SpaceProps) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme, props);\n\n  return <span className={cx(styles.wrapper)} />;\n};\n\nSpace.defaultProps = {\n  v: 0,\n  h: 0,\n  layout: 'block',\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2, props: SpaceProps) => ({\n  wrapper: css([\n    {\n      paddingRight: theme.spacing(props.h ?? 0),\n      paddingBottom: theme.spacing(props.v ?? 0),\n    },\n    props.layout === 'inline' && {\n      display: 'inline-block',\n    },\n    props.layout === 'block' && {\n      display: 'block',\n    },\n  ]),\n}));\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-11-03: switch imports to @grafana/ui\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React, { ComponentProps } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { stylesFactory, useTheme2, ReactUtils, Field, Icon, PopoverContent, Tooltip } from '@grafana/ui';\n\nimport { Space } from './Space';\n\ninterface EditorFieldProps extends ComponentProps<typeof Field> {\n  label: string;\n  children: React.ReactElement;\n  width?: number | string;\n  optional?: boolean;\n  tooltip?: PopoverContent;\n}\n\nexport const EditorField: React.FC<EditorFieldProps> = (props) => {\n  const { label, optional, tooltip, children, width, ...fieldProps } = props;\n\n  const theme = useTheme2();\n  const styles = getStyles(theme, width);\n\n  // Null check for backward compatibility\n  const childInputId = fieldProps?.htmlFor || ReactUtils?.getChildId(children);\n\n  const labelEl = (\n    <>\n      <label className={styles.label} htmlFor={childInputId}>\n        {label}\n        {optional && <span className={styles.optional}> - optional</span>}\n        {tooltip && (\n          <Tooltip placement=\"top\" content={tooltip} theme=\"info\">\n            <Icon name=\"info-circle\" size=\"sm\" className={styles.icon} />\n          </Tooltip>\n        )}\n      </label>\n      <Space v={0.5} />\n    </>\n  );\n\n  return (\n    <div className={styles.root}>\n      <Field className={styles.field} label={labelEl} {...fieldProps}>\n        {children}\n      </Field>\n    </div>\n  );\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2, width?: number | string) => {\n  return {\n    root: css({\n      minWidth: theme.spacing(width ?? 0),\n    }),\n    label: css({\n      fontSize: 12,\n      fontWeight: theme.typography.fontWeightMedium,\n    }),\n    optional: css({\n      fontStyle: 'italic',\n      color: theme.colors.text.secondary,\n    }),\n    field: css({\n      marginBottom: 0, // GrafanaUI/Field has a bottom margin which we must remove\n    }),\n    icon: css({\n      color: theme.colors.text.secondary,\n      marginLeft: theme.spacing(1),\n      ':hover': {\n        color: theme.colors.text.primary,\n      },\n    }),\n  };\n});\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-12: switch imports to @grafana/ui\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { Stack } from './Stack';\n\ninterface EditorRowProps {\n  children: React.ReactNode;\n}\n\nexport const EditorRow: React.FC<EditorRowProps> = ({ children }) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.root}>\n      <Stack gap={2}>{children}</Stack>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    root: css({\n      padding: theme.spacing(1),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.borderRadius(1),\n    }),\n  };\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-12: switch imports to @grafana/ui\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react';\n\nimport { Button } from '@grafana/ui';\n\nimport { Stack } from './Stack';\n\ninterface EditorListProps<T> {\n  items: Array<Partial<T>>;\n  renderItem: (\n    item: Partial<T>,\n    onChangeItem: (item: Partial<T>) => void,\n    onDeleteItem: () => void\n  ) => React.ReactElement;\n  onChange: (items: Array<Partial<T>>) => void;\n}\n\nexport function EditorList<T>({ items, renderItem, onChange }: EditorListProps<T>) {\n  const onAddItem = () => {\n    const newItems = [...items, {}];\n\n    onChange(newItems);\n  };\n\n  const onChangeItem = (itemIndex: number, newItem: Partial<T>) => {\n    const newItems = [...items];\n    newItems[itemIndex] = newItem;\n    onChange(newItems);\n  };\n\n  const onDeleteItem = (itemIndex: number) => {\n    const newItems = [...items];\n    newItems.splice(itemIndex, 1);\n    onChange(newItems);\n  };\n  return (\n    <Stack>\n      {items.map((item, index) => (\n        <div key={index}>\n          {renderItem(\n            item,\n            (newItem) => onChangeItem(index, newItem),\n            () => onDeleteItem(index)\n          )}\n        </div>\n      ))}\n      <Button onClick={onAddItem} variant=\"secondary\" size=\"md\" icon=\"plus\" aria-label=\"Add\" type=\"button\" />\n    </Stack>\n  );\n}\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react';\n\nimport { Stack } from './Stack';\n\ninterface EditorRowsProps {\n  children: React.ReactNode;\n}\n\nexport const EditorRows: React.FC<EditorRowsProps> = ({ children }) => {\n  return (\n    <Stack gap={0.5} direction=\"column\">\n      {children}\n    </Stack>\n  );\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-12: switch imports to @grafana/ui\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React, { ComponentProps } from 'react';\n\nimport { Switch } from '@grafana/ui';\n\n// Wrapper component around <Switch /> that properly aligns it in <EditorField />\nexport const EditorSwitch: React.FC<ComponentProps<typeof Switch>> = (props) => {\n  const styles = getStyles();\n\n  return (\n    <div className={styles.switch}>\n      <Switch {...props} />\n    </div>\n  );\n};\n\nconst getStyles = () => {\n  return {\n    switch: css({\n      display: 'flex',\n      alignItems: 'center',\n      minHeight: 30,\n    }),\n  };\n};\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react';\n\ninterface FlexItemProps {\n  grow?: number;\n  shrink?: number;\n}\n\nexport const FlexItem: React.FC<FlexItemProps> = ({ grow, shrink }) => {\n  return <div style={{ display: 'block', flexGrow: grow, flexShrink: shrink }} />;\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-12: switch imports to @grafana/ui\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css, cx } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { GroupBase } from 'react-select';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport {\n  stylesFactory,\n  useTheme2,\n  Select,\n  SelectContainerProps,\n  SelectContainer as BaseSelectContainer,\n  SelectCommonProps\n} from '@grafana/ui';\n\ninterface InlineSelectProps<T> extends SelectCommonProps<T> {\n  label?: string;\n}\n\nexport function InlineSelect<T>({ label: labelProp, ...props }: InlineSelectProps<T>) {\n  const theme = useTheme2();\n  const [id] = useState(() => Math.random().toString(16).slice(2));\n  const styles = getSelectStyles(theme);\n  const components = {\n    SelectContainer,\n    ValueContainer,\n    SingleValue: ValueContainer,\n  };\n\n  return (\n    <div className={styles.root}>\n      {labelProp && (\n        <label className={styles.label} htmlFor={id}>\n          {labelProp}\n          {':'}&nbsp;\n        </label>\n      )}\n      {/* @ts-ignore */}\n      <Select openMenuOnFocus inputId={id} {...props} components={components} />\n    </div>\n  );\n}\n\nconst SelectContainer = <Option, isMulti extends boolean, Group extends GroupBase<Option>>(\n  props: SelectContainerProps<Option, isMulti, Group>\n) => {\n  const { children } = props;\n\n  const theme = useTheme2();\n  const styles = getSelectStyles(theme);\n\n  return (\n    <BaseSelectContainer {...props} className={cx(props.className, styles.container)}>\n      {children}\n    </BaseSelectContainer>\n  );\n};\n\nconst ValueContainer = <Option, isMulti extends boolean, Group extends GroupBase<Option>>(\n  props: SelectContainerProps<Option, isMulti, Group>\n) => {\n  const { className, children } = props;\n  const theme = useTheme2();\n  const styles = getSelectStyles(theme);\n\n  return <div className={cx(className, styles.valueContainer)}>{children}</div>;\n};\n\nconst getSelectStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  root: css({\n    display: 'flex',\n    fontSize: 12,\n    alignItems: 'center',\n  }),\n\n  label: css({\n    color: theme.colors.text.secondary,\n    whiteSpace: 'nowrap',\n  }),\n\n  container: css({\n    background: 'none',\n    borderColor: 'transparent',\n  }),\n\n  valueContainer: css({\n    display: 'flex',\n    alignItems: 'center',\n    flex: 'initial',\n    color: theme.colors.text.secondary,\n    fontSize: 12,\n  }),\n}));\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-12: switch imports to @grafana/ui\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\ninterface InputGroupProps {\n  children: React.ReactNode;\n}\n\nexport const InputGroup: React.FC<InputGroupProps> = ({ children }) => {\n  const styles = useStyles2(getStyles);\n\n  return <div className={styles.root}>{children}</div>;\n};\n\nconst getStyles = () => ({\n  root: css({\n    display: 'flex',\n\n    // Style the direct children of the component\n    '> *': {\n      '&:not(:first-child)': {\n        // Negative margin hides the double-border on adjacent selects\n        marginLeft: -1,\n      },\n\n      '&:first-child': {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n      },\n\n      '&:last-child': {\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n      },\n\n      '&:not(:first-child):not(:last-child)': {\n        borderRadius: 0,\n      },\n\n      //\n      position: 'relative',\n      zIndex: 1,\n\n      '&:hover': {\n        zIndex: 2,\n      },\n      '&:focus-within': {\n        zIndex: 2,\n      },\n    },\n  }),\n});\n","export const getDurationFromMilliseconds = (ms: number): string => {\n  const milliseconds = Math.floor(ms  % 1000);\n  const seconds = Math.floor((ms / 1000) % 60);\n  const minutes = Math.floor((ms / 1000 / 60) % 60);\n  const hours = Math.floor((ms / 1000 / 3600 ) % 24);\n  const days = Math.floor(ms / (1000 * 60 * 60 * 24));\n  const durs = [\"d\", \"h\", \"m\", \"s\", \"ms\"];\n  const values = [days, hours, minutes, seconds, milliseconds].map((t, i) => t ? `${t}${durs[i]}` : \"\");\n  return values.filter(t => t).join(\" \");\n};\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { map } from 'lodash';\nimport React, { FC, useEffect, useState, memo } from 'react';\n\nimport { PanelData, ScopedVars, textUtil, rangeUtil } from '@grafana/data';\nimport { getBackendSrv } from \"@grafana/runtime\";\nimport { IconButton } from \"@grafana/ui\";\n\nimport { PrometheusDatasource } from '../datasource';\nimport { PromQuery } from '../types';\nimport { ExtendedDataQueryRequest } from \"../types/datasource\";\nimport { getDurationFromMilliseconds } from \"../utils/time\";\n\ninterface Props {\n  datasource: PrometheusDatasource;\n  query: PromQuery;\n  panelData?: PanelData;\n  dashboardUID: string;\n}\n\nexport const getDefaultVmuiUrl = (serverUrl = \"#\") => `${serverUrl.replace(/\\/$/, \"\")}/vmui/`\n\nexport const relativeTimeOptionsVMUI = [\n  { title: \"Last 5 minutes\", duration: \"5m\" },\n  { title: \"Last 15 minutes\", duration: \"15m\" },\n  { title: \"Last 30 minutes\", duration: \"30m\" },\n  { title: \"Last 1 hour\", duration: \"1h\" },\n  { title: \"Last 3 hours\", duration: \"3h\" },\n  { title: \"Last 6 hours\", duration: \"6h\" },\n  { title: \"Last 12 hours\", duration: \"12h\" },\n  { title: \"Last 24 hours\", duration: \"24h\" },\n  { title: \"Last 2 days\", duration: \"2d\" },\n  { title: \"Last 7 days\", duration: \"7d\" },\n  { title: \"Last 30 days\", duration: \"30d\" },\n  { title: \"Last 90 days\", duration: \"90d\" },\n  { title: \"Last 180 days\", duration: \"180d\" },\n  { title: \"Last 1 year\", duration: \"1y\" },\n  { title: \"Yesterday\", duration: \"1d\" },\n  { title: \"Today\", duration: \"1d\" },\n].map(o => ({\n  id: o.title.replace(/\\s/g, \"_\").toLocaleLowerCase(),\n  ...o\n}))\n\nconst VmuiLink: FC<Props> = ({\n  panelData,\n  query,\n  datasource,\n  dashboardUID,\n}) => {\n  const [href, setHref] = useState('');\n\n  useEffect(() => {\n    const getExternalLink = async () => {\n      if (!panelData?.request) {\n        return\n      }\n\n      const dataSourceSrv = getBackendSrv();\n      const dsSettings = await dataSourceSrv.get(`/api/datasources/${datasource.id}`);\n      let relativeTimeId = 'none'\n\n      const {\n        request: { range, interval, scopedVars, rangeRaw },\n      } = panelData;\n\n      if (typeof rangeRaw?.from === 'string') {\n        const duration = rangeRaw.from.replace('now-', '')\n        relativeTimeId = relativeTimeOptionsVMUI.find(ops => ops.duration === duration)?.id || 'none'\n      }\n\n      const start = datasource.getPrometheusTime(range.from, false);\n      const end = datasource.getPrometheusTime(range.to, true);\n      const rangeDiff = Math.ceil(end - start);\n      const endTime = range.to.utc().format('YYYY-MM-DD HH:mm');\n\n      const enrichedScopedVars: ScopedVars = {\n        ...scopedVars,\n        // As we support $__rate_interval variable in min step, we need add it to scopedVars\n        ...datasource.getRateIntervalScopedVariable(\n          rangeUtil.intervalToSeconds(interval),\n          rangeUtil.intervalToSeconds(datasource.interval)\n        ),\n      };\n\n      const options = {\n        interval,\n        dashboardUID,\n        scopedVars: enrichedScopedVars,\n      } as ExtendedDataQueryRequest<PromQuery>;\n\n      const customQueryParameters: { [key: string]: string } = {};\n      if (datasource.customQueryParameters) {\n        for (const [k, v] of datasource.customQueryParameters) {\n          customQueryParameters[k] = v;\n        }\n      }\n\n      const queryOptions = datasource.createQuery(query, options, start, end);\n\n      const expr = {\n        ...customQueryParameters,\n        'g0.expr': queryOptions.expr,\n        'g0.range_input': getDurationFromMilliseconds(rangeDiff * 1000),\n        'g0.end_input': endTime,\n        'g0.step_input': queryOptions.step ? getDurationFromMilliseconds(queryOptions.step * 1000) : '',\n        'g0.relative_time': relativeTimeId,\n        'g0.tab': 0,\n      };\n\n      const args = map(expr, (v: string, k: string) => {\n        return k + '=' + encodeURIComponent(v);\n      }).join('&');\n\n      const vmuiUrl = dsSettings.jsonData.vmuiUrl || getDefaultVmuiUrl(dsSettings.url)\n      setHref(`${vmuiUrl}?${args}`);\n    };\n\n    getExternalLink()\n  }, [dashboardUID, datasource, panelData, query]);\n\n  return (\n    <a href={textUtil.sanitizeUrl(href)} target=\"_blank\" rel=\"noopener noreferrer\"\n      style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\n      <IconButton\n        key=\"vmui\"\n        name=\"external-link-alt\"\n        tooltip=\"Run in vmui\"\n      />\n    </a>\n  );\n};\n\nexport default memo(VmuiLink);\n","import React, { FC } from \"react\";\n\nimport { Alert, Button, HorizontalGroup } from \"@grafana/ui\";\n\ntype Props = {\n  onClose: () => void;\n  onAccept: () => void\n}\n\nconst WarningNewDashboard: FC<Props> = ({ onClose, onAccept }) => (\n  <Alert\n    title=\"Please save dashboard before using WITH templates\"\n    severity=\"error\"\n    elevated\n  >\n    <div>\n      This dashboard is not saved yet. Please save it before using WITH templates.\n      <p>Otherwise, the templates will not be saved</p>\n    </div>\n    <HorizontalGroup justify=\"flex-end\" spacing=\"xs\">\n      <Button fill={\"text\"} onClick={onClose}>\n        Cancel\n      </Button>\n      <Button variant={\"destructive\"} fill={\"text\"} onClick={onAccept}>\n        Proceed with WITH templates\n      </Button>\n    </HorizontalGroup>\n  </Alert>\n)\n\nexport default WarningNewDashboard;\n","/**\n * @module LRUCache\n */\nconst perf = typeof performance === 'object' &&\n    performance &&\n    typeof performance.now === 'function'\n    ? performance\n    : Date;\nconst warned = new Set();\n/* c8 ignore start */\nconst PROCESS = (typeof process === 'object' && !!process ? process : {});\n/* c8 ignore start */\nconst emitWarning = (msg, type, code, fn) => {\n    typeof PROCESS.emitWarning === 'function'\n        ? PROCESS.emitWarning(msg, type, code, fn)\n        : console.error(`[${code}] ${type}: ${msg}`);\n};\nlet AC = globalThis.AbortController;\nlet AS = globalThis.AbortSignal;\n/* c8 ignore start */\nif (typeof AC === 'undefined') {\n    //@ts-ignore\n    AS = class AbortSignal {\n        onabort;\n        _onabort = [];\n        reason;\n        aborted = false;\n        addEventListener(_, fn) {\n            this._onabort.push(fn);\n        }\n    };\n    //@ts-ignore\n    AC = class AbortController {\n        constructor() {\n            warnACPolyfill();\n        }\n        signal = new AS();\n        abort(reason) {\n            if (this.signal.aborted)\n                return;\n            //@ts-ignore\n            this.signal.reason = reason;\n            //@ts-ignore\n            this.signal.aborted = true;\n            //@ts-ignore\n            for (const fn of this.signal._onabort) {\n                fn(reason);\n            }\n            this.signal.onabort?.(reason);\n        }\n    };\n    let printACPolyfillWarning = PROCESS.env?.LRU_CACHE_IGNORE_AC_WARNING !== '1';\n    const warnACPolyfill = () => {\n        if (!printACPolyfillWarning)\n            return;\n        printACPolyfillWarning = false;\n        emitWarning('AbortController is not defined. If using lru-cache in ' +\n            'node 14, load an AbortController polyfill from the ' +\n            '`node-abort-controller` package. A minimal polyfill is ' +\n            'provided for use by LRUCache.fetch(), but it should not be ' +\n            'relied upon in other contexts (eg, passing it to other APIs that ' +\n            'use AbortController/AbortSignal might have undesirable effects). ' +\n            'You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.', 'NO_ABORT_CONTROLLER', 'ENOTSUP', warnACPolyfill);\n    };\n}\n/* c8 ignore stop */\nconst shouldWarn = (code) => !warned.has(code);\nconst TYPE = Symbol('type');\nconst isPosInt = (n) => n && n === Math.floor(n) && n > 0 && isFinite(n);\n/* c8 ignore start */\n// This is a little bit ridiculous, tbh.\n// The maximum array length is 2^32-1 or thereabouts on most JS impls.\n// And well before that point, you're caching the entire world, I mean,\n// that's ~32GB of just integers for the next/prev links, plus whatever\n// else to hold that many keys and values.  Just filling the memory with\n// zeroes at init time is brutal when you get that big.\n// But why not be complete?\n// Maybe in the future, these limits will have expanded.\nconst getUintArray = (max) => !isPosInt(max)\n    ? null\n    : max <= Math.pow(2, 8)\n        ? Uint8Array\n        : max <= Math.pow(2, 16)\n            ? Uint16Array\n            : max <= Math.pow(2, 32)\n                ? Uint32Array\n                : max <= Number.MAX_SAFE_INTEGER\n                    ? ZeroArray\n                    : null;\n/* c8 ignore stop */\nclass ZeroArray extends Array {\n    constructor(size) {\n        super(size);\n        this.fill(0);\n    }\n}\nclass Stack {\n    heap;\n    length;\n    // private constructor\n    static #constructing = false;\n    static create(max) {\n        const HeapCls = getUintArray(max);\n        if (!HeapCls)\n            return [];\n        Stack.#constructing = true;\n        const s = new Stack(max, HeapCls);\n        Stack.#constructing = false;\n        return s;\n    }\n    constructor(max, HeapCls) {\n        /* c8 ignore start */\n        if (!Stack.#constructing) {\n            throw new TypeError('instantiate Stack using Stack.create(n)');\n        }\n        /* c8 ignore stop */\n        this.heap = new HeapCls(max);\n        this.length = 0;\n    }\n    push(n) {\n        this.heap[this.length++] = n;\n    }\n    pop() {\n        return this.heap[--this.length];\n    }\n}\n/**\n * Default export, the thing you're using this module to get.\n *\n * All properties from the options object (with the exception of\n * {@link OptionsBase.max} and {@link OptionsBase.maxSize}) are added as\n * normal public members. (`max` and `maxBase` are read-only getters.)\n * Changing any of these will alter the defaults for subsequent method calls,\n * but is otherwise safe.\n */\nexport class LRUCache {\n    // properties coming in from the options of these, only max and maxSize\n    // really *need* to be protected. The rest can be modified, as they just\n    // set defaults for various methods.\n    #max;\n    #maxSize;\n    #dispose;\n    #disposeAfter;\n    #fetchMethod;\n    /**\n     * {@link LRUCache.OptionsBase.ttl}\n     */\n    ttl;\n    /**\n     * {@link LRUCache.OptionsBase.ttlResolution}\n     */\n    ttlResolution;\n    /**\n     * {@link LRUCache.OptionsBase.ttlAutopurge}\n     */\n    ttlAutopurge;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnGet}\n     */\n    updateAgeOnGet;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnHas}\n     */\n    updateAgeOnHas;\n    /**\n     * {@link LRUCache.OptionsBase.allowStale}\n     */\n    allowStale;\n    /**\n     * {@link LRUCache.OptionsBase.noDisposeOnSet}\n     */\n    noDisposeOnSet;\n    /**\n     * {@link LRUCache.OptionsBase.noUpdateTTL}\n     */\n    noUpdateTTL;\n    /**\n     * {@link LRUCache.OptionsBase.maxEntrySize}\n     */\n    maxEntrySize;\n    /**\n     * {@link LRUCache.OptionsBase.sizeCalculation}\n     */\n    sizeCalculation;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnFetchRejection}\n     */\n    noDeleteOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnStaleGet}\n     */\n    noDeleteOnStaleGet;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort}\n     */\n    allowStaleOnFetchAbort;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchRejection}\n     */\n    allowStaleOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.ignoreFetchAbort}\n     */\n    ignoreFetchAbort;\n    // computed properties\n    #size;\n    #calculatedSize;\n    #keyMap;\n    #keyList;\n    #valList;\n    #next;\n    #prev;\n    #head;\n    #tail;\n    #free;\n    #disposed;\n    #sizes;\n    #starts;\n    #ttls;\n    #hasDispose;\n    #hasFetchMethod;\n    #hasDisposeAfter;\n    /**\n     * Do not call this method unless you need to inspect the\n     * inner workings of the cache.  If anything returned by this\n     * object is modified in any way, strange breakage may occur.\n     *\n     * These fields are private for a reason!\n     *\n     * @internal\n     */\n    static unsafeExposeInternals(c) {\n        return {\n            // properties\n            starts: c.#starts,\n            ttls: c.#ttls,\n            sizes: c.#sizes,\n            keyMap: c.#keyMap,\n            keyList: c.#keyList,\n            valList: c.#valList,\n            next: c.#next,\n            prev: c.#prev,\n            get head() {\n                return c.#head;\n            },\n            get tail() {\n                return c.#tail;\n            },\n            free: c.#free,\n            // methods\n            isBackgroundFetch: (p) => c.#isBackgroundFetch(p),\n            backgroundFetch: (k, index, options, context) => c.#backgroundFetch(k, index, options, context),\n            moveToTail: (index) => c.#moveToTail(index),\n            indexes: (options) => c.#indexes(options),\n            rindexes: (options) => c.#rindexes(options),\n            isStale: (index) => c.#isStale(index),\n        };\n    }\n    // Protected read-only members\n    /**\n     * {@link LRUCache.OptionsBase.max} (read-only)\n     */\n    get max() {\n        return this.#max;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.maxSize} (read-only)\n     */\n    get maxSize() {\n        return this.#maxSize;\n    }\n    /**\n     * The total computed size of items in the cache (read-only)\n     */\n    get calculatedSize() {\n        return this.#calculatedSize;\n    }\n    /**\n     * The number of items stored in the cache (read-only)\n     */\n    get size() {\n        return this.#size;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.fetchMethod} (read-only)\n     */\n    get fetchMethod() {\n        return this.#fetchMethod;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.dispose} (read-only)\n     */\n    get dispose() {\n        return this.#dispose;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.disposeAfter} (read-only)\n     */\n    get disposeAfter() {\n        return this.#disposeAfter;\n    }\n    constructor(options) {\n        const { max = 0, ttl, ttlResolution = 1, ttlAutopurge, updateAgeOnGet, updateAgeOnHas, allowStale, dispose, disposeAfter, noDisposeOnSet, noUpdateTTL, maxSize = 0, maxEntrySize = 0, sizeCalculation, fetchMethod, noDeleteOnFetchRejection, noDeleteOnStaleGet, allowStaleOnFetchRejection, allowStaleOnFetchAbort, ignoreFetchAbort, } = options;\n        if (max !== 0 && !isPosInt(max)) {\n            throw new TypeError('max option must be a nonnegative integer');\n        }\n        const UintArray = max ? getUintArray(max) : Array;\n        if (!UintArray) {\n            throw new Error('invalid max value: ' + max);\n        }\n        this.#max = max;\n        this.#maxSize = maxSize;\n        this.maxEntrySize = maxEntrySize || this.#maxSize;\n        this.sizeCalculation = sizeCalculation;\n        if (this.sizeCalculation) {\n            if (!this.#maxSize && !this.maxEntrySize) {\n                throw new TypeError('cannot set sizeCalculation without setting maxSize or maxEntrySize');\n            }\n            if (typeof this.sizeCalculation !== 'function') {\n                throw new TypeError('sizeCalculation set to non-function');\n            }\n        }\n        if (fetchMethod !== undefined &&\n            typeof fetchMethod !== 'function') {\n            throw new TypeError('fetchMethod must be a function if specified');\n        }\n        this.#fetchMethod = fetchMethod;\n        this.#hasFetchMethod = !!fetchMethod;\n        this.#keyMap = new Map();\n        this.#keyList = new Array(max).fill(undefined);\n        this.#valList = new Array(max).fill(undefined);\n        this.#next = new UintArray(max);\n        this.#prev = new UintArray(max);\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free = Stack.create(max);\n        this.#size = 0;\n        this.#calculatedSize = 0;\n        if (typeof dispose === 'function') {\n            this.#dispose = dispose;\n        }\n        if (typeof disposeAfter === 'function') {\n            this.#disposeAfter = disposeAfter;\n            this.#disposed = [];\n        }\n        else {\n            this.#disposeAfter = undefined;\n            this.#disposed = undefined;\n        }\n        this.#hasDispose = !!this.#dispose;\n        this.#hasDisposeAfter = !!this.#disposeAfter;\n        this.noDisposeOnSet = !!noDisposeOnSet;\n        this.noUpdateTTL = !!noUpdateTTL;\n        this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection;\n        this.allowStaleOnFetchRejection = !!allowStaleOnFetchRejection;\n        this.allowStaleOnFetchAbort = !!allowStaleOnFetchAbort;\n        this.ignoreFetchAbort = !!ignoreFetchAbort;\n        // NB: maxEntrySize is set to maxSize if it's set\n        if (this.maxEntrySize !== 0) {\n            if (this.#maxSize !== 0) {\n                if (!isPosInt(this.#maxSize)) {\n                    throw new TypeError('maxSize must be a positive integer if specified');\n                }\n            }\n            if (!isPosInt(this.maxEntrySize)) {\n                throw new TypeError('maxEntrySize must be a positive integer if specified');\n            }\n            this.#initializeSizeTracking();\n        }\n        this.allowStale = !!allowStale;\n        this.noDeleteOnStaleGet = !!noDeleteOnStaleGet;\n        this.updateAgeOnGet = !!updateAgeOnGet;\n        this.updateAgeOnHas = !!updateAgeOnHas;\n        this.ttlResolution =\n            isPosInt(ttlResolution) || ttlResolution === 0\n                ? ttlResolution\n                : 1;\n        this.ttlAutopurge = !!ttlAutopurge;\n        this.ttl = ttl || 0;\n        if (this.ttl) {\n            if (!isPosInt(this.ttl)) {\n                throw new TypeError('ttl must be a positive integer if specified');\n            }\n            this.#initializeTTLTracking();\n        }\n        // do not allow completely unbounded caches\n        if (this.#max === 0 && this.ttl === 0 && this.#maxSize === 0) {\n            throw new TypeError('At least one of max, maxSize, or ttl is required');\n        }\n        if (!this.ttlAutopurge && !this.#max && !this.#maxSize) {\n            const code = 'LRU_CACHE_UNBOUNDED';\n            if (shouldWarn(code)) {\n                warned.add(code);\n                const msg = 'TTL caching without ttlAutopurge, max, or maxSize can ' +\n                    'result in unbounded memory consumption.';\n                emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache);\n            }\n        }\n    }\n    /**\n     * Return the remaining TTL time for a given entry key\n     */\n    getRemainingTTL(key) {\n        return this.#keyMap.has(key) ? Infinity : 0;\n    }\n    #initializeTTLTracking() {\n        const ttls = new ZeroArray(this.#max);\n        const starts = new ZeroArray(this.#max);\n        this.#ttls = ttls;\n        this.#starts = starts;\n        this.#setItemTTL = (index, ttl, start = perf.now()) => {\n            starts[index] = ttl !== 0 ? start : 0;\n            ttls[index] = ttl;\n            if (ttl !== 0 && this.ttlAutopurge) {\n                const t = setTimeout(() => {\n                    if (this.#isStale(index)) {\n                        this.delete(this.#keyList[index]);\n                    }\n                }, ttl + 1);\n                // unref() not supported on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n        };\n        this.#updateItemAge = index => {\n            starts[index] = ttls[index] !== 0 ? perf.now() : 0;\n        };\n        this.#statusTTL = (status, index) => {\n            if (ttls[index]) {\n                const ttl = ttls[index];\n                const start = starts[index];\n                status.ttl = ttl;\n                status.start = start;\n                status.now = cachedNow || getNow();\n                const age = status.now - start;\n                status.remainingTTL = ttl - age;\n            }\n        };\n        // debounce calls to perf.now() to 1s so we're not hitting\n        // that costly call repeatedly.\n        let cachedNow = 0;\n        const getNow = () => {\n            const n = perf.now();\n            if (this.ttlResolution > 0) {\n                cachedNow = n;\n                const t = setTimeout(() => (cachedNow = 0), this.ttlResolution);\n                // not available on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n            return n;\n        };\n        this.getRemainingTTL = key => {\n            const index = this.#keyMap.get(key);\n            if (index === undefined) {\n                return 0;\n            }\n            const ttl = ttls[index];\n            const start = starts[index];\n            if (ttl === 0 || start === 0) {\n                return Infinity;\n            }\n            const age = (cachedNow || getNow()) - start;\n            return ttl - age;\n        };\n        this.#isStale = index => {\n            return (ttls[index] !== 0 &&\n                starts[index] !== 0 &&\n                (cachedNow || getNow()) - starts[index] > ttls[index]);\n        };\n    }\n    // conditionally set private methods related to TTL\n    #updateItemAge = () => { };\n    #statusTTL = () => { };\n    #setItemTTL = () => { };\n    /* c8 ignore stop */\n    #isStale = () => false;\n    #initializeSizeTracking() {\n        const sizes = new ZeroArray(this.#max);\n        this.#calculatedSize = 0;\n        this.#sizes = sizes;\n        this.#removeItemSize = index => {\n            this.#calculatedSize -= sizes[index];\n            sizes[index] = 0;\n        };\n        this.#requireSize = (k, v, size, sizeCalculation) => {\n            // provisionally accept background fetches.\n            // actual value size will be checked when they return.\n            if (this.#isBackgroundFetch(v)) {\n                return 0;\n            }\n            if (!isPosInt(size)) {\n                if (sizeCalculation) {\n                    if (typeof sizeCalculation !== 'function') {\n                        throw new TypeError('sizeCalculation must be a function');\n                    }\n                    size = sizeCalculation(v, k);\n                    if (!isPosInt(size)) {\n                        throw new TypeError('sizeCalculation return invalid (expect positive integer)');\n                    }\n                }\n                else {\n                    throw new TypeError('invalid size value (must be positive integer). ' +\n                        'When maxSize or maxEntrySize is used, sizeCalculation ' +\n                        'or size must be set.');\n                }\n            }\n            return size;\n        };\n        this.#addItemSize = (index, size, status) => {\n            sizes[index] = size;\n            if (this.#maxSize) {\n                const maxSize = this.#maxSize - sizes[index];\n                while (this.#calculatedSize > maxSize) {\n                    this.#evict(true);\n                }\n            }\n            this.#calculatedSize += sizes[index];\n            if (status) {\n                status.entrySize = size;\n                status.totalCalculatedSize = this.#calculatedSize;\n            }\n        };\n    }\n    #removeItemSize = _i => { };\n    #addItemSize = (_i, _s, _st) => { };\n    #requireSize = (_k, _v, size, sizeCalculation) => {\n        if (size || sizeCalculation) {\n            throw new TypeError('cannot set size without setting maxSize or maxEntrySize on cache');\n        }\n        return 0;\n    };\n    *#indexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#tail; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#head) {\n                    break;\n                }\n                else {\n                    i = this.#prev[i];\n                }\n            }\n        }\n    }\n    *#rindexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#head; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#tail) {\n                    break;\n                }\n                else {\n                    i = this.#next[i];\n                }\n            }\n        }\n    }\n    #isValidIndex(index) {\n        return (index !== undefined &&\n            this.#keyMap.get(this.#keyList[index]) === index);\n    }\n    /**\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from most recently used to least recently used.\n     */\n    *entries() {\n        for (const i of this.#indexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.entries}\n     *\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from least recently used to most recently used.\n     */\n    *rentries() {\n        for (const i of this.#rindexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the keys in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *keys() {\n        for (const i of this.#indexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.keys}\n     *\n     * Return a generator yielding the keys in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rkeys() {\n        for (const i of this.#rindexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the values in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *values() {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.values}\n     *\n     * Return a generator yielding the values in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rvalues() {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Iterating over the cache itself yields the same results as\n     * {@link LRUCache.entries}\n     */\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    /**\n     * Find a value for which the supplied fn method returns a truthy value,\n     * similar to Array.find().  fn is called as fn(value, key, cache).\n     */\n    find(fn, getOptions = {}) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            if (fn(value, this.#keyList[i], this)) {\n                return this.get(this.#keyList[i], getOptions);\n            }\n        }\n    }\n    /**\n     * Call the supplied function on each item in the cache, in order from\n     * most recently used to least recently used.  fn is called as\n     * fn(value, key, cache).  Does not update age or recenty of use.\n     * Does not iterate over stale values.\n     */\n    forEach(fn, thisp = this) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * The same as {@link LRUCache.forEach} but items are iterated over in\n     * reverse order.  (ie, less recently used items are iterated over first.)\n     */\n    rforEach(fn, thisp = this) {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * Delete any stale entries. Returns true if anything was removed,\n     * false otherwise.\n     */\n    purgeStale() {\n        let deleted = false;\n        for (const i of this.#rindexes({ allowStale: true })) {\n            if (this.#isStale(i)) {\n                this.delete(this.#keyList[i]);\n                deleted = true;\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Return an array of [key, {@link LRUCache.Entry}] tuples which can be\n     * passed to cache.load()\n     */\n    dump() {\n        const arr = [];\n        for (const i of this.#indexes({ allowStale: true })) {\n            const key = this.#keyList[i];\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined || key === undefined)\n                continue;\n            const entry = { value };\n            if (this.#ttls && this.#starts) {\n                entry.ttl = this.#ttls[i];\n                // always dump the start relative to a portable timestamp\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = perf.now() - this.#starts[i];\n                entry.start = Math.floor(Date.now() - age);\n            }\n            if (this.#sizes) {\n                entry.size = this.#sizes[i];\n            }\n            arr.unshift([key, entry]);\n        }\n        return arr;\n    }\n    /**\n     * Reset the cache and load in the items in entries in the order listed.\n     * Note that the shape of the resulting cache may be different if the\n     * same options are not used in both caches.\n     */\n    load(arr) {\n        this.clear();\n        for (const [key, entry] of arr) {\n            if (entry.start) {\n                // entry.start is a portable timestamp, but we may be using\n                // node's performance.now(), so calculate the offset, so that\n                // we get the intended remaining TTL, no matter how long it's\n                // been on ice.\n                //\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = Date.now() - entry.start;\n                entry.start = perf.now() - age;\n            }\n            this.set(key, entry.value, entry);\n        }\n    }\n    /**\n     * Add a value to the cache.\n     *\n     * Note: if `undefined` is specified as a value, this is an alias for\n     * {@link LRUCache#delete}\n     */\n    set(k, v, setOptions = {}) {\n        if (v === undefined) {\n            this.delete(k);\n            return this;\n        }\n        const { ttl = this.ttl, start, noDisposeOnSet = this.noDisposeOnSet, sizeCalculation = this.sizeCalculation, status, } = setOptions;\n        let { noUpdateTTL = this.noUpdateTTL } = setOptions;\n        const size = this.#requireSize(k, v, setOptions.size || 0, sizeCalculation);\n        // if the item doesn't fit, don't do anything\n        // NB: maxEntrySize set to maxSize by default\n        if (this.maxEntrySize && size > this.maxEntrySize) {\n            if (status) {\n                status.set = 'miss';\n                status.maxEntrySizeExceeded = true;\n            }\n            // have to delete, in case something is there already.\n            this.delete(k);\n            return this;\n        }\n        let index = this.#size === 0 ? undefined : this.#keyMap.get(k);\n        if (index === undefined) {\n            // addition\n            index = (this.#size === 0\n                ? this.#tail\n                : this.#free.length !== 0\n                    ? this.#free.pop()\n                    : this.#size === this.#max\n                        ? this.#evict(false)\n                        : this.#size);\n            this.#keyList[index] = k;\n            this.#valList[index] = v;\n            this.#keyMap.set(k, index);\n            this.#next[this.#tail] = index;\n            this.#prev[index] = this.#tail;\n            this.#tail = index;\n            this.#size++;\n            this.#addItemSize(index, size, status);\n            if (status)\n                status.set = 'add';\n            noUpdateTTL = false;\n        }\n        else {\n            // update\n            this.#moveToTail(index);\n            const oldVal = this.#valList[index];\n            if (v !== oldVal) {\n                if (this.#hasFetchMethod && this.#isBackgroundFetch(oldVal)) {\n                    oldVal.__abortController.abort(new Error('replaced'));\n                    const { __staleWhileFetching: s } = oldVal;\n                    if (s !== undefined && !noDisposeOnSet) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(s, k, 'set');\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([s, k, 'set']);\n                        }\n                    }\n                }\n                else if (!noDisposeOnSet) {\n                    if (this.#hasDispose) {\n                        this.#dispose?.(oldVal, k, 'set');\n                    }\n                    if (this.#hasDisposeAfter) {\n                        this.#disposed?.push([oldVal, k, 'set']);\n                    }\n                }\n                this.#removeItemSize(index);\n                this.#addItemSize(index, size, status);\n                this.#valList[index] = v;\n                if (status) {\n                    status.set = 'replace';\n                    const oldValue = oldVal && this.#isBackgroundFetch(oldVal)\n                        ? oldVal.__staleWhileFetching\n                        : oldVal;\n                    if (oldValue !== undefined)\n                        status.oldValue = oldValue;\n                }\n            }\n            else if (status) {\n                status.set = 'update';\n            }\n        }\n        if (ttl !== 0 && !this.#ttls) {\n            this.#initializeTTLTracking();\n        }\n        if (this.#ttls) {\n            if (!noUpdateTTL) {\n                this.#setItemTTL(index, ttl, start);\n            }\n            if (status)\n                this.#statusTTL(status, index);\n        }\n        if (!noDisposeOnSet && this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return this;\n    }\n    /**\n     * Evict the least recently used item, returning its value or\n     * `undefined` if cache is empty.\n     */\n    pop() {\n        try {\n            while (this.#size) {\n                const val = this.#valList[this.#head];\n                this.#evict(true);\n                if (this.#isBackgroundFetch(val)) {\n                    if (val.__staleWhileFetching) {\n                        return val.__staleWhileFetching;\n                    }\n                }\n                else if (val !== undefined) {\n                    return val;\n                }\n            }\n        }\n        finally {\n            if (this.#hasDisposeAfter && this.#disposed) {\n                const dt = this.#disposed;\n                let task;\n                while ((task = dt?.shift())) {\n                    this.#disposeAfter?.(...task);\n                }\n            }\n        }\n    }\n    #evict(free) {\n        const head = this.#head;\n        const k = this.#keyList[head];\n        const v = this.#valList[head];\n        if (this.#hasFetchMethod && this.#isBackgroundFetch(v)) {\n            v.__abortController.abort(new Error('evicted'));\n        }\n        else if (this.#hasDispose || this.#hasDisposeAfter) {\n            if (this.#hasDispose) {\n                this.#dispose?.(v, k, 'evict');\n            }\n            if (this.#hasDisposeAfter) {\n                this.#disposed?.push([v, k, 'evict']);\n            }\n        }\n        this.#removeItemSize(head);\n        // if we aren't about to use the index, then null these out\n        if (free) {\n            this.#keyList[head] = undefined;\n            this.#valList[head] = undefined;\n            this.#free.push(head);\n        }\n        if (this.#size === 1) {\n            this.#head = this.#tail = 0;\n            this.#free.length = 0;\n        }\n        else {\n            this.#head = this.#next[head];\n        }\n        this.#keyMap.delete(k);\n        this.#size--;\n        return head;\n    }\n    /**\n     * Check if a key is in the cache, without updating the recency of use.\n     * Will return false if the item is stale, even though it is technically\n     * in the cache.\n     *\n     * Will not update item age unless\n     * {@link LRUCache.OptionsBase.updateAgeOnHas} is set.\n     */\n    has(k, hasOptions = {}) {\n        const { updateAgeOnHas = this.updateAgeOnHas, status } = hasOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v) &&\n                v.__staleWhileFetching === undefined) {\n                return false;\n            }\n            if (!this.#isStale(index)) {\n                if (updateAgeOnHas) {\n                    this.#updateItemAge(index);\n                }\n                if (status) {\n                    status.has = 'hit';\n                    this.#statusTTL(status, index);\n                }\n                return true;\n            }\n            else if (status) {\n                status.has = 'stale';\n                this.#statusTTL(status, index);\n            }\n        }\n        else if (status) {\n            status.has = 'miss';\n        }\n        return false;\n    }\n    /**\n     * Like {@link LRUCache#get} but doesn't update recency or delete stale\n     * items.\n     *\n     * Returns `undefined` if the item is stale, unless\n     * {@link LRUCache.OptionsBase.allowStale} is set.\n     */\n    peek(k, peekOptions = {}) {\n        const { allowStale = this.allowStale } = peekOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined &&\n            (allowStale || !this.#isStale(index))) {\n            const v = this.#valList[index];\n            // either stale and allowed, or forcing a refresh of non-stale value\n            return this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n        }\n    }\n    #backgroundFetch(k, index, options, context) {\n        const v = index === undefined ? undefined : this.#valList[index];\n        if (this.#isBackgroundFetch(v)) {\n            return v;\n        }\n        const ac = new AC();\n        const { signal } = options;\n        // when/if our AC signals, then stop listening to theirs.\n        signal?.addEventListener('abort', () => ac.abort(signal.reason), {\n            signal: ac.signal,\n        });\n        const fetchOpts = {\n            signal: ac.signal,\n            options,\n            context,\n        };\n        const cb = (v, updateCache = false) => {\n            const { aborted } = ac.signal;\n            const ignoreAbort = options.ignoreFetchAbort && v !== undefined;\n            if (options.status) {\n                if (aborted && !updateCache) {\n                    options.status.fetchAborted = true;\n                    options.status.fetchError = ac.signal.reason;\n                    if (ignoreAbort)\n                        options.status.fetchAbortIgnored = true;\n                }\n                else {\n                    options.status.fetchResolved = true;\n                }\n            }\n            if (aborted && !ignoreAbort && !updateCache) {\n                return fetchFail(ac.signal.reason);\n            }\n            // either we didn't abort, and are still here, or we did, and ignored\n            const bf = p;\n            if (this.#valList[index] === p) {\n                if (v === undefined) {\n                    if (bf.__staleWhileFetching) {\n                        this.#valList[index] = bf.__staleWhileFetching;\n                    }\n                    else {\n                        this.delete(k);\n                    }\n                }\n                else {\n                    if (options.status)\n                        options.status.fetchUpdated = true;\n                    this.set(k, v, fetchOpts.options);\n                }\n            }\n            return v;\n        };\n        const eb = (er) => {\n            if (options.status) {\n                options.status.fetchRejected = true;\n                options.status.fetchError = er;\n            }\n            return fetchFail(er);\n        };\n        const fetchFail = (er) => {\n            const { aborted } = ac.signal;\n            const allowStaleAborted = aborted && options.allowStaleOnFetchAbort;\n            const allowStale = allowStaleAborted || options.allowStaleOnFetchRejection;\n            const noDelete = allowStale || options.noDeleteOnFetchRejection;\n            const bf = p;\n            if (this.#valList[index] === p) {\n                // if we allow stale on fetch rejections, then we need to ensure that\n                // the stale value is not removed from the cache when the fetch fails.\n                const del = !noDelete || bf.__staleWhileFetching === undefined;\n                if (del) {\n                    this.delete(k);\n                }\n                else if (!allowStaleAborted) {\n                    // still replace the *promise* with the stale value,\n                    // since we are done with the promise at this point.\n                    // leave it untouched if we're still waiting for an\n                    // aborted background fetch that hasn't yet returned.\n                    this.#valList[index] = bf.__staleWhileFetching;\n                }\n            }\n            if (allowStale) {\n                if (options.status && bf.__staleWhileFetching !== undefined) {\n                    options.status.returnedStale = true;\n                }\n                return bf.__staleWhileFetching;\n            }\n            else if (bf.__returned === bf) {\n                throw er;\n            }\n        };\n        const pcall = (res, rej) => {\n            const fmp = this.#fetchMethod?.(k, v, fetchOpts);\n            if (fmp && fmp instanceof Promise) {\n                fmp.then(v => res(v === undefined ? undefined : v), rej);\n            }\n            // ignored, we go until we finish, regardless.\n            // defer check until we are actually aborting,\n            // so fetchMethod can override.\n            ac.signal.addEventListener('abort', () => {\n                if (!options.ignoreFetchAbort ||\n                    options.allowStaleOnFetchAbort) {\n                    res(undefined);\n                    // when it eventually resolves, update the cache.\n                    if (options.allowStaleOnFetchAbort) {\n                        res = v => cb(v, true);\n                    }\n                }\n            });\n        };\n        if (options.status)\n            options.status.fetchDispatched = true;\n        const p = new Promise(pcall).then(cb, eb);\n        const bf = Object.assign(p, {\n            __abortController: ac,\n            __staleWhileFetching: v,\n            __returned: undefined,\n        });\n        if (index === undefined) {\n            // internal, don't expose status.\n            this.set(k, bf, { ...fetchOpts.options, status: undefined });\n            index = this.#keyMap.get(k);\n        }\n        else {\n            this.#valList[index] = bf;\n        }\n        return bf;\n    }\n    #isBackgroundFetch(p) {\n        if (!this.#hasFetchMethod)\n            return false;\n        const b = p;\n        return (!!b &&\n            b instanceof Promise &&\n            b.hasOwnProperty('__staleWhileFetching') &&\n            b.__abortController instanceof AC);\n    }\n    async fetch(k, fetchOptions = {}) {\n        const { \n        // get options\n        allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, \n        // set options\n        ttl = this.ttl, noDisposeOnSet = this.noDisposeOnSet, size = 0, sizeCalculation = this.sizeCalculation, noUpdateTTL = this.noUpdateTTL, \n        // fetch exclusive options\n        noDeleteOnFetchRejection = this.noDeleteOnFetchRejection, allowStaleOnFetchRejection = this.allowStaleOnFetchRejection, ignoreFetchAbort = this.ignoreFetchAbort, allowStaleOnFetchAbort = this.allowStaleOnFetchAbort, context, forceRefresh = false, status, signal, } = fetchOptions;\n        if (!this.#hasFetchMethod) {\n            if (status)\n                status.fetch = 'get';\n            return this.get(k, {\n                allowStale,\n                updateAgeOnGet,\n                noDeleteOnStaleGet,\n                status,\n            });\n        }\n        const options = {\n            allowStale,\n            updateAgeOnGet,\n            noDeleteOnStaleGet,\n            ttl,\n            noDisposeOnSet,\n            size,\n            sizeCalculation,\n            noUpdateTTL,\n            noDeleteOnFetchRejection,\n            allowStaleOnFetchRejection,\n            allowStaleOnFetchAbort,\n            ignoreFetchAbort,\n            status,\n            signal,\n        };\n        let index = this.#keyMap.get(k);\n        if (index === undefined) {\n            if (status)\n                status.fetch = 'miss';\n            const p = this.#backgroundFetch(k, index, options, context);\n            return (p.__returned = p);\n        }\n        else {\n            // in cache, maybe already fetching\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                const stale = allowStale && v.__staleWhileFetching !== undefined;\n                if (status) {\n                    status.fetch = 'inflight';\n                    if (stale)\n                        status.returnedStale = true;\n                }\n                return stale ? v.__staleWhileFetching : (v.__returned = v);\n            }\n            // if we force a refresh, that means do NOT serve the cached value,\n            // unless we are already in the process of refreshing the cache.\n            const isStale = this.#isStale(index);\n            if (!forceRefresh && !isStale) {\n                if (status)\n                    status.fetch = 'hit';\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                if (status)\n                    this.#statusTTL(status, index);\n                return v;\n            }\n            // ok, it is stale or a forced refresh, and not already fetching.\n            // refresh the cache.\n            const p = this.#backgroundFetch(k, index, options, context);\n            const hasStale = p.__staleWhileFetching !== undefined;\n            const staleVal = hasStale && allowStale;\n            if (status) {\n                status.fetch = isStale ? 'stale' : 'refresh';\n                if (staleVal && isStale)\n                    status.returnedStale = true;\n            }\n            return staleVal ? p.__staleWhileFetching : (p.__returned = p);\n        }\n    }\n    /**\n     * Return a value from the cache. Will update the recency of the cache\n     * entry found.\n     *\n     * If the key is not found, get() will return `undefined`.\n     */\n    get(k, getOptions = {}) {\n        const { allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, status, } = getOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const value = this.#valList[index];\n            const fetching = this.#isBackgroundFetch(value);\n            if (status)\n                this.#statusTTL(status, index);\n            if (this.#isStale(index)) {\n                if (status)\n                    status.get = 'stale';\n                // delete only if not an in-flight background fetch\n                if (!fetching) {\n                    if (!noDeleteOnStaleGet) {\n                        this.delete(k);\n                    }\n                    if (status && allowStale)\n                        status.returnedStale = true;\n                    return allowStale ? value : undefined;\n                }\n                else {\n                    if (status &&\n                        allowStale &&\n                        value.__staleWhileFetching !== undefined) {\n                        status.returnedStale = true;\n                    }\n                    return allowStale ? value.__staleWhileFetching : undefined;\n                }\n            }\n            else {\n                if (status)\n                    status.get = 'hit';\n                // if we're currently fetching it, we don't actually have it yet\n                // it's not stale, which means this isn't a staleWhileRefetching.\n                // If it's not stale, and fetching, AND has a __staleWhileFetching\n                // value, then that means the user fetched with {forceRefresh:true},\n                // so it's safe to return that value.\n                if (fetching) {\n                    return value.__staleWhileFetching;\n                }\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                return value;\n            }\n        }\n        else if (status) {\n            status.get = 'miss';\n        }\n    }\n    #connect(p, n) {\n        this.#prev[n] = p;\n        this.#next[p] = n;\n    }\n    #moveToTail(index) {\n        // if tail already, nothing to do\n        // if head, move head to next[index]\n        // else\n        //   move next[prev[index]] to next[index] (head has no prev)\n        //   move prev[next[index]] to prev[index]\n        // prev[index] = tail\n        // next[tail] = index\n        // tail = index\n        if (index !== this.#tail) {\n            if (index === this.#head) {\n                this.#head = this.#next[index];\n            }\n            else {\n                this.#connect(this.#prev[index], this.#next[index]);\n            }\n            this.#connect(this.#tail, index);\n            this.#tail = index;\n        }\n    }\n    /**\n     * Deletes a key out of the cache.\n     * Returns true if the key was deleted, false otherwise.\n     */\n    delete(k) {\n        let deleted = false;\n        if (this.#size !== 0) {\n            const index = this.#keyMap.get(k);\n            if (index !== undefined) {\n                deleted = true;\n                if (this.#size === 1) {\n                    this.clear();\n                }\n                else {\n                    this.#removeItemSize(index);\n                    const v = this.#valList[index];\n                    if (this.#isBackgroundFetch(v)) {\n                        v.__abortController.abort(new Error('deleted'));\n                    }\n                    else if (this.#hasDispose || this.#hasDisposeAfter) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(v, k, 'delete');\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([v, k, 'delete']);\n                        }\n                    }\n                    this.#keyMap.delete(k);\n                    this.#keyList[index] = undefined;\n                    this.#valList[index] = undefined;\n                    if (index === this.#tail) {\n                        this.#tail = this.#prev[index];\n                    }\n                    else if (index === this.#head) {\n                        this.#head = this.#next[index];\n                    }\n                    else {\n                        this.#next[this.#prev[index]] = this.#next[index];\n                        this.#prev[this.#next[index]] = this.#prev[index];\n                    }\n                    this.#size--;\n                    this.#free.push(index);\n                }\n            }\n        }\n        if (this.#hasDisposeAfter && this.#disposed?.length) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Clear the cache entirely, throwing away all values.\n     */\n    clear() {\n        for (const index of this.#rindexes({ allowStale: true })) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                v.__abortController.abort(new Error('deleted'));\n            }\n            else {\n                const k = this.#keyList[index];\n                if (this.#hasDispose) {\n                    this.#dispose?.(v, k, 'delete');\n                }\n                if (this.#hasDisposeAfter) {\n                    this.#disposed?.push([v, k, 'delete']);\n                }\n            }\n        }\n        this.#keyMap.clear();\n        this.#valList.fill(undefined);\n        this.#keyList.fill(undefined);\n        if (this.#ttls && this.#starts) {\n            this.#ttls.fill(0);\n            this.#starts.fill(0);\n        }\n        if (this.#sizes) {\n            this.#sizes.fill(0);\n        }\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free.length = 0;\n        this.#calculatedSize = 0;\n        this.#size = 0;\n        if (this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","/**\nThe default maximum length of a `TreeBuffer` node.\n*/\nconst DefaultBufferLength = 1024;\nlet nextPropID = 0;\nclass Range {\n    constructor(from, to) {\n        this.from = from;\n        this.to = to;\n    }\n}\n/**\nEach [node type](#common.NodeType) or [individual tree](#common.Tree)\ncan have metadata associated with it in props. Instances of this\nclass represent prop names.\n*/\nclass NodeProp {\n    /**\n    Create a new node prop type.\n    */\n    constructor(config = {}) {\n        this.id = nextPropID++;\n        this.perNode = !!config.perNode;\n        this.deserialize = config.deserialize || (() => {\n            throw new Error(\"This node type doesn't define a deserialize function\");\n        });\n    }\n    /**\n    This is meant to be used with\n    [`NodeSet.extend`](#common.NodeSet.extend) or\n    [`LRParser.configure`](#lr.ParserConfig.props) to compute\n    prop values for each node type in the set. Takes a [match\n    object](#common.NodeType^match) or function that returns undefined\n    if the node type doesn't get this prop, and the prop's value if\n    it does.\n    */\n    add(match) {\n        if (this.perNode)\n            throw new RangeError(\"Can't add per-node props to node types\");\n        if (typeof match != \"function\")\n            match = NodeType.match(match);\n        return (type) => {\n            let result = match(type);\n            return result === undefined ? null : [this, result];\n        };\n    }\n}\n/**\nProp that is used to describe matching delimiters. For opening\ndelimiters, this holds an array of node names (written as a\nspace-separated string when declaring this prop in a grammar)\nfor the node types of closing delimiters that match it.\n*/\nNodeProp.closedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/**\nThe inverse of [`closedBy`](#common.NodeProp^closedBy). This is\nattached to closing delimiters, holding an array of node names\nof types of matching opening delimiters.\n*/\nNodeProp.openedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/**\nUsed to assign node types to groups (for example, all node\ntypes that represent an expression could be tagged with an\n`\"Expression\"` group).\n*/\nNodeProp.group = new NodeProp({ deserialize: str => str.split(\" \") });\n/**\nAttached to nodes to indicate these should be\n[displayed](https://codemirror.net/docs/ref/#language.syntaxTree)\nin a bidirectional text isolate, so that direction-neutral\ncharacters on their sides don't incorrectly get associated with\nsurrounding text. You'll generally want to set this for nodes\nthat contain arbitrary text, like strings and comments, and for\nnodes that appear _inside_ arbitrary text, like HTML tags. When\nnot given a value, in a grammar declaration, defaults to\n`\"auto\"`.\n*/\nNodeProp.isolate = new NodeProp({ deserialize: value => {\n        if (value && value != \"rtl\" && value != \"ltr\" && value != \"auto\")\n            throw new RangeError(\"Invalid value for isolate: \" + value);\n        return value || \"auto\";\n    } });\n/**\nThe hash of the [context](#lr.ContextTracker.constructor)\nthat the node was parsed in, if any. Used to limit reuse of\ncontextual nodes.\n*/\nNodeProp.contextHash = new NodeProp({ perNode: true });\n/**\nThe distance beyond the end of the node that the tokenizer\nlooked ahead for any of the tokens inside the node. (The LR\nparser only stores this when it is larger than 25, for\nefficiency reasons.)\n*/\nNodeProp.lookAhead = new NodeProp({ perNode: true });\n/**\nThis per-node prop is used to replace a given node, or part of a\nnode, with another tree. This is useful to include trees from\ndifferent languages in mixed-language parsers.\n*/\nNodeProp.mounted = new NodeProp({ perNode: true });\n/**\nA mounted tree, which can be [stored](#common.NodeProp^mounted) on\na tree node to indicate that parts of its content are\nrepresented by another tree.\n*/\nclass MountedTree {\n    constructor(\n    /**\n    The inner tree.\n    */\n    tree, \n    /**\n    If this is null, this tree replaces the entire node (it will\n    be included in the regular iteration instead of its host\n    node). If not, only the given ranges are considered to be\n    covered by this tree. This is used for trees that are mixed in\n    a way that isn't strictly hierarchical. Such mounted trees are\n    only entered by [`resolveInner`](#common.Tree.resolveInner)\n    and [`enter`](#common.SyntaxNode.enter).\n    */\n    overlay, \n    /**\n    The parser used to create this subtree.\n    */\n    parser) {\n        this.tree = tree;\n        this.overlay = overlay;\n        this.parser = parser;\n    }\n    /**\n    @internal\n    */\n    static get(tree) {\n        return tree && tree.props && tree.props[NodeProp.mounted.id];\n    }\n}\nconst noProps = Object.create(null);\n/**\nEach node in a syntax tree has a node type associated with it.\n*/\nclass NodeType {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The name of the node type. Not necessarily unique, but if the\n    grammar was written properly, different node types with the\n    same name within a node set should play the same semantic\n    role.\n    */\n    name, \n    /**\n    @internal\n    */\n    props, \n    /**\n    The id of this node in its set. Corresponds to the term ids\n    used in the parser.\n    */\n    id, \n    /**\n    @internal\n    */\n    flags = 0) {\n        this.name = name;\n        this.props = props;\n        this.id = id;\n        this.flags = flags;\n    }\n    /**\n    Define a node type.\n    */\n    static define(spec) {\n        let props = spec.props && spec.props.length ? Object.create(null) : noProps;\n        let flags = (spec.top ? 1 /* NodeFlag.Top */ : 0) | (spec.skipped ? 2 /* NodeFlag.Skipped */ : 0) |\n            (spec.error ? 4 /* NodeFlag.Error */ : 0) | (spec.name == null ? 8 /* NodeFlag.Anonymous */ : 0);\n        let type = new NodeType(spec.name || \"\", props, spec.id, flags);\n        if (spec.props)\n            for (let src of spec.props) {\n                if (!Array.isArray(src))\n                    src = src(type);\n                if (src) {\n                    if (src[0].perNode)\n                        throw new RangeError(\"Can't store a per-node prop on a node type\");\n                    props[src[0].id] = src[1];\n                }\n            }\n        return type;\n    }\n    /**\n    Retrieves a node prop for this type. Will return `undefined` if\n    the prop isn't present on this node.\n    */\n    prop(prop) { return this.props[prop.id]; }\n    /**\n    True when this is the top node of a grammar.\n    */\n    get isTop() { return (this.flags & 1 /* NodeFlag.Top */) > 0; }\n    /**\n    True when this node is produced by a skip rule.\n    */\n    get isSkipped() { return (this.flags & 2 /* NodeFlag.Skipped */) > 0; }\n    /**\n    Indicates whether this is an error node.\n    */\n    get isError() { return (this.flags & 4 /* NodeFlag.Error */) > 0; }\n    /**\n    When true, this node type doesn't correspond to a user-declared\n    named node, for example because it is used to cache repetition.\n    */\n    get isAnonymous() { return (this.flags & 8 /* NodeFlag.Anonymous */) > 0; }\n    /**\n    Returns true when this node's name or one of its\n    [groups](#common.NodeProp^group) matches the given string.\n    */\n    is(name) {\n        if (typeof name == 'string') {\n            if (this.name == name)\n                return true;\n            let group = this.prop(NodeProp.group);\n            return group ? group.indexOf(name) > -1 : false;\n        }\n        return this.id == name;\n    }\n    /**\n    Create a function from node types to arbitrary values by\n    specifying an object whose property names are node or\n    [group](#common.NodeProp^group) names. Often useful with\n    [`NodeProp.add`](#common.NodeProp.add). You can put multiple\n    names, separated by spaces, in a single property name to map\n    multiple node names to a single value.\n    */\n    static match(map) {\n        let direct = Object.create(null);\n        for (let prop in map)\n            for (let name of prop.split(\" \"))\n                direct[name] = map[prop];\n        return (node) => {\n            for (let groups = node.prop(NodeProp.group), i = -1; i < (groups ? groups.length : 0); i++) {\n                let found = direct[i < 0 ? node.name : groups[i]];\n                if (found)\n                    return found;\n            }\n        };\n    }\n}\n/**\nAn empty dummy node type to use when no actual type is available.\n*/\nNodeType.none = new NodeType(\"\", Object.create(null), 0, 8 /* NodeFlag.Anonymous */);\n/**\nA node set holds a collection of node types. It is used to\ncompactly represent trees by storing their type ids, rather than a\nfull pointer to the type object, in a numeric array. Each parser\n[has](#lr.LRParser.nodeSet) a node set, and [tree\nbuffers](#common.TreeBuffer) can only store collections of nodes\nfrom the same set. A set can have a maximum of 2**16 (65536) node\ntypes in it, so that the ids fit into 16-bit typed array slots.\n*/\nclass NodeSet {\n    /**\n    Create a set with the given types. The `id` property of each\n    type should correspond to its position within the array.\n    */\n    constructor(\n    /**\n    The node types in this set, by id.\n    */\n    types) {\n        this.types = types;\n        for (let i = 0; i < types.length; i++)\n            if (types[i].id != i)\n                throw new RangeError(\"Node type ids should correspond to array positions when creating a node set\");\n    }\n    /**\n    Create a copy of this set with some node properties added. The\n    arguments to this method can be created with\n    [`NodeProp.add`](#common.NodeProp.add).\n    */\n    extend(...props) {\n        let newTypes = [];\n        for (let type of this.types) {\n            let newProps = null;\n            for (let source of props) {\n                let add = source(type);\n                if (add) {\n                    if (!newProps)\n                        newProps = Object.assign({}, type.props);\n                    newProps[add[0].id] = add[1];\n                }\n            }\n            newTypes.push(newProps ? new NodeType(type.name, newProps, type.id, type.flags) : type);\n        }\n        return new NodeSet(newTypes);\n    }\n}\nconst CachedNode = new WeakMap(), CachedInnerNode = new WeakMap();\n/**\nOptions that control iteration. Can be combined with the `|`\noperator to enable multiple ones.\n*/\nvar IterMode;\n(function (IterMode) {\n    /**\n    When enabled, iteration will only visit [`Tree`](#common.Tree)\n    objects, not nodes packed into\n    [`TreeBuffer`](#common.TreeBuffer)s.\n    */\n    IterMode[IterMode[\"ExcludeBuffers\"] = 1] = \"ExcludeBuffers\";\n    /**\n    Enable this to make iteration include anonymous nodes (such as\n    the nodes that wrap repeated grammar constructs into a balanced\n    tree).\n    */\n    IterMode[IterMode[\"IncludeAnonymous\"] = 2] = \"IncludeAnonymous\";\n    /**\n    By default, regular [mounted](#common.NodeProp^mounted) nodes\n    replace their base node in iteration. Enable this to ignore them\n    instead.\n    */\n    IterMode[IterMode[\"IgnoreMounts\"] = 4] = \"IgnoreMounts\";\n    /**\n    This option only applies in\n    [`enter`](#common.SyntaxNode.enter)-style methods. It tells the\n    library to not enter mounted overlays if one covers the given\n    position.\n    */\n    IterMode[IterMode[\"IgnoreOverlays\"] = 8] = \"IgnoreOverlays\";\n})(IterMode || (IterMode = {}));\n/**\nA piece of syntax tree. There are two ways to approach these\ntrees: the way they are actually stored in memory, and the\nconvenient way.\n\nSyntax trees are stored as a tree of `Tree` and `TreeBuffer`\nobjects. By packing detail information into `TreeBuffer` leaf\nnodes, the representation is made a lot more memory-efficient.\n\nHowever, when you want to actually work with tree nodes, this\nrepresentation is very awkward, so most client code will want to\nuse the [`TreeCursor`](#common.TreeCursor) or\n[`SyntaxNode`](#common.SyntaxNode) interface instead, which provides\na view on some part of this data structure, and can be used to\nmove around to adjacent nodes.\n*/\nclass Tree {\n    /**\n    Construct a new tree. See also [`Tree.build`](#common.Tree^build).\n    */\n    constructor(\n    /**\n    The type of the top node.\n    */\n    type, \n    /**\n    This node's child nodes.\n    */\n    children, \n    /**\n    The positions (offsets relative to the start of this tree) of\n    the children.\n    */\n    positions, \n    /**\n    The total length of this tree\n    */\n    length, \n    /**\n    Per-node [node props](#common.NodeProp) to associate with this node.\n    */\n    props) {\n        this.type = type;\n        this.children = children;\n        this.positions = positions;\n        this.length = length;\n        /**\n        @internal\n        */\n        this.props = null;\n        if (props && props.length) {\n            this.props = Object.create(null);\n            for (let [prop, value] of props)\n                this.props[typeof prop == \"number\" ? prop : prop.id] = value;\n        }\n    }\n    /**\n    @internal\n    */\n    toString() {\n        let mounted = MountedTree.get(this);\n        if (mounted && !mounted.overlay)\n            return mounted.tree.toString();\n        let children = \"\";\n        for (let ch of this.children) {\n            let str = ch.toString();\n            if (str) {\n                if (children)\n                    children += \",\";\n                children += str;\n            }\n        }\n        return !this.type.name ? children :\n            (/\\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) +\n                (children.length ? \"(\" + children + \")\" : \"\");\n    }\n    /**\n    Get a [tree cursor](#common.TreeCursor) positioned at the top of\n    the tree. Mode can be used to [control](#common.IterMode) which\n    nodes the cursor visits.\n    */\n    cursor(mode = 0) {\n        return new TreeCursor(this.topNode, mode);\n    }\n    /**\n    Get a [tree cursor](#common.TreeCursor) pointing into this tree\n    at the given position and side (see\n    [`moveTo`](#common.TreeCursor.moveTo).\n    */\n    cursorAt(pos, side = 0, mode = 0) {\n        let scope = CachedNode.get(this) || this.topNode;\n        let cursor = new TreeCursor(scope);\n        cursor.moveTo(pos, side);\n        CachedNode.set(this, cursor._tree);\n        return cursor;\n    }\n    /**\n    Get a [syntax node](#common.SyntaxNode) object for the top of the\n    tree.\n    */\n    get topNode() {\n        return new TreeNode(this, 0, 0, null);\n    }\n    /**\n    Get the [syntax node](#common.SyntaxNode) at the given position.\n    If `side` is -1, this will move into nodes that end at the\n    position. If 1, it'll move into nodes that start at the\n    position. With 0, it'll only enter nodes that cover the position\n    from both sides.\n    \n    Note that this will not enter\n    [overlays](#common.MountedTree.overlay), and you often want\n    [`resolveInner`](#common.Tree.resolveInner) instead.\n    */\n    resolve(pos, side = 0) {\n        let node = resolveNode(CachedNode.get(this) || this.topNode, pos, side, false);\n        CachedNode.set(this, node);\n        return node;\n    }\n    /**\n    Like [`resolve`](#common.Tree.resolve), but will enter\n    [overlaid](#common.MountedTree.overlay) nodes, producing a syntax node\n    pointing into the innermost overlaid tree at the given position\n    (with parent links going through all parent structure, including\n    the host trees).\n    */\n    resolveInner(pos, side = 0) {\n        let node = resolveNode(CachedInnerNode.get(this) || this.topNode, pos, side, true);\n        CachedInnerNode.set(this, node);\n        return node;\n    }\n    /**\n    In some situations, it can be useful to iterate through all\n    nodes around a position, including those in overlays that don't\n    directly cover the position. This method gives you an iterator\n    that will produce all nodes, from small to big, around the given\n    position.\n    */\n    resolveStack(pos, side = 0) {\n        return stackIterator(this, pos, side);\n    }\n    /**\n    Iterate over the tree and its children, calling `enter` for any\n    node that touches the `from`/`to` region (if given) before\n    running over such a node's children, and `leave` (if given) when\n    leaving the node. When `enter` returns `false`, that node will\n    not have its children iterated over (or `leave` called).\n    */\n    iterate(spec) {\n        let { enter, leave, from = 0, to = this.length } = spec;\n        let mode = spec.mode || 0, anon = (mode & IterMode.IncludeAnonymous) > 0;\n        for (let c = this.cursor(mode | IterMode.IncludeAnonymous);;) {\n            let entered = false;\n            if (c.from <= to && c.to >= from && (!anon && c.type.isAnonymous || enter(c) !== false)) {\n                if (c.firstChild())\n                    continue;\n                entered = true;\n            }\n            for (;;) {\n                if (entered && leave && (anon || !c.type.isAnonymous))\n                    leave(c);\n                if (c.nextSibling())\n                    break;\n                if (!c.parent())\n                    return;\n                entered = true;\n            }\n        }\n    }\n    /**\n    Get the value of the given [node prop](#common.NodeProp) for this\n    node. Works with both per-node and per-type props.\n    */\n    prop(prop) {\n        return !prop.perNode ? this.type.prop(prop) : this.props ? this.props[prop.id] : undefined;\n    }\n    /**\n    Returns the node's [per-node props](#common.NodeProp.perNode) in a\n    format that can be passed to the [`Tree`](#common.Tree)\n    constructor.\n    */\n    get propValues() {\n        let result = [];\n        if (this.props)\n            for (let id in this.props)\n                result.push([+id, this.props[id]]);\n        return result;\n    }\n    /**\n    Balance the direct children of this tree, producing a copy of\n    which may have children grouped into subtrees with type\n    [`NodeType.none`](#common.NodeType^none).\n    */\n    balance(config = {}) {\n        return this.children.length <= 8 /* Balance.BranchFactor */ ? this :\n            balanceRange(NodeType.none, this.children, this.positions, 0, this.children.length, 0, this.length, (children, positions, length) => new Tree(this.type, children, positions, length, this.propValues), config.makeTree || ((children, positions, length) => new Tree(NodeType.none, children, positions, length)));\n    }\n    /**\n    Build a tree from a postfix-ordered buffer of node information,\n    or a cursor over such a buffer.\n    */\n    static build(data) { return buildTree(data); }\n}\n/**\nThe empty tree\n*/\nTree.empty = new Tree(NodeType.none, [], [], 0);\nclass FlatBufferCursor {\n    constructor(buffer, index) {\n        this.buffer = buffer;\n        this.index = index;\n    }\n    get id() { return this.buffer[this.index - 4]; }\n    get start() { return this.buffer[this.index - 3]; }\n    get end() { return this.buffer[this.index - 2]; }\n    get size() { return this.buffer[this.index - 1]; }\n    get pos() { return this.index; }\n    next() { this.index -= 4; }\n    fork() { return new FlatBufferCursor(this.buffer, this.index); }\n}\n/**\nTree buffers contain (type, start, end, endIndex) quads for each\nnode. In such a buffer, nodes are stored in prefix order (parents\nbefore children, with the endIndex of the parent indicating which\nchildren belong to it).\n*/\nclass TreeBuffer {\n    /**\n    Create a tree buffer.\n    */\n    constructor(\n    /**\n    The buffer's content.\n    */\n    buffer, \n    /**\n    The total length of the group of nodes in the buffer.\n    */\n    length, \n    /**\n    The node set used in this buffer.\n    */\n    set) {\n        this.buffer = buffer;\n        this.length = length;\n        this.set = set;\n    }\n    /**\n    @internal\n    */\n    get type() { return NodeType.none; }\n    /**\n    @internal\n    */\n    toString() {\n        let result = [];\n        for (let index = 0; index < this.buffer.length;) {\n            result.push(this.childString(index));\n            index = this.buffer[index + 3];\n        }\n        return result.join(\",\");\n    }\n    /**\n    @internal\n    */\n    childString(index) {\n        let id = this.buffer[index], endIndex = this.buffer[index + 3];\n        let type = this.set.types[id], result = type.name;\n        if (/\\W/.test(result) && !type.isError)\n            result = JSON.stringify(result);\n        index += 4;\n        if (endIndex == index)\n            return result;\n        let children = [];\n        while (index < endIndex) {\n            children.push(this.childString(index));\n            index = this.buffer[index + 3];\n        }\n        return result + \"(\" + children.join(\",\") + \")\";\n    }\n    /**\n    @internal\n    */\n    findChild(startIndex, endIndex, dir, pos, side) {\n        let { buffer } = this, pick = -1;\n        for (let i = startIndex; i != endIndex; i = buffer[i + 3]) {\n            if (checkSide(side, pos, buffer[i + 1], buffer[i + 2])) {\n                pick = i;\n                if (dir > 0)\n                    break;\n            }\n        }\n        return pick;\n    }\n    /**\n    @internal\n    */\n    slice(startI, endI, from) {\n        let b = this.buffer;\n        let copy = new Uint16Array(endI - startI), len = 0;\n        for (let i = startI, j = 0; i < endI;) {\n            copy[j++] = b[i++];\n            copy[j++] = b[i++] - from;\n            let to = copy[j++] = b[i++] - from;\n            copy[j++] = b[i++] - startI;\n            len = Math.max(len, to);\n        }\n        return new TreeBuffer(copy, len, this.set);\n    }\n}\nfunction checkSide(side, pos, from, to) {\n    switch (side) {\n        case -2 /* Side.Before */: return from < pos;\n        case -1 /* Side.AtOrBefore */: return to >= pos && from < pos;\n        case 0 /* Side.Around */: return from < pos && to > pos;\n        case 1 /* Side.AtOrAfter */: return from <= pos && to > pos;\n        case 2 /* Side.After */: return to > pos;\n        case 4 /* Side.DontCare */: return true;\n    }\n}\nfunction resolveNode(node, pos, side, overlays) {\n    var _a;\n    // Move up to a node that actually holds the position, if possible\n    while (node.from == node.to ||\n        (side < 1 ? node.from >= pos : node.from > pos) ||\n        (side > -1 ? node.to <= pos : node.to < pos)) {\n        let parent = !overlays && node instanceof TreeNode && node.index < 0 ? null : node.parent;\n        if (!parent)\n            return node;\n        node = parent;\n    }\n    let mode = overlays ? 0 : IterMode.IgnoreOverlays;\n    // Must go up out of overlays when those do not overlap with pos\n    if (overlays)\n        for (let scan = node, parent = scan.parent; parent; scan = parent, parent = scan.parent) {\n            if (scan instanceof TreeNode && scan.index < 0 && ((_a = parent.enter(pos, side, mode)) === null || _a === void 0 ? void 0 : _a.from) != scan.from)\n                node = parent;\n        }\n    for (;;) {\n        let inner = node.enter(pos, side, mode);\n        if (!inner)\n            return node;\n        node = inner;\n    }\n}\nclass BaseNode {\n    cursor(mode = 0) { return new TreeCursor(this, mode); }\n    getChild(type, before = null, after = null) {\n        let r = getChildren(this, type, before, after);\n        return r.length ? r[0] : null;\n    }\n    getChildren(type, before = null, after = null) {\n        return getChildren(this, type, before, after);\n    }\n    resolve(pos, side = 0) {\n        return resolveNode(this, pos, side, false);\n    }\n    resolveInner(pos, side = 0) {\n        return resolveNode(this, pos, side, true);\n    }\n    matchContext(context) {\n        return matchNodeContext(this, context);\n    }\n    enterUnfinishedNodesBefore(pos) {\n        let scan = this.childBefore(pos), node = this;\n        while (scan) {\n            let last = scan.lastChild;\n            if (!last || last.to != scan.to)\n                break;\n            if (last.type.isError && last.from == last.to) {\n                node = scan;\n                scan = last.prevSibling;\n            }\n            else {\n                scan = last;\n            }\n        }\n        return node;\n    }\n    get node() { return this; }\n    get next() { return this.parent; }\n}\nclass TreeNode extends BaseNode {\n    constructor(_tree, from, \n    // Index in parent node, set to -1 if the node is not a direct child of _parent.node (overlay)\n    index, _parent) {\n        super();\n        this._tree = _tree;\n        this.from = from;\n        this.index = index;\n        this._parent = _parent;\n    }\n    get type() { return this._tree.type; }\n    get name() { return this._tree.type.name; }\n    get to() { return this.from + this._tree.length; }\n    nextChild(i, dir, pos, side, mode = 0) {\n        for (let parent = this;;) {\n            for (let { children, positions } = parent._tree, e = dir > 0 ? children.length : -1; i != e; i += dir) {\n                let next = children[i], start = positions[i] + parent.from;\n                if (!checkSide(side, pos, start, start + next.length))\n                    continue;\n                if (next instanceof TreeBuffer) {\n                    if (mode & IterMode.ExcludeBuffers)\n                        continue;\n                    let index = next.findChild(0, next.buffer.length, dir, pos - start, side);\n                    if (index > -1)\n                        return new BufferNode(new BufferContext(parent, next, i, start), null, index);\n                }\n                else if ((mode & IterMode.IncludeAnonymous) || (!next.type.isAnonymous || hasChild(next))) {\n                    let mounted;\n                    if (!(mode & IterMode.IgnoreMounts) && (mounted = MountedTree.get(next)) && !mounted.overlay)\n                        return new TreeNode(mounted.tree, start, i, parent);\n                    let inner = new TreeNode(next, start, i, parent);\n                    return (mode & IterMode.IncludeAnonymous) || !inner.type.isAnonymous ? inner\n                        : inner.nextChild(dir < 0 ? next.children.length - 1 : 0, dir, pos, side);\n                }\n            }\n            if ((mode & IterMode.IncludeAnonymous) || !parent.type.isAnonymous)\n                return null;\n            if (parent.index >= 0)\n                i = parent.index + dir;\n            else\n                i = dir < 0 ? -1 : parent._parent._tree.children.length;\n            parent = parent._parent;\n            if (!parent)\n                return null;\n        }\n    }\n    get firstChild() { return this.nextChild(0, 1, 0, 4 /* Side.DontCare */); }\n    get lastChild() { return this.nextChild(this._tree.children.length - 1, -1, 0, 4 /* Side.DontCare */); }\n    childAfter(pos) { return this.nextChild(0, 1, pos, 2 /* Side.After */); }\n    childBefore(pos) { return this.nextChild(this._tree.children.length - 1, -1, pos, -2 /* Side.Before */); }\n    enter(pos, side, mode = 0) {\n        let mounted;\n        if (!(mode & IterMode.IgnoreOverlays) && (mounted = MountedTree.get(this._tree)) && mounted.overlay) {\n            let rPos = pos - this.from;\n            for (let { from, to } of mounted.overlay) {\n                if ((side > 0 ? from <= rPos : from < rPos) &&\n                    (side < 0 ? to >= rPos : to > rPos))\n                    return new TreeNode(mounted.tree, mounted.overlay[0].from + this.from, -1, this);\n            }\n        }\n        return this.nextChild(0, 1, pos, side, mode);\n    }\n    nextSignificantParent() {\n        let val = this;\n        while (val.type.isAnonymous && val._parent)\n            val = val._parent;\n        return val;\n    }\n    get parent() {\n        return this._parent ? this._parent.nextSignificantParent() : null;\n    }\n    get nextSibling() {\n        return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4 /* Side.DontCare */) : null;\n    }\n    get prevSibling() {\n        return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4 /* Side.DontCare */) : null;\n    }\n    get tree() { return this._tree; }\n    toTree() { return this._tree; }\n    /**\n    @internal\n    */\n    toString() { return this._tree.toString(); }\n}\nfunction getChildren(node, type, before, after) {\n    let cur = node.cursor(), result = [];\n    if (!cur.firstChild())\n        return result;\n    if (before != null)\n        for (let found = false; !found;) {\n            found = cur.type.is(before);\n            if (!cur.nextSibling())\n                return result;\n        }\n    for (;;) {\n        if (after != null && cur.type.is(after))\n            return result;\n        if (cur.type.is(type))\n            result.push(cur.node);\n        if (!cur.nextSibling())\n            return after == null ? result : [];\n    }\n}\nfunction matchNodeContext(node, context, i = context.length - 1) {\n    for (let p = node.parent; i >= 0; p = p.parent) {\n        if (!p)\n            return false;\n        if (!p.type.isAnonymous) {\n            if (context[i] && context[i] != p.name)\n                return false;\n            i--;\n        }\n    }\n    return true;\n}\nclass BufferContext {\n    constructor(parent, buffer, index, start) {\n        this.parent = parent;\n        this.buffer = buffer;\n        this.index = index;\n        this.start = start;\n    }\n}\nclass BufferNode extends BaseNode {\n    get name() { return this.type.name; }\n    get from() { return this.context.start + this.context.buffer.buffer[this.index + 1]; }\n    get to() { return this.context.start + this.context.buffer.buffer[this.index + 2]; }\n    constructor(context, _parent, index) {\n        super();\n        this.context = context;\n        this._parent = _parent;\n        this.index = index;\n        this.type = context.buffer.set.types[context.buffer.buffer[index]];\n    }\n    child(dir, pos, side) {\n        let { buffer } = this.context;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.context.start, side);\n        return index < 0 ? null : new BufferNode(this.context, this, index);\n    }\n    get firstChild() { return this.child(1, 0, 4 /* Side.DontCare */); }\n    get lastChild() { return this.child(-1, 0, 4 /* Side.DontCare */); }\n    childAfter(pos) { return this.child(1, pos, 2 /* Side.After */); }\n    childBefore(pos) { return this.child(-1, pos, -2 /* Side.Before */); }\n    enter(pos, side, mode = 0) {\n        if (mode & IterMode.ExcludeBuffers)\n            return null;\n        let { buffer } = this.context;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], side > 0 ? 1 : -1, pos - this.context.start, side);\n        return index < 0 ? null : new BufferNode(this.context, this, index);\n    }\n    get parent() {\n        return this._parent || this.context.parent.nextSignificantParent();\n    }\n    externalSibling(dir) {\n        return this._parent ? null : this.context.parent.nextChild(this.context.index + dir, dir, 0, 4 /* Side.DontCare */);\n    }\n    get nextSibling() {\n        let { buffer } = this.context;\n        let after = buffer.buffer[this.index + 3];\n        if (after < (this._parent ? buffer.buffer[this._parent.index + 3] : buffer.buffer.length))\n            return new BufferNode(this.context, this._parent, after);\n        return this.externalSibling(1);\n    }\n    get prevSibling() {\n        let { buffer } = this.context;\n        let parentStart = this._parent ? this._parent.index + 4 : 0;\n        if (this.index == parentStart)\n            return this.externalSibling(-1);\n        return new BufferNode(this.context, this._parent, buffer.findChild(parentStart, this.index, -1, 0, 4 /* Side.DontCare */));\n    }\n    get tree() { return null; }\n    toTree() {\n        let children = [], positions = [];\n        let { buffer } = this.context;\n        let startI = this.index + 4, endI = buffer.buffer[this.index + 3];\n        if (endI > startI) {\n            let from = buffer.buffer[this.index + 1];\n            children.push(buffer.slice(startI, endI, from));\n            positions.push(0);\n        }\n        return new Tree(this.type, children, positions, this.to - this.from);\n    }\n    /**\n    @internal\n    */\n    toString() { return this.context.buffer.childString(this.index); }\n}\nfunction iterStack(heads) {\n    if (!heads.length)\n        return null;\n    let pick = 0, picked = heads[0];\n    for (let i = 1; i < heads.length; i++) {\n        let node = heads[i];\n        if (node.from > picked.from || node.to < picked.to) {\n            picked = node;\n            pick = i;\n        }\n    }\n    let next = picked instanceof TreeNode && picked.index < 0 ? null : picked.parent;\n    let newHeads = heads.slice();\n    if (next)\n        newHeads[pick] = next;\n    else\n        newHeads.splice(pick, 1);\n    return new StackIterator(newHeads, picked);\n}\nclass StackIterator {\n    constructor(heads, node) {\n        this.heads = heads;\n        this.node = node;\n    }\n    get next() { return iterStack(this.heads); }\n}\nfunction stackIterator(tree, pos, side) {\n    let inner = tree.resolveInner(pos, side), layers = null;\n    for (let scan = inner instanceof TreeNode ? inner : inner.context.parent; scan; scan = scan.parent) {\n        if (scan.index < 0) { // This is an overlay root\n            let parent = scan.parent;\n            (layers || (layers = [inner])).push(parent.resolve(pos, side));\n            scan = parent;\n        }\n        else {\n            let mount = MountedTree.get(scan.tree);\n            // Relevant overlay branching off\n            if (mount && mount.overlay && mount.overlay[0].from <= pos && mount.overlay[mount.overlay.length - 1].to >= pos) {\n                let root = new TreeNode(mount.tree, mount.overlay[0].from + scan.from, -1, scan);\n                (layers || (layers = [inner])).push(resolveNode(root, pos, side, false));\n            }\n        }\n    }\n    return layers ? iterStack(layers) : inner;\n}\n/**\nA tree cursor object focuses on a given node in a syntax tree, and\nallows you to move to adjacent nodes.\n*/\nclass TreeCursor {\n    /**\n    Shorthand for `.type.name`.\n    */\n    get name() { return this.type.name; }\n    /**\n    @internal\n    */\n    constructor(node, \n    /**\n    @internal\n    */\n    mode = 0) {\n        this.mode = mode;\n        /**\n        @internal\n        */\n        this.buffer = null;\n        this.stack = [];\n        /**\n        @internal\n        */\n        this.index = 0;\n        this.bufferNode = null;\n        if (node instanceof TreeNode) {\n            this.yieldNode(node);\n        }\n        else {\n            this._tree = node.context.parent;\n            this.buffer = node.context;\n            for (let n = node._parent; n; n = n._parent)\n                this.stack.unshift(n.index);\n            this.bufferNode = node;\n            this.yieldBuf(node.index);\n        }\n    }\n    yieldNode(node) {\n        if (!node)\n            return false;\n        this._tree = node;\n        this.type = node.type;\n        this.from = node.from;\n        this.to = node.to;\n        return true;\n    }\n    yieldBuf(index, type) {\n        this.index = index;\n        let { start, buffer } = this.buffer;\n        this.type = type || buffer.set.types[buffer.buffer[index]];\n        this.from = start + buffer.buffer[index + 1];\n        this.to = start + buffer.buffer[index + 2];\n        return true;\n    }\n    /**\n    @internal\n    */\n    yield(node) {\n        if (!node)\n            return false;\n        if (node instanceof TreeNode) {\n            this.buffer = null;\n            return this.yieldNode(node);\n        }\n        this.buffer = node.context;\n        return this.yieldBuf(node.index, node.type);\n    }\n    /**\n    @internal\n    */\n    toString() {\n        return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();\n    }\n    /**\n    @internal\n    */\n    enterChild(dir, pos, side) {\n        if (!this.buffer)\n            return this.yield(this._tree.nextChild(dir < 0 ? this._tree._tree.children.length - 1 : 0, dir, pos, side, this.mode));\n        let { buffer } = this.buffer;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.buffer.start, side);\n        if (index < 0)\n            return false;\n        this.stack.push(this.index);\n        return this.yieldBuf(index);\n    }\n    /**\n    Move the cursor to this node's first child. When this returns\n    false, the node has no child, and the cursor has not been moved.\n    */\n    firstChild() { return this.enterChild(1, 0, 4 /* Side.DontCare */); }\n    /**\n    Move the cursor to this node's last child.\n    */\n    lastChild() { return this.enterChild(-1, 0, 4 /* Side.DontCare */); }\n    /**\n    Move the cursor to the first child that ends after `pos`.\n    */\n    childAfter(pos) { return this.enterChild(1, pos, 2 /* Side.After */); }\n    /**\n    Move to the last child that starts before `pos`.\n    */\n    childBefore(pos) { return this.enterChild(-1, pos, -2 /* Side.Before */); }\n    /**\n    Move the cursor to the child around `pos`. If side is -1 the\n    child may end at that position, when 1 it may start there. This\n    will also enter [overlaid](#common.MountedTree.overlay)\n    [mounted](#common.NodeProp^mounted) trees unless `overlays` is\n    set to false.\n    */\n    enter(pos, side, mode = this.mode) {\n        if (!this.buffer)\n            return this.yield(this._tree.enter(pos, side, mode));\n        return mode & IterMode.ExcludeBuffers ? false : this.enterChild(1, pos, side);\n    }\n    /**\n    Move to the node's parent node, if this isn't the top node.\n    */\n    parent() {\n        if (!this.buffer)\n            return this.yieldNode((this.mode & IterMode.IncludeAnonymous) ? this._tree._parent : this._tree.parent);\n        if (this.stack.length)\n            return this.yieldBuf(this.stack.pop());\n        let parent = (this.mode & IterMode.IncludeAnonymous) ? this.buffer.parent : this.buffer.parent.nextSignificantParent();\n        this.buffer = null;\n        return this.yieldNode(parent);\n    }\n    /**\n    @internal\n    */\n    sibling(dir) {\n        if (!this.buffer)\n            return !this._tree._parent ? false\n                : this.yield(this._tree.index < 0 ? null\n                    : this._tree._parent.nextChild(this._tree.index + dir, dir, 0, 4 /* Side.DontCare */, this.mode));\n        let { buffer } = this.buffer, d = this.stack.length - 1;\n        if (dir < 0) {\n            let parentStart = d < 0 ? 0 : this.stack[d] + 4;\n            if (this.index != parentStart)\n                return this.yieldBuf(buffer.findChild(parentStart, this.index, -1, 0, 4 /* Side.DontCare */));\n        }\n        else {\n            let after = buffer.buffer[this.index + 3];\n            if (after < (d < 0 ? buffer.buffer.length : buffer.buffer[this.stack[d] + 3]))\n                return this.yieldBuf(after);\n        }\n        return d < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + dir, dir, 0, 4 /* Side.DontCare */, this.mode)) : false;\n    }\n    /**\n    Move to this node's next sibling, if any.\n    */\n    nextSibling() { return this.sibling(1); }\n    /**\n    Move to this node's previous sibling, if any.\n    */\n    prevSibling() { return this.sibling(-1); }\n    atLastNode(dir) {\n        let index, parent, { buffer } = this;\n        if (buffer) {\n            if (dir > 0) {\n                if (this.index < buffer.buffer.buffer.length)\n                    return false;\n            }\n            else {\n                for (let i = 0; i < this.index; i++)\n                    if (buffer.buffer.buffer[i + 3] < this.index)\n                        return false;\n            }\n            ({ index, parent } = buffer);\n        }\n        else {\n            ({ index, _parent: parent } = this._tree);\n        }\n        for (; parent; { index, _parent: parent } = parent) {\n            if (index > -1)\n                for (let i = index + dir, e = dir < 0 ? -1 : parent._tree.children.length; i != e; i += dir) {\n                    let child = parent._tree.children[i];\n                    if ((this.mode & IterMode.IncludeAnonymous) ||\n                        child instanceof TreeBuffer ||\n                        !child.type.isAnonymous ||\n                        hasChild(child))\n                        return false;\n                }\n        }\n        return true;\n    }\n    move(dir, enter) {\n        if (enter && this.enterChild(dir, 0, 4 /* Side.DontCare */))\n            return true;\n        for (;;) {\n            if (this.sibling(dir))\n                return true;\n            if (this.atLastNode(dir) || !this.parent())\n                return false;\n        }\n    }\n    /**\n    Move to the next node in a\n    [pre-order](https://en.wikipedia.org/wiki/Tree_traversal#Pre-order,_NLR)\n    traversal, going from a node to its first child or, if the\n    current node is empty or `enter` is false, its next sibling or\n    the next sibling of the first parent node that has one.\n    */\n    next(enter = true) { return this.move(1, enter); }\n    /**\n    Move to the next node in a last-to-first pre-order traveral. A\n    node is followed by its last child or, if it has none, its\n    previous sibling or the previous sibling of the first parent\n    node that has one.\n    */\n    prev(enter = true) { return this.move(-1, enter); }\n    /**\n    Move the cursor to the innermost node that covers `pos`. If\n    `side` is -1, it will enter nodes that end at `pos`. If it is 1,\n    it will enter nodes that start at `pos`.\n    */\n    moveTo(pos, side = 0) {\n        // Move up to a node that actually holds the position, if possible\n        while (this.from == this.to ||\n            (side < 1 ? this.from >= pos : this.from > pos) ||\n            (side > -1 ? this.to <= pos : this.to < pos))\n            if (!this.parent())\n                break;\n        // Then scan down into child nodes as far as possible\n        while (this.enterChild(1, pos, side)) { }\n        return this;\n    }\n    /**\n    Get a [syntax node](#common.SyntaxNode) at the cursor's current\n    position.\n    */\n    get node() {\n        if (!this.buffer)\n            return this._tree;\n        let cache = this.bufferNode, result = null, depth = 0;\n        if (cache && cache.context == this.buffer) {\n            scan: for (let index = this.index, d = this.stack.length; d >= 0;) {\n                for (let c = cache; c; c = c._parent)\n                    if (c.index == index) {\n                        if (index == this.index)\n                            return c;\n                        result = c;\n                        depth = d + 1;\n                        break scan;\n                    }\n                index = this.stack[--d];\n            }\n        }\n        for (let i = depth; i < this.stack.length; i++)\n            result = new BufferNode(this.buffer, result, this.stack[i]);\n        return this.bufferNode = new BufferNode(this.buffer, result, this.index);\n    }\n    /**\n    Get the [tree](#common.Tree) that represents the current node, if\n    any. Will return null when the node is in a [tree\n    buffer](#common.TreeBuffer).\n    */\n    get tree() {\n        return this.buffer ? null : this._tree._tree;\n    }\n    /**\n    Iterate over the current node and all its descendants, calling\n    `enter` when entering a node and `leave`, if given, when leaving\n    one. When `enter` returns `false`, any children of that node are\n    skipped, and `leave` isn't called for it.\n    */\n    iterate(enter, leave) {\n        for (let depth = 0;;) {\n            let mustLeave = false;\n            if (this.type.isAnonymous || enter(this) !== false) {\n                if (this.firstChild()) {\n                    depth++;\n                    continue;\n                }\n                if (!this.type.isAnonymous)\n                    mustLeave = true;\n            }\n            for (;;) {\n                if (mustLeave && leave)\n                    leave(this);\n                mustLeave = this.type.isAnonymous;\n                if (this.nextSibling())\n                    break;\n                if (!depth)\n                    return;\n                this.parent();\n                depth--;\n                mustLeave = true;\n            }\n        }\n    }\n    /**\n    Test whether the current node matches a given context—a sequence\n    of direct parent node names. Empty strings in the context array\n    are treated as wildcards.\n    */\n    matchContext(context) {\n        if (!this.buffer)\n            return matchNodeContext(this.node, context);\n        let { buffer } = this.buffer, { types } = buffer.set;\n        for (let i = context.length - 1, d = this.stack.length - 1; i >= 0; d--) {\n            if (d < 0)\n                return matchNodeContext(this.node, context, i);\n            let type = types[buffer.buffer[this.stack[d]]];\n            if (!type.isAnonymous) {\n                if (context[i] && context[i] != type.name)\n                    return false;\n                i--;\n            }\n        }\n        return true;\n    }\n}\nfunction hasChild(tree) {\n    return tree.children.some(ch => ch instanceof TreeBuffer || !ch.type.isAnonymous || hasChild(ch));\n}\nfunction buildTree(data) {\n    var _a;\n    let { buffer, nodeSet, maxBufferLength = DefaultBufferLength, reused = [], minRepeatType = nodeSet.types.length } = data;\n    let cursor = Array.isArray(buffer) ? new FlatBufferCursor(buffer, buffer.length) : buffer;\n    let types = nodeSet.types;\n    let contextHash = 0, lookAhead = 0;\n    function takeNode(parentStart, minPos, children, positions, inRepeat, depth) {\n        let { id, start, end, size } = cursor;\n        let lookAheadAtStart = lookAhead;\n        while (size < 0) {\n            cursor.next();\n            if (size == -1 /* SpecialRecord.Reuse */) {\n                let node = reused[id];\n                children.push(node);\n                positions.push(start - parentStart);\n                return;\n            }\n            else if (size == -3 /* SpecialRecord.ContextChange */) { // Context change\n                contextHash = id;\n                return;\n            }\n            else if (size == -4 /* SpecialRecord.LookAhead */) {\n                lookAhead = id;\n                return;\n            }\n            else {\n                throw new RangeError(`Unrecognized record size: ${size}`);\n            }\n        }\n        let type = types[id], node, buffer;\n        let startPos = start - parentStart;\n        if (end - start <= maxBufferLength && (buffer = findBufferSize(cursor.pos - minPos, inRepeat))) {\n            // Small enough for a buffer, and no reused nodes inside\n            let data = new Uint16Array(buffer.size - buffer.skip);\n            let endPos = cursor.pos - buffer.size, index = data.length;\n            while (cursor.pos > endPos)\n                index = copyToBuffer(buffer.start, data, index);\n            node = new TreeBuffer(data, end - buffer.start, nodeSet);\n            startPos = buffer.start - parentStart;\n        }\n        else { // Make it a node\n            let endPos = cursor.pos - size;\n            cursor.next();\n            let localChildren = [], localPositions = [];\n            let localInRepeat = id >= minRepeatType ? id : -1;\n            let lastGroup = 0, lastEnd = end;\n            while (cursor.pos > endPos) {\n                if (localInRepeat >= 0 && cursor.id == localInRepeat && cursor.size >= 0) {\n                    if (cursor.end <= lastEnd - maxBufferLength) {\n                        makeRepeatLeaf(localChildren, localPositions, start, lastGroup, cursor.end, lastEnd, localInRepeat, lookAheadAtStart);\n                        lastGroup = localChildren.length;\n                        lastEnd = cursor.end;\n                    }\n                    cursor.next();\n                }\n                else if (depth > 2500 /* CutOff.Depth */) {\n                    takeFlatNode(start, endPos, localChildren, localPositions);\n                }\n                else {\n                    takeNode(start, endPos, localChildren, localPositions, localInRepeat, depth + 1);\n                }\n            }\n            if (localInRepeat >= 0 && lastGroup > 0 && lastGroup < localChildren.length)\n                makeRepeatLeaf(localChildren, localPositions, start, lastGroup, start, lastEnd, localInRepeat, lookAheadAtStart);\n            localChildren.reverse();\n            localPositions.reverse();\n            if (localInRepeat > -1 && lastGroup > 0) {\n                let make = makeBalanced(type);\n                node = balanceRange(type, localChildren, localPositions, 0, localChildren.length, 0, end - start, make, make);\n            }\n            else {\n                node = makeTree(type, localChildren, localPositions, end - start, lookAheadAtStart - end);\n            }\n        }\n        children.push(node);\n        positions.push(startPos);\n    }\n    function takeFlatNode(parentStart, minPos, children, positions) {\n        let nodes = []; // Temporary, inverted array of leaf nodes found, with absolute positions\n        let nodeCount = 0, stopAt = -1;\n        while (cursor.pos > minPos) {\n            let { id, start, end, size } = cursor;\n            if (size > 4) { // Not a leaf\n                cursor.next();\n            }\n            else if (stopAt > -1 && start < stopAt) {\n                break;\n            }\n            else {\n                if (stopAt < 0)\n                    stopAt = end - maxBufferLength;\n                nodes.push(id, start, end);\n                nodeCount++;\n                cursor.next();\n            }\n        }\n        if (nodeCount) {\n            let buffer = new Uint16Array(nodeCount * 4);\n            let start = nodes[nodes.length - 2];\n            for (let i = nodes.length - 3, j = 0; i >= 0; i -= 3) {\n                buffer[j++] = nodes[i];\n                buffer[j++] = nodes[i + 1] - start;\n                buffer[j++] = nodes[i + 2] - start;\n                buffer[j++] = j;\n            }\n            children.push(new TreeBuffer(buffer, nodes[2] - start, nodeSet));\n            positions.push(start - parentStart);\n        }\n    }\n    function makeBalanced(type) {\n        return (children, positions, length) => {\n            let lookAhead = 0, lastI = children.length - 1, last, lookAheadProp;\n            if (lastI >= 0 && (last = children[lastI]) instanceof Tree) {\n                if (!lastI && last.type == type && last.length == length)\n                    return last;\n                if (lookAheadProp = last.prop(NodeProp.lookAhead))\n                    lookAhead = positions[lastI] + last.length + lookAheadProp;\n            }\n            return makeTree(type, children, positions, length, lookAhead);\n        };\n    }\n    function makeRepeatLeaf(children, positions, base, i, from, to, type, lookAhead) {\n        let localChildren = [], localPositions = [];\n        while (children.length > i) {\n            localChildren.push(children.pop());\n            localPositions.push(positions.pop() + base - from);\n        }\n        children.push(makeTree(nodeSet.types[type], localChildren, localPositions, to - from, lookAhead - to));\n        positions.push(from - base);\n    }\n    function makeTree(type, children, positions, length, lookAhead = 0, props) {\n        if (contextHash) {\n            let pair = [NodeProp.contextHash, contextHash];\n            props = props ? [pair].concat(props) : [pair];\n        }\n        if (lookAhead > 25) {\n            let pair = [NodeProp.lookAhead, lookAhead];\n            props = props ? [pair].concat(props) : [pair];\n        }\n        return new Tree(type, children, positions, length, props);\n    }\n    function findBufferSize(maxSize, inRepeat) {\n        // Scan through the buffer to find previous siblings that fit\n        // together in a TreeBuffer, and don't contain any reused nodes\n        // (which can't be stored in a buffer).\n        // If `inRepeat` is > -1, ignore node boundaries of that type for\n        // nesting, but make sure the end falls either at the start\n        // (`maxSize`) or before such a node.\n        let fork = cursor.fork();\n        let size = 0, start = 0, skip = 0, minStart = fork.end - maxBufferLength;\n        let result = { size: 0, start: 0, skip: 0 };\n        scan: for (let minPos = fork.pos - maxSize; fork.pos > minPos;) {\n            let nodeSize = fork.size;\n            // Pretend nested repeat nodes of the same type don't exist\n            if (fork.id == inRepeat && nodeSize >= 0) {\n                // Except that we store the current state as a valid return\n                // value.\n                result.size = size;\n                result.start = start;\n                result.skip = skip;\n                skip += 4;\n                size += 4;\n                fork.next();\n                continue;\n            }\n            let startPos = fork.pos - nodeSize;\n            if (nodeSize < 0 || startPos < minPos || fork.start < minStart)\n                break;\n            let localSkipped = fork.id >= minRepeatType ? 4 : 0;\n            let nodeStart = fork.start;\n            fork.next();\n            while (fork.pos > startPos) {\n                if (fork.size < 0) {\n                    if (fork.size == -3 /* SpecialRecord.ContextChange */)\n                        localSkipped += 4;\n                    else\n                        break scan;\n                }\n                else if (fork.id >= minRepeatType) {\n                    localSkipped += 4;\n                }\n                fork.next();\n            }\n            start = nodeStart;\n            size += nodeSize;\n            skip += localSkipped;\n        }\n        if (inRepeat < 0 || size == maxSize) {\n            result.size = size;\n            result.start = start;\n            result.skip = skip;\n        }\n        return result.size > 4 ? result : undefined;\n    }\n    function copyToBuffer(bufferStart, buffer, index) {\n        let { id, start, end, size } = cursor;\n        cursor.next();\n        if (size >= 0 && id < minRepeatType) {\n            let startIndex = index;\n            if (size > 4) {\n                let endPos = cursor.pos - (size - 4);\n                while (cursor.pos > endPos)\n                    index = copyToBuffer(bufferStart, buffer, index);\n            }\n            buffer[--index] = startIndex;\n            buffer[--index] = end - bufferStart;\n            buffer[--index] = start - bufferStart;\n            buffer[--index] = id;\n        }\n        else if (size == -3 /* SpecialRecord.ContextChange */) {\n            contextHash = id;\n        }\n        else if (size == -4 /* SpecialRecord.LookAhead */) {\n            lookAhead = id;\n        }\n        return index;\n    }\n    let children = [], positions = [];\n    while (cursor.pos > 0)\n        takeNode(data.start || 0, data.bufferStart || 0, children, positions, -1, 0);\n    let length = (_a = data.length) !== null && _a !== void 0 ? _a : (children.length ? positions[0] + children[0].length : 0);\n    return new Tree(types[data.topID], children.reverse(), positions.reverse(), length);\n}\nconst nodeSizeCache = new WeakMap;\nfunction nodeSize(balanceType, node) {\n    if (!balanceType.isAnonymous || node instanceof TreeBuffer || node.type != balanceType)\n        return 1;\n    let size = nodeSizeCache.get(node);\n    if (size == null) {\n        size = 1;\n        for (let child of node.children) {\n            if (child.type != balanceType || !(child instanceof Tree)) {\n                size = 1;\n                break;\n            }\n            size += nodeSize(balanceType, child);\n        }\n        nodeSizeCache.set(node, size);\n    }\n    return size;\n}\nfunction balanceRange(\n// The type the balanced tree's inner nodes.\nbalanceType, \n// The direct children and their positions\nchildren, positions, \n// The index range in children/positions to use\nfrom, to, \n// The start position of the nodes, relative to their parent.\nstart, \n// Length of the outer node\nlength, \n// Function to build the top node of the balanced tree\nmkTop, \n// Function to build internal nodes for the balanced tree\nmkTree) {\n    let total = 0;\n    for (let i = from; i < to; i++)\n        total += nodeSize(balanceType, children[i]);\n    let maxChild = Math.ceil((total * 1.5) / 8 /* Balance.BranchFactor */);\n    let localChildren = [], localPositions = [];\n    function divide(children, positions, from, to, offset) {\n        for (let i = from; i < to;) {\n            let groupFrom = i, groupStart = positions[i], groupSize = nodeSize(balanceType, children[i]);\n            i++;\n            for (; i < to; i++) {\n                let nextSize = nodeSize(balanceType, children[i]);\n                if (groupSize + nextSize >= maxChild)\n                    break;\n                groupSize += nextSize;\n            }\n            if (i == groupFrom + 1) {\n                if (groupSize > maxChild) {\n                    let only = children[groupFrom]; // Only trees can have a size > 1\n                    divide(only.children, only.positions, 0, only.children.length, positions[groupFrom] + offset);\n                    continue;\n                }\n                localChildren.push(children[groupFrom]);\n            }\n            else {\n                let length = positions[i - 1] + children[i - 1].length - groupStart;\n                localChildren.push(balanceRange(balanceType, children, positions, groupFrom, i, groupStart, length, null, mkTree));\n            }\n            localPositions.push(groupStart + offset - start);\n        }\n    }\n    divide(children, positions, from, to, 0);\n    return (mkTop || mkTree)(localChildren, localPositions, length);\n}\n/**\nProvides a way to associate values with pieces of trees. As long\nas that part of the tree is reused, the associated values can be\nretrieved from an updated tree.\n*/\nclass NodeWeakMap {\n    constructor() {\n        this.map = new WeakMap();\n    }\n    setBuffer(buffer, index, value) {\n        let inner = this.map.get(buffer);\n        if (!inner)\n            this.map.set(buffer, inner = new Map);\n        inner.set(index, value);\n    }\n    getBuffer(buffer, index) {\n        let inner = this.map.get(buffer);\n        return inner && inner.get(index);\n    }\n    /**\n    Set the value for this syntax node.\n    */\n    set(node, value) {\n        if (node instanceof BufferNode)\n            this.setBuffer(node.context.buffer, node.index, value);\n        else if (node instanceof TreeNode)\n            this.map.set(node.tree, value);\n    }\n    /**\n    Retrieve value for this syntax node, if it exists in the map.\n    */\n    get(node) {\n        return node instanceof BufferNode ? this.getBuffer(node.context.buffer, node.index)\n            : node instanceof TreeNode ? this.map.get(node.tree) : undefined;\n    }\n    /**\n    Set the value for the node that a cursor currently points to.\n    */\n    cursorSet(cursor, value) {\n        if (cursor.buffer)\n            this.setBuffer(cursor.buffer.buffer, cursor.index, value);\n        else\n            this.map.set(cursor.tree, value);\n    }\n    /**\n    Retrieve the value for the node that a cursor currently points\n    to.\n    */\n    cursorGet(cursor) {\n        return cursor.buffer ? this.getBuffer(cursor.buffer.buffer, cursor.index) : this.map.get(cursor.tree);\n    }\n}\n\n/**\nTree fragments are used during [incremental\nparsing](#common.Parser.startParse) to track parts of old trees\nthat can be reused in a new parse. An array of fragments is used\nto track regions of an old tree whose nodes might be reused in new\nparses. Use the static\n[`applyChanges`](#common.TreeFragment^applyChanges) method to\nupdate fragments for document changes.\n*/\nclass TreeFragment {\n    /**\n    Construct a tree fragment. You'll usually want to use\n    [`addTree`](#common.TreeFragment^addTree) and\n    [`applyChanges`](#common.TreeFragment^applyChanges) instead of\n    calling this directly.\n    */\n    constructor(\n    /**\n    The start of the unchanged range pointed to by this fragment.\n    This refers to an offset in the _updated_ document (as opposed\n    to the original tree).\n    */\n    from, \n    /**\n    The end of the unchanged range.\n    */\n    to, \n    /**\n    The tree that this fragment is based on.\n    */\n    tree, \n    /**\n    The offset between the fragment's tree and the document that\n    this fragment can be used against. Add this when going from\n    document to tree positions, subtract it to go from tree to\n    document positions.\n    */\n    offset, openStart = false, openEnd = false) {\n        this.from = from;\n        this.to = to;\n        this.tree = tree;\n        this.offset = offset;\n        this.open = (openStart ? 1 /* Open.Start */ : 0) | (openEnd ? 2 /* Open.End */ : 0);\n    }\n    /**\n    Whether the start of the fragment represents the start of a\n    parse, or the end of a change. (In the second case, it may not\n    be safe to reuse some nodes at the start, depending on the\n    parsing algorithm.)\n    */\n    get openStart() { return (this.open & 1 /* Open.Start */) > 0; }\n    /**\n    Whether the end of the fragment represents the end of a\n    full-document parse, or the start of a change.\n    */\n    get openEnd() { return (this.open & 2 /* Open.End */) > 0; }\n    /**\n    Create a set of fragments from a freshly parsed tree, or update\n    an existing set of fragments by replacing the ones that overlap\n    with a tree with content from the new tree. When `partial` is\n    true, the parse is treated as incomplete, and the resulting\n    fragment has [`openEnd`](#common.TreeFragment.openEnd) set to\n    true.\n    */\n    static addTree(tree, fragments = [], partial = false) {\n        let result = [new TreeFragment(0, tree.length, tree, 0, false, partial)];\n        for (let f of fragments)\n            if (f.to > tree.length)\n                result.push(f);\n        return result;\n    }\n    /**\n    Apply a set of edits to an array of fragments, removing or\n    splitting fragments as necessary to remove edited ranges, and\n    adjusting offsets for fragments that moved.\n    */\n    static applyChanges(fragments, changes, minGap = 128) {\n        if (!changes.length)\n            return fragments;\n        let result = [];\n        let fI = 1, nextF = fragments.length ? fragments[0] : null;\n        for (let cI = 0, pos = 0, off = 0;; cI++) {\n            let nextC = cI < changes.length ? changes[cI] : null;\n            let nextPos = nextC ? nextC.fromA : 1e9;\n            if (nextPos - pos >= minGap)\n                while (nextF && nextF.from < nextPos) {\n                    let cut = nextF;\n                    if (pos >= cut.from || nextPos <= cut.to || off) {\n                        let fFrom = Math.max(cut.from, pos) - off, fTo = Math.min(cut.to, nextPos) - off;\n                        cut = fFrom >= fTo ? null : new TreeFragment(fFrom, fTo, cut.tree, cut.offset + off, cI > 0, !!nextC);\n                    }\n                    if (cut)\n                        result.push(cut);\n                    if (nextF.to > nextPos)\n                        break;\n                    nextF = fI < fragments.length ? fragments[fI++] : null;\n                }\n            if (!nextC)\n                break;\n            pos = nextC.toA;\n            off = nextC.toA - nextC.toB;\n        }\n        return result;\n    }\n}\n/**\nA superclass that parsers should extend.\n*/\nclass Parser {\n    /**\n    Start a parse, returning a [partial parse](#common.PartialParse)\n    object. [`fragments`](#common.TreeFragment) can be passed in to\n    make the parse incremental.\n    \n    By default, the entire input is parsed. You can pass `ranges`,\n    which should be a sorted array of non-empty, non-overlapping\n    ranges, to parse only those ranges. The tree returned in that\n    case will start at `ranges[0].from`.\n    */\n    startParse(input, fragments, ranges) {\n        if (typeof input == \"string\")\n            input = new StringInput(input);\n        ranges = !ranges ? [new Range(0, input.length)] : ranges.length ? ranges.map(r => new Range(r.from, r.to)) : [new Range(0, 0)];\n        return this.createParse(input, fragments || [], ranges);\n    }\n    /**\n    Run a full parse, returning the resulting tree.\n    */\n    parse(input, fragments, ranges) {\n        let parse = this.startParse(input, fragments, ranges);\n        for (;;) {\n            let done = parse.advance();\n            if (done)\n                return done;\n        }\n    }\n}\nclass StringInput {\n    constructor(string) {\n        this.string = string;\n    }\n    get length() { return this.string.length; }\n    chunk(from) { return this.string.slice(from); }\n    get lineChunks() { return false; }\n    read(from, to) { return this.string.slice(from, to); }\n}\n\n/**\nCreate a parse wrapper that, after the inner parse completes,\nscans its tree for mixed language regions with the `nest`\nfunction, runs the resulting [inner parses](#common.NestedParse),\nand then [mounts](#common.NodeProp^mounted) their results onto the\ntree.\n*/\nfunction parseMixed(nest) {\n    return (parse, input, fragments, ranges) => new MixedParse(parse, nest, input, fragments, ranges);\n}\nclass InnerParse {\n    constructor(parser, parse, overlay, target, from) {\n        this.parser = parser;\n        this.parse = parse;\n        this.overlay = overlay;\n        this.target = target;\n        this.from = from;\n    }\n}\nfunction checkRanges(ranges) {\n    if (!ranges.length || ranges.some(r => r.from >= r.to))\n        throw new RangeError(\"Invalid inner parse ranges given: \" + JSON.stringify(ranges));\n}\nclass ActiveOverlay {\n    constructor(parser, predicate, mounts, index, start, target, prev) {\n        this.parser = parser;\n        this.predicate = predicate;\n        this.mounts = mounts;\n        this.index = index;\n        this.start = start;\n        this.target = target;\n        this.prev = prev;\n        this.depth = 0;\n        this.ranges = [];\n    }\n}\nconst stoppedInner = new NodeProp({ perNode: true });\nclass MixedParse {\n    constructor(base, nest, input, fragments, ranges) {\n        this.nest = nest;\n        this.input = input;\n        this.fragments = fragments;\n        this.ranges = ranges;\n        this.inner = [];\n        this.innerDone = 0;\n        this.baseTree = null;\n        this.stoppedAt = null;\n        this.baseParse = base;\n    }\n    advance() {\n        if (this.baseParse) {\n            let done = this.baseParse.advance();\n            if (!done)\n                return null;\n            this.baseParse = null;\n            this.baseTree = done;\n            this.startInner();\n            if (this.stoppedAt != null)\n                for (let inner of this.inner)\n                    inner.parse.stopAt(this.stoppedAt);\n        }\n        if (this.innerDone == this.inner.length) {\n            let result = this.baseTree;\n            if (this.stoppedAt != null)\n                result = new Tree(result.type, result.children, result.positions, result.length, result.propValues.concat([[stoppedInner, this.stoppedAt]]));\n            return result;\n        }\n        let inner = this.inner[this.innerDone], done = inner.parse.advance();\n        if (done) {\n            this.innerDone++;\n            // This is a somewhat dodgy but super helpful hack where we\n            // patch up nodes created by the inner parse (and thus\n            // presumably not aliased anywhere else) to hold the information\n            // about the inner parse.\n            let props = Object.assign(Object.create(null), inner.target.props);\n            props[NodeProp.mounted.id] = new MountedTree(done, inner.overlay, inner.parser);\n            inner.target.props = props;\n        }\n        return null;\n    }\n    get parsedPos() {\n        if (this.baseParse)\n            return 0;\n        let pos = this.input.length;\n        for (let i = this.innerDone; i < this.inner.length; i++) {\n            if (this.inner[i].from < pos)\n                pos = Math.min(pos, this.inner[i].parse.parsedPos);\n        }\n        return pos;\n    }\n    stopAt(pos) {\n        this.stoppedAt = pos;\n        if (this.baseParse)\n            this.baseParse.stopAt(pos);\n        else\n            for (let i = this.innerDone; i < this.inner.length; i++)\n                this.inner[i].parse.stopAt(pos);\n    }\n    startInner() {\n        let fragmentCursor = new FragmentCursor(this.fragments);\n        let overlay = null;\n        let covered = null;\n        let cursor = new TreeCursor(new TreeNode(this.baseTree, this.ranges[0].from, 0, null), IterMode.IncludeAnonymous | IterMode.IgnoreMounts);\n        scan: for (let nest, isCovered;;) {\n            let enter = true, range;\n            if (this.stoppedAt != null && cursor.from >= this.stoppedAt) {\n                enter = false;\n            }\n            else if (fragmentCursor.hasNode(cursor)) {\n                if (overlay) {\n                    let match = overlay.mounts.find(m => m.frag.from <= cursor.from && m.frag.to >= cursor.to && m.mount.overlay);\n                    if (match)\n                        for (let r of match.mount.overlay) {\n                            let from = r.from + match.pos, to = r.to + match.pos;\n                            if (from >= cursor.from && to <= cursor.to && !overlay.ranges.some(r => r.from < to && r.to > from))\n                                overlay.ranges.push({ from, to });\n                        }\n                }\n                enter = false;\n            }\n            else if (covered && (isCovered = checkCover(covered.ranges, cursor.from, cursor.to))) {\n                enter = isCovered != 2 /* Cover.Full */;\n            }\n            else if (!cursor.type.isAnonymous && (nest = this.nest(cursor, this.input)) &&\n                (cursor.from < cursor.to || !nest.overlay)) {\n                if (!cursor.tree)\n                    materialize(cursor);\n                let oldMounts = fragmentCursor.findMounts(cursor.from, nest.parser);\n                if (typeof nest.overlay == \"function\") {\n                    overlay = new ActiveOverlay(nest.parser, nest.overlay, oldMounts, this.inner.length, cursor.from, cursor.tree, overlay);\n                }\n                else {\n                    let ranges = punchRanges(this.ranges, nest.overlay ||\n                        (cursor.from < cursor.to ? [new Range(cursor.from, cursor.to)] : []));\n                    if (ranges.length)\n                        checkRanges(ranges);\n                    if (ranges.length || !nest.overlay)\n                        this.inner.push(new InnerParse(nest.parser, ranges.length ? nest.parser.startParse(this.input, enterFragments(oldMounts, ranges), ranges)\n                            : nest.parser.startParse(\"\"), nest.overlay ? nest.overlay.map(r => new Range(r.from - cursor.from, r.to - cursor.from)) : null, cursor.tree, ranges.length ? ranges[0].from : cursor.from));\n                    if (!nest.overlay)\n                        enter = false;\n                    else if (ranges.length)\n                        covered = { ranges, depth: 0, prev: covered };\n                }\n            }\n            else if (overlay && (range = overlay.predicate(cursor))) {\n                if (range === true)\n                    range = new Range(cursor.from, cursor.to);\n                if (range.from < range.to)\n                    overlay.ranges.push(range);\n            }\n            if (enter && cursor.firstChild()) {\n                if (overlay)\n                    overlay.depth++;\n                if (covered)\n                    covered.depth++;\n            }\n            else {\n                for (;;) {\n                    if (cursor.nextSibling())\n                        break;\n                    if (!cursor.parent())\n                        break scan;\n                    if (overlay && !--overlay.depth) {\n                        let ranges = punchRanges(this.ranges, overlay.ranges);\n                        if (ranges.length) {\n                            checkRanges(ranges);\n                            this.inner.splice(overlay.index, 0, new InnerParse(overlay.parser, overlay.parser.startParse(this.input, enterFragments(overlay.mounts, ranges), ranges), overlay.ranges.map(r => new Range(r.from - overlay.start, r.to - overlay.start)), overlay.target, ranges[0].from));\n                        }\n                        overlay = overlay.prev;\n                    }\n                    if (covered && !--covered.depth)\n                        covered = covered.prev;\n                }\n            }\n        }\n    }\n}\nfunction checkCover(covered, from, to) {\n    for (let range of covered) {\n        if (range.from >= to)\n            break;\n        if (range.to > from)\n            return range.from <= from && range.to >= to ? 2 /* Cover.Full */ : 1 /* Cover.Partial */;\n    }\n    return 0 /* Cover.None */;\n}\n// Take a piece of buffer and convert it into a stand-alone\n// TreeBuffer.\nfunction sliceBuf(buf, startI, endI, nodes, positions, off) {\n    if (startI < endI) {\n        let from = buf.buffer[startI + 1];\n        nodes.push(buf.slice(startI, endI, from));\n        positions.push(from - off);\n    }\n}\n// This function takes a node that's in a buffer, and converts it, and\n// its parent buffer nodes, into a Tree. This is again acting on the\n// assumption that the trees and buffers have been constructed by the\n// parse that was ran via the mix parser, and thus aren't shared with\n// any other code, making violations of the immutability safe.\nfunction materialize(cursor) {\n    let { node } = cursor, stack = [];\n    let buffer = node.context.buffer;\n    // Scan up to the nearest tree\n    do {\n        stack.push(cursor.index);\n        cursor.parent();\n    } while (!cursor.tree);\n    // Find the index of the buffer in that tree\n    let base = cursor.tree, i = base.children.indexOf(buffer);\n    let buf = base.children[i], b = buf.buffer, newStack = [i];\n    // Split a level in the buffer, putting the nodes before and after\n    // the child that contains `node` into new buffers.\n    function split(startI, endI, type, innerOffset, length, stackPos) {\n        let targetI = stack[stackPos];\n        let children = [], positions = [];\n        sliceBuf(buf, startI, targetI, children, positions, innerOffset);\n        let from = b[targetI + 1], to = b[targetI + 2];\n        newStack.push(children.length);\n        let child = stackPos\n            ? split(targetI + 4, b[targetI + 3], buf.set.types[b[targetI]], from, to - from, stackPos - 1)\n            : node.toTree();\n        children.push(child);\n        positions.push(from - innerOffset);\n        sliceBuf(buf, b[targetI + 3], endI, children, positions, innerOffset);\n        return new Tree(type, children, positions, length);\n    }\n    base.children[i] = split(0, b.length, NodeType.none, 0, buf.length, stack.length - 1);\n    // Move the cursor back to the target node\n    for (let index of newStack) {\n        let tree = cursor.tree.children[index], pos = cursor.tree.positions[index];\n        cursor.yield(new TreeNode(tree, pos + cursor.from, index, cursor._tree));\n    }\n}\nclass StructureCursor {\n    constructor(root, offset) {\n        this.offset = offset;\n        this.done = false;\n        this.cursor = root.cursor(IterMode.IncludeAnonymous | IterMode.IgnoreMounts);\n    }\n    // Move to the first node (in pre-order) that starts at or after `pos`.\n    moveTo(pos) {\n        let { cursor } = this, p = pos - this.offset;\n        while (!this.done && cursor.from < p) {\n            if (cursor.to >= pos && cursor.enter(p, 1, IterMode.IgnoreOverlays | IterMode.ExcludeBuffers)) ;\n            else if (!cursor.next(false))\n                this.done = true;\n        }\n    }\n    hasNode(cursor) {\n        this.moveTo(cursor.from);\n        if (!this.done && this.cursor.from + this.offset == cursor.from && this.cursor.tree) {\n            for (let tree = this.cursor.tree;;) {\n                if (tree == cursor.tree)\n                    return true;\n                if (tree.children.length && tree.positions[0] == 0 && tree.children[0] instanceof Tree)\n                    tree = tree.children[0];\n                else\n                    break;\n            }\n        }\n        return false;\n    }\n}\nclass FragmentCursor {\n    constructor(fragments) {\n        var _a;\n        this.fragments = fragments;\n        this.curTo = 0;\n        this.fragI = 0;\n        if (fragments.length) {\n            let first = this.curFrag = fragments[0];\n            this.curTo = (_a = first.tree.prop(stoppedInner)) !== null && _a !== void 0 ? _a : first.to;\n            this.inner = new StructureCursor(first.tree, -first.offset);\n        }\n        else {\n            this.curFrag = this.inner = null;\n        }\n    }\n    hasNode(node) {\n        while (this.curFrag && node.from >= this.curTo)\n            this.nextFrag();\n        return this.curFrag && this.curFrag.from <= node.from && this.curTo >= node.to && this.inner.hasNode(node);\n    }\n    nextFrag() {\n        var _a;\n        this.fragI++;\n        if (this.fragI == this.fragments.length) {\n            this.curFrag = this.inner = null;\n        }\n        else {\n            let frag = this.curFrag = this.fragments[this.fragI];\n            this.curTo = (_a = frag.tree.prop(stoppedInner)) !== null && _a !== void 0 ? _a : frag.to;\n            this.inner = new StructureCursor(frag.tree, -frag.offset);\n        }\n    }\n    findMounts(pos, parser) {\n        var _a;\n        let result = [];\n        if (this.inner) {\n            this.inner.cursor.moveTo(pos, 1);\n            for (let pos = this.inner.cursor.node; pos; pos = pos.parent) {\n                let mount = (_a = pos.tree) === null || _a === void 0 ? void 0 : _a.prop(NodeProp.mounted);\n                if (mount && mount.parser == parser) {\n                    for (let i = this.fragI; i < this.fragments.length; i++) {\n                        let frag = this.fragments[i];\n                        if (frag.from >= pos.to)\n                            break;\n                        if (frag.tree == this.curFrag.tree)\n                            result.push({\n                                frag,\n                                pos: pos.from - frag.offset,\n                                mount\n                            });\n                    }\n                }\n            }\n        }\n        return result;\n    }\n}\nfunction punchRanges(outer, ranges) {\n    let copy = null, current = ranges;\n    for (let i = 1, j = 0; i < outer.length; i++) {\n        let gapFrom = outer[i - 1].to, gapTo = outer[i].from;\n        for (; j < current.length; j++) {\n            let r = current[j];\n            if (r.from >= gapTo)\n                break;\n            if (r.to <= gapFrom)\n                continue;\n            if (!copy)\n                current = copy = ranges.slice();\n            if (r.from < gapFrom) {\n                copy[j] = new Range(r.from, gapFrom);\n                if (r.to > gapTo)\n                    copy.splice(j + 1, 0, new Range(gapTo, r.to));\n            }\n            else if (r.to > gapTo) {\n                copy[j--] = new Range(gapTo, r.to);\n            }\n            else {\n                copy.splice(j--, 1);\n            }\n        }\n    }\n    return current;\n}\nfunction findCoverChanges(a, b, from, to) {\n    let iA = 0, iB = 0, inA = false, inB = false, pos = -1e9;\n    let result = [];\n    for (;;) {\n        let nextA = iA == a.length ? 1e9 : inA ? a[iA].to : a[iA].from;\n        let nextB = iB == b.length ? 1e9 : inB ? b[iB].to : b[iB].from;\n        if (inA != inB) {\n            let start = Math.max(pos, from), end = Math.min(nextA, nextB, to);\n            if (start < end)\n                result.push(new Range(start, end));\n        }\n        pos = Math.min(nextA, nextB);\n        if (pos == 1e9)\n            break;\n        if (nextA == pos) {\n            if (!inA)\n                inA = true;\n            else {\n                inA = false;\n                iA++;\n            }\n        }\n        if (nextB == pos) {\n            if (!inB)\n                inB = true;\n            else {\n                inB = false;\n                iB++;\n            }\n        }\n    }\n    return result;\n}\n// Given a number of fragments for the outer tree, and a set of ranges\n// to parse, find fragments for inner trees mounted around those\n// ranges, if any.\nfunction enterFragments(mounts, ranges) {\n    let result = [];\n    for (let { pos, mount, frag } of mounts) {\n        let startPos = pos + (mount.overlay ? mount.overlay[0].from : 0), endPos = startPos + mount.tree.length;\n        let from = Math.max(frag.from, startPos), to = Math.min(frag.to, endPos);\n        if (mount.overlay) {\n            let overlay = mount.overlay.map(r => new Range(r.from + pos, r.to + pos));\n            let changes = findCoverChanges(ranges, overlay, from, to);\n            for (let i = 0, pos = from;; i++) {\n                let last = i == changes.length, end = last ? to : changes[i].from;\n                if (end > pos)\n                    result.push(new TreeFragment(pos, end, mount.tree, -startPos, frag.from >= pos || frag.openStart, frag.to <= end || frag.openEnd));\n                if (last)\n                    break;\n                pos = changes[i].to;\n            }\n        }\n        else {\n            result.push(new TreeFragment(from, to, mount.tree, -startPos, frag.from >= startPos || frag.openStart, frag.to <= endPos || frag.openEnd));\n        }\n    }\n    return result;\n}\n\nexport { DefaultBufferLength, IterMode, MountedTree, NodeProp, NodeSet, NodeType, NodeWeakMap, Parser, Tree, TreeBuffer, TreeCursor, TreeFragment, parseMixed };\n","import { Parser, NodeProp, NodeSet, NodeType, DefaultBufferLength, Tree, IterMode } from '@lezer/common';\n\n/**\nA parse stack. These are used internally by the parser to track\nparsing progress. They also provide some properties and methods\nthat external code such as a tokenizer can use to get information\nabout the parse state.\n*/\nclass Stack {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The parse that this stack is part of @internal\n    */\n    p, \n    /**\n    Holds state, input pos, buffer index triplets for all but the\n    top state @internal\n    */\n    stack, \n    /**\n    The current parse state @internal\n    */\n    state, \n    // The position at which the next reduce should take place. This\n    // can be less than `this.pos` when skipped expressions have been\n    // added to the stack (which should be moved outside of the next\n    // reduction)\n    /**\n    @internal\n    */\n    reducePos, \n    /**\n    The input position up to which this stack has parsed.\n    */\n    pos, \n    /**\n    The dynamic score of the stack, including dynamic precedence\n    and error-recovery penalties\n    @internal\n    */\n    score, \n    // The output buffer. Holds (type, start, end, size) quads\n    // representing nodes created by the parser, where `size` is\n    // amount of buffer array entries covered by this node.\n    /**\n    @internal\n    */\n    buffer, \n    // The base offset of the buffer. When stacks are split, the split\n    // instance shared the buffer history with its parent up to\n    // `bufferBase`, which is the absolute offset (including the\n    // offset of previous splits) into the buffer at which this stack\n    // starts writing.\n    /**\n    @internal\n    */\n    bufferBase, \n    /**\n    @internal\n    */\n    curContext, \n    /**\n    @internal\n    */\n    lookAhead = 0, \n    // A parent stack from which this was split off, if any. This is\n    // set up so that it always points to a stack that has some\n    // additional buffer content, never to a stack with an equal\n    // `bufferBase`.\n    /**\n    @internal\n    */\n    parent) {\n        this.p = p;\n        this.stack = stack;\n        this.state = state;\n        this.reducePos = reducePos;\n        this.pos = pos;\n        this.score = score;\n        this.buffer = buffer;\n        this.bufferBase = bufferBase;\n        this.curContext = curContext;\n        this.lookAhead = lookAhead;\n        this.parent = parent;\n    }\n    /**\n    @internal\n    */\n    toString() {\n        return `[${this.stack.filter((_, i) => i % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? \"!\" + this.score : \"\"}`;\n    }\n    // Start an empty stack\n    /**\n    @internal\n    */\n    static start(p, state, pos = 0) {\n        let cx = p.parser.context;\n        return new Stack(p, [], state, pos, pos, 0, [], 0, cx ? new StackContext(cx, cx.start) : null, 0, null);\n    }\n    /**\n    The stack's current [context](#lr.ContextTracker) value, if\n    any. Its type will depend on the context tracker's type\n    parameter, or it will be `null` if there is no context\n    tracker.\n    */\n    get context() { return this.curContext ? this.curContext.context : null; }\n    // Push a state onto the stack, tracking its start position as well\n    // as the buffer base at that point.\n    /**\n    @internal\n    */\n    pushState(state, start) {\n        this.stack.push(this.state, start, this.bufferBase + this.buffer.length);\n        this.state = state;\n    }\n    // Apply a reduce action\n    /**\n    @internal\n    */\n    reduce(action) {\n        var _a;\n        let depth = action >> 19 /* Action.ReduceDepthShift */, type = action & 65535 /* Action.ValueMask */;\n        let { parser } = this.p;\n        let dPrec = parser.dynamicPrecedence(type);\n        if (dPrec)\n            this.score += dPrec;\n        if (depth == 0) {\n            this.pushState(parser.getGoto(this.state, type, true), this.reducePos);\n            // Zero-depth reductions are a special case—they add stuff to\n            // the stack without popping anything off.\n            if (type < parser.minRepeatTerm)\n                this.storeNode(type, this.reducePos, this.reducePos, 4, true);\n            this.reduceContext(type, this.reducePos);\n            return;\n        }\n        // Find the base index into `this.stack`, content after which will\n        // be dropped. Note that with `StayFlag` reductions we need to\n        // consume two extra frames (the dummy parent node for the skipped\n        // expression and the state that we'll be staying in, which should\n        // be moved to `this.state`).\n        let base = this.stack.length - ((depth - 1) * 3) - (action & 262144 /* Action.StayFlag */ ? 6 : 0);\n        let start = base ? this.stack[base - 2] : this.p.ranges[0].from, size = this.reducePos - start;\n        // This is a kludge to try and detect overly deep left-associative\n        // trees, which will not increase the parse stack depth and thus\n        // won't be caught by the regular stack-depth limit check.\n        if (size >= 2000 /* Recover.MinBigReduction */ && !((_a = this.p.parser.nodeSet.types[type]) === null || _a === void 0 ? void 0 : _a.isAnonymous)) {\n            if (start == this.p.lastBigReductionStart) {\n                this.p.bigReductionCount++;\n                this.p.lastBigReductionSize = size;\n            }\n            else if (this.p.lastBigReductionSize < size) {\n                this.p.bigReductionCount = 1;\n                this.p.lastBigReductionStart = start;\n                this.p.lastBigReductionSize = size;\n            }\n        }\n        let bufferBase = base ? this.stack[base - 1] : 0, count = this.bufferBase + this.buffer.length - bufferBase;\n        // Store normal terms or `R -> R R` repeat reductions\n        if (type < parser.minRepeatTerm || (action & 131072 /* Action.RepeatFlag */)) {\n            let pos = parser.stateFlag(this.state, 1 /* StateFlag.Skipped */) ? this.pos : this.reducePos;\n            this.storeNode(type, start, pos, count + 4, true);\n        }\n        if (action & 262144 /* Action.StayFlag */) {\n            this.state = this.stack[base];\n        }\n        else {\n            let baseStateID = this.stack[base - 3];\n            this.state = parser.getGoto(baseStateID, type, true);\n        }\n        while (this.stack.length > base)\n            this.stack.pop();\n        this.reduceContext(type, start);\n    }\n    // Shift a value into the buffer\n    /**\n    @internal\n    */\n    storeNode(term, start, end, size = 4, isReduce = false) {\n        if (term == 0 /* Term.Err */ &&\n            (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {\n            // Try to omit/merge adjacent error nodes\n            let cur = this, top = this.buffer.length;\n            if (top == 0 && cur.parent) {\n                top = cur.bufferBase - cur.parent.bufferBase;\n                cur = cur.parent;\n            }\n            if (top > 0 && cur.buffer[top - 4] == 0 /* Term.Err */ && cur.buffer[top - 1] > -1) {\n                if (start == end)\n                    return;\n                if (cur.buffer[top - 2] >= start) {\n                    cur.buffer[top - 2] = end;\n                    return;\n                }\n            }\n        }\n        if (!isReduce || this.pos == end) { // Simple case, just append\n            this.buffer.push(term, start, end, size);\n        }\n        else { // There may be skipped nodes that have to be moved forward\n            let index = this.buffer.length;\n            if (index > 0 && this.buffer[index - 4] != 0 /* Term.Err */)\n                while (index > 0 && this.buffer[index - 2] > end) {\n                    // Move this record forward\n                    this.buffer[index] = this.buffer[index - 4];\n                    this.buffer[index + 1] = this.buffer[index - 3];\n                    this.buffer[index + 2] = this.buffer[index - 2];\n                    this.buffer[index + 3] = this.buffer[index - 1];\n                    index -= 4;\n                    if (size > 4)\n                        size -= 4;\n                }\n            this.buffer[index] = term;\n            this.buffer[index + 1] = start;\n            this.buffer[index + 2] = end;\n            this.buffer[index + 3] = size;\n        }\n    }\n    // Apply a shift action\n    /**\n    @internal\n    */\n    shift(action, type, start, end) {\n        if (action & 131072 /* Action.GotoFlag */) {\n            this.pushState(action & 65535 /* Action.ValueMask */, this.pos);\n        }\n        else if ((action & 262144 /* Action.StayFlag */) == 0) { // Regular shift\n            let nextState = action, { parser } = this.p;\n            if (end > this.pos || type <= parser.maxNode) {\n                this.pos = end;\n                if (!parser.stateFlag(nextState, 1 /* StateFlag.Skipped */))\n                    this.reducePos = end;\n            }\n            this.pushState(nextState, start);\n            this.shiftContext(type, start);\n            if (type <= parser.maxNode)\n                this.buffer.push(type, start, end, 4);\n        }\n        else { // Shift-and-stay, which means this is a skipped token\n            this.pos = end;\n            this.shiftContext(type, start);\n            if (type <= this.p.parser.maxNode)\n                this.buffer.push(type, start, end, 4);\n        }\n    }\n    // Apply an action\n    /**\n    @internal\n    */\n    apply(action, next, nextStart, nextEnd) {\n        if (action & 65536 /* Action.ReduceFlag */)\n            this.reduce(action);\n        else\n            this.shift(action, next, nextStart, nextEnd);\n    }\n    // Add a prebuilt (reused) node into the buffer.\n    /**\n    @internal\n    */\n    useNode(value, next) {\n        let index = this.p.reused.length - 1;\n        if (index < 0 || this.p.reused[index] != value) {\n            this.p.reused.push(value);\n            index++;\n        }\n        let start = this.pos;\n        this.reducePos = this.pos = start + value.length;\n        this.pushState(next, start);\n        this.buffer.push(index, start, this.reducePos, -1 /* size == -1 means this is a reused value */);\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.reuse(this.curContext.context, value, this, this.p.stream.reset(this.pos - value.length)));\n    }\n    // Split the stack. Due to the buffer sharing and the fact\n    // that `this.stack` tends to stay quite shallow, this isn't very\n    // expensive.\n    /**\n    @internal\n    */\n    split() {\n        let parent = this;\n        let off = parent.buffer.length;\n        // Because the top of the buffer (after this.pos) may be mutated\n        // to reorder reductions and skipped tokens, and shared buffers\n        // should be immutable, this copies any outstanding skipped tokens\n        // to the new buffer, and puts the base pointer before them.\n        while (off > 0 && parent.buffer[off - 2] > parent.reducePos)\n            off -= 4;\n        let buffer = parent.buffer.slice(off), base = parent.bufferBase + off;\n        // Make sure parent points to an actual parent with content, if there is such a parent.\n        while (parent && base == parent.bufferBase)\n            parent = parent.parent;\n        return new Stack(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, buffer, base, this.curContext, this.lookAhead, parent);\n    }\n    // Try to recover from an error by 'deleting' (ignoring) one token.\n    /**\n    @internal\n    */\n    recoverByDelete(next, nextEnd) {\n        let isNode = next <= this.p.parser.maxNode;\n        if (isNode)\n            this.storeNode(next, this.pos, nextEnd, 4);\n        this.storeNode(0 /* Term.Err */, this.pos, nextEnd, isNode ? 8 : 4);\n        this.pos = this.reducePos = nextEnd;\n        this.score -= 190 /* Recover.Delete */;\n    }\n    /**\n    Check if the given term would be able to be shifted (optionally\n    after some reductions) on this stack. This can be useful for\n    external tokenizers that want to make sure they only provide a\n    given token when it applies.\n    */\n    canShift(term) {\n        for (let sim = new SimulatedStack(this);;) {\n            let action = this.p.parser.stateSlot(sim.state, 4 /* ParseState.DefaultReduce */) || this.p.parser.hasAction(sim.state, term);\n            if (action == 0)\n                return false;\n            if ((action & 65536 /* Action.ReduceFlag */) == 0)\n                return true;\n            sim.reduce(action);\n        }\n    }\n    // Apply up to Recover.MaxNext recovery actions that conceptually\n    // inserts some missing token or rule.\n    /**\n    @internal\n    */\n    recoverByInsert(next) {\n        if (this.stack.length >= 300 /* Recover.MaxInsertStackDepth */)\n            return [];\n        let nextStates = this.p.parser.nextStates(this.state);\n        if (nextStates.length > 4 /* Recover.MaxNext */ << 1 || this.stack.length >= 120 /* Recover.DampenInsertStackDepth */) {\n            let best = [];\n            for (let i = 0, s; i < nextStates.length; i += 2) {\n                if ((s = nextStates[i + 1]) != this.state && this.p.parser.hasAction(s, next))\n                    best.push(nextStates[i], s);\n            }\n            if (this.stack.length < 120 /* Recover.DampenInsertStackDepth */)\n                for (let i = 0; best.length < 4 /* Recover.MaxNext */ << 1 && i < nextStates.length; i += 2) {\n                    let s = nextStates[i + 1];\n                    if (!best.some((v, i) => (i & 1) && v == s))\n                        best.push(nextStates[i], s);\n                }\n            nextStates = best;\n        }\n        let result = [];\n        for (let i = 0; i < nextStates.length && result.length < 4 /* Recover.MaxNext */; i += 2) {\n            let s = nextStates[i + 1];\n            if (s == this.state)\n                continue;\n            let stack = this.split();\n            stack.pushState(s, this.pos);\n            stack.storeNode(0 /* Term.Err */, stack.pos, stack.pos, 4, true);\n            stack.shiftContext(nextStates[i], this.pos);\n            stack.reducePos = this.pos;\n            stack.score -= 200 /* Recover.Insert */;\n            result.push(stack);\n        }\n        return result;\n    }\n    // Force a reduce, if possible. Return false if that can't\n    // be done.\n    /**\n    @internal\n    */\n    forceReduce() {\n        let { parser } = this.p;\n        let reduce = parser.stateSlot(this.state, 5 /* ParseState.ForcedReduce */);\n        if ((reduce & 65536 /* Action.ReduceFlag */) == 0)\n            return false;\n        if (!parser.validAction(this.state, reduce)) {\n            let depth = reduce >> 19 /* Action.ReduceDepthShift */, term = reduce & 65535 /* Action.ValueMask */;\n            let target = this.stack.length - depth * 3;\n            if (target < 0 || parser.getGoto(this.stack[target], term, false) < 0) {\n                let backup = this.findForcedReduction();\n                if (backup == null)\n                    return false;\n                reduce = backup;\n            }\n            this.storeNode(0 /* Term.Err */, this.pos, this.pos, 4, true);\n            this.score -= 100 /* Recover.Reduce */;\n        }\n        this.reducePos = this.pos;\n        this.reduce(reduce);\n        return true;\n    }\n    /**\n    Try to scan through the automaton to find some kind of reduction\n    that can be applied. Used when the regular ForcedReduce field\n    isn't a valid action. @internal\n    */\n    findForcedReduction() {\n        let { parser } = this.p, seen = [];\n        let explore = (state, depth) => {\n            if (seen.includes(state))\n                return;\n            seen.push(state);\n            return parser.allActions(state, (action) => {\n                if (action & (262144 /* Action.StayFlag */ | 131072 /* Action.GotoFlag */)) ;\n                else if (action & 65536 /* Action.ReduceFlag */) {\n                    let rDepth = (action >> 19 /* Action.ReduceDepthShift */) - depth;\n                    if (rDepth > 1) {\n                        let term = action & 65535 /* Action.ValueMask */, target = this.stack.length - rDepth * 3;\n                        if (target >= 0 && parser.getGoto(this.stack[target], term, false) >= 0)\n                            return (rDepth << 19 /* Action.ReduceDepthShift */) | 65536 /* Action.ReduceFlag */ | term;\n                    }\n                }\n                else {\n                    let found = explore(action, depth + 1);\n                    if (found != null)\n                        return found;\n                }\n            });\n        };\n        return explore(this.state, 0);\n    }\n    /**\n    @internal\n    */\n    forceAll() {\n        while (!this.p.parser.stateFlag(this.state, 2 /* StateFlag.Accepting */)) {\n            if (!this.forceReduce()) {\n                this.storeNode(0 /* Term.Err */, this.pos, this.pos, 4, true);\n                break;\n            }\n        }\n        return this;\n    }\n    /**\n    Check whether this state has no further actions (assumed to be a direct descendant of the\n    top state, since any other states must be able to continue\n    somehow). @internal\n    */\n    get deadEnd() {\n        if (this.stack.length != 3)\n            return false;\n        let { parser } = this.p;\n        return parser.data[parser.stateSlot(this.state, 1 /* ParseState.Actions */)] == 65535 /* Seq.End */ &&\n            !parser.stateSlot(this.state, 4 /* ParseState.DefaultReduce */);\n    }\n    /**\n    Restart the stack (put it back in its start state). Only safe\n    when this.stack.length == 3 (state is directly below the top\n    state). @internal\n    */\n    restart() {\n        this.storeNode(0 /* Term.Err */, this.pos, this.pos, 4, true);\n        this.state = this.stack[0];\n        this.stack.length = 0;\n    }\n    /**\n    @internal\n    */\n    sameState(other) {\n        if (this.state != other.state || this.stack.length != other.stack.length)\n            return false;\n        for (let i = 0; i < this.stack.length; i += 3)\n            if (this.stack[i] != other.stack[i])\n                return false;\n        return true;\n    }\n    /**\n    Get the parser used by this stack.\n    */\n    get parser() { return this.p.parser; }\n    /**\n    Test whether a given dialect (by numeric ID, as exported from\n    the terms file) is enabled.\n    */\n    dialectEnabled(dialectID) { return this.p.parser.dialect.flags[dialectID]; }\n    shiftContext(term, start) {\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.shift(this.curContext.context, term, this, this.p.stream.reset(start)));\n    }\n    reduceContext(term, start) {\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.reduce(this.curContext.context, term, this, this.p.stream.reset(start)));\n    }\n    /**\n    @internal\n    */\n    emitContext() {\n        let last = this.buffer.length - 1;\n        if (last < 0 || this.buffer[last] != -3)\n            this.buffer.push(this.curContext.hash, this.pos, this.pos, -3);\n    }\n    /**\n    @internal\n    */\n    emitLookAhead() {\n        let last = this.buffer.length - 1;\n        if (last < 0 || this.buffer[last] != -4)\n            this.buffer.push(this.lookAhead, this.pos, this.pos, -4);\n    }\n    updateContext(context) {\n        if (context != this.curContext.context) {\n            let newCx = new StackContext(this.curContext.tracker, context);\n            if (newCx.hash != this.curContext.hash)\n                this.emitContext();\n            this.curContext = newCx;\n        }\n    }\n    /**\n    @internal\n    */\n    setLookAhead(lookAhead) {\n        if (lookAhead > this.lookAhead) {\n            this.emitLookAhead();\n            this.lookAhead = lookAhead;\n        }\n    }\n    /**\n    @internal\n    */\n    close() {\n        if (this.curContext && this.curContext.tracker.strict)\n            this.emitContext();\n        if (this.lookAhead > 0)\n            this.emitLookAhead();\n    }\n}\nclass StackContext {\n    constructor(tracker, context) {\n        this.tracker = tracker;\n        this.context = context;\n        this.hash = tracker.strict ? tracker.hash(context) : 0;\n    }\n}\n// Used to cheaply run some reductions to scan ahead without mutating\n// an entire stack\nclass SimulatedStack {\n    constructor(start) {\n        this.start = start;\n        this.state = start.state;\n        this.stack = start.stack;\n        this.base = this.stack.length;\n    }\n    reduce(action) {\n        let term = action & 65535 /* Action.ValueMask */, depth = action >> 19 /* Action.ReduceDepthShift */;\n        if (depth == 0) {\n            if (this.stack == this.start.stack)\n                this.stack = this.stack.slice();\n            this.stack.push(this.state, 0, 0);\n            this.base += 3;\n        }\n        else {\n            this.base -= (depth - 1) * 3;\n        }\n        let goto = this.start.p.parser.getGoto(this.stack[this.base - 3], term, true);\n        this.state = goto;\n    }\n}\n// This is given to `Tree.build` to build a buffer, and encapsulates\n// the parent-stack-walking necessary to read the nodes.\nclass StackBufferCursor {\n    constructor(stack, pos, index) {\n        this.stack = stack;\n        this.pos = pos;\n        this.index = index;\n        this.buffer = stack.buffer;\n        if (this.index == 0)\n            this.maybeNext();\n    }\n    static create(stack, pos = stack.bufferBase + stack.buffer.length) {\n        return new StackBufferCursor(stack, pos, pos - stack.bufferBase);\n    }\n    maybeNext() {\n        let next = this.stack.parent;\n        if (next != null) {\n            this.index = this.stack.bufferBase - next.bufferBase;\n            this.stack = next;\n            this.buffer = next.buffer;\n        }\n    }\n    get id() { return this.buffer[this.index - 4]; }\n    get start() { return this.buffer[this.index - 3]; }\n    get end() { return this.buffer[this.index - 2]; }\n    get size() { return this.buffer[this.index - 1]; }\n    next() {\n        this.index -= 4;\n        this.pos -= 4;\n        if (this.index == 0)\n            this.maybeNext();\n    }\n    fork() {\n        return new StackBufferCursor(this.stack, this.pos, this.index);\n    }\n}\n\n// See lezer-generator/src/encode.ts for comments about the encoding\n// used here\nfunction decodeArray(input, Type = Uint16Array) {\n    if (typeof input != \"string\")\n        return input;\n    let array = null;\n    for (let pos = 0, out = 0; pos < input.length;) {\n        let value = 0;\n        for (;;) {\n            let next = input.charCodeAt(pos++), stop = false;\n            if (next == 126 /* Encode.BigValCode */) {\n                value = 65535 /* Encode.BigVal */;\n                break;\n            }\n            if (next >= 92 /* Encode.Gap2 */)\n                next--;\n            if (next >= 34 /* Encode.Gap1 */)\n                next--;\n            let digit = next - 32 /* Encode.Start */;\n            if (digit >= 46 /* Encode.Base */) {\n                digit -= 46 /* Encode.Base */;\n                stop = true;\n            }\n            value += digit;\n            if (stop)\n                break;\n            value *= 46 /* Encode.Base */;\n        }\n        if (array)\n            array[out++] = value;\n        else\n            array = new Type(value);\n    }\n    return array;\n}\n\nclass CachedToken {\n    constructor() {\n        this.start = -1;\n        this.value = -1;\n        this.end = -1;\n        this.extended = -1;\n        this.lookAhead = 0;\n        this.mask = 0;\n        this.context = 0;\n    }\n}\nconst nullToken = new CachedToken;\n/**\n[Tokenizers](#lr.ExternalTokenizer) interact with the input\nthrough this interface. It presents the input as a stream of\ncharacters, tracking lookahead and hiding the complexity of\n[ranges](#common.Parser.parse^ranges) from tokenizer code.\n*/\nclass InputStream {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    @internal\n    */\n    input, \n    /**\n    @internal\n    */\n    ranges) {\n        this.input = input;\n        this.ranges = ranges;\n        /**\n        @internal\n        */\n        this.chunk = \"\";\n        /**\n        @internal\n        */\n        this.chunkOff = 0;\n        /**\n        Backup chunk\n        */\n        this.chunk2 = \"\";\n        this.chunk2Pos = 0;\n        /**\n        The character code of the next code unit in the input, or -1\n        when the stream is at the end of the input.\n        */\n        this.next = -1;\n        /**\n        @internal\n        */\n        this.token = nullToken;\n        this.rangeIndex = 0;\n        this.pos = this.chunkPos = ranges[0].from;\n        this.range = ranges[0];\n        this.end = ranges[ranges.length - 1].to;\n        this.readNext();\n    }\n    /**\n    @internal\n    */\n    resolveOffset(offset, assoc) {\n        let range = this.range, index = this.rangeIndex;\n        let pos = this.pos + offset;\n        while (pos < range.from) {\n            if (!index)\n                return null;\n            let next = this.ranges[--index];\n            pos -= range.from - next.to;\n            range = next;\n        }\n        while (assoc < 0 ? pos > range.to : pos >= range.to) {\n            if (index == this.ranges.length - 1)\n                return null;\n            let next = this.ranges[++index];\n            pos += next.from - range.to;\n            range = next;\n        }\n        return pos;\n    }\n    /**\n    @internal\n    */\n    clipPos(pos) {\n        if (pos >= this.range.from && pos < this.range.to)\n            return pos;\n        for (let range of this.ranges)\n            if (range.to > pos)\n                return Math.max(pos, range.from);\n        return this.end;\n    }\n    /**\n    Look at a code unit near the stream position. `.peek(0)` equals\n    `.next`, `.peek(-1)` gives you the previous character, and so\n    on.\n    \n    Note that looking around during tokenizing creates dependencies\n    on potentially far-away content, which may reduce the\n    effectiveness incremental parsing—when looking forward—or even\n    cause invalid reparses when looking backward more than 25 code\n    units, since the library does not track lookbehind.\n    */\n    peek(offset) {\n        let idx = this.chunkOff + offset, pos, result;\n        if (idx >= 0 && idx < this.chunk.length) {\n            pos = this.pos + offset;\n            result = this.chunk.charCodeAt(idx);\n        }\n        else {\n            let resolved = this.resolveOffset(offset, 1);\n            if (resolved == null)\n                return -1;\n            pos = resolved;\n            if (pos >= this.chunk2Pos && pos < this.chunk2Pos + this.chunk2.length) {\n                result = this.chunk2.charCodeAt(pos - this.chunk2Pos);\n            }\n            else {\n                let i = this.rangeIndex, range = this.range;\n                while (range.to <= pos)\n                    range = this.ranges[++i];\n                this.chunk2 = this.input.chunk(this.chunk2Pos = pos);\n                if (pos + this.chunk2.length > range.to)\n                    this.chunk2 = this.chunk2.slice(0, range.to - pos);\n                result = this.chunk2.charCodeAt(0);\n            }\n        }\n        if (pos >= this.token.lookAhead)\n            this.token.lookAhead = pos + 1;\n        return result;\n    }\n    /**\n    Accept a token. By default, the end of the token is set to the\n    current stream position, but you can pass an offset (relative to\n    the stream position) to change that.\n    */\n    acceptToken(token, endOffset = 0) {\n        let end = endOffset ? this.resolveOffset(endOffset, -1) : this.pos;\n        if (end == null || end < this.token.start)\n            throw new RangeError(\"Token end out of bounds\");\n        this.token.value = token;\n        this.token.end = end;\n    }\n    /**\n    Accept a token ending at a specific given position.\n    */\n    acceptTokenTo(token, endPos) {\n        this.token.value = token;\n        this.token.end = endPos;\n    }\n    getChunk() {\n        if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {\n            let { chunk, chunkPos } = this;\n            this.chunk = this.chunk2;\n            this.chunkPos = this.chunk2Pos;\n            this.chunk2 = chunk;\n            this.chunk2Pos = chunkPos;\n            this.chunkOff = this.pos - this.chunkPos;\n        }\n        else {\n            this.chunk2 = this.chunk;\n            this.chunk2Pos = this.chunkPos;\n            let nextChunk = this.input.chunk(this.pos);\n            let end = this.pos + nextChunk.length;\n            this.chunk = end > this.range.to ? nextChunk.slice(0, this.range.to - this.pos) : nextChunk;\n            this.chunkPos = this.pos;\n            this.chunkOff = 0;\n        }\n    }\n    readNext() {\n        if (this.chunkOff >= this.chunk.length) {\n            this.getChunk();\n            if (this.chunkOff == this.chunk.length)\n                return this.next = -1;\n        }\n        return this.next = this.chunk.charCodeAt(this.chunkOff);\n    }\n    /**\n    Move the stream forward N (defaults to 1) code units. Returns\n    the new value of [`next`](#lr.InputStream.next).\n    */\n    advance(n = 1) {\n        this.chunkOff += n;\n        while (this.pos + n >= this.range.to) {\n            if (this.rangeIndex == this.ranges.length - 1)\n                return this.setDone();\n            n -= this.range.to - this.pos;\n            this.range = this.ranges[++this.rangeIndex];\n            this.pos = this.range.from;\n        }\n        this.pos += n;\n        if (this.pos >= this.token.lookAhead)\n            this.token.lookAhead = this.pos + 1;\n        return this.readNext();\n    }\n    setDone() {\n        this.pos = this.chunkPos = this.end;\n        this.range = this.ranges[this.rangeIndex = this.ranges.length - 1];\n        this.chunk = \"\";\n        return this.next = -1;\n    }\n    /**\n    @internal\n    */\n    reset(pos, token) {\n        if (token) {\n            this.token = token;\n            token.start = pos;\n            token.lookAhead = pos + 1;\n            token.value = token.extended = -1;\n        }\n        else {\n            this.token = nullToken;\n        }\n        if (this.pos != pos) {\n            this.pos = pos;\n            if (pos == this.end) {\n                this.setDone();\n                return this;\n            }\n            while (pos < this.range.from)\n                this.range = this.ranges[--this.rangeIndex];\n            while (pos >= this.range.to)\n                this.range = this.ranges[++this.rangeIndex];\n            if (pos >= this.chunkPos && pos < this.chunkPos + this.chunk.length) {\n                this.chunkOff = pos - this.chunkPos;\n            }\n            else {\n                this.chunk = \"\";\n                this.chunkOff = 0;\n            }\n            this.readNext();\n        }\n        return this;\n    }\n    /**\n    @internal\n    */\n    read(from, to) {\n        if (from >= this.chunkPos && to <= this.chunkPos + this.chunk.length)\n            return this.chunk.slice(from - this.chunkPos, to - this.chunkPos);\n        if (from >= this.chunk2Pos && to <= this.chunk2Pos + this.chunk2.length)\n            return this.chunk2.slice(from - this.chunk2Pos, to - this.chunk2Pos);\n        if (from >= this.range.from && to <= this.range.to)\n            return this.input.read(from, to);\n        let result = \"\";\n        for (let r of this.ranges) {\n            if (r.from >= to)\n                break;\n            if (r.to > from)\n                result += this.input.read(Math.max(r.from, from), Math.min(r.to, to));\n        }\n        return result;\n    }\n}\n/**\n@internal\n*/\nclass TokenGroup {\n    constructor(data, id) {\n        this.data = data;\n        this.id = id;\n    }\n    token(input, stack) {\n        let { parser } = stack.p;\n        readToken(this.data, input, stack, this.id, parser.data, parser.tokenPrecTable);\n    }\n}\nTokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false;\n/**\n@hide\n*/\nclass LocalTokenGroup {\n    constructor(data, precTable, elseToken) {\n        this.precTable = precTable;\n        this.elseToken = elseToken;\n        this.data = typeof data == \"string\" ? decodeArray(data) : data;\n    }\n    token(input, stack) {\n        let start = input.pos, skipped = 0;\n        for (;;) {\n            let atEof = input.next < 0, nextPos = input.resolveOffset(1, 1);\n            readToken(this.data, input, stack, 0, this.data, this.precTable);\n            if (input.token.value > -1)\n                break;\n            if (this.elseToken == null)\n                return;\n            if (!atEof)\n                skipped++;\n            if (nextPos == null)\n                break;\n            input.reset(nextPos, input.token);\n        }\n        if (skipped) {\n            input.reset(start, input.token);\n            input.acceptToken(this.elseToken, skipped);\n        }\n    }\n}\nLocalTokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false;\n/**\n`@external tokens` declarations in the grammar should resolve to\nan instance of this class.\n*/\nclass ExternalTokenizer {\n    /**\n    Create a tokenizer. The first argument is the function that,\n    given an input stream, scans for the types of tokens it\n    recognizes at the stream's position, and calls\n    [`acceptToken`](#lr.InputStream.acceptToken) when it finds\n    one.\n    */\n    constructor(\n    /**\n    @internal\n    */\n    token, options = {}) {\n        this.token = token;\n        this.contextual = !!options.contextual;\n        this.fallback = !!options.fallback;\n        this.extend = !!options.extend;\n    }\n}\n// Tokenizer data is stored a big uint16 array containing, for each\n// state:\n//\n//  - A group bitmask, indicating what token groups are reachable from\n//    this state, so that paths that can only lead to tokens not in\n//    any of the current groups can be cut off early.\n//\n//  - The position of the end of the state's sequence of accepting\n//    tokens\n//\n//  - The number of outgoing edges for the state\n//\n//  - The accepting tokens, as (token id, group mask) pairs\n//\n//  - The outgoing edges, as (start character, end character, state\n//    index) triples, with end character being exclusive\n//\n// This function interprets that data, running through a stream as\n// long as new states with the a matching group mask can be reached,\n// and updating `input.token` when it matches a token.\nfunction readToken(data, input, stack, group, precTable, precOffset) {\n    let state = 0, groupMask = 1 << group, { dialect } = stack.p.parser;\n    scan: for (;;) {\n        if ((groupMask & data[state]) == 0)\n            break;\n        let accEnd = data[state + 1];\n        // Check whether this state can lead to a token in the current group\n        // Accept tokens in this state, possibly overwriting\n        // lower-precedence / shorter tokens\n        for (let i = state + 3; i < accEnd; i += 2)\n            if ((data[i + 1] & groupMask) > 0) {\n                let term = data[i];\n                if (dialect.allows(term) &&\n                    (input.token.value == -1 || input.token.value == term ||\n                        overrides(term, input.token.value, precTable, precOffset))) {\n                    input.acceptToken(term);\n                    break;\n                }\n            }\n        let next = input.next, low = 0, high = data[state + 2];\n        // Special case for EOF\n        if (input.next < 0 && high > low && data[accEnd + high * 3 - 3] == 65535 /* Seq.End */) {\n            state = data[accEnd + high * 3 - 1];\n            continue scan;\n        }\n        // Do a binary search on the state's edges\n        for (; low < high;) {\n            let mid = (low + high) >> 1;\n            let index = accEnd + mid + (mid << 1);\n            let from = data[index], to = data[index + 1] || 0x10000;\n            if (next < from)\n                high = mid;\n            else if (next >= to)\n                low = mid + 1;\n            else {\n                state = data[index + 2];\n                input.advance();\n                continue scan;\n            }\n        }\n        break;\n    }\n}\nfunction findOffset(data, start, term) {\n    for (let i = start, next; (next = data[i]) != 65535 /* Seq.End */; i++)\n        if (next == term)\n            return i - start;\n    return -1;\n}\nfunction overrides(token, prev, tableData, tableOffset) {\n    let iPrev = findOffset(tableData, tableOffset, prev);\n    return iPrev < 0 || findOffset(tableData, tableOffset, token) < iPrev;\n}\n\n// Environment variable used to control console output\nconst verbose = typeof process != \"undefined\" && process.env && /\\bparse\\b/.test(process.env.LOG);\nlet stackIDs = null;\nfunction cutAt(tree, pos, side) {\n    let cursor = tree.cursor(IterMode.IncludeAnonymous);\n    cursor.moveTo(pos);\n    for (;;) {\n        if (!(side < 0 ? cursor.childBefore(pos) : cursor.childAfter(pos)))\n            for (;;) {\n                if ((side < 0 ? cursor.to < pos : cursor.from > pos) && !cursor.type.isError)\n                    return side < 0 ? Math.max(0, Math.min(cursor.to - 1, pos - 25 /* Safety.Margin */))\n                        : Math.min(tree.length, Math.max(cursor.from + 1, pos + 25 /* Safety.Margin */));\n                if (side < 0 ? cursor.prevSibling() : cursor.nextSibling())\n                    break;\n                if (!cursor.parent())\n                    return side < 0 ? 0 : tree.length;\n            }\n    }\n}\nclass FragmentCursor {\n    constructor(fragments, nodeSet) {\n        this.fragments = fragments;\n        this.nodeSet = nodeSet;\n        this.i = 0;\n        this.fragment = null;\n        this.safeFrom = -1;\n        this.safeTo = -1;\n        this.trees = [];\n        this.start = [];\n        this.index = [];\n        this.nextFragment();\n    }\n    nextFragment() {\n        let fr = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];\n        if (fr) {\n            this.safeFrom = fr.openStart ? cutAt(fr.tree, fr.from + fr.offset, 1) - fr.offset : fr.from;\n            this.safeTo = fr.openEnd ? cutAt(fr.tree, fr.to + fr.offset, -1) - fr.offset : fr.to;\n            while (this.trees.length) {\n                this.trees.pop();\n                this.start.pop();\n                this.index.pop();\n            }\n            this.trees.push(fr.tree);\n            this.start.push(-fr.offset);\n            this.index.push(0);\n            this.nextStart = this.safeFrom;\n        }\n        else {\n            this.nextStart = 1e9;\n        }\n    }\n    // `pos` must be >= any previously given `pos` for this cursor\n    nodeAt(pos) {\n        if (pos < this.nextStart)\n            return null;\n        while (this.fragment && this.safeTo <= pos)\n            this.nextFragment();\n        if (!this.fragment)\n            return null;\n        for (;;) {\n            let last = this.trees.length - 1;\n            if (last < 0) { // End of tree\n                this.nextFragment();\n                return null;\n            }\n            let top = this.trees[last], index = this.index[last];\n            if (index == top.children.length) {\n                this.trees.pop();\n                this.start.pop();\n                this.index.pop();\n                continue;\n            }\n            let next = top.children[index];\n            let start = this.start[last] + top.positions[index];\n            if (start > pos) {\n                this.nextStart = start;\n                return null;\n            }\n            if (next instanceof Tree) {\n                if (start == pos) {\n                    if (start < this.safeFrom)\n                        return null;\n                    let end = start + next.length;\n                    if (end <= this.safeTo) {\n                        let lookAhead = next.prop(NodeProp.lookAhead);\n                        if (!lookAhead || end + lookAhead < this.fragment.to)\n                            return next;\n                    }\n                }\n                this.index[last]++;\n                if (start + next.length >= Math.max(this.safeFrom, pos)) { // Enter this node\n                    this.trees.push(next);\n                    this.start.push(start);\n                    this.index.push(0);\n                }\n            }\n            else {\n                this.index[last]++;\n                this.nextStart = start + next.length;\n            }\n        }\n    }\n}\nclass TokenCache {\n    constructor(parser, stream) {\n        this.stream = stream;\n        this.tokens = [];\n        this.mainToken = null;\n        this.actions = [];\n        this.tokens = parser.tokenizers.map(_ => new CachedToken);\n    }\n    getActions(stack) {\n        let actionIndex = 0;\n        let main = null;\n        let { parser } = stack.p, { tokenizers } = parser;\n        let mask = parser.stateSlot(stack.state, 3 /* ParseState.TokenizerMask */);\n        let context = stack.curContext ? stack.curContext.hash : 0;\n        let lookAhead = 0;\n        for (let i = 0; i < tokenizers.length; i++) {\n            if (((1 << i) & mask) == 0)\n                continue;\n            let tokenizer = tokenizers[i], token = this.tokens[i];\n            if (main && !tokenizer.fallback)\n                continue;\n            if (tokenizer.contextual || token.start != stack.pos || token.mask != mask || token.context != context) {\n                this.updateCachedToken(token, tokenizer, stack);\n                token.mask = mask;\n                token.context = context;\n            }\n            if (token.lookAhead > token.end + 25 /* Safety.Margin */)\n                lookAhead = Math.max(token.lookAhead, lookAhead);\n            if (token.value != 0 /* Term.Err */) {\n                let startIndex = actionIndex;\n                if (token.extended > -1)\n                    actionIndex = this.addActions(stack, token.extended, token.end, actionIndex);\n                actionIndex = this.addActions(stack, token.value, token.end, actionIndex);\n                if (!tokenizer.extend) {\n                    main = token;\n                    if (actionIndex > startIndex)\n                        break;\n                }\n            }\n        }\n        while (this.actions.length > actionIndex)\n            this.actions.pop();\n        if (lookAhead)\n            stack.setLookAhead(lookAhead);\n        if (!main && stack.pos == this.stream.end) {\n            main = new CachedToken;\n            main.value = stack.p.parser.eofTerm;\n            main.start = main.end = stack.pos;\n            actionIndex = this.addActions(stack, main.value, main.end, actionIndex);\n        }\n        this.mainToken = main;\n        return this.actions;\n    }\n    getMainToken(stack) {\n        if (this.mainToken)\n            return this.mainToken;\n        let main = new CachedToken, { pos, p } = stack;\n        main.start = pos;\n        main.end = Math.min(pos + 1, p.stream.end);\n        main.value = pos == p.stream.end ? p.parser.eofTerm : 0 /* Term.Err */;\n        return main;\n    }\n    updateCachedToken(token, tokenizer, stack) {\n        let start = this.stream.clipPos(stack.pos);\n        tokenizer.token(this.stream.reset(start, token), stack);\n        if (token.value > -1) {\n            let { parser } = stack.p;\n            for (let i = 0; i < parser.specialized.length; i++)\n                if (parser.specialized[i] == token.value) {\n                    let result = parser.specializers[i](this.stream.read(token.start, token.end), stack);\n                    if (result >= 0 && stack.p.parser.dialect.allows(result >> 1)) {\n                        if ((result & 1) == 0 /* Specialize.Specialize */)\n                            token.value = result >> 1;\n                        else\n                            token.extended = result >> 1;\n                        break;\n                    }\n                }\n        }\n        else {\n            token.value = 0 /* Term.Err */;\n            token.end = this.stream.clipPos(start + 1);\n        }\n    }\n    putAction(action, token, end, index) {\n        // Don't add duplicate actions\n        for (let i = 0; i < index; i += 3)\n            if (this.actions[i] == action)\n                return index;\n        this.actions[index++] = action;\n        this.actions[index++] = token;\n        this.actions[index++] = end;\n        return index;\n    }\n    addActions(stack, token, end, index) {\n        let { state } = stack, { parser } = stack.p, { data } = parser;\n        for (let set = 0; set < 2; set++) {\n            for (let i = parser.stateSlot(state, set ? 2 /* ParseState.Skip */ : 1 /* ParseState.Actions */);; i += 3) {\n                if (data[i] == 65535 /* Seq.End */) {\n                    if (data[i + 1] == 1 /* Seq.Next */) {\n                        i = pair(data, i + 2);\n                    }\n                    else {\n                        if (index == 0 && data[i + 1] == 2 /* Seq.Other */)\n                            index = this.putAction(pair(data, i + 2), token, end, index);\n                        break;\n                    }\n                }\n                if (data[i] == token)\n                    index = this.putAction(pair(data, i + 1), token, end, index);\n            }\n        }\n        return index;\n    }\n}\nclass Parse {\n    constructor(parser, input, fragments, ranges) {\n        this.parser = parser;\n        this.input = input;\n        this.ranges = ranges;\n        this.recovering = 0;\n        this.nextStackID = 0x2654; // ♔, ♕, ♖, ♗, ♘, ♙, ♠, ♡, ♢, ♣, ♤, ♥, ♦, ♧\n        this.minStackPos = 0;\n        this.reused = [];\n        this.stoppedAt = null;\n        this.lastBigReductionStart = -1;\n        this.lastBigReductionSize = 0;\n        this.bigReductionCount = 0;\n        this.stream = new InputStream(input, ranges);\n        this.tokens = new TokenCache(parser, this.stream);\n        this.topTerm = parser.top[1];\n        let { from } = ranges[0];\n        this.stacks = [Stack.start(this, parser.top[0], from)];\n        this.fragments = fragments.length && this.stream.end - from > parser.bufferLength * 4\n            ? new FragmentCursor(fragments, parser.nodeSet) : null;\n    }\n    get parsedPos() {\n        return this.minStackPos;\n    }\n    // Move the parser forward. This will process all parse stacks at\n    // `this.pos` and try to advance them to a further position. If no\n    // stack for such a position is found, it'll start error-recovery.\n    //\n    // When the parse is finished, this will return a syntax tree. When\n    // not, it returns `null`.\n    advance() {\n        let stacks = this.stacks, pos = this.minStackPos;\n        // This will hold stacks beyond `pos`.\n        let newStacks = this.stacks = [];\n        let stopped, stoppedTokens;\n        // If a large amount of reductions happened with the same start\n        // position, force the stack out of that production in order to\n        // avoid creating a tree too deep to recurse through.\n        // (This is an ugly kludge, because unfortunately there is no\n        // straightforward, cheap way to check for this happening, due to\n        // the history of reductions only being available in an\n        // expensive-to-access format in the stack buffers.)\n        if (this.bigReductionCount > 300 /* Rec.MaxLeftAssociativeReductionCount */ && stacks.length == 1) {\n            let [s] = stacks;\n            while (s.forceReduce() && s.stack.length && s.stack[s.stack.length - 2] >= this.lastBigReductionStart) { }\n            this.bigReductionCount = this.lastBigReductionSize = 0;\n        }\n        // Keep advancing any stacks at `pos` until they either move\n        // forward or can't be advanced. Gather stacks that can't be\n        // advanced further in `stopped`.\n        for (let i = 0; i < stacks.length; i++) {\n            let stack = stacks[i];\n            for (;;) {\n                this.tokens.mainToken = null;\n                if (stack.pos > pos) {\n                    newStacks.push(stack);\n                }\n                else if (this.advanceStack(stack, newStacks, stacks)) {\n                    continue;\n                }\n                else {\n                    if (!stopped) {\n                        stopped = [];\n                        stoppedTokens = [];\n                    }\n                    stopped.push(stack);\n                    let tok = this.tokens.getMainToken(stack);\n                    stoppedTokens.push(tok.value, tok.end);\n                }\n                break;\n            }\n        }\n        if (!newStacks.length) {\n            let finished = stopped && findFinished(stopped);\n            if (finished) {\n                if (verbose)\n                    console.log(\"Finish with \" + this.stackID(finished));\n                return this.stackToTree(finished);\n            }\n            if (this.parser.strict) {\n                if (verbose && stopped)\n                    console.log(\"Stuck with token \" + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : \"none\"));\n                throw new SyntaxError(\"No parse at \" + pos);\n            }\n            if (!this.recovering)\n                this.recovering = 5 /* Rec.Distance */;\n        }\n        if (this.recovering && stopped) {\n            let finished = this.stoppedAt != null && stopped[0].pos > this.stoppedAt ? stopped[0]\n                : this.runRecovery(stopped, stoppedTokens, newStacks);\n            if (finished) {\n                if (verbose)\n                    console.log(\"Force-finish \" + this.stackID(finished));\n                return this.stackToTree(finished.forceAll());\n            }\n        }\n        if (this.recovering) {\n            let maxRemaining = this.recovering == 1 ? 1 : this.recovering * 3 /* Rec.MaxRemainingPerStep */;\n            if (newStacks.length > maxRemaining) {\n                newStacks.sort((a, b) => b.score - a.score);\n                while (newStacks.length > maxRemaining)\n                    newStacks.pop();\n            }\n            if (newStacks.some(s => s.reducePos > pos))\n                this.recovering--;\n        }\n        else if (newStacks.length > 1) {\n            // Prune stacks that are in the same state, or that have been\n            // running without splitting for a while, to avoid getting stuck\n            // with multiple successful stacks running endlessly on.\n            outer: for (let i = 0; i < newStacks.length - 1; i++) {\n                let stack = newStacks[i];\n                for (let j = i + 1; j < newStacks.length; j++) {\n                    let other = newStacks[j];\n                    if (stack.sameState(other) ||\n                        stack.buffer.length > 500 /* Rec.MinBufferLengthPrune */ && other.buffer.length > 500 /* Rec.MinBufferLengthPrune */) {\n                        if (((stack.score - other.score) || (stack.buffer.length - other.buffer.length)) > 0) {\n                            newStacks.splice(j--, 1);\n                        }\n                        else {\n                            newStacks.splice(i--, 1);\n                            continue outer;\n                        }\n                    }\n                }\n            }\n            if (newStacks.length > 12 /* Rec.MaxStackCount */)\n                newStacks.splice(12 /* Rec.MaxStackCount */, newStacks.length - 12 /* Rec.MaxStackCount */);\n        }\n        this.minStackPos = newStacks[0].pos;\n        for (let i = 1; i < newStacks.length; i++)\n            if (newStacks[i].pos < this.minStackPos)\n                this.minStackPos = newStacks[i].pos;\n        return null;\n    }\n    stopAt(pos) {\n        if (this.stoppedAt != null && this.stoppedAt < pos)\n            throw new RangeError(\"Can't move stoppedAt forward\");\n        this.stoppedAt = pos;\n    }\n    // Returns an updated version of the given stack, or null if the\n    // stack can't advance normally. When `split` and `stacks` are\n    // given, stacks split off by ambiguous operations will be pushed to\n    // `split`, or added to `stacks` if they move `pos` forward.\n    advanceStack(stack, stacks, split) {\n        let start = stack.pos, { parser } = this;\n        let base = verbose ? this.stackID(stack) + \" -> \" : \"\";\n        if (this.stoppedAt != null && start > this.stoppedAt)\n            return stack.forceReduce() ? stack : null;\n        if (this.fragments) {\n            let strictCx = stack.curContext && stack.curContext.tracker.strict, cxHash = strictCx ? stack.curContext.hash : 0;\n            for (let cached = this.fragments.nodeAt(start); cached;) {\n                let match = this.parser.nodeSet.types[cached.type.id] == cached.type ? parser.getGoto(stack.state, cached.type.id) : -1;\n                if (match > -1 && cached.length && (!strictCx || (cached.prop(NodeProp.contextHash) || 0) == cxHash)) {\n                    stack.useNode(cached, match);\n                    if (verbose)\n                        console.log(base + this.stackID(stack) + ` (via reuse of ${parser.getName(cached.type.id)})`);\n                    return true;\n                }\n                if (!(cached instanceof Tree) || cached.children.length == 0 || cached.positions[0] > 0)\n                    break;\n                let inner = cached.children[0];\n                if (inner instanceof Tree && cached.positions[0] == 0)\n                    cached = inner;\n                else\n                    break;\n            }\n        }\n        let defaultReduce = parser.stateSlot(stack.state, 4 /* ParseState.DefaultReduce */);\n        if (defaultReduce > 0) {\n            stack.reduce(defaultReduce);\n            if (verbose)\n                console.log(base + this.stackID(stack) + ` (via always-reduce ${parser.getName(defaultReduce & 65535 /* Action.ValueMask */)})`);\n            return true;\n        }\n        if (stack.stack.length >= 8400 /* Rec.CutDepth */) {\n            while (stack.stack.length > 6000 /* Rec.CutTo */ && stack.forceReduce()) { }\n        }\n        let actions = this.tokens.getActions(stack);\n        for (let i = 0; i < actions.length;) {\n            let action = actions[i++], term = actions[i++], end = actions[i++];\n            let last = i == actions.length || !split;\n            let localStack = last ? stack : stack.split();\n            let main = this.tokens.mainToken;\n            localStack.apply(action, term, main ? main.start : localStack.pos, end);\n            if (verbose)\n                console.log(base + this.stackID(localStack) + ` (via ${(action & 65536 /* Action.ReduceFlag */) == 0 ? \"shift\"\n                    : `reduce of ${parser.getName(action & 65535 /* Action.ValueMask */)}`} for ${parser.getName(term)} @ ${start}${localStack == stack ? \"\" : \", split\"})`);\n            if (last)\n                return true;\n            else if (localStack.pos > start)\n                stacks.push(localStack);\n            else\n                split.push(localStack);\n        }\n        return false;\n    }\n    // Advance a given stack forward as far as it will go. Returns the\n    // (possibly updated) stack if it got stuck, or null if it moved\n    // forward and was given to `pushStackDedup`.\n    advanceFully(stack, newStacks) {\n        let pos = stack.pos;\n        for (;;) {\n            if (!this.advanceStack(stack, null, null))\n                return false;\n            if (stack.pos > pos) {\n                pushStackDedup(stack, newStacks);\n                return true;\n            }\n        }\n    }\n    runRecovery(stacks, tokens, newStacks) {\n        let finished = null, restarted = false;\n        for (let i = 0; i < stacks.length; i++) {\n            let stack = stacks[i], token = tokens[i << 1], tokenEnd = tokens[(i << 1) + 1];\n            let base = verbose ? this.stackID(stack) + \" -> \" : \"\";\n            if (stack.deadEnd) {\n                if (restarted)\n                    continue;\n                restarted = true;\n                stack.restart();\n                if (verbose)\n                    console.log(base + this.stackID(stack) + \" (restarted)\");\n                let done = this.advanceFully(stack, newStacks);\n                if (done)\n                    continue;\n            }\n            let force = stack.split(), forceBase = base;\n            for (let j = 0; force.forceReduce() && j < 10 /* Rec.ForceReduceLimit */; j++) {\n                if (verbose)\n                    console.log(forceBase + this.stackID(force) + \" (via force-reduce)\");\n                let done = this.advanceFully(force, newStacks);\n                if (done)\n                    break;\n                if (verbose)\n                    forceBase = this.stackID(force) + \" -> \";\n            }\n            for (let insert of stack.recoverByInsert(token)) {\n                if (verbose)\n                    console.log(base + this.stackID(insert) + \" (via recover-insert)\");\n                this.advanceFully(insert, newStacks);\n            }\n            if (this.stream.end > stack.pos) {\n                if (tokenEnd == stack.pos) {\n                    tokenEnd++;\n                    token = 0 /* Term.Err */;\n                }\n                stack.recoverByDelete(token, tokenEnd);\n                if (verbose)\n                    console.log(base + this.stackID(stack) + ` (via recover-delete ${this.parser.getName(token)})`);\n                pushStackDedup(stack, newStacks);\n            }\n            else if (!finished || finished.score < stack.score) {\n                finished = stack;\n            }\n        }\n        return finished;\n    }\n    // Convert the stack's buffer to a syntax tree.\n    stackToTree(stack) {\n        stack.close();\n        return Tree.build({ buffer: StackBufferCursor.create(stack),\n            nodeSet: this.parser.nodeSet,\n            topID: this.topTerm,\n            maxBufferLength: this.parser.bufferLength,\n            reused: this.reused,\n            start: this.ranges[0].from,\n            length: stack.pos - this.ranges[0].from,\n            minRepeatType: this.parser.minRepeatTerm });\n    }\n    stackID(stack) {\n        let id = (stackIDs || (stackIDs = new WeakMap)).get(stack);\n        if (!id)\n            stackIDs.set(stack, id = String.fromCodePoint(this.nextStackID++));\n        return id + stack;\n    }\n}\nfunction pushStackDedup(stack, newStacks) {\n    for (let i = 0; i < newStacks.length; i++) {\n        let other = newStacks[i];\n        if (other.pos == stack.pos && other.sameState(stack)) {\n            if (newStacks[i].score < stack.score)\n                newStacks[i] = stack;\n            return;\n        }\n    }\n    newStacks.push(stack);\n}\nclass Dialect {\n    constructor(source, flags, disabled) {\n        this.source = source;\n        this.flags = flags;\n        this.disabled = disabled;\n    }\n    allows(term) { return !this.disabled || this.disabled[term] == 0; }\n}\nconst id = x => x;\n/**\nContext trackers are used to track stateful context (such as\nindentation in the Python grammar, or parent elements in the XML\ngrammar) needed by external tokenizers. You declare them in a\ngrammar file as `@context exportName from \"module\"`.\n\nContext values should be immutable, and can be updated (replaced)\non shift or reduce actions.\n\nThe export used in a `@context` declaration should be of this\ntype.\n*/\nclass ContextTracker {\n    /**\n    Define a context tracker.\n    */\n    constructor(spec) {\n        this.start = spec.start;\n        this.shift = spec.shift || id;\n        this.reduce = spec.reduce || id;\n        this.reuse = spec.reuse || id;\n        this.hash = spec.hash || (() => 0);\n        this.strict = spec.strict !== false;\n    }\n}\n/**\nHolds the parse tables for a given grammar, as generated by\n`lezer-generator`, and provides [methods](#common.Parser) to parse\ncontent with.\n*/\nclass LRParser extends Parser {\n    /**\n    @internal\n    */\n    constructor(spec) {\n        super();\n        /**\n        @internal\n        */\n        this.wrappers = [];\n        if (spec.version != 14 /* File.Version */)\n            throw new RangeError(`Parser version (${spec.version}) doesn't match runtime version (${14 /* File.Version */})`);\n        let nodeNames = spec.nodeNames.split(\" \");\n        this.minRepeatTerm = nodeNames.length;\n        for (let i = 0; i < spec.repeatNodeCount; i++)\n            nodeNames.push(\"\");\n        let topTerms = Object.keys(spec.topRules).map(r => spec.topRules[r][1]);\n        let nodeProps = [];\n        for (let i = 0; i < nodeNames.length; i++)\n            nodeProps.push([]);\n        function setProp(nodeID, prop, value) {\n            nodeProps[nodeID].push([prop, prop.deserialize(String(value))]);\n        }\n        if (spec.nodeProps)\n            for (let propSpec of spec.nodeProps) {\n                let prop = propSpec[0];\n                if (typeof prop == \"string\")\n                    prop = NodeProp[prop];\n                for (let i = 1; i < propSpec.length;) {\n                    let next = propSpec[i++];\n                    if (next >= 0) {\n                        setProp(next, prop, propSpec[i++]);\n                    }\n                    else {\n                        let value = propSpec[i + -next];\n                        for (let j = -next; j > 0; j--)\n                            setProp(propSpec[i++], prop, value);\n                        i++;\n                    }\n                }\n            }\n        this.nodeSet = new NodeSet(nodeNames.map((name, i) => NodeType.define({\n            name: i >= this.minRepeatTerm ? undefined : name,\n            id: i,\n            props: nodeProps[i],\n            top: topTerms.indexOf(i) > -1,\n            error: i == 0,\n            skipped: spec.skippedNodes && spec.skippedNodes.indexOf(i) > -1\n        })));\n        if (spec.propSources)\n            this.nodeSet = this.nodeSet.extend(...spec.propSources);\n        this.strict = false;\n        this.bufferLength = DefaultBufferLength;\n        let tokenArray = decodeArray(spec.tokenData);\n        this.context = spec.context;\n        this.specializerSpecs = spec.specialized || [];\n        this.specialized = new Uint16Array(this.specializerSpecs.length);\n        for (let i = 0; i < this.specializerSpecs.length; i++)\n            this.specialized[i] = this.specializerSpecs[i].term;\n        this.specializers = this.specializerSpecs.map(getSpecializer);\n        this.states = decodeArray(spec.states, Uint32Array);\n        this.data = decodeArray(spec.stateData);\n        this.goto = decodeArray(spec.goto);\n        this.maxTerm = spec.maxTerm;\n        this.tokenizers = spec.tokenizers.map(value => typeof value == \"number\" ? new TokenGroup(tokenArray, value) : value);\n        this.topRules = spec.topRules;\n        this.dialects = spec.dialects || {};\n        this.dynamicPrecedences = spec.dynamicPrecedences || null;\n        this.tokenPrecTable = spec.tokenPrec;\n        this.termNames = spec.termNames || null;\n        this.maxNode = this.nodeSet.types.length - 1;\n        this.dialect = this.parseDialect();\n        this.top = this.topRules[Object.keys(this.topRules)[0]];\n    }\n    createParse(input, fragments, ranges) {\n        let parse = new Parse(this, input, fragments, ranges);\n        for (let w of this.wrappers)\n            parse = w(parse, input, fragments, ranges);\n        return parse;\n    }\n    /**\n    Get a goto table entry @internal\n    */\n    getGoto(state, term, loose = false) {\n        let table = this.goto;\n        if (term >= table[0])\n            return -1;\n        for (let pos = table[term + 1];;) {\n            let groupTag = table[pos++], last = groupTag & 1;\n            let target = table[pos++];\n            if (last && loose)\n                return target;\n            for (let end = pos + (groupTag >> 1); pos < end; pos++)\n                if (table[pos] == state)\n                    return target;\n            if (last)\n                return -1;\n        }\n    }\n    /**\n    Check if this state has an action for a given terminal @internal\n    */\n    hasAction(state, terminal) {\n        let data = this.data;\n        for (let set = 0; set < 2; set++) {\n            for (let i = this.stateSlot(state, set ? 2 /* ParseState.Skip */ : 1 /* ParseState.Actions */), next;; i += 3) {\n                if ((next = data[i]) == 65535 /* Seq.End */) {\n                    if (data[i + 1] == 1 /* Seq.Next */)\n                        next = data[i = pair(data, i + 2)];\n                    else if (data[i + 1] == 2 /* Seq.Other */)\n                        return pair(data, i + 2);\n                    else\n                        break;\n                }\n                if (next == terminal || next == 0 /* Term.Err */)\n                    return pair(data, i + 1);\n            }\n        }\n        return 0;\n    }\n    /**\n    @internal\n    */\n    stateSlot(state, slot) {\n        return this.states[(state * 6 /* ParseState.Size */) + slot];\n    }\n    /**\n    @internal\n    */\n    stateFlag(state, flag) {\n        return (this.stateSlot(state, 0 /* ParseState.Flags */) & flag) > 0;\n    }\n    /**\n    @internal\n    */\n    validAction(state, action) {\n        return !!this.allActions(state, a => a == action ? true : null);\n    }\n    /**\n    @internal\n    */\n    allActions(state, action) {\n        let deflt = this.stateSlot(state, 4 /* ParseState.DefaultReduce */);\n        let result = deflt ? action(deflt) : undefined;\n        for (let i = this.stateSlot(state, 1 /* ParseState.Actions */); result == null; i += 3) {\n            if (this.data[i] == 65535 /* Seq.End */) {\n                if (this.data[i + 1] == 1 /* Seq.Next */)\n                    i = pair(this.data, i + 2);\n                else\n                    break;\n            }\n            result = action(pair(this.data, i + 1));\n        }\n        return result;\n    }\n    /**\n    Get the states that can follow this one through shift actions or\n    goto jumps. @internal\n    */\n    nextStates(state) {\n        let result = [];\n        for (let i = this.stateSlot(state, 1 /* ParseState.Actions */);; i += 3) {\n            if (this.data[i] == 65535 /* Seq.End */) {\n                if (this.data[i + 1] == 1 /* Seq.Next */)\n                    i = pair(this.data, i + 2);\n                else\n                    break;\n            }\n            if ((this.data[i + 2] & (65536 /* Action.ReduceFlag */ >> 16)) == 0) {\n                let value = this.data[i + 1];\n                if (!result.some((v, i) => (i & 1) && v == value))\n                    result.push(this.data[i], value);\n            }\n        }\n        return result;\n    }\n    /**\n    Configure the parser. Returns a new parser instance that has the\n    given settings modified. Settings not provided in `config` are\n    kept from the original parser.\n    */\n    configure(config) {\n        // Hideous reflection-based kludge to make it easy to create a\n        // slightly modified copy of a parser.\n        let copy = Object.assign(Object.create(LRParser.prototype), this);\n        if (config.props)\n            copy.nodeSet = this.nodeSet.extend(...config.props);\n        if (config.top) {\n            let info = this.topRules[config.top];\n            if (!info)\n                throw new RangeError(`Invalid top rule name ${config.top}`);\n            copy.top = info;\n        }\n        if (config.tokenizers)\n            copy.tokenizers = this.tokenizers.map(t => {\n                let found = config.tokenizers.find(r => r.from == t);\n                return found ? found.to : t;\n            });\n        if (config.specializers) {\n            copy.specializers = this.specializers.slice();\n            copy.specializerSpecs = this.specializerSpecs.map((s, i) => {\n                let found = config.specializers.find(r => r.from == s.external);\n                if (!found)\n                    return s;\n                let spec = Object.assign(Object.assign({}, s), { external: found.to });\n                copy.specializers[i] = getSpecializer(spec);\n                return spec;\n            });\n        }\n        if (config.contextTracker)\n            copy.context = config.contextTracker;\n        if (config.dialect)\n            copy.dialect = this.parseDialect(config.dialect);\n        if (config.strict != null)\n            copy.strict = config.strict;\n        if (config.wrap)\n            copy.wrappers = copy.wrappers.concat(config.wrap);\n        if (config.bufferLength != null)\n            copy.bufferLength = config.bufferLength;\n        return copy;\n    }\n    /**\n    Tells you whether any [parse wrappers](#lr.ParserConfig.wrap)\n    are registered for this parser.\n    */\n    hasWrappers() {\n        return this.wrappers.length > 0;\n    }\n    /**\n    Returns the name associated with a given term. This will only\n    work for all terms when the parser was generated with the\n    `--names` option. By default, only the names of tagged terms are\n    stored.\n    */\n    getName(term) {\n        return this.termNames ? this.termNames[term] : String(term <= this.maxNode && this.nodeSet.types[term].name || term);\n    }\n    /**\n    The eof term id is always allocated directly after the node\n    types. @internal\n    */\n    get eofTerm() { return this.maxNode + 1; }\n    /**\n    The type of top node produced by the parser.\n    */\n    get topNode() { return this.nodeSet.types[this.top[1]]; }\n    /**\n    @internal\n    */\n    dynamicPrecedence(term) {\n        let prec = this.dynamicPrecedences;\n        return prec == null ? 0 : prec[term] || 0;\n    }\n    /**\n    @internal\n    */\n    parseDialect(dialect) {\n        let values = Object.keys(this.dialects), flags = values.map(() => false);\n        if (dialect)\n            for (let part of dialect.split(\" \")) {\n                let id = values.indexOf(part);\n                if (id >= 0)\n                    flags[id] = true;\n            }\n        let disabled = null;\n        for (let i = 0; i < values.length; i++)\n            if (!flags[i]) {\n                for (let j = this.dialects[values[i]], id; (id = this.data[j++]) != 65535 /* Seq.End */;)\n                    (disabled || (disabled = new Uint8Array(this.maxTerm + 1)))[id] = 1;\n            }\n        return new Dialect(dialect, flags, disabled);\n    }\n    /**\n    Used by the output of the parser generator. Not available to\n    user code. @hide\n    */\n    static deserialize(spec) {\n        return new LRParser(spec);\n    }\n}\nfunction pair(data, off) { return data[off] | (data[off + 1] << 16); }\nfunction findFinished(stacks) {\n    let best = null;\n    for (let stack of stacks) {\n        let stopped = stack.p.stoppedAt;\n        if ((stack.pos == stack.p.stream.end || stopped != null && stack.pos > stopped) &&\n            stack.p.parser.stateFlag(stack.state, 2 /* StateFlag.Accepting */) &&\n            (!best || best.score < stack.score))\n            best = stack;\n    }\n    return best;\n}\nfunction getSpecializer(spec) {\n    if (spec.external) {\n        let mask = spec.extend ? 1 /* Specialize.Extend */ : 0 /* Specialize.Specialize */;\n        return (value, stack) => (spec.external(value, stack) << 1) | mask;\n    }\n    return spec.get;\n}\n\nexport { ContextTracker, ExternalTokenizer, InputStream, LRParser, LocalTokenGroup, Stack };\n","import { NodeProp } from '@lezer/common';\n\nlet nextTagID = 0;\n/**\nHighlighting tags are markers that denote a highlighting category.\nThey are [associated](#highlight.styleTags) with parts of a syntax\ntree by a language mode, and then mapped to an actual CSS style by\na [highlighter](#highlight.Highlighter).\n\nBecause syntax tree node types and highlight styles have to be\nable to talk the same language, CodeMirror uses a mostly _closed_\n[vocabulary](#highlight.tags) of syntax tags (as opposed to\ntraditional open string-based systems, which make it hard for\nhighlighting themes to cover all the tokens produced by the\nvarious languages).\n\nIt _is_ possible to [define](#highlight.Tag^define) your own\nhighlighting tags for system-internal use (where you control both\nthe language package and the highlighter), but such tags will not\nbe picked up by regular highlighters (though you can derive them\nfrom standard tags to allow highlighters to fall back to those).\n*/\nclass Tag {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The set of this tag and all its parent tags, starting with\n    this one itself and sorted in order of decreasing specificity.\n    */\n    set, \n    /**\n    The base unmodified tag that this one is based on, if it's\n    modified @internal\n    */\n    base, \n    /**\n    The modifiers applied to this.base @internal\n    */\n    modified) {\n        this.set = set;\n        this.base = base;\n        this.modified = modified;\n        /**\n        @internal\n        */\n        this.id = nextTagID++;\n    }\n    /**\n    Define a new tag. If `parent` is given, the tag is treated as a\n    sub-tag of that parent, and\n    [highlighters](#highlight.tagHighlighter) that don't mention\n    this tag will try to fall back to the parent tag (or grandparent\n    tag, etc).\n    */\n    static define(parent) {\n        if (parent === null || parent === void 0 ? void 0 : parent.base)\n            throw new Error(\"Can not derive from a modified tag\");\n        let tag = new Tag([], null, []);\n        tag.set.push(tag);\n        if (parent)\n            for (let t of parent.set)\n                tag.set.push(t);\n        return tag;\n    }\n    /**\n    Define a tag _modifier_, which is a function that, given a tag,\n    will return a tag that is a subtag of the original. Applying the\n    same modifier to a twice tag will return the same value (`m1(t1)\n    == m1(t1)`) and applying multiple modifiers will, regardless or\n    order, produce the same tag (`m1(m2(t1)) == m2(m1(t1))`).\n    \n    When multiple modifiers are applied to a given base tag, each\n    smaller set of modifiers is registered as a parent, so that for\n    example `m1(m2(m3(t1)))` is a subtype of `m1(m2(t1))`,\n    `m1(m3(t1)`, and so on.\n    */\n    static defineModifier() {\n        let mod = new Modifier;\n        return (tag) => {\n            if (tag.modified.indexOf(mod) > -1)\n                return tag;\n            return Modifier.get(tag.base || tag, tag.modified.concat(mod).sort((a, b) => a.id - b.id));\n        };\n    }\n}\nlet nextModifierID = 0;\nclass Modifier {\n    constructor() {\n        this.instances = [];\n        this.id = nextModifierID++;\n    }\n    static get(base, mods) {\n        if (!mods.length)\n            return base;\n        let exists = mods[0].instances.find(t => t.base == base && sameArray(mods, t.modified));\n        if (exists)\n            return exists;\n        let set = [], tag = new Tag(set, base, mods);\n        for (let m of mods)\n            m.instances.push(tag);\n        let configs = powerSet(mods);\n        for (let parent of base.set)\n            if (!parent.modified.length)\n                for (let config of configs)\n                    set.push(Modifier.get(parent, config));\n        return tag;\n    }\n}\nfunction sameArray(a, b) {\n    return a.length == b.length && a.every((x, i) => x == b[i]);\n}\nfunction powerSet(array) {\n    let sets = [[]];\n    for (let i = 0; i < array.length; i++) {\n        for (let j = 0, e = sets.length; j < e; j++) {\n            sets.push(sets[j].concat(array[i]));\n        }\n    }\n    return sets.sort((a, b) => b.length - a.length);\n}\n/**\nThis function is used to add a set of tags to a language syntax\nvia [`NodeSet.extend`](#common.NodeSet.extend) or\n[`LRParser.configure`](#lr.LRParser.configure).\n\nThe argument object maps node selectors to [highlighting\ntags](#highlight.Tag) or arrays of tags.\n\nNode selectors may hold one or more (space-separated) node paths.\nSuch a path can be a [node name](#common.NodeType.name), or\nmultiple node names (or `*` wildcards) separated by slash\ncharacters, as in `\"Block/Declaration/VariableName\"`. Such a path\nmatches the final node but only if its direct parent nodes are the\nother nodes mentioned. A `*` in such a path matches any parent,\nbut only a single level—wildcards that match multiple parents\naren't supported, both for efficiency reasons and because Lezer\ntrees make it rather hard to reason about what they would match.)\n\nA path can be ended with `/...` to indicate that the tag assigned\nto the node should also apply to all child nodes, even if they\nmatch their own style (by default, only the innermost style is\nused).\n\nWhen a path ends in `!`, as in `Attribute!`, no further matching\nhappens for the node's child nodes, and the entire node gets the\ngiven style.\n\nIn this notation, node names that contain `/`, `!`, `*`, or `...`\nmust be quoted as JSON strings.\n\nFor example:\n\n```javascript\nparser.withProps(\n  styleTags({\n    // Style Number and BigNumber nodes\n    \"Number BigNumber\": tags.number,\n    // Style Escape nodes whose parent is String\n    \"String/Escape\": tags.escape,\n    // Style anything inside Attributes nodes\n    \"Attributes!\": tags.meta,\n    // Add a style to all content inside Italic nodes\n    \"Italic/...\": tags.emphasis,\n    // Style InvalidString nodes as both `string` and `invalid`\n    \"InvalidString\": [tags.string, tags.invalid],\n    // Style the node named \"/\" as punctuation\n    '\"/\"': tags.punctuation\n  })\n)\n```\n*/\nfunction styleTags(spec) {\n    let byName = Object.create(null);\n    for (let prop in spec) {\n        let tags = spec[prop];\n        if (!Array.isArray(tags))\n            tags = [tags];\n        for (let part of prop.split(\" \"))\n            if (part) {\n                let pieces = [], mode = 2 /* Mode.Normal */, rest = part;\n                for (let pos = 0;;) {\n                    if (rest == \"...\" && pos > 0 && pos + 3 == part.length) {\n                        mode = 1 /* Mode.Inherit */;\n                        break;\n                    }\n                    let m = /^\"(?:[^\"\\\\]|\\\\.)*?\"|[^\\/!]+/.exec(rest);\n                    if (!m)\n                        throw new RangeError(\"Invalid path: \" + part);\n                    pieces.push(m[0] == \"*\" ? \"\" : m[0][0] == '\"' ? JSON.parse(m[0]) : m[0]);\n                    pos += m[0].length;\n                    if (pos == part.length)\n                        break;\n                    let next = part[pos++];\n                    if (pos == part.length && next == \"!\") {\n                        mode = 0 /* Mode.Opaque */;\n                        break;\n                    }\n                    if (next != \"/\")\n                        throw new RangeError(\"Invalid path: \" + part);\n                    rest = part.slice(pos);\n                }\n                let last = pieces.length - 1, inner = pieces[last];\n                if (!inner)\n                    throw new RangeError(\"Invalid path: \" + part);\n                let rule = new Rule(tags, mode, last > 0 ? pieces.slice(0, last) : null);\n                byName[inner] = rule.sort(byName[inner]);\n            }\n    }\n    return ruleNodeProp.add(byName);\n}\nconst ruleNodeProp = new NodeProp();\nclass Rule {\n    constructor(tags, mode, context, next) {\n        this.tags = tags;\n        this.mode = mode;\n        this.context = context;\n        this.next = next;\n    }\n    get opaque() { return this.mode == 0 /* Mode.Opaque */; }\n    get inherit() { return this.mode == 1 /* Mode.Inherit */; }\n    sort(other) {\n        if (!other || other.depth < this.depth) {\n            this.next = other;\n            return this;\n        }\n        other.next = this.sort(other.next);\n        return other;\n    }\n    get depth() { return this.context ? this.context.length : 0; }\n}\nRule.empty = new Rule([], 2 /* Mode.Normal */, null);\n/**\nDefine a [highlighter](#highlight.Highlighter) from an array of\ntag/class pairs. Classes associated with more specific tags will\ntake precedence.\n*/\nfunction tagHighlighter(tags, options) {\n    let map = Object.create(null);\n    for (let style of tags) {\n        if (!Array.isArray(style.tag))\n            map[style.tag.id] = style.class;\n        else\n            for (let tag of style.tag)\n                map[tag.id] = style.class;\n    }\n    let { scope, all = null } = options || {};\n    return {\n        style: (tags) => {\n            let cls = all;\n            for (let tag of tags) {\n                for (let sub of tag.set) {\n                    let tagClass = map[sub.id];\n                    if (tagClass) {\n                        cls = cls ? cls + \" \" + tagClass : tagClass;\n                        break;\n                    }\n                }\n            }\n            return cls;\n        },\n        scope\n    };\n}\nfunction highlightTags(highlighters, tags) {\n    let result = null;\n    for (let highlighter of highlighters) {\n        let value = highlighter.style(tags);\n        if (value)\n            result = result ? result + \" \" + value : value;\n    }\n    return result;\n}\n/**\nHighlight the given [tree](#common.Tree) with the given\n[highlighter](#highlight.Highlighter). Often, the higher-level\n[`highlightCode`](#highlight.highlightCode) function is easier to\nuse.\n*/\nfunction highlightTree(tree, highlighter, \n/**\nAssign styling to a region of the text. Will be called, in order\nof position, for any ranges where more than zero classes apply.\n`classes` is a space separated string of CSS classes.\n*/\nputStyle, \n/**\nThe start of the range to highlight.\n*/\nfrom = 0, \n/**\nThe end of the range.\n*/\nto = tree.length) {\n    let builder = new HighlightBuilder(from, Array.isArray(highlighter) ? highlighter : [highlighter], putStyle);\n    builder.highlightRange(tree.cursor(), from, to, \"\", builder.highlighters);\n    builder.flush(to);\n}\n/**\nHighlight the given tree with the given highlighter, calling\n`putText` for every piece of text, either with a set of classes or\nwith the empty string when unstyled, and `putBreak` for every line\nbreak.\n*/\nfunction highlightCode(code, tree, highlighter, putText, putBreak, from = 0, to = code.length) {\n    let pos = from;\n    function writeTo(p, classes) {\n        if (p <= pos)\n            return;\n        for (let text = code.slice(pos, p), i = 0;;) {\n            let nextBreak = text.indexOf(\"\\n\", i);\n            let upto = nextBreak < 0 ? text.length : nextBreak;\n            if (upto > i)\n                putText(text.slice(i, upto), classes);\n            if (nextBreak < 0)\n                break;\n            putBreak();\n            i = nextBreak + 1;\n        }\n        pos = p;\n    }\n    highlightTree(tree, highlighter, (from, to, classes) => {\n        writeTo(from, \"\");\n        writeTo(to, classes);\n    }, from, to);\n    writeTo(to, \"\");\n}\nclass HighlightBuilder {\n    constructor(at, highlighters, span) {\n        this.at = at;\n        this.highlighters = highlighters;\n        this.span = span;\n        this.class = \"\";\n    }\n    startSpan(at, cls) {\n        if (cls != this.class) {\n            this.flush(at);\n            if (at > this.at)\n                this.at = at;\n            this.class = cls;\n        }\n    }\n    flush(to) {\n        if (to > this.at && this.class)\n            this.span(this.at, to, this.class);\n    }\n    highlightRange(cursor, from, to, inheritedClass, highlighters) {\n        let { type, from: start, to: end } = cursor;\n        if (start >= to || end <= from)\n            return;\n        if (type.isTop)\n            highlighters = this.highlighters.filter(h => !h.scope || h.scope(type));\n        let cls = inheritedClass;\n        let rule = getStyleTags(cursor) || Rule.empty;\n        let tagCls = highlightTags(highlighters, rule.tags);\n        if (tagCls) {\n            if (cls)\n                cls += \" \";\n            cls += tagCls;\n            if (rule.mode == 1 /* Mode.Inherit */)\n                inheritedClass += (inheritedClass ? \" \" : \"\") + tagCls;\n        }\n        this.startSpan(Math.max(from, start), cls);\n        if (rule.opaque)\n            return;\n        let mounted = cursor.tree && cursor.tree.prop(NodeProp.mounted);\n        if (mounted && mounted.overlay) {\n            let inner = cursor.node.enter(mounted.overlay[0].from + start, 1);\n            let innerHighlighters = this.highlighters.filter(h => !h.scope || h.scope(mounted.tree.type));\n            let hasChild = cursor.firstChild();\n            for (let i = 0, pos = start;; i++) {\n                let next = i < mounted.overlay.length ? mounted.overlay[i] : null;\n                let nextPos = next ? next.from + start : end;\n                let rangeFrom = Math.max(from, pos), rangeTo = Math.min(to, nextPos);\n                if (rangeFrom < rangeTo && hasChild) {\n                    while (cursor.from < rangeTo) {\n                        this.highlightRange(cursor, rangeFrom, rangeTo, inheritedClass, highlighters);\n                        this.startSpan(Math.min(rangeTo, cursor.to), cls);\n                        if (cursor.to >= nextPos || !cursor.nextSibling())\n                            break;\n                    }\n                }\n                if (!next || nextPos > to)\n                    break;\n                pos = next.to + start;\n                if (pos > from) {\n                    this.highlightRange(inner.cursor(), Math.max(from, next.from + start), Math.min(to, pos), \"\", innerHighlighters);\n                    this.startSpan(Math.min(to, pos), cls);\n                }\n            }\n            if (hasChild)\n                cursor.parent();\n        }\n        else if (cursor.firstChild()) {\n            if (mounted)\n                inheritedClass = \"\";\n            do {\n                if (cursor.to <= from)\n                    continue;\n                if (cursor.from >= to)\n                    break;\n                this.highlightRange(cursor, from, to, inheritedClass, highlighters);\n                this.startSpan(Math.min(to, cursor.to), cls);\n            } while (cursor.nextSibling());\n            cursor.parent();\n        }\n    }\n}\n/**\nMatch a syntax node's [highlight rules](#highlight.styleTags). If\nthere's a match, return its set of tags, and whether it is\nopaque (uses a `!`) or applies to all child nodes (`/...`).\n*/\nfunction getStyleTags(node) {\n    let rule = node.type.prop(ruleNodeProp);\n    while (rule && rule.context && !node.matchContext(rule.context))\n        rule = rule.next;\n    return rule || null;\n}\nconst t = Tag.define;\nconst comment = t(), name = t(), typeName = t(name), propertyName = t(name), literal = t(), string = t(literal), number = t(literal), content = t(), heading = t(content), keyword = t(), operator = t(), punctuation = t(), bracket = t(punctuation), meta = t();\n/**\nThe default set of highlighting [tags](#highlight.Tag).\n\nThis collection is heavily biased towards programming languages,\nand necessarily incomplete. A full ontology of syntactic\nconstructs would fill a stack of books, and be impractical to\nwrite themes for. So try to make do with this set. If all else\nfails, [open an\nissue](https://github.com/codemirror/codemirror.next) to propose a\nnew tag, or [define](#highlight.Tag^define) a local custom tag for\nyour use case.\n\nNote that it is not obligatory to always attach the most specific\ntag possible to an element—if your grammar can't easily\ndistinguish a certain type of element (such as a local variable),\nit is okay to style it as its more general variant (a variable).\n\nFor tags that extend some parent tag, the documentation links to\nthe parent.\n*/\nconst tags = {\n    /**\n    A comment.\n    */\n    comment,\n    /**\n    A line [comment](#highlight.tags.comment).\n    */\n    lineComment: t(comment),\n    /**\n    A block [comment](#highlight.tags.comment).\n    */\n    blockComment: t(comment),\n    /**\n    A documentation [comment](#highlight.tags.comment).\n    */\n    docComment: t(comment),\n    /**\n    Any kind of identifier.\n    */\n    name,\n    /**\n    The [name](#highlight.tags.name) of a variable.\n    */\n    variableName: t(name),\n    /**\n    A type [name](#highlight.tags.name).\n    */\n    typeName: typeName,\n    /**\n    A tag name (subtag of [`typeName`](#highlight.tags.typeName)).\n    */\n    tagName: t(typeName),\n    /**\n    A property or field [name](#highlight.tags.name).\n    */\n    propertyName: propertyName,\n    /**\n    An attribute name (subtag of [`propertyName`](#highlight.tags.propertyName)).\n    */\n    attributeName: t(propertyName),\n    /**\n    The [name](#highlight.tags.name) of a class.\n    */\n    className: t(name),\n    /**\n    A label [name](#highlight.tags.name).\n    */\n    labelName: t(name),\n    /**\n    A namespace [name](#highlight.tags.name).\n    */\n    namespace: t(name),\n    /**\n    The [name](#highlight.tags.name) of a macro.\n    */\n    macroName: t(name),\n    /**\n    A literal value.\n    */\n    literal,\n    /**\n    A string [literal](#highlight.tags.literal).\n    */\n    string,\n    /**\n    A documentation [string](#highlight.tags.string).\n    */\n    docString: t(string),\n    /**\n    A character literal (subtag of [string](#highlight.tags.string)).\n    */\n    character: t(string),\n    /**\n    An attribute value (subtag of [string](#highlight.tags.string)).\n    */\n    attributeValue: t(string),\n    /**\n    A number [literal](#highlight.tags.literal).\n    */\n    number,\n    /**\n    An integer [number](#highlight.tags.number) literal.\n    */\n    integer: t(number),\n    /**\n    A floating-point [number](#highlight.tags.number) literal.\n    */\n    float: t(number),\n    /**\n    A boolean [literal](#highlight.tags.literal).\n    */\n    bool: t(literal),\n    /**\n    Regular expression [literal](#highlight.tags.literal).\n    */\n    regexp: t(literal),\n    /**\n    An escape [literal](#highlight.tags.literal), for example a\n    backslash escape in a string.\n    */\n    escape: t(literal),\n    /**\n    A color [literal](#highlight.tags.literal).\n    */\n    color: t(literal),\n    /**\n    A URL [literal](#highlight.tags.literal).\n    */\n    url: t(literal),\n    /**\n    A language keyword.\n    */\n    keyword,\n    /**\n    The [keyword](#highlight.tags.keyword) for the self or this\n    object.\n    */\n    self: t(keyword),\n    /**\n    The [keyword](#highlight.tags.keyword) for null.\n    */\n    null: t(keyword),\n    /**\n    A [keyword](#highlight.tags.keyword) denoting some atomic value.\n    */\n    atom: t(keyword),\n    /**\n    A [keyword](#highlight.tags.keyword) that represents a unit.\n    */\n    unit: t(keyword),\n    /**\n    A modifier [keyword](#highlight.tags.keyword).\n    */\n    modifier: t(keyword),\n    /**\n    A [keyword](#highlight.tags.keyword) that acts as an operator.\n    */\n    operatorKeyword: t(keyword),\n    /**\n    A control-flow related [keyword](#highlight.tags.keyword).\n    */\n    controlKeyword: t(keyword),\n    /**\n    A [keyword](#highlight.tags.keyword) that defines something.\n    */\n    definitionKeyword: t(keyword),\n    /**\n    A [keyword](#highlight.tags.keyword) related to defining or\n    interfacing with modules.\n    */\n    moduleKeyword: t(keyword),\n    /**\n    An operator.\n    */\n    operator,\n    /**\n    An [operator](#highlight.tags.operator) that dereferences something.\n    */\n    derefOperator: t(operator),\n    /**\n    Arithmetic-related [operator](#highlight.tags.operator).\n    */\n    arithmeticOperator: t(operator),\n    /**\n    Logical [operator](#highlight.tags.operator).\n    */\n    logicOperator: t(operator),\n    /**\n    Bit [operator](#highlight.tags.operator).\n    */\n    bitwiseOperator: t(operator),\n    /**\n    Comparison [operator](#highlight.tags.operator).\n    */\n    compareOperator: t(operator),\n    /**\n    [Operator](#highlight.tags.operator) that updates its operand.\n    */\n    updateOperator: t(operator),\n    /**\n    [Operator](#highlight.tags.operator) that defines something.\n    */\n    definitionOperator: t(operator),\n    /**\n    Type-related [operator](#highlight.tags.operator).\n    */\n    typeOperator: t(operator),\n    /**\n    Control-flow [operator](#highlight.tags.operator).\n    */\n    controlOperator: t(operator),\n    /**\n    Program or markup punctuation.\n    */\n    punctuation,\n    /**\n    [Punctuation](#highlight.tags.punctuation) that separates\n    things.\n    */\n    separator: t(punctuation),\n    /**\n    Bracket-style [punctuation](#highlight.tags.punctuation).\n    */\n    bracket,\n    /**\n    Angle [brackets](#highlight.tags.bracket) (usually `<` and `>`\n    tokens).\n    */\n    angleBracket: t(bracket),\n    /**\n    Square [brackets](#highlight.tags.bracket) (usually `[` and `]`\n    tokens).\n    */\n    squareBracket: t(bracket),\n    /**\n    Parentheses (usually `(` and `)` tokens). Subtag of\n    [bracket](#highlight.tags.bracket).\n    */\n    paren: t(bracket),\n    /**\n    Braces (usually `{` and `}` tokens). Subtag of\n    [bracket](#highlight.tags.bracket).\n    */\n    brace: t(bracket),\n    /**\n    Content, for example plain text in XML or markup documents.\n    */\n    content,\n    /**\n    [Content](#highlight.tags.content) that represents a heading.\n    */\n    heading,\n    /**\n    A level 1 [heading](#highlight.tags.heading).\n    */\n    heading1: t(heading),\n    /**\n    A level 2 [heading](#highlight.tags.heading).\n    */\n    heading2: t(heading),\n    /**\n    A level 3 [heading](#highlight.tags.heading).\n    */\n    heading3: t(heading),\n    /**\n    A level 4 [heading](#highlight.tags.heading).\n    */\n    heading4: t(heading),\n    /**\n    A level 5 [heading](#highlight.tags.heading).\n    */\n    heading5: t(heading),\n    /**\n    A level 6 [heading](#highlight.tags.heading).\n    */\n    heading6: t(heading),\n    /**\n    A prose separator (such as a horizontal rule).\n    */\n    contentSeparator: t(content),\n    /**\n    [Content](#highlight.tags.content) that represents a list.\n    */\n    list: t(content),\n    /**\n    [Content](#highlight.tags.content) that represents a quote.\n    */\n    quote: t(content),\n    /**\n    [Content](#highlight.tags.content) that is emphasized.\n    */\n    emphasis: t(content),\n    /**\n    [Content](#highlight.tags.content) that is styled strong.\n    */\n    strong: t(content),\n    /**\n    [Content](#highlight.tags.content) that is part of a link.\n    */\n    link: t(content),\n    /**\n    [Content](#highlight.tags.content) that is styled as code or\n    monospace.\n    */\n    monospace: t(content),\n    /**\n    [Content](#highlight.tags.content) that has a strike-through\n    style.\n    */\n    strikethrough: t(content),\n    /**\n    Inserted text in a change-tracking format.\n    */\n    inserted: t(),\n    /**\n    Deleted text.\n    */\n    deleted: t(),\n    /**\n    Changed text.\n    */\n    changed: t(),\n    /**\n    An invalid or unsyntactic element.\n    */\n    invalid: t(),\n    /**\n    Metadata or meta-instruction.\n    */\n    meta,\n    /**\n    [Metadata](#highlight.tags.meta) that applies to the entire\n    document.\n    */\n    documentMeta: t(meta),\n    /**\n    [Metadata](#highlight.tags.meta) that annotates or adds\n    attributes to a given syntactic element.\n    */\n    annotation: t(meta),\n    /**\n    Processing instruction or preprocessor directive. Subtag of\n    [meta](#highlight.tags.meta).\n    */\n    processingInstruction: t(meta),\n    /**\n    [Modifier](#highlight.Tag^defineModifier) that indicates that a\n    given element is being defined. Expected to be used with the\n    various [name](#highlight.tags.name) tags.\n    */\n    definition: Tag.defineModifier(),\n    /**\n    [Modifier](#highlight.Tag^defineModifier) that indicates that\n    something is constant. Mostly expected to be used with\n    [variable names](#highlight.tags.variableName).\n    */\n    constant: Tag.defineModifier(),\n    /**\n    [Modifier](#highlight.Tag^defineModifier) used to indicate that\n    a [variable](#highlight.tags.variableName) or [property\n    name](#highlight.tags.propertyName) is being called or defined\n    as a function.\n    */\n    function: Tag.defineModifier(),\n    /**\n    [Modifier](#highlight.Tag^defineModifier) that can be applied to\n    [names](#highlight.tags.name) to indicate that they belong to\n    the language's standard environment.\n    */\n    standard: Tag.defineModifier(),\n    /**\n    [Modifier](#highlight.Tag^defineModifier) that indicates a given\n    [names](#highlight.tags.name) is local to some scope.\n    */\n    local: Tag.defineModifier(),\n    /**\n    A generic variant [modifier](#highlight.Tag^defineModifier) that\n    can be used to tag language-specific alternative variants of\n    some common tag. It is recommended for themes to define special\n    forms of at least the [string](#highlight.tags.string) and\n    [variable name](#highlight.tags.variableName) tags, since those\n    come up a lot.\n    */\n    special: Tag.defineModifier()\n};\n/**\nThis is a highlighter that adds stable, predictable classes to\ntokens, for styling with external CSS.\n\nThe following tags are mapped to their name prefixed with `\"tok-\"`\n(for example `\"tok-comment\"`):\n\n* [`link`](#highlight.tags.link)\n* [`heading`](#highlight.tags.heading)\n* [`emphasis`](#highlight.tags.emphasis)\n* [`strong`](#highlight.tags.strong)\n* [`keyword`](#highlight.tags.keyword)\n* [`atom`](#highlight.tags.atom)\n* [`bool`](#highlight.tags.bool)\n* [`url`](#highlight.tags.url)\n* [`labelName`](#highlight.tags.labelName)\n* [`inserted`](#highlight.tags.inserted)\n* [`deleted`](#highlight.tags.deleted)\n* [`literal`](#highlight.tags.literal)\n* [`string`](#highlight.tags.string)\n* [`number`](#highlight.tags.number)\n* [`variableName`](#highlight.tags.variableName)\n* [`typeName`](#highlight.tags.typeName)\n* [`namespace`](#highlight.tags.namespace)\n* [`className`](#highlight.tags.className)\n* [`macroName`](#highlight.tags.macroName)\n* [`propertyName`](#highlight.tags.propertyName)\n* [`operator`](#highlight.tags.operator)\n* [`comment`](#highlight.tags.comment)\n* [`meta`](#highlight.tags.meta)\n* [`punctuation`](#highlight.tags.punctuation)\n* [`invalid`](#highlight.tags.invalid)\n\nIn addition, these mappings are provided:\n\n* [`regexp`](#highlight.tags.regexp),\n  [`escape`](#highlight.tags.escape), and\n  [`special`](#highlight.tags.special)[`(string)`](#highlight.tags.string)\n  are mapped to `\"tok-string2\"`\n* [`special`](#highlight.tags.special)[`(variableName)`](#highlight.tags.variableName)\n  to `\"tok-variableName2\"`\n* [`local`](#highlight.tags.local)[`(variableName)`](#highlight.tags.variableName)\n  to `\"tok-variableName tok-local\"`\n* [`definition`](#highlight.tags.definition)[`(variableName)`](#highlight.tags.variableName)\n  to `\"tok-variableName tok-definition\"`\n* [`definition`](#highlight.tags.definition)[`(propertyName)`](#highlight.tags.propertyName)\n  to `\"tok-propertyName tok-definition\"`\n*/\nconst classHighlighter = tagHighlighter([\n    { tag: tags.link, class: \"tok-link\" },\n    { tag: tags.heading, class: \"tok-heading\" },\n    { tag: tags.emphasis, class: \"tok-emphasis\" },\n    { tag: tags.strong, class: \"tok-strong\" },\n    { tag: tags.keyword, class: \"tok-keyword\" },\n    { tag: tags.atom, class: \"tok-atom\" },\n    { tag: tags.bool, class: \"tok-bool\" },\n    { tag: tags.url, class: \"tok-url\" },\n    { tag: tags.labelName, class: \"tok-labelName\" },\n    { tag: tags.inserted, class: \"tok-inserted\" },\n    { tag: tags.deleted, class: \"tok-deleted\" },\n    { tag: tags.literal, class: \"tok-literal\" },\n    { tag: tags.string, class: \"tok-string\" },\n    { tag: tags.number, class: \"tok-number\" },\n    { tag: [tags.regexp, tags.escape, tags.special(tags.string)], class: \"tok-string2\" },\n    { tag: tags.variableName, class: \"tok-variableName\" },\n    { tag: tags.local(tags.variableName), class: \"tok-variableName tok-local\" },\n    { tag: tags.definition(tags.variableName), class: \"tok-variableName tok-definition\" },\n    { tag: tags.special(tags.variableName), class: \"tok-variableName2\" },\n    { tag: tags.definition(tags.propertyName), class: \"tok-propertyName tok-definition\" },\n    { tag: tags.typeName, class: \"tok-typeName\" },\n    { tag: tags.namespace, class: \"tok-namespace\" },\n    { tag: tags.className, class: \"tok-className\" },\n    { tag: tags.macroName, class: \"tok-macroName\" },\n    { tag: tags.propertyName, class: \"tok-propertyName\" },\n    { tag: tags.operator, class: \"tok-operator\" },\n    { tag: tags.comment, class: \"tok-comment\" },\n    { tag: tags.meta, class: \"tok-meta\" },\n    { tag: tags.invalid, class: \"tok-invalid\" },\n    { tag: tags.punctuation, class: \"tok-punctuation\" }\n]);\n\nexport { Tag, classHighlighter, getStyleTags, highlightCode, highlightTree, styleTags, tagHighlighter, tags };\n","import { LRParser } from '@lezer/lr';\nimport { styleTags, tags } from '@lezer/highlight';\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst inf$1 = 261,\n  nan$1 = 262,\n  Bool$1 = 1,\n  Ignoring$1 = 2,\n  On$1 = 3,\n  GroupLeft$1 = 4,\n  GroupRight$1 = 5,\n  Offset$1 = 6,\n  Atan2$1 = 7,\n  Avg$1 = 8,\n  Bottomk$1 = 9,\n  Count$1 = 10,\n  CountValues$1 = 11,\n  Group$1 = 12,\n  Max$1 = 13,\n  Min$1 = 14,\n  Quantile$1 = 15,\n  Stddev$1 = 16,\n  Stdvar$1 = 17,\n  Sum$1 = 18,\n  Topk$1 = 19,\n  By$1 = 20,\n  Without$1 = 21,\n  And$1 = 22,\n  Or$1 = 23,\n  Unless$1 = 24,\n  Start$1 = 25,\n  End$1 = 26;\n\nconst keywordTokens = {\n    inf: inf$1,\n    nan: nan$1,\n    bool: Bool$1,\n    ignoring: Ignoring$1,\n    on: On$1,\n    group_left: GroupLeft$1,\n    group_right: GroupRight$1,\n    offset: Offset$1,\n};\n\nconst specializeIdentifier = (value) => {\n    return keywordTokens[value.toLowerCase()] || -1;\n};\n\nconst contextualKeywordTokens = {\n    avg: Avg$1,\n    atan2: Atan2$1,\n    bottomk: Bottomk$1,\n    count: Count$1,\n    count_values: CountValues$1,\n    group: Group$1,\n    max: Max$1,\n    min: Min$1,\n    quantile: Quantile$1,\n    stddev: Stddev$1,\n    stdvar: Stdvar$1,\n    sum: Sum$1,\n    topk: Topk$1,\n    by: By$1,\n    without: Without$1,\n    and: And$1,\n    or: Or$1,\n    unless: Unless$1,\n    start: Start$1,\n    end: End$1,\n};\n\nconst extendIdentifier = (value) => {\n    return contextualKeywordTokens[value.toLowerCase()] || -1;\n};\n\nconst functions = [\n  'Abs', 'Absent', 'AbsentOverTime', 'Acos', 'Acosh', 'Asin', 'Asinh', 'Atan', 'Atanh', 'AvgOverTime', 'Ceil',\n  'Changes', 'Clamp', 'ClampMax', 'ClampMin', 'Cos', 'Cosh', 'CountOverTime', 'DaysInMonth', 'DayOfMonth', 'DayOfWeek',\n  'DayOfYear', 'Deg', 'Delta', 'Deriv', 'Exp', 'Floor', 'HistogramQuantile', 'HoltWinters', 'Hour', 'Idelta',\n  'Increase', 'Irate', 'LabelReplace', 'LabelJoin', 'LastOverTime', 'Ln', 'Log10', 'Log2', 'MaxOverTime', 'MinOverTime',\n  'Minute', 'Month', 'Pi', 'PredictLinear', 'PresentOverTime', 'QuantileOverTime', 'Rad', 'Rate', 'Resets', 'Round',\n  'Scalar', 'Sgn', 'Sin', 'Sinh', 'Sort', 'SortDesc', 'Sqrt', 'StddevOverTime', 'StdvarOverTime', 'SumOverTime', 'Tan',\n  'Tanh', 'Time', 'Timestamp', 'Vector', 'Year'\n];\n\nconst operatorKeywords = [\n  'Avg', 'Bottomk', 'Count', 'Count_values', 'Group', 'Max', 'Min', 'Quantile', 'Stddev', 'Stdvar', 'Sum', 'Topk'\n];\n\nconst modifiers = [\n  'By', 'Without', 'Bool', 'On', 'Ignoring', 'GroupLeft', 'GroupRight', 'Offset', 'Start', 'End'\n];\n\nconst logicOperators = ['And', 'Unless', 'Or'];\n\nconst operators = [\n  'Sub', 'Add', 'Mul', 'Mod', 'Div', 'Atan2', 'Eql', 'Neq', 'Lte', 'Lss', 'Gte', 'Gtr', 'EqlRegex', 'EqlSingle',\n  'NeqRegex', 'Pow', 'At'\n];\n\nconst metricsQLHighLight = styleTags({\n  LineComment: tags.comment,\n  LabelName: tags.labelName,\n  StringLiteral: tags.string,\n  NumberLiteral: tags.number,\n  Duration: tags.number,\n  [functions.join(' ')]: tags.function(tags.variableName),\n  [operatorKeywords.join(' ')]: tags.operatorKeyword,\n  [modifiers.join(' ')]: tags.modifier,\n  [logicOperators.join(' ')]: tags.logicOperator,\n  [operators.join(' ')]: tags.operator,\n  UnaryOp: tags.arithmeticOperator,\n  '( )': tags.paren,\n  '[ ]': tags.squareBracket,\n  '{ }': tags.brace,\n  '⚠': tags.invalid,\n});\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst spec_Identifier = {__proto__:null,absent_over_time:537, absent:539, abs:541, acos:543, acosh:545, asin:547, asinh:549, atan:551, atanh:553, avg_over_time:555, ceil:557, changes:559, clamp:561, clamp_max:563, clamp_min:565, cos:567, cosh:569, count_over_time:571, days_in_month:573, day_of_month:575, day_of_week:577, day_of_year:579, deg:581, delta:583, deriv:585, exp:587, floor:589, histogram_quantile:591, holt_winters:593, hour:595, idelta:597, increase:599, irate:601, label_replace:603, label_join:605, last_over_time:607, ln:609, log10:611, log2:613, max_over_time:615, min_over_time:617, minute:619, month:621, pi:623, predict_linear:625, present_over_time:627, quantile_over_time:629, rad:631, rate:633, resets:635, round:637, scalar:639, sgn:641, sin:643, sinh:645, sort:647, sort_desc:649, sqrt:651, stddev_over_time:653, stdvar_over_time:655, sum_over_time:657, tan:659, tanh:661, timestamp:663, time:665, vector:667, year:669, ascent_over_time:671, changes_prometheus:673, decreases_over_time:675, default_rollup:677, delta_prometheus:679, deriv_fast:681, descent_over_time:683, distinct_over_time:685, first_over_time:687, geomean_over_time:689, histogram_over_time:691, ideriv:693, increase_prometheus:695, increase_pure:697, increases_over_time:699, integrate:701, lag:703, lifetime:705, mad_over_time:707, median_over_time:709, mode_over_time:711, range_over_time:713, rate_over_sum:715, rollup:717, rollup_candlestick:719, rollup_delta:721, rollup_deriv:723, rollup_increase:725, rollup_rate:727, rollup_scrape_interval:729, scrape_interval:731, stale_samples_over_time:733, sum2_over_time:735, timestamp_with_name:737, tfirst_over_time:739, tlast_change_over_time:741, tlast_over_time:743, tmax_over_time:745, tmin_over_time:747, zscore_over_time:749, histogram_avg:751, histogram_stddev:753, histogram_stdvar:755, prometheus_buckets:757, interpolate:759, keep_last_value:761, keep_next_value:763, range_avg:765, range_first:767, range_last:769, range_linear_regression:771, range_mad:773, range_max:775, range_median:777, range_min:779, range_stddev:781, range_stdvar:783, range_sum:785, range_zscore:787, remove_resets:789, running_avg:791, running_max:793, running_min:795, running_sum:797, distinct:799, geomean:801, histogram:803, bottomk_avg:805, bottomk_last:807, bottomk_max:809, bottomk_median:811, bottomk_min:813, topk_avg:815, topk_last:817, topk_max:819, topk_median:821, topk_min:823, any:825, limitk:827, mad:829, median:831, mode:833, share:835, sum2:837, zscore:839, label_del:841, label_keep:843, label_lowercase:845, label_uppercase:847, sort_by_label:849, sort_by_label_desc:851, sort_by_label_numeric:853, sort_by_label_numeric_desc:855, now:857, step:859, count_eq_over_time:861, count_gt_over_time:863, count_le_over_time:865, count_ne_over_time:867, duration_over_time:869, share_gt_over_time:871, share_le_over_time:873, share_eq_over_time:875, bitmap_and:877, bitmap_or:879, bitmap_xor:881, rand:883, rand_exponential:885, rand_normal:887, timezone_offset:889, label_set:891, label_copy:893, label_move:895, label_map:897};\nconst parser = LRParser.deserialize({\n  version: 14,\n  states: \"E[OYQPOOO.dQPOOOOQO'#C{'#C{O.iQPO'#CzQ.tQQOOOOQO'#De'#DeO.oQPO'#DdOOQO'#Hf'#HfO0RQPO'#HlOYQPO'#HhOYQPO'#HkOOQO'#Hn'#HnO=fQSO'#HoO=nQQO'#HmOOQO'#Hm'#HmOOQO'#Cy'#CyOOQO'#Df'#DfOOQO'#Dh'#DhOOQO'#Di'#DiOOQO'#Dj'#DjOOQO'#Dk'#DkOOQO'#Dl'#DlOOQO'#Dm'#DmOOQO'#Dn'#DnOOQO'#Do'#DoOOQO'#Dp'#DpOOQO'#Dq'#DqOOQO'#Dr'#DrOOQO'#Ds'#DsOOQO'#Dt'#DtOOQO'#Du'#DuOOQO'#Dv'#DvOOQO'#Dw'#DwOOQO'#Dx'#DxOOQO'#Dy'#DyOOQO'#Dz'#DzOOQO'#D{'#D{OOQO'#D|'#D|OOQO'#D}'#D}OOQO'#EO'#EOOOQO'#EP'#EPOOQO'#EQ'#EQOOQO'#ER'#EROOQO'#ES'#ESOOQO'#ET'#ETOOQO'#EU'#EUOOQO'#EV'#EVOOQO'#EW'#EWOOQO'#EX'#EXOOQO'#EY'#EYOOQO'#EZ'#EZOOQO'#E['#E[OOQO'#E]'#E]OOQO'#E^'#E^OOQO'#E_'#E_OOQO'#E`'#E`OOQO'#Ea'#EaOOQO'#Eb'#EbOOQO'#Ec'#EcOOQO'#Ed'#EdOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsOOQO'#Et'#EtOOQO'#Eu'#EuOOQO'#Ev'#EvOOQO'#Ew'#EwOOQO'#Ex'#ExOOQO'#Ey'#EyOOQO'#Ez'#EzOOQO'#E{'#E{OOQO'#E|'#E|OOQO'#E}'#E}OOQO'#FO'#FOOOQO'#FP'#FPOOQO'#FQ'#FQOOQO'#FR'#FROOQO'#FS'#FSOOQO'#FT'#FTOOQO'#FU'#FUOOQO'#FV'#FVOOQO'#FW'#FWOOQO'#FX'#FXOOQO'#FY'#FYOOQO'#FZ'#FZOOQO'#F['#F[OOQO'#F]'#F]OOQO'#F^'#F^OOQO'#F_'#F_OOQO'#F`'#F`OOQO'#Fa'#FaOOQO'#Fb'#FbOOQO'#Fc'#FcOOQO'#Fd'#FdOOQO'#Fe'#FeOOQO'#Ff'#FfOOQO'#Fg'#FgOOQO'#Fh'#FhOOQO'#Fi'#FiOOQO'#Fj'#FjOOQO'#Fk'#FkOOQO'#Fl'#FlOOQO'#Fm'#FmOOQO'#Fn'#FnOOQO'#Fo'#FoOOQO'#Fp'#FpOOQO'#Fq'#FqOOQO'#Fr'#FrOOQO'#Fs'#FsOOQO'#Ft'#FtOOQO'#Fu'#FuOOQO'#Fv'#FvOOQO'#Fw'#FwOOQO'#Fx'#FxOOQO'#Fy'#FyOOQO'#Fz'#FzOOQO'#F{'#F{OOQO'#F|'#F|OOQO'#F}'#F}OOQO'#GO'#GOOOQO'#GP'#GPOOQO'#GQ'#GQOOQO'#GR'#GROOQO'#GS'#GSOOQO'#GT'#GTOOQO'#GU'#GUOOQO'#GV'#GVOOQO'#GW'#GWOOQO'#GX'#GXOOQO'#GY'#GYOOQO'#GZ'#GZOOQO'#G['#G[OOQO'#G]'#G]OOQO'#G^'#G^OOQO'#G_'#G_OOQO'#G`'#G`OOQO'#Ga'#GaOOQO'#Gb'#GbOOQO'#Gc'#GcOOQO'#Gd'#GdOOQO'#Ge'#GeOOQO'#Gf'#GfOOQO'#Gg'#GgOOQO'#Gh'#GhOOQO'#Gi'#GiOOQO'#Gj'#GjOOQO'#Gk'#GkOOQO'#Gl'#GlOOQO'#Gm'#GmOOQO'#Gn'#GnOOQO'#Go'#GoOOQO'#Gp'#GpOOQO'#Gq'#GqOOQO'#Gr'#GrOOQO'#Gs'#GsOOQO'#Gt'#GtOOQO'#Gu'#GuOOQO'#Gv'#GvOOQO'#Gw'#GwOOQO'#Gx'#GxOOQO'#Gy'#GyOOQO'#Gz'#GzOOQO'#G{'#G{OOQO'#G|'#G|OOQO'#G}'#G}OOQO'#HO'#HOOOQO'#HP'#HPOOQO'#HQ'#HQOOQO'#HR'#HROOQO'#HS'#HSOOQO'#HT'#HTOOQO'#HU'#HUOOQO'#HV'#HVOOQO'#HW'#HWOOQO'#HX'#HXOOQO'#HY'#HYOOQO'#HZ'#HZOOQO'#H['#H[OOQO'#H]'#H]OOQO'#H^'#H^OOQO'#H_'#H_OOQO'#H`'#H`OOQO'#Ha'#HaOOQO'#Hb'#HbOOQO'#Hc'#HcQOQPOOO?XQPO'#C|O?^QPO'#DRO.oQPO,59fO?eQQO,59fOARQPO,59oOARQPO,59oOARQPO,59oOARQPO,59oOARQPO,59oONfQQO,5>OONkQQO,5>RONsQPO,5>bOOQO,5:O,5:OOOQO,5>Q,5>QO! [QQO,5>SO! cQQO,5>VO!!yQPO'#HqO!#XQPO,5>ZOOQO'#Hp'#HpOOQO,5>Z,5>ZOOQO,5>X,5>XO!#aQSO'#C}OOQO,59h,59hO!#iQPO,59mO!#qQQO'#DSOOQO,59m,59mOOQO1G/Q1G/QO?XQPO'#DWO!1VQPO'#DVO!1aQPO'#DVOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZO!1kQSO1G3jOOQO1G3m1G3mO!1sQQO1G3mO!1xQPO'#HfOOQO'#Hx'#HxOOQO1G3|1G3|O!2TQPO1G3|OOQO1G3n1G3nOOQO'#Hr'#HrO!2YQPO,5>]O!2_QSO1G3uOOQO1G3u1G3uOOQO'#DP'#DPO!2gQPO,59iOOQO'#DO'#DOOOQO,59i,59iOYQPO,59nOOQO1G/X1G/XOOQO,59r,59rO!?vQPO,59qO!?}QPO,59qO!AfQQO7+$uO!AvQQO7+$uO!C[QQO7+$uO!CrQQO7+$uO!EZQQO7+$uOOQO7+)U7+)UO!EtQQO7+)[OOQO7+)X7+)XO!E|QPO7+)hOOQO1G3w1G3wOOQO1G3v1G3vOOQO7+)a7+)aO!FRQSO1G/TOOQO1G/T1G/TO!FZQQO1G/YOOQO1G/]1G/]O!FeQPO1G/]OOQO<<Lv<<LvO#%oQPO<<LvOOQO<<MS<<MSOOQO1G/U1G/UOOQO7+$o7+$oOOQO7+$w7+$wOOQOANBbANBb\",\n  stateData: \"#%t~O&rOSkOS~OWQOXQOYQOZQO[QO]QO^QO_QO`QOaQObQOcQO!ZZO&]_O&oVO&pVO&sXO&v`O&waO&xbO&ycO&zdO&{eO&|fO&}gO'OhO'PiO'QjO'RkO'SlO'TmO'UnO'VoO'WpO'XqO'YrO'ZsO'[tO']uO'^vO'_wO'`xO'ayO'bzO'c{O'd|O'e}O'f!OO'g!PO'h!QO'i!RO'j!SO'k!TO'l!UO'm!VO'n!WO'o!XO'p!YO'q!ZO'r![O's!]O't!^O'u!_O'v!`O'w!aO'x!bO'y!cO'z!dO'{!eO'|!fO'}!gO(O!hO(P!iO(Q!jO(R!kO(S!lO(T!mO(U!nO(V!oO(W!pO(X!qO(Y!rO(Z!sO([!tO(]!uO(^!vO(_!wO(`!xO(a!yO(b!zO(c!{O(d!|O(e!}O(f#OO(g#PO(h#QO(i#RO(j#SO(k#TO(l#UO(m#VO(n#WO(o#XO(p#YO(q#ZO(r#[O(s#]O(t#^O(u#_O(v#`O(w#aO(x#bO(y#cO(z#dO({#eO(|#fO(}#gO)O#hO)P#iO)Q#jO)R#kO)S#lO)T#mO)U#nO)V#oO)W#pO)X#qO)Y#rO)Z#sO)[#tO)]#uO)^#vO)_#wO)`#xO)a#yO)b#zO)c#{O)d#|O)e#}O)f$OO)g$PO)h$QO)i$RO)j$SO)k$TO)l$UO)m$VO)n$WO)o$XO)p$YO)q$ZO)r$[O)s$]O)t$^O)u$_O)v$`O)w$aO)x$bO)y$cO)z$dO){$eO)|$fO)}$gO*O$hO*P$iO*Q$jO*R$kO*S$lO*T$mO*U$nO*V$oO*W$pO*X$qO*Y$rO*Z$sO*[$tO*]$uO*^$vO*_$wO*`$xO*a$yO*b$zO*c${O*d$|O*e$}O*f%OO*g%PO*h%QO*i%RO*j%SO*k%TO*l%UO*m%VO*n%WO*o%XO*p%YO*q%ZO*r%[O*uWO*vWO*wVO*y[O~O!ZZO~Od%^Oe%^O&s%_O~OU%hOV%bOf%eOg%fOh%eOx%bO{%bO|%bO}%bO!O%cO!P%cO!Q%dO!R%dO!S%dO!T%dO!U%dO!V%dO&k%iO*s%gO~O&o%kO&p%kO*w%kOW&`XX&`XY&`XZ&`X[&`X]&`X^&`X_&`X`&`Xa&`Xb&`Xc&`X!Z&`X&]&`X&o&`X&p&`X&s&`X&v&`X&w&`X&x&`X&y&`X&z&`X&{&`X&|&`X&}&`X'O&`X'P&`X'Q&`X'R&`X'S&`X'T&`X'U&`X'V&`X'W&`X'X&`X'Y&`X'Z&`X'[&`X']&`X'^&`X'_&`X'`&`X'a&`X'b&`X'c&`X'd&`X'e&`X'f&`X'g&`X'h&`X'i&`X'j&`X'k&`X'l&`X'm&`X'n&`X'o&`X'p&`X'q&`X'r&`X's&`X't&`X'u&`X'v&`X'w&`X'x&`X'y&`X'z&`X'{&`X'|&`X'}&`X(O&`X(P&`X(Q&`X(R&`X(S&`X(T&`X(U&`X(V&`X(W&`X(X&`X(Y&`X(Z&`X([&`X(]&`X(^&`X(_&`X(`&`X(a&`X(b&`X(c&`X(d&`X(e&`X(f&`X(g&`X(h&`X(i&`X(j&`X(k&`X(l&`X(m&`X(n&`X(o&`X(p&`X(q&`X(r&`X(s&`X(t&`X(u&`X(v&`X(w&`X(x&`X(y&`X(z&`X({&`X(|&`X(}&`X)O&`X)P&`X)Q&`X)R&`X)S&`X)T&`X)U&`X)V&`X)W&`X)X&`X)Y&`X)Z&`X)[&`X)]&`X)^&`X)_&`X)`&`X)a&`X)b&`X)c&`X)d&`X)e&`X)f&`X)g&`X)h&`X)i&`X)j&`X)k&`X)l&`X)m&`X)n&`X)o&`X)p&`X)q&`X)r&`X)s&`X)t&`X)u&`X)v&`X)w&`X)x&`X)y&`X)z&`X){&`X)|&`X)}&`X*O&`X*P&`X*Q&`X*R&`X*S&`X*T&`X*U&`X*V&`X*W&`X*X&`X*Y&`X*Z&`X*[&`X*]&`X*^&`X*_&`X*`&`X*a&`X*b&`X*c&`X*d&`X*e&`X*f&`X*g&`X*h&`X*i&`X*j&`X*k&`X*l&`X*m&`X*n&`X*o&`X*p&`X*q&`X*r&`X*u&`X*v&`X*w&`X*y&`X~Ot%nO*z%qO~O*y[OU&aXV&aXf&aXg&aXh&aXx&aX{&aX|&aX}&aX!O&aX!P&aX!Q&aX!R&aX!S&aX!T&aX!U&aX!V&aX&k&aX&n&aX*s&aX&u&aX&t&aX~O&s%sO~O&u%wO~PYOd%^Oe%^OUnaVnafnagnahnaxna{na|na}na!Ona!Pna!Qna!Rna!Sna!Tna!Una!Vna&kna&nna*sna&una&tna~OP%{OQ%yOR%yOWyPXyPYyPZyP[yP]yP^yP_yP`yPayPbyPcyP!ZyP&]yP&oyP&pyP&syP&vyP&wyP&xyP&yyP&zyP&{yP&|yP&}yP'OyP'PyP'QyP'RyP'SyP'TyP'UyP'VyP'WyP'XyP'YyP'ZyP'[yP']yP'^yP'_yP'`yP'ayP'byP'cyP'dyP'eyP'fyP'gyP'hyP'iyP'jyP'kyP'lyP'myP'nyP'oyP'pyP'qyP'ryP'syP'tyP'uyP'vyP'wyP'xyP'yyP'zyP'{yP'|yP'}yP(OyP(PyP(QyP(RyP(SyP(TyP(UyP(VyP(WyP(XyP(YyP(ZyP([yP(]yP(^yP(_yP(`yP(ayP(byP(cyP(dyP(eyP(fyP(gyP(hyP(iyP(jyP(kyP(lyP(myP(nyP(oyP(pyP(qyP(ryP(syP(tyP(uyP(vyP(wyP(xyP(yyP(zyP({yP(|yP(}yP)OyP)PyP)QyP)RyP)SyP)TyP)UyP)VyP)WyP)XyP)YyP)ZyP)[yP)]yP)^yP)_yP)`yP)ayP)byP)cyP)dyP)eyP)fyP)gyP)hyP)iyP)jyP)kyP)lyP)myP)nyP)oyP)pyP)qyP)ryP)syP)tyP)uyP)vyP)wyP)xyP)yyP)zyP){yP)|yP)}yP*OyP*PyP*QyP*RyP*SyP*TyP*UyP*VyP*WyP*XyP*YyP*ZyP*[yP*]yP*^yP*_yP*`yP*ayP*byP*cyP*dyP*eyP*fyP*gyP*hyP*iyP*jyP*kyP*lyP*myP*nyP*oyP*pyP*qyP*ryP*uyP*vyP*wyP*yyP~O&X&RO~O!P&TO&X&SO~Oi&VOj&VO&oVO&pVO*u&UO*v&UO*wVO~O&u&YO~P.tOx%bOU&_aV&_af&_ag&_ah&_a{&_a|&_a}&_a!O&_a!P&_a!Q&_a!R&_a!S&_a!T&_a!U&_a!V&_a&k&_a&n&_a*s&_a&u&_a&t&_a~O!V&ZO&g&ZO&h&ZO&i&ZO~O&t&]O*z&^O~Ot&_O&u&bO~O&t&cO&u&dO~O&tvX&uvX~P.tOWyXXyXYyXZyX[yX]yX^yX_yX`yXayXbyXcyX!ZyX&]yX&oyX&pyX&syX&vyX&wyX&xyX&yyX&zyX&{yX&|yX&}yX'OyX'PyX'QyX'RyX'SyX'TyX'UyX'VyX'WyX'XyX'YyX'ZyX'[yX']yX'^yX'_yX'`yX'ayX'byX'cyX'dyX'eyX'fyX'gyX'hyX'iyX'jyX'kyX'lyX'myX'nyX'oyX'pyX'qyX'ryX'syX'tyX'uyX'vyX'wyX'xyX'yyX'zyX'{yX'|yX'}yX(OyX(PyX(QyX(RyX(SyX(TyX(UyX(VyX(WyX(XyX(YyX(ZyX([yX(]yX(^yX(_yX(`yX(ayX(byX(cyX(dyX(eyX(fyX(gyX(hyX(iyX(jyX(kyX(lyX(myX(nyX(oyX(pyX(qyX(ryX(syX(tyX(uyX(vyX(wyX(xyX(yyX(zyX({yX(|yX(}yX)OyX)PyX)QyX)RyX)SyX)TyX)UyX)VyX)WyX)XyX)YyX)ZyX)[yX)]yX)^yX)_yX)`yX)ayX)byX)cyX)dyX)eyX)fyX)gyX)hyX)iyX)jyX)kyX)lyX)myX)nyX)oyX)pyX)qyX)ryX)syX)tyX)uyX)vyX)wyX)xyX)yyX)zyX){yX)|yX)}yX*OyX*PyX*QyX*RyX*SyX*TyX*UyX*VyX*WyX*XyX*YyX*ZyX*[yX*]yX*^yX*_yX*`yX*ayX*byX*cyX*dyX*eyX*fyX*gyX*hyX*iyX*jyX*kyX*lyX*myX*nyX*oyX*pyX*qyX*ryX*uyX*vyX*wyX*yyX~OS&fOT&fO~P!#{OQ%yOR%yO~P!#{O*t&mO*x&nO~O&X&oO~O&o%kO&p%kO*w%kO~O&s&pO~O&]&qO~Ot%nO*z&sO~O&t&tO&u&uO~OWyaXyaYyaZya[ya]ya^ya_ya`yaayabyacya!Zya&]ya&oya&pya&vya&wya&xya&yya&zya&{ya&|ya&}ya'Oya'Pya'Qya'Rya'Sya'Tya'Uya'Vya'Wya'Xya'Yya'Zya'[ya']ya'^ya'_ya'`ya'aya'bya'cya'dya'eya'fya'gya'hya'iya'jya'kya'lya'mya'nya'oya'pya'qya'rya'sya'tya'uya'vya'wya'xya'yya'zya'{ya'|ya'}ya(Oya(Pya(Qya(Rya(Sya(Tya(Uya(Vya(Wya(Xya(Yya(Zya([ya(]ya(^ya(_ya(`ya(aya(bya(cya(dya(eya(fya(gya(hya(iya(jya(kya(lya(mya(nya(oya(pya(qya(rya(sya(tya(uya(vya(wya(xya(yya(zya({ya(|ya(}ya)Oya)Pya)Qya)Rya)Sya)Tya)Uya)Vya)Wya)Xya)Yya)Zya)[ya)]ya)^ya)_ya)`ya)aya)bya)cya)dya)eya)fya)gya)hya)iya)jya)kya)lya)mya)nya)oya)pya)qya)rya)sya)tya)uya)vya)wya)xya)yya)zya){ya)|ya)}ya*Oya*Pya*Qya*Rya*Sya*Tya*Uya*Vya*Wya*Xya*Yya*Zya*[ya*]ya*^ya*_ya*`ya*aya*bya*cya*dya*eya*fya*gya*hya*iya*jya*kya*lya*mya*nya*oya*pya*qya*rya*uya*vya*wya*yya~O&s%sO~P!2oOS&xOT&xO&sya~P!2oOx%bOUwqfwqgwqhwq!Owq!Pwq!Qwq!Rwq!Swq!Twq!Uwq!Vwq&kwq&nwq*swq&uwq&twq~OVwq{wq|wq}wq~P!@[OV%bO{%bO|%bO}%bO~P!@[OV%bOx%bO{%bO|%bO}%bO!O%cO!P%cOUwqfwqgwqhwq&kwq&nwq*swq&uwq&twq~O!Qwq!Rwq!Swq!Twq!Uwq!Vwq~P!BWO!Q%dO!R%dO!S%dO!T%dO!U%dO!V%dO~P!BWOV%bOf%eOh%eOx%bO{%bO|%bO}%bO!O%cO!P%cO!Q%dO!R%dO!S%dO!T%dO!U%dO!V%dO~OUwqgwq&kwq&nwq*swq&uwq&twq~P!DYO&X&zO*t&yO~O&u&{O~Ot&_O&u&}O~O&tvi&uvi~P.tO&s%sOWyiXyiYyiZyi[yi]yi^yi_yi`yiayibyicyi!Zyi&]yi&oyi&pyi&vyi&wyi&xyi&yyi&zyi&{yi&|yi&}yi'Oyi'Pyi'Qyi'Ryi'Syi'Tyi'Uyi'Vyi'Wyi'Xyi'Yyi'Zyi'[yi']yi'^yi'_yi'`yi'ayi'byi'cyi'dyi'eyi'fyi'gyi'hyi'iyi'jyi'kyi'lyi'myi'nyi'oyi'pyi'qyi'ryi'syi'tyi'uyi'vyi'wyi'xyi'yyi'zyi'{yi'|yi'}yi(Oyi(Pyi(Qyi(Ryi(Syi(Tyi(Uyi(Vyi(Wyi(Xyi(Yyi(Zyi([yi(]yi(^yi(_yi(`yi(ayi(byi(cyi(dyi(eyi(fyi(gyi(hyi(iyi(jyi(kyi(lyi(myi(nyi(oyi(pyi(qyi(ryi(syi(tyi(uyi(vyi(wyi(xyi(yyi(zyi({yi(|yi(}yi)Oyi)Pyi)Qyi)Ryi)Syi)Tyi)Uyi)Vyi)Wyi)Xyi)Yyi)Zyi)[yi)]yi)^yi)_yi)`yi)ayi)byi)cyi)dyi)eyi)fyi)gyi)hyi)iyi)jyi)kyi)lyi)myi)nyi)oyi)pyi)qyi)ryi)syi)tyi)uyi)vyi)wyi)xyi)yyi)zyi){yi)|yi)}yi*Oyi*Pyi*Qyi*Ryi*Syi*Tyi*Uyi*Vyi*Wyi*Xyi*Yyi*Zyi*[yi*]yi*^yi*_yi*`yi*ayi*byi*cyi*dyi*eyi*fyi*gyi*hyi*iyi*jyi*kyi*lyi*myi*nyi*oyi*pyi*qyi*ryi*uyi*vyi*wyi*yyi~O*t'PO~O\",\n  goto: \"+^&mPPPPPPPPPPPPPPPPPPPPPPPPPPPPP&n'^'j'v'|(Y(]P(c(l'^P(o)OPPPPPPPPPPP'^)Y)fP)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f)f'^P)r'^'^P'^'^*R'^*_*n*}+Q+WPPP'^P+ZQSOQ%lXQ%mYQ%v%_Q&h%|Q&i%}Q&j&OQ&k&PQ&l&QR&v&ce_OXY%_%|%}&O&P&Q&ceROXY%_%|%}&O&P&Q&cQ%`RR%x%aQ%t%^Q&e%yQ&w&fR'O&xR&`%sQ&a%sR&|&tQ%aRQ%jUR%x%`R%u%_Q%|%bQ%}%cQ&O%dQ&P%eR&Q%fY%z%b%c%d%e%fR&g%{eUOXY%_%|%}&O&P&Q&ceTOXY%_%|%}&O&P&Q&cd_OXY%_%|%}&O&P&Q&cR&W%ieYOXY%_%|%}&O&P&Q&cd]OXY%_%|%}&O&P&Q&cR%]Pd^OXY%_%|%}&O&P&Q&cR%r]R%o[Q%p[R&r&]R&[%nR&X%i\",\n  nodeNames: \"⚠ Bool Ignoring On GroupLeft GroupRight Offset Atan2 Avg Bottomk Count CountValues Group Max Min Quantile Stddev Stdvar Sum Topk By Without And Or Unless Start End LineComment MetricsQL Expr AggregateExpr AggregateOp AggregateModifier GroupingLabels GroupingLabelList GroupingLabel LabelName FunctionCallBody FunctionCallArgs BinaryExpr Pow BinModifiers OnOrIgnoring Mul Div Mod Add Sub Eql Gte Gtr Lte Lss Neq FunctionCall FunctionIdentifier AbsentOverTime Identifier Absent Abs Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Timestamp Time Vector Year AscentOverTime ChangesPrometheus DecreasesOverTime DefaultRollup DeltaPrometheus DerivFast DescentOverTime DistinctOverTime FirstOverTime GeomeanOverTime HistogramOverTime Ideriv IncreasePrometheus IncreasePure IncreasesOverTime Integrate Lag Lifetime MadOverTime MedianOverTime ModeOverTime RangeOverTime RateOverSum Rollup RollupCandlestick RollupDelta RollupDeriv RollupIncrease RollupRate RollupScrapeInterval ScrapeInterval StaleSamplesOverTime Sum2OverTime TimestampWithName TfirstOverTime TlastChangeOverTime TlastOverTime TmaxOverTime TminOverTime ZscoreOverTime HistogramAvg HistogramStddev HistogramStdvar PrometheusBuckets Interpolate KeepLastValue KeepNextValue RangeAvg RangeFirst RangeLast RangeLinearRegression RangeMad RangeMax RangeMedian RangeMin RangeStddev RangeStdvar RangeSum RangeZscore RemoveResets RunningAvg RunningMax RunningMin RunningSum Distinct Geomean Histogram BottomkAvg BottomkLast BottomkMax BottomkMedian BottomkMin TopkAvg TopkLast TopkMax TopkMedian TopkMin Any Limitk Mad Median Mode Share Sum2 Zscore LabelDel LabelKeep LabelLowercase LabelUppercase SortByLabel SortByLabelDesc SortByLabelNumeric SortByLabelNumericDesc Now Step CountEqOverTime CountGtOverTime CountLeOverTime CountNeOverTime DurationOverTime ShareGtOverTime ShareLeOverTime ShareEqOverTime BitmapAnd BitmapOr BitmapXor Rand RandExponential RandNormal TimezoneOffset LabelSet LabelCopy LabelMove LabelMap MatrixSelector Duration NumberLiteral OffsetExpr ParenExpr StringLiteral SubqueryExpr UnaryExpr UnaryOp VectorSelector MetricIdentifier LabelMatchers LabelMatchList LabelMatcher MatchOp EqlSingle EqlRegex NeqRegex StepInvariantExpr At AtModifierPreprocessors MetricName\",\n  maxTerm: 456,\n  propSources: [metricsQLHighLight],\n  skippedNodes: [0,27],\n  repeatNodeCount: 0,\n  tokenData: \"4{~RxX^#opq#oqr$drs$wst&ouv'Wwx']xy)Oyz)Tz{)Y{|)_|})f}!O)k!O!P)r!P!Q*y!Q!R+O!R![,v![!]1b!^!_2R!_!`2`!`!a2u!b!c3S!c!}3X!}#O3x#O#P*a#P#Q3}#Q#R4S#R#S3X#S#T4X#T#o3X#o#p4q#q#r4v#y#z#o$f$g#o#BY#BZ#o$IS$I_#o$I|$JO#o$JT$JU#o$KV$KW#o&FU&FV#o~#tY&r~X^#opq#o#y#z#o$f$g#o#BY#BZ#o$IS$I_#o$I|$JO#o$JT$JU#o$KV$KW#o&FU&FV#o~$gQ!_!`$m#r#s$r~$rO!V~~$wO&i~~$|W&]~OY$wZr$wrs%fs#O$w#O#P%k#P;'S$w;'S;=`&i<%lO$w~%kO&]~~%nRO;'S$w;'S;=`%w;=`O$w~%|X&]~OY$wZr$wrs%fs#O$w#O#P%k#P;'S$w;'S;=`&i;=`<%l$w<%lO$w~&lP;=`<%l$w~&tSk~OY&oZ;'S&o;'S;=`'Q<%lO&o~'TP;=`<%l&o~']O}~~'bW&]~OY']Zw']wx%fx#O']#O#P'z#P;'S'];'S;=`(x<%lO']~'}RO;'S'];'S;=`(W;=`O']~(]X&]~OY']Zw']wx%fx#O']#O#P'z#P;'S'];'S;=`(x;=`<%l']<%lO']~({P;=`<%l']~)TO&s~~)YO&u~~)_O{~R)fO*vP!OQ~)kO&t~R)rO*uP!PQR)wW!ZR}!O)r!O!P)r!Q![)r![!])r!c!})r#O#P*a#R#S)r#T#o)rR*dVuv)rz{)r{|)r}!O)r!P!Q)r!_!`)r#Q#R)r~+OO|~R+TZ*wP!O!P+v!Q![,v!g!h,[#W#X-k#X#Y,[#[#].S#a#b.h#g#h/[#k#l/m#l#m0v#m#n0XP+yP!Q![+|P,RR*wP!Q![+|!g!h,[#X#Y,[P,_R{|,h}!O,h!Q![,nP,kP!Q![,nP,sP*wP!Q![,nR,{Y*wP!O!P+v!Q![,v!g!h,[#W#X-k#X#Y,[#[#].S#a#b.h#g#h/[#k#l/m#m#n0XQ-pP&XQ!Q![-sQ-vS!Q![-s#[#].S#a#b.h#g#h/[Q.XP&XQ!Q![.[Q._R!Q![.[#a#b.h#g#h/[Q.mQ&XQ!Q![.s#g#h/VQ.vR!Q![.s#a#b/P#g#h/[Q/SP#g#h/VQ/[O&XQQ/aP&XQ!Q![/dQ/gQ!Q![/d#a#b/PQ/rP&XQ!Q![/uQ/xT!Q![/u#W#X-k#[#].S#a#b.h#g#h/[Q0^P&XQ!Q![0aQ0dU!Q![0a#W#X-k#[#].S#a#b.h#g#h/[#k#l/mP0yR!Q![1S!c!i1S#T#Z1SP1XR*wP!Q![1S!c!i1S#T#Z1SV1iW*xS!ZR}!O)r!O!P)r!Q![)r![!])r!c!})r#O#P*a#R#S)r#T#o)r~2WP!U~!_!`2Z~2`O!T~~2eQ&gP!_!`2k#r#s2pQ2pO!QQ~2uO&h~~2zP!S~!_!`2}~3SO!R~~3XO&k~V3`W!ZRtS}!O)r!O!P)r!Q![3X![!])r!c!}3X#O#P*a#R#S3X#T#o3X~3}O*s~~4SO*t~~4XOx~~4[TO#S4X#S#T%f#T;'S4X;'S;=`4k<%lO4X~4nP;=`<%l4X~4vO*y~~4{O*z~\",\n  tokenizers: [0, 1, 2],\n  topRules: {\"MetricsQL\":[0,28],\"MetricName\":[1,259]},\n  specialized: [{term: 57, get: (value, stack) => (specializeIdentifier(value) << 1), external: specializeIdentifier},{term: 57, get: (value, stack) => (extendIdentifier(value) << 1) | 1, external: extendIdentifier, extend: true},{term: 57, get: (value) => spec_Identifier[value] || -1}],\n  tokenPrec: 0\n});\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst inf = 261,\n  nan = 262,\n  Bool = 1,\n  Ignoring = 2,\n  On = 3,\n  GroupLeft = 4,\n  GroupRight = 5,\n  Offset = 6,\n  Atan2 = 7,\n  Avg = 8,\n  Bottomk = 9,\n  Count = 10,\n  CountValues = 11,\n  Group = 12,\n  Max = 13,\n  Min = 14,\n  Quantile = 15,\n  Stddev = 16,\n  Stdvar = 17,\n  Sum = 18,\n  Topk = 19,\n  By = 20,\n  Without = 21,\n  And = 22,\n  Or = 23,\n  Unless = 24,\n  Start = 25,\n  End = 26,\n  LineComment = 27,\n  MetricsQL = 28,\n  Expr = 29,\n  AggregateExpr = 30,\n  AggregateOp = 31,\n  AggregateModifier = 32,\n  GroupingLabels = 33,\n  GroupingLabelList = 34,\n  GroupingLabel = 35,\n  LabelName = 36,\n  FunctionCallBody = 37,\n  FunctionCallArgs = 38,\n  BinaryExpr = 39,\n  Pow = 40,\n  BinModifiers = 41,\n  OnOrIgnoring = 42,\n  Mul = 43,\n  Div = 44,\n  Mod = 45,\n  Add = 46,\n  Sub = 47,\n  Eql = 48,\n  Gte = 49,\n  Gtr = 50,\n  Lte = 51,\n  Lss = 52,\n  Neq = 53,\n  FunctionCall = 54,\n  FunctionIdentifier = 55,\n  AbsentOverTime = 56,\n  Identifier = 57,\n  Absent = 58,\n  Abs = 59,\n  Acos = 60,\n  Acosh = 61,\n  Asin = 62,\n  Asinh = 63,\n  Atan = 64,\n  Atanh = 65,\n  AvgOverTime = 66,\n  Ceil = 67,\n  Changes = 68,\n  Clamp = 69,\n  ClampMax = 70,\n  ClampMin = 71,\n  Cos = 72,\n  Cosh = 73,\n  CountOverTime = 74,\n  DaysInMonth = 75,\n  DayOfMonth = 76,\n  DayOfWeek = 77,\n  DayOfYear = 78,\n  Deg = 79,\n  Delta = 80,\n  Deriv = 81,\n  Exp = 82,\n  Floor = 83,\n  HistogramQuantile = 84,\n  HoltWinters = 85,\n  Hour = 86,\n  Idelta = 87,\n  Increase = 88,\n  Irate = 89,\n  LabelReplace = 90,\n  LabelJoin = 91,\n  LastOverTime = 92,\n  Ln = 93,\n  Log10 = 94,\n  Log2 = 95,\n  MaxOverTime = 96,\n  MinOverTime = 97,\n  Minute = 98,\n  Month = 99,\n  Pi = 100,\n  PredictLinear = 101,\n  PresentOverTime = 102,\n  QuantileOverTime = 103,\n  Rad = 104,\n  Rate = 105,\n  Resets = 106,\n  Round = 107,\n  Scalar = 108,\n  Sgn = 109,\n  Sin = 110,\n  Sinh = 111,\n  Sort = 112,\n  SortDesc = 113,\n  Sqrt = 114,\n  StddevOverTime = 115,\n  StdvarOverTime = 116,\n  SumOverTime = 117,\n  Tan = 118,\n  Tanh = 119,\n  Timestamp = 120,\n  Time = 121,\n  Vector = 122,\n  Year = 123,\n  AscentOverTime = 124,\n  ChangesPrometheus = 125,\n  DecreasesOverTime = 126,\n  DefaultRollup = 127,\n  DeltaPrometheus = 128,\n  DerivFast = 129,\n  DescentOverTime = 130,\n  DistinctOverTime = 131,\n  FirstOverTime = 132,\n  GeomeanOverTime = 133,\n  HistogramOverTime = 134,\n  Ideriv = 135,\n  IncreasePrometheus = 136,\n  IncreasePure = 137,\n  IncreasesOverTime = 138,\n  Integrate = 139,\n  Lag = 140,\n  Lifetime = 141,\n  MadOverTime = 142,\n  MedianOverTime = 143,\n  ModeOverTime = 144,\n  RangeOverTime = 145,\n  RateOverSum = 146,\n  Rollup = 147,\n  RollupCandlestick = 148,\n  RollupDelta = 149,\n  RollupDeriv = 150,\n  RollupIncrease = 151,\n  RollupRate = 152,\n  RollupScrapeInterval = 153,\n  ScrapeInterval = 154,\n  StaleSamplesOverTime = 155,\n  Sum2OverTime = 156,\n  TimestampWithName = 157,\n  TfirstOverTime = 158,\n  TlastChangeOverTime = 159,\n  TlastOverTime = 160,\n  TmaxOverTime = 161,\n  TminOverTime = 162,\n  ZscoreOverTime = 163,\n  HistogramAvg = 164,\n  HistogramStddev = 165,\n  HistogramStdvar = 166,\n  PrometheusBuckets = 167,\n  Interpolate = 168,\n  KeepLastValue = 169,\n  KeepNextValue = 170,\n  RangeAvg = 171,\n  RangeFirst = 172,\n  RangeLast = 173,\n  RangeLinearRegression = 174,\n  RangeMad = 175,\n  RangeMax = 176,\n  RangeMedian = 177,\n  RangeMin = 178,\n  RangeStddev = 179,\n  RangeStdvar = 180,\n  RangeSum = 181,\n  RangeZscore = 182,\n  RemoveResets = 183,\n  RunningAvg = 184,\n  RunningMax = 185,\n  RunningMin = 186,\n  RunningSum = 187,\n  Distinct = 188,\n  Geomean = 189,\n  Histogram = 190,\n  BottomkAvg = 191,\n  BottomkLast = 192,\n  BottomkMax = 193,\n  BottomkMedian = 194,\n  BottomkMin = 195,\n  TopkAvg = 196,\n  TopkLast = 197,\n  TopkMax = 198,\n  TopkMedian = 199,\n  TopkMin = 200,\n  Any = 201,\n  Limitk = 202,\n  Mad = 203,\n  Median = 204,\n  Mode = 205,\n  Share = 206,\n  Sum2 = 207,\n  Zscore = 208,\n  LabelDel = 209,\n  LabelKeep = 210,\n  LabelLowercase = 211,\n  LabelUppercase = 212,\n  SortByLabel = 213,\n  SortByLabelDesc = 214,\n  SortByLabelNumeric = 215,\n  SortByLabelNumericDesc = 216,\n  Now = 217,\n  Step = 218,\n  CountEqOverTime = 219,\n  CountGtOverTime = 220,\n  CountLeOverTime = 221,\n  CountNeOverTime = 222,\n  DurationOverTime = 223,\n  ShareGtOverTime = 224,\n  ShareLeOverTime = 225,\n  ShareEqOverTime = 226,\n  BitmapAnd = 227,\n  BitmapOr = 228,\n  BitmapXor = 229,\n  Rand = 230,\n  RandExponential = 231,\n  RandNormal = 232,\n  TimezoneOffset = 233,\n  LabelSet = 234,\n  LabelCopy = 235,\n  LabelMove = 236,\n  LabelMap = 237,\n  MatrixSelector = 238,\n  Duration = 239,\n  NumberLiteral = 240,\n  OffsetExpr = 241,\n  ParenExpr = 242,\n  StringLiteral = 243,\n  SubqueryExpr = 244,\n  UnaryExpr = 245,\n  UnaryOp = 246,\n  VectorSelector = 247,\n  MetricIdentifier = 248,\n  LabelMatchers = 249,\n  LabelMatchList = 250,\n  LabelMatcher = 251,\n  MatchOp = 252,\n  EqlSingle = 253,\n  EqlRegex = 254,\n  NeqRegex = 255,\n  StepInvariantExpr = 256,\n  At = 257,\n  AtModifierPreprocessors = 258,\n  MetricName = 259;\n\nexport { Abs, Absent, AbsentOverTime, Acos, Acosh, Add, AggregateExpr, AggregateModifier, AggregateOp, And, Any, AscentOverTime, Asin, Asinh, At, AtModifierPreprocessors, Atan, Atan2, Atanh, Avg, AvgOverTime, BinModifiers, BinaryExpr, BitmapAnd, BitmapOr, BitmapXor, Bool, Bottomk, BottomkAvg, BottomkLast, BottomkMax, BottomkMedian, BottomkMin, By, Ceil, Changes, ChangesPrometheus, Clamp, ClampMax, ClampMin, Cos, Cosh, Count, CountEqOverTime, CountGtOverTime, CountLeOverTime, CountNeOverTime, CountOverTime, CountValues, DayOfMonth, DayOfWeek, DayOfYear, DaysInMonth, DecreasesOverTime, DefaultRollup, Deg, Delta, DeltaPrometheus, Deriv, DerivFast, DescentOverTime, Distinct, DistinctOverTime, Div, Duration, DurationOverTime, End, Eql, EqlRegex, EqlSingle, Exp, Expr, FirstOverTime, Floor, FunctionCall, FunctionCallArgs, FunctionCallBody, FunctionIdentifier, Geomean, GeomeanOverTime, Group, GroupLeft, GroupRight, GroupingLabel, GroupingLabelList, GroupingLabels, Gte, Gtr, Histogram, HistogramAvg, HistogramOverTime, HistogramQuantile, HistogramStddev, HistogramStdvar, HoltWinters, Hour, Idelta, Identifier, Ideriv, Ignoring, Increase, IncreasePrometheus, IncreasePure, IncreasesOverTime, Integrate, Interpolate, Irate, KeepLastValue, KeepNextValue, LabelCopy, LabelDel, LabelJoin, LabelKeep, LabelLowercase, LabelMap, LabelMatchList, LabelMatcher, LabelMatchers, LabelMove, LabelName, LabelReplace, LabelSet, LabelUppercase, Lag, LastOverTime, Lifetime, Limitk, LineComment, Ln, Log10, Log2, Lss, Lte, Mad, MadOverTime, MatchOp, MatrixSelector, Max, MaxOverTime, Median, MedianOverTime, MetricIdentifier, MetricName, MetricsQL, Min, MinOverTime, Minute, Mod, Mode, ModeOverTime, Month, Mul, Neq, NeqRegex, Now, NumberLiteral, Offset, OffsetExpr, On, OnOrIgnoring, Or, ParenExpr, Pi, Pow, PredictLinear, PresentOverTime, PrometheusBuckets, Quantile, QuantileOverTime, Rad, Rand, RandExponential, RandNormal, RangeAvg, RangeFirst, RangeLast, RangeLinearRegression, RangeMad, RangeMax, RangeMedian, RangeMin, RangeOverTime, RangeStddev, RangeStdvar, RangeSum, RangeZscore, Rate, RateOverSum, RemoveResets, Resets, Rollup, RollupCandlestick, RollupDelta, RollupDeriv, RollupIncrease, RollupRate, RollupScrapeInterval, Round, RunningAvg, RunningMax, RunningMin, RunningSum, Scalar, ScrapeInterval, Sgn, Share, ShareEqOverTime, ShareGtOverTime, ShareLeOverTime, Sin, Sinh, Sort, SortByLabel, SortByLabelDesc, SortByLabelNumeric, SortByLabelNumericDesc, SortDesc, Sqrt, StaleSamplesOverTime, Start, Stddev, StddevOverTime, Stdvar, StdvarOverTime, Step, StepInvariantExpr, StringLiteral, Sub, SubqueryExpr, Sum, Sum2, Sum2OverTime, SumOverTime, Tan, Tanh, TfirstOverTime, Time, Timestamp, TimestampWithName, TimezoneOffset, TlastChangeOverTime, TlastOverTime, TmaxOverTime, TminOverTime, Topk, TopkAvg, TopkLast, TopkMax, TopkMedian, TopkMin, UnaryExpr, UnaryOp, Unless, Vector, VectorSelector, Without, Year, Zscore, ZscoreOverTime, inf, nan, parser };\n","import { Grammar } from 'prismjs';\n\nimport { CompletionItem } from '@grafana/ui';\n\n\n// When changing RATE_RANGES, check if Loki/LogQL ranges should be changed too\nexport const RATE_RANGES: CompletionItem[] = [\n  { label: '$__interval', sortValue: '$__interval' },\n  { label: '$__rate_interval', sortValue: '$__rate_interval' },\n  { label: '$__range', sortValue: '$__range' },\n  { label: '1m', sortValue: '00:01:00' },\n  { label: '5m', sortValue: '00:05:00' },\n  { label: '10m', sortValue: '00:10:00' },\n  { label: '30m', sortValue: '00:30:00' },\n  { label: '1h', sortValue: '01:00:00' },\n  { label: '1d', sortValue: '24:00:00' },\n];\n\nexport const OPERATORS = ['by', 'group_left', 'group_right', 'ignoring', 'on', 'offset', 'without'];\n// export const LOGICAL_OPERATORS = ['or', 'and', 'unless'];\n\nconst ROLLUP_FUNCTIONS: CompletionItem[] = [\n  {\n    label: 'absent_over_time',\n    insertText: 'absent_over_time',\n    detail: 'absent_over_time(series_selector[d])',\n    documentation: 'returns 1 if the given lookbehind window `d` doesn\\'t contain raw samples. Otherwise it returns an empty result. See also `present_over_time`.'\n  },\n  {\n    label: 'aggr_over_time',\n    insertText: 'aggr_over_time',\n    detail: 'aggr_over_time((\"rollup_func1\", \"rollup_func2\", ...), series_selector[d])',\n    documentation: 'calculates all the listed `rollup_func*` for raw samples on the given lookbehind window `d`. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). `rollup_func*` can contain any rollup function. For instance, `aggr_over_time((\"min_over_time\", \"max_over_time\", \"rate\"), m[d])` would calculate `min_over_time` for `m[d]`.'\n  },\n  {\n    label: 'ascent_over_time',\n    insertText: 'ascent_over_time',\n    detail: 'ascent_over_time(series_selector[d])',\n    documentation: 'calculates ascent of raw sample values on the given lookbehind window `d`. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Useful for tracking height gains in GPS tracking. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'avg_over_time',\n    insertText: 'avg_over_time',\n    detail: 'avg_over_time(series_selector[d])',\n    documentation: 'calculates the average value over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `median_over_time`.'\n  },\n  {\n    label: 'changes',\n    insertText: 'changes',\n    detail: 'changes(series_selector[d])',\n    documentation: 'calculates the number of times the raw samples changed on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Unlike `changes()` in Prometheus it takes into account the change from the last sample before the given lookbehind window `d`. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'changes_prometheus',\n    insertText: 'changes_prometheus',\n    detail: 'changes_prometheus(series_selector[d])',\n    documentation: 'calculates the number of times the raw samples changed on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It doesn\\'t take into account the change from the last sample before the given lookbehind window `d` in the same way as Prometheus does. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'count_eq_over_time',\n    insertText: 'count_eq_over_time',\n    detail: 'count_eq_over_time(series_selector[d], eq)',\n    documentation: 'calculates the number of raw samples on the given lookbehind window `d`, which are equal to `eq`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'count_gt_over_time',\n    insertText: 'count_gt_over_time',\n    detail: 'count_gt_over_time(series_selector[d], gt)',\n    documentation: 'calculates the number of raw samples on the given lookbehind window `d`, which are bigger than `gt`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'count_le_over_time',\n    insertText: 'count_le_over_time',\n    detail: 'count_le_over_time(series_selector[d], le)',\n    documentation: 'calculates the number of raw samples on the given lookbehind window `d`, which don\\'t exceed `le`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'count_ne_over_time',\n    insertText: 'count_ne_over_time',\n    detail: 'count_ne_over_time(series_selector[d], ne)',\n    documentation: 'calculates the number of raw samples on the given lookbehind window `d`, which aren\\'t equal to `ne`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'count_over_time',\n    insertText: 'count_over_time',\n    detail: 'count_over_time(series_selector[d])',\n    documentation: 'calculates the number of raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'decreases_over_time',\n    insertText: 'decreases_over_time',\n    detail: 'decreases_over_time(series_selector[d])',\n    documentation: 'calculates the number of raw sample value decreases over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'default_rollup',\n    insertText: 'default_rollup',\n    detail: 'default_rollup(series_selector[d])',\n    documentation: 'returns the last raw sample value on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering).'\n  },\n  {\n    label: 'delta',\n    insertText: 'delta',\n    detail: 'delta(series_selector[d])',\n    documentation: 'calculates the difference between the last sample before the given lookbehind window `d` and the last sample at the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The behaviour of `delta()` function in MetricsQL is slightly different to the behaviour of `delta()` function in Prometheus. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'delta_prometheus',\n    insertText: 'delta_prometheus',\n    detail: 'delta_prometheus(series_selector[d])',\n    documentation: 'calculates the difference between the first and the last samples at the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The behaviour of `delta_prometheus()` is close to the behaviour of `delta()` function in Prometheus. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'deriv',\n    insertText: 'deriv',\n    detail: 'deriv(series_selector[d])',\n    documentation: 'calculates per-second derivative over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The derivative is calculated using linear regression. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'deriv_fast',\n    insertText: 'deriv_fast',\n    detail: 'deriv_fast(series_selector[d])',\n    documentation: 'calculates per-second derivative using the first and the last raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'descent_over_time',\n    insertText: 'descent_over_time',\n    detail: 'descent_over_time(series_selector[d])',\n    documentation: 'calculates descent of raw sample values on the given lookbehind window `d`. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Useful for tracking height loss in GPS tracking. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'distinct_over_time',\n    insertText: 'distinct_over_time',\n    detail: 'distinct_over_time(series_selector[d])',\n    documentation: 'returns the number of distinct raw sample values on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'duration_over_time',\n    insertText: 'duration_over_time',\n    detail: 'duration_over_time(series_selector[d], max_interval)',\n    documentation: 'returns the duration in seconds when time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering) were present over the given lookbehind window `d`. It is expected that intervals between adjacent samples per each series don\\'t exceed the `max_interval`. Otherwise such intervals are considered as gaps and aren\\'t counted. See also `lifetime`.'\n  },\n  {\n    label: 'first_over_time',\n    insertText: 'first_over_time',\n    detail: 'first_over_time(series_selector[d])',\n    documentation: 'returns the first raw sample value on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `last_over_time`.'\n  },\n  {\n    label: 'geomean_over_time',\n    insertText: 'geomean_over_time',\n    detail: 'geomean_over_time(series_selector[d])',\n    documentation: 'calculates [geometric mean](https://en.wikipedia.org/wiki/Geometric_mean) over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'histogram_over_time',\n    insertText: 'histogram_over_time',\n    detail: 'histogram_over_time(series_selector[d])',\n    documentation: 'calculates [VictoriaMetrics histogram](https://godoc.org/github.com/VictoriaMetrics/metrics#Histogram) over raw samples on the given lookbehind window `d`. It is calculated individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The resulting histograms are useful to pass to `histogram_quantile``.'\n  },\n  {\n    label: 'hoeffding_bound_lower',\n    insertText: 'hoeffding_bound_lower',\n    detail: 'hoeffding_bound_lower(phi, series_selector[d])',\n    documentation: 'calculates lower [Hoeffding bound](https://en.wikipedia.org/wiki/Hoeffding%27s_inequality) for the given `phi` in the range `[0...1]`. See also `hoeffding_bound_upper`.'\n  },\n  {\n    label: 'hoeffding_bound_upper',\n    insertText: 'hoeffding_bound_upper',\n    detail: 'hoeffding_bound_upper(phi, series_selector[d])',\n    documentation: 'calculates upper [Hoeffding bound](https://en.wikipedia.org/wiki/Hoeffding%27s_inequality) for the given `phi` in the range `[0...1]`. See also `hoeffding_bound_lower`.'\n  },\n  {\n    label: 'holt_winters',\n    insertText: 'holt_winters',\n    detail: 'holt_winters(series_selector[d], sf, tf)',\n    documentation: 'calculates Holt-Winters value (aka [double exponential smoothing](https://en.wikipedia.org/wiki/Exponential_smoothing#Double_exponential_smoothing)) for raw samples over the given lookbehind window `d` using the given smoothing factor `sf` and the given trend factor `tf`. Both `sf` and `tf` must be in the range `[0...1]`. It is expected that the [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering) returns time series of [gauge type](https://docs.victoriametrics.com/keyConcepts.html#gauge).'\n  },\n  {\n    label: 'idelta',\n    insertText: 'idelta',\n    detail: 'idelta(series_selector[d])',\n    documentation: 'calculates the difference between the last two raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'ideriv',\n    insertText: 'ideriv',\n    detail: 'ideriv(series_selector[d])',\n    documentation: 'calculates the per-second derivative based on the last two raw samples over the given lookbehind window `d`. The derivative is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'increase',\n    insertText: 'increase',\n    detail: 'increase(series_selector[d])',\n    documentation: 'calculates the increase over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that the `series_selector` returns time series of [counter type](https://docs.victoriametrics.com/keyConcepts.html#counter). Unlike Prometheus it takes into account the last sample before the given lookbehind window `d` when calculating the result. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'increase_prometheus',\n    insertText: 'increase_prometheus',\n    detail: 'increase_prometheus(series_selector[d])',\n    documentation: 'calculates the increase over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that the `series_selector` returns time series of [counter type](https://docs.victoriametrics.com/keyConcepts.html#counter). It doesn\\'t take into account the last sample before the given lookbehind window `d` when calculating the result in the same way as Prometheus does. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'increase_pure',\n    insertText: 'increase_pure',\n    detail: 'increase_pure(series_selector[d])',\n    documentation: 'works the same as `increase` ignores the first value in a series if it is too big.'\n  },\n  {\n    label: 'increases_over_time',\n    insertText: 'increases_over_time',\n    detail: 'increases_over_time(series_selector[d])',\n    documentation: 'calculates the number of raw sample value increases over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'integrate',\n    insertText: 'integrate',\n    detail: 'integrate(series_selector[d])',\n    documentation: 'calculates the integral over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'irate',\n    insertText: 'irate',\n    detail: 'irate(series_selector[d])',\n    documentation: 'calculates the \"instant\" per-second increase rate over the last two raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that the `series_selector` returns time series of [counter type](https://docs.victoriametrics.com/keyConcepts.html#counter). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'lag',\n    insertText: 'lag',\n    detail: 'lag(series_selector[d])',\n    documentation: 'returns the duration in seconds between the last sample on the given lookbehind window `d` and the timestamp of the current point. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'last_over_time',\n    insertText: 'last_over_time',\n    detail: 'last_over_time(series_selector[d])',\n    documentation: 'returns the last raw sample value on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `first_over_time`.'\n  },\n  {\n    label: 'lifetime',\n    insertText: 'lifetime',\n    detail: 'lifetime(series_selector[d])',\n    documentation: 'returns the duration in seconds between the last and the first sample on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'max_over_time',\n    insertText: 'max_over_time',\n    detail: 'max_over_time(series_selector[d])',\n    documentation: 'calculates the maximum value over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `tmax_over_time`.'\n  },\n  {\n    label: 'median_over_time',\n    insertText: 'median_over_time',\n    detail: 'median_over_time(series_selector[d])',\n    documentation: 'calculates median value over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `avg_over_time`.'\n  },\n  {\n    label: 'min_over_time',\n    insertText: 'min_over_time',\n    detail: 'min_over_time(series_selector[d])',\n    documentation: 'calculates the minimum value over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `tmin_over_time`.'\n  },\n  {\n    label: 'mode_over_time',\n    insertText: 'mode_over_time',\n    detail: 'mode_over_time(series_selector[d])',\n    documentation: 'calculates [mode](https://en.wikipedia.org/wiki/Mode_(statistics)) for raw samples on the given lookbehind window `d`. It is calculated individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that raw sample values are discrete.'\n  },\n  {\n    label: 'predict_linear',\n    insertText: 'predict_linear',\n    detail: 'predict_linear(series_selector[d], t)',\n    documentation: 'calculates the value `t` seconds in the future using linear interpolation over raw samples on the given lookbehind window `d`. The predicted value is calculated individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering).'\n  },\n  {\n    label: 'present_over_time',\n    insertText: 'present_over_time',\n    detail: 'present_over_time(series_selector[d])',\n    documentation: 'returns 1 if there is at least a single raw sample on the given lookbehind window `d`. Otherwise an empty result is returned. Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'quantile_over_time',\n    insertText: 'quantile_over_time',\n    detail: 'quantile_over_time(phi, series_selector[d])',\n    documentation: 'calculates `phi`-quantile over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The `phi` value must be in the range `[0...1]`. See also `quantiles_over_time`.'\n  },\n  {\n    label: 'quantiles_over_time',\n    insertText: 'quantiles_over_time',\n    detail: 'quantiles_over_time(\"phiLabel\", phi1, ..., phiN, series_selector[d])',\n    documentation: 'calculates `phi*`-quantiles over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The function returns individual series per each `phi*` with `{phiLabel=\"phi*\"}` label. `phi*` values must be in the range `[0...1]`. See also `quantile_over_time`.'\n  },\n  {\n    label: 'range_over_time',\n    insertText: 'range_over_time',\n    detail: 'range_over_time(series_selector[d])',\n    documentation: 'calculates value range over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). E.g. it calculates `max_over_time(series_selector[d]) - min_over_time(series_selector[d])`. Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'rate',\n    insertText: 'rate',\n    detail: 'rate(series_selector[d])',\n    documentation: 'calculates the average per-second increase rate over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that the `series_selector` returns time series of [counter type](https://docs.victoriametrics.com/keyConcepts.html#counter). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'rate_over_sum',\n    insertText: 'rate_over_sum',\n    detail: 'rate_over_sum(series_selector[d])',\n    documentation: 'calculates per-second rate over the sum of raw samples on the given lookbehind window `d`. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'resets',\n    insertText: 'resets',\n    detail: 'resets(series_selector[d])',\n    documentation: 'returns the number of [counter](https://docs.victoriametrics.com/keyConcepts.html#counter) resets over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that the `series_selector` returns time series of [counter type](https://docs.victoriametrics.com/keyConcepts.html#counter). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'rollup',\n    insertText: 'rollup',\n    detail: 'rollup(series_selector[d])',\n    documentation: 'calculates `min`, `max` and `avg` values for raw samples on the given lookbehind window `d`. These values are calculated individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering).'\n  },\n  {\n    label: 'rollup_candlestick',\n    insertText: 'rollup_candlestick',\n    detail: 'rollup_candlestick(series_selector[d])',\n    documentation: 'calculates `open`, `high`, `low` and `close` values (aka OHLC) over raw samples on the given lookbehind window `d`. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). This function is useful for financial applications.'\n  },\n  {\n    label: 'rollup_delta',\n    insertText: 'rollup_delta',\n    detail: 'rollup_delta(series_selector[d])',\n    documentation: 'calculates differences between adjacent raw samples on the given lookbehind window `d` and returns `min`, `max` and `avg` values for the calculated differences. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'rollup_deriv',\n    insertText: 'rollup_deriv',\n    detail: 'rollup_deriv(series_selector[d])',\n    documentation: 'calculates per-second derivatives for adjacent raw samples on the given lookbehind window `d` and returns `min`, `max` and `avg` values for the calculated per-second derivatives. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'rollup_increase',\n    insertText: 'rollup_increase',\n    detail: 'rollup_increase(series_selector[d])',\n    documentation: 'calculates increases for adjacent raw samples on the given lookbehind window `d` and returns `min`, `max` and `avg` values for the calculated increases. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'rollup_rate',\n    insertText: 'rollup_rate',\n    detail: 'rollup_rate(series_selector[d])',\n    documentation: 'calculates per-second change rates for adjacent raw samples on the given lookbehind window `d` and returns `min`, `max` and `avg` values for the calculated per-second change rates. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'rollup_scrape_interval',\n    insertText: 'rollup_scrape_interval',\n    detail: 'rollup_scrape_interval(series_selector[d])',\n    documentation: 'calculates the interval in seconds between adjacent raw samples on the given lookbehind window `d` and returns `min`, `max` and `avg` values for the calculated interval. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'scrape_interval',\n    insertText: 'scrape_interval',\n    detail: 'scrape_interval(series_selector[d])',\n    documentation: 'calculates the average interval in seconds between raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'share_gt_over_time',\n    insertText: 'share_gt_over_time',\n    detail: 'share_gt_over_time(series_selector[d], gt)',\n    documentation: 'returns share (in the range `[0...1]`) of raw samples on the given lookbehind window `d`, which are bigger than `gt`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'share_le_over_time',\n    insertText: 'share_le_over_time',\n    detail: 'share_le_over_time(series_selector[d], le)',\n    documentation: 'returns share (in the range `[0...1]`) of raw samples on the given lookbehind window `d`, which are smaller or equal to `le`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'stale_samples_over_time',\n    insertText: 'stale_samples_over_time',\n    detail: 'stale_samples_over_time(series_selector[d])',\n    documentation: 'calculates the number of [staleness markers](https://docs.victoriametrics.com/vmagent.html#prometheus-staleness-markers) on the given lookbehind window `d` per each time series matching the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'stddev_over_time',\n    insertText: 'stddev_over_time',\n    detail: 'stddev_over_time(series_selector[d])',\n    documentation: 'calculates standard deviation over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'stdvar_over_time',\n    insertText: 'stdvar_over_time',\n    detail: 'stdvar_over_time(series_selector[d])',\n    documentation: 'calculates standard variance over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'sum_over_time',\n    insertText: 'sum_over_time',\n    detail: 'sum_over_time(series_selector[d])',\n    documentation: 'calculates the sum of raw sample values on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'sum2_over_time',\n    insertText: 'sum2_over_time',\n    detail: 'sum2_over_time(series_selector[d])',\n    documentation: 'calculates the sum of squares for raw sample values on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'timestamp',\n    insertText: 'timestamp',\n    detail: 'timestamp(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the last raw sample on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'timestamp_with_name',\n    insertText: 'timestamp_with_name',\n    detail: 'timestamp_with_name(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the last raw sample on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are preserved in the resulting rollups. See also `timestamp`.'\n  },\n  {\n    label: 'tfirst_over_time',\n    insertText: 'tfirst_over_time',\n    detail: 'tfirst_over_time(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the first raw sample on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'tlast_change_over_time',\n    insertText: 'tlast_change_over_time',\n    detail: 'tlast_change_over_time(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the last change per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering) on the given lookbehind window `d`. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'tlast_over_time',\n    insertText: 'tlast_over_time',\n    detail: 'tlast_over_time(series_selector[d])',\n    documentation: 'is an alias for `timestamp`.'\n  },\n  {\n    label: 'tmax_over_time',\n    insertText: 'tmax_over_time',\n    detail: 'tmax_over_time(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the raw sample with the maximum value on the given lookbehind window `d`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'tmin_over_time',\n    insertText: 'tmin_over_time',\n    detail: 'tmin_over_time(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the raw sample with the minimum value on the given lookbehind window `d`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'zscore_over_time',\n    insertText: 'zscore_over_time',\n    detail: 'zscore_over_time(series_selector[d])',\n    documentation: 'calculates returns [z-score](https://en.wikipedia.org/wiki/Standard_score) for raw samples on the given lookbehind window `d`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  }\n]\n\nconst TRANSFORM_FUNCTIONS: CompletionItem[] = [\n  {\n    label: 'abs',\n    insertText: 'abs',\n    detail: 'abs(q)',\n    documentation: 'calculates the absolute value for every point of every time series returned by `q`.'\n  },\n  {\n    label: 'absent',\n    insertText: 'absent',\n    detail: 'absent(q)',\n    documentation: 'returns 1 if `q` has no points. Otherwise returns an empty result.'\n  },\n  {\n    label: 'acos',\n    insertText: 'acos',\n    detail: 'acos(q)',\n    documentation: 'returns [inverse cosine](https://en.wikipedia.org/wiki/Inverse_trigonometric_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'acosh',\n    insertText: 'acosh',\n    detail: 'acosh(q)',\n    documentation: 'returns [inverse hyperbolic cosine](https://en.wikipedia.org/wiki/Inverse_hyperbolic_functions#Inverse_hyperbolic_cosine) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'asin',\n    insertText: 'asin',\n    detail: 'asin(q)',\n    documentation: 'returns [inverse sine](https://en.wikipedia.org/wiki/Inverse_trigonometric_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'asinh',\n    insertText: 'asinh',\n    detail: 'asinh(q)',\n    documentation: 'returns [inverse hyperbolic sine](https://en.wikipedia.org/wiki/Inverse_hyperbolic_functions#Inverse_hyperbolic_sine) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'atan',\n    insertText: 'atan',\n    detail: 'atan(q)',\n    documentation: 'returns [inverse tangent](https://en.wikipedia.org/wiki/Inverse_trigonometric_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'atanh',\n    insertText: 'atanh',\n    detail: 'atanh(q)',\n    documentation: 'returns [inverse hyperbolic tangent](https://en.wikipedia.org/wiki/Inverse_hyperbolic_functions#Inverse_hyperbolic_tangent) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'bitmap_and',\n    insertText: 'bitmap_and',\n    detail: 'bitmap_and(q, mask)',\n    documentation: '- calculates bitwise `v & mask` for every `v` point of every time series returned from `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'bitmap_or',\n    insertText: 'bitmap_or',\n    detail: 'bitmap_or(q, mask)',\n    documentation: 'calculates bitwise `v | mask` for every `v` point of every time series returned from `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'bitmap_xor',\n    insertText: 'bitmap_xor',\n    detail: 'bitmap_xor(q, mask)',\n    documentation: 'calculates bitwise `v ^ mask` for every `v` point of every time series returned from `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'buckets_limit',\n    insertText: 'buckets_limit',\n    detail: 'buckets_limit(limit, buckets)',\n    documentation: 'limits the number of [histogram buckets](https://valyala.medium.com/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350) to the given `limit`. See also `prometheus_buckets`.'\n  },\n  {\n    label: 'ceil',\n    insertText: 'ceil',\n    detail: 'ceil(q)',\n    documentation: 'rounds every point for every time series returned by `q` to the upper nearest integer. See also `floor`.'\n  },\n  {\n    label: 'clamp',\n    insertText: 'clamp',\n    detail: 'clamp(q, min, max)',\n    documentation: 'clamps every point for every time series returned by `q` with the given `min` and `max` values. See also `clamp_min`.'\n  },\n  {\n    label: 'clamp_max',\n    insertText: 'clamp_max',\n    detail: 'clamp_max(q, max)',\n    documentation: 'clamps every point for every time series returned by `q` with the given `max` value. See also `clamp`.'\n  },\n  {\n    label: 'clamp_min',\n    insertText: 'clamp_min',\n    detail: 'clamp_min(q, min)',\n    documentation: 'clamps every point for every time series returned by `q` with the given `min` value. See also `clamp`.'\n  },\n  {\n    label: 'cos',\n    insertText: 'cos',\n    detail: 'cos(q)',\n    documentation: 'returns `cos(v)` for every `v` point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'cosh',\n    insertText: 'cosh',\n    detail: 'cosh(q)',\n    documentation: 'returns [hyperbolic cosine](https://en.wikipedia.org/wiki/Hyperbolic_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'day_of_month',\n    insertText: 'day_of_month',\n    detail: 'day_of_month(q)',\n    documentation: 'returns the day of month for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[1...31]`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'day_of_week',\n    insertText: 'day_of_week',\n    detail: 'day_of_week(q)',\n    documentation: 'returns the day of week for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[0...6]`, where `0` means Sunday and `6` means Saturday. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'days_in_month',\n    insertText: 'days_in_month',\n    detail: 'days_in_month(q)',\n    documentation: 'returns the number of days in the month identified by every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[28...31]`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'deg',\n    insertText: 'deg',\n    detail: 'deg(q)',\n    documentation: 'converts [Radians to degrees](https://en.wikipedia.org/wiki/Radian#Conversions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'end',\n    insertText: 'end',\n    detail: 'end()',\n    documentation: 'returns the unix timestamp in seconds for the last point. See also `start`.'\n  },\n  {\n    label: 'exp',\n    insertText: 'exp',\n    detail: 'exp(q)',\n    documentation: 'calculates the `e^v` for every point `v` of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'floor',\n    insertText: 'floor',\n    detail: 'floor(q)',\n    documentation: 'rounds every point for every time series returned by `q` to the lower nearest integer. See also `ceil`.'\n  },\n  {\n    label: 'histogram_avg',\n    insertText: 'histogram_avg',\n    detail: 'histogram_avg(buckets)',\n    documentation: 'calculates the average value for the given `buckets`. It can be used for calculating the average over the given time range across multiple time series. For example, `histogram_avg(sum(histogram_over_time(response_time_duration_seconds[5m])) by (vmrange,job))` would return the average response time per each `job` over the last 5 minutes.'\n  },\n  {\n    label: 'histogram_quantile',\n    insertText: 'histogram_quantile',\n    detail: 'histogram_quantile(phi, buckets)',\n    documentation: 'calculates `phi`-quantile over the given [histogram buckets](https://valyala.medium.com/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350). `phi` must be in the range `[0...1]`. For example, `histogram_quantile(0.5, sum(rate(http_request_duration_seconds_bucket[5m]) by (le))` would return median request duration for all the requests during the last 5 minutes. It accepts optional third arg - `boundsLabel`. In this case it returns `lower` and `upper` bounds for the estimated percentile. See [this issue for details](https://github.com/prometheus/prometheus/issues/5706). This function is supported by PromQL (except of the `boundLabel` arg). See also `histogram_quantiles`.'\n  },\n  {\n    label: 'histogram_quantiles',\n    insertText: 'histogram_quantiles',\n    detail: 'histogram_quantiles(\"phiLabel\", phi1, ..., phiN, buckets)',\n    documentation: 'calculates the given `phi*`-quantiles over the given [histogram buckets](https://valyala.medium.com/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350). Argument `phi*` must be in the range `[0...1]`. For example, `histogram_quantiles(\\'le\\', 0.3, 0.5, sum(rate(http_request_duration_seconds_bucket[5m]) by (le))`. Each calculated quantile is returned in a separate time series with the corresponding `{phiLabel=\"phi*\"}` label. See also `histogram_quantile`.'\n  },\n  {\n    label: 'histogram_share',\n    insertText: 'histogram_share',\n    detail: 'histogram_share(le, buckets)',\n    documentation: 'calculates the share (in the range `[0...1]`) for `buckets` that fall below `le`. Useful for calculating SLI and SLO. This is inverse to `histogram_quantile`.'\n  },\n  {\n    label: 'histogram_stddev',\n    insertText: 'histogram_stddev',\n    detail: 'histogram_stddev(buckets)',\n    documentation: 'calculates standard deviation for the given `buckets`.'\n  },\n  {\n    label: 'histogram_stdvar',\n    insertText: 'histogram_stdvar',\n    detail: 'histogram_stdvar(buckets)',\n    documentation: 'calculates standard variance for the given `buckets`. It can be used for calculating standard deviation over the given time range across multiple time series. For example, `histogram_stdvar(sum(histogram_over_time(temperature[24])) by (vmrange,country))` would return standard deviation for the temperature per each country over the last 24 hours.'\n  },\n  {\n    label: 'hour',\n    insertText: 'hour',\n    detail: 'hour(q)',\n    documentation: 'returns the hour for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[0...23]`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'interpolate',\n    insertText: 'interpolate',\n    detail: 'interpolate(q)',\n    documentation: 'fills gaps with linearly interpolated values calculated from the last and the next non-empty points per each time series returned by `q`. See also `keep_last_value`.'\n  },\n  {\n    label: 'keep_last_value',\n    insertText: 'keep_last_value',\n    detail: 'keep_last_value(q)',\n    documentation: 'fills gaps with the value of the last non-empty point in every time series returned by `q`. See also `keep_next_value`.'\n  },\n  {\n    label: 'keep_next_value',\n    insertText: 'keep_next_value',\n    detail: 'keep_next_value(q)',\n    documentation: 'fills gaps with the value of the next non-empty point in every time series returned by `q`. See also `keep_last_value`.'\n  },\n  {\n    label: 'limit_offset',\n    insertText: 'limit_offset',\n    detail: 'limit_offset(limit, offset, q)',\n    documentation: 'skips `offset` time series from series returned by `q` and then returns up to `limit` of the remaining time series per each group. This allows implementing simple paging for `q` time series. See also `limitk`.'\n  },\n  {\n    label: 'ln',\n    insertText: 'ln',\n    detail: 'ln(q)',\n    documentation: 'calculates `ln(v)` for every point `v` of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'log2',\n    insertText: 'log2',\n    detail: 'log2(q)',\n    documentation: 'calculates `log2(v)` for every point `v` of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'log10',\n    insertText: 'log10',\n    detail: 'log10(q)',\n    documentation: 'calculates `log10(v)` for every point `v` of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'minute',\n    insertText: 'minute',\n    detail: 'minute(q)',\n    documentation: 'returns the minute for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[0...59]`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'month',\n    insertText: 'month',\n    detail: 'month(q)',\n    documentation: 'returns the month for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[1...12]`, where `1` means January and `12` means December. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'now',\n    insertText: 'now',\n    detail: 'now()',\n    documentation: 'returns the current timestamp as a floating-point value in seconds. See also `time`.'\n  },\n  {\n    label: 'pi',\n    insertText: 'pi',\n    detail: 'pi()',\n    documentation: 'returns [Pi number](https://en.wikipedia.org/wiki/Pi).'\n  },\n  {\n    label: 'rad',\n    insertText: 'rad',\n    detail: 'rad(q)',\n    documentation: 'converts [degrees to Radians](https://en.wikipedia.org/wiki/Radian#Conversions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'prometheus_buckets',\n    insertText: 'prometheus_buckets',\n    detail: 'prometheus_buckets(buckets)',\n    documentation: 'converts [VictoriaMetrics histogram buckets](https://valyala.medium.com/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350) with `vmrange` labels to Prometheus histogram buckets with `le` labels. This may be useful for building heatmaps in Grafana. See also `histogram_quantile`.'\n  },\n  {\n    label: 'rand',\n    insertText: 'rand',\n    detail: 'rand(seed)',\n    documentation: 'returns pseudo-random numbers on the range `[0...1]` with even distribution. Optional `seed` can be used as a seed for pseudo-random number generator. See also `rand_normal`.'\n  },\n  {\n    label: 'rand_exponential',\n    insertText: 'rand_exponential',\n    detail: 'rand_exponential(seed)',\n    documentation: 'returns pseudo-random numbers with [exponential distribution](https://en.wikipedia.org/wiki/Exponential_distribution). Optional `seed` can be used as a seed for pseudo-random number generator. See also `rand`.'\n  },\n  {\n    label: 'rand_normal',\n    insertText: 'rand_normal',\n    detail: 'rand_normal(seed)',\n    documentation: 'returns pseudo-random numbers with [normal distribution](https://en.wikipedia.org/wiki/Normal_distribution). Optional `seed` can be used as a seed for pseudo-random number generator. See also `rand`.'\n  },\n  {\n    label: 'range_avg',\n    insertText: 'range_avg',\n    detail: 'range_avg(q)',\n    documentation: 'calculates the avg value across points per each time series returned by `q`.'\n  },\n  {\n    label: 'range_first',\n    insertText: 'range_first',\n    detail: 'range_first(q)',\n    documentation: 'returns the value for the first point per each time series returned by `q`.'\n  },\n  {\n    label: 'range_last',\n    insertText: 'range_last',\n    detail: 'range_last(q)',\n    documentation: 'returns the value for the last point per each time series returned by `q`.'\n  },\n  {\n    label: 'range_max',\n    insertText: 'range_max',\n    detail: 'range_max(q)',\n    documentation: 'calculates the max value across points per each time series returned by `q`.'\n  },\n  {\n    label: 'range_median',\n    insertText: 'range_median',\n    detail: 'range_median(q)',\n    documentation: 'calculates the median value across points per each time series returned by `q`.'\n  },\n  {\n    label: 'range_min',\n    insertText: 'range_min',\n    detail: 'range_min(q)',\n    documentation: 'calculates the min value across points per each time series returned by `q`.'\n  },\n  {\n    label: 'range_quantile',\n    insertText: 'range_quantile',\n    detail: 'range_quantile(phi, q)',\n    documentation: 'returns `phi`-quantile across points per each time series returned by `q`. `phi` must be in the range `[0...1]`.'\n  },\n  {\n    label: 'range_sum',\n    insertText: 'range_sum',\n    detail: 'range_sum(q)',\n    documentation: 'calculates the sum of points per each time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'remove_resets',\n    insertText: 'remove_resets',\n    detail: 'remove_resets(q)',\n    documentation: 'removes counter resets from time series returned by `q`.'\n  },\n  {\n    label: 'round',\n    insertText: 'round',\n    detail: 'round(q, nearest)',\n    documentation: 'round every point of every time series returned by `q` to the `nearest` multiple. If `nearest` is missing then the rounding is performed to the nearest integer. See also `floor`.'\n  },\n  {\n    label: 'ru',\n    insertText: 'ru',\n    detail: 'ru(free, max)',\n    documentation: 'calculates resource utilization in the range `[0%...100%]` for the given `free` and `max` resources. For instance, `ru(node_memory_MemFree_bytes, node_memory_MemTotal_bytes)` returns memory utilization over [node_exporter](https://github.com/prometheus/node_exporter) metrics.'\n  },\n  {\n    label: 'running_avg',\n    insertText: 'running_avg',\n    detail: 'running_avg(q)',\n    documentation: 'calculates the running avg per each time series returned by `q`.'\n  },\n  {\n    label: 'running_max',\n    insertText: 'running_max',\n    detail: 'running_max(q)',\n    documentation: 'calculates the running max per each time series returned by `q`.'\n  },\n  {\n    label: 'running_min',\n    insertText: 'running_min',\n    detail: 'running_min(q)',\n    documentation: 'calculates the running min per each time series returned by `q`.'\n  },\n  {\n    label: 'running_sum',\n    insertText: 'running_sum',\n    detail: 'running_sum(q)',\n    documentation: 'calculates the running sum per each time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'scalar',\n    insertText: 'scalar',\n    detail: 'scalar(q)',\n    documentation: 'returns `q` if `q` contains only a single time series. Otherwise it returns nothing.'\n  },\n  {\n    label: 'sgn',\n    insertText: 'sgn',\n    detail: 'sgn(q)',\n    documentation: 'returns `1` if `v>0`, `-1` if `v<0` and `0` if `v==0` for every point `v` of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'sin',\n    insertText: 'sin',\n    detail: 'sin(q)',\n    documentation: 'returns `sin(v)` for every `v` point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'sinh',\n    insertText: 'sinh',\n    detail: 'sinh(q)',\n    documentation: 'returns [hyperbolic sine](https://en.wikipedia.org/wiki/Hyperbolic_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'tan',\n    insertText: 'tan',\n    detail: 'tan(q)',\n    documentation: 'returns `tan(v)` for every `v` point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'tanh',\n    insertText: 'tanh',\n    detail: 'tanh(q)',\n    documentation: 'returns [hyperbolic tangent](https://en.wikipedia.org/wiki/Hyperbolic_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'smooth_exponential',\n    insertText: 'smooth_exponential',\n    detail: 'smooth_exponential(q, sf)',\n    documentation: 'smooths points per each time series returned by `q` using [exponential moving average](https://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average) with the given smooth factor `sf`.'\n  },\n  {\n    label: 'sort',\n    insertText: 'sort',\n    detail: 'sort(q)',\n    documentation: 'sorts series in ascending order by the last point in every time series returned by `q`. See also `sort_desc`.'\n  },\n  {\n    label: 'sort_by_label',\n    insertText: 'sort_by_label',\n    detail: 'sort_by_label(q, label1, ... labelN)',\n    documentation: 'sorts series in ascending order by the given set of labels. For example, `sort_by_label(foo, \"bar\")` would sort `foo` series by values of the label `bar` in these series. See also `sort_by_label_desc`.'\n  },\n  {\n    label: 'sort_by_label_desc',\n    insertText: 'sort_by_label_desc',\n    detail: 'sort_by_label_desc(q, label1, ... labelN)',\n    documentation: 'sorts series in descending order by the given set of labels. For example, `sort_by_label(foo, \"bar\")` would sort `foo` series by values of the label `bar` in these series. See also `sort_by_label`.'\n  },\n  {\n    label: 'sort_by_label_numeric',\n    insertText: 'sort_by_label_numeric',\n    detail: 'sort_by_label_numeric(q, label1, ... labelN)',\n    documentation: 'sorts series in ascending order by the given set of labels using [numeric sort](https://www.gnu.org/software/coreutils/manual/html_node/Version-sort-is-not-the-same-as-numeric-sort.html). For example, if `foo` series have `bar` label with values `1`, `101`, `15` and `2`, then `sort_by_label_numeric(foo, \"bar\")` would return series in the following order of `bar` label values: `1`, `2`, `15` and `101`.'\n  },\n  {\n    label: 'sort_by_label_numeric_desc',\n    insertText: 'sort_by_label_numeric_desc',\n    detail: 'sort_by_label_numeric_desc(q, label1, ... labelN)',\n    documentation: 'sorts series in descending order by the given set of labels using [numeric sort](https://www.gnu.org/software/coreutils/manual/html_node/Version-sort-is-not-the-same-as-numeric-sort.html). For example, if `foo` series have `bar` label with values `1`, `101`, `15` and `2`, then `sort_by_label_numeric(foo, \"bar\")` would return series in the following order of `bar` label values: `101`, `15`, `2` and `1`.'\n  },\n  {\n    label: 'sort_desc',\n    insertText: 'sort_desc',\n    detail: 'sort_desc(q)',\n    documentation: 'sorts series in descending order by the last point in every time series returned by `q`. See also `sort`.'\n  },\n  {\n    label: 'sqrt',\n    insertText: 'sqrt',\n    detail: 'sqrt(q)',\n    documentation: 'calculates square root for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'start',\n    insertText: 'start',\n    detail: 'start()',\n    documentation: 'returns unix timestamp in seconds for the first point. See also `end`.'\n  },\n  {\n    label: 'step',\n    insertText: 'step',\n    detail: 'step()',\n    documentation: 'returns the step in seconds (aka interval) between the returned points. It is known as `step` query arg passed to [/api/v1/query_range](https://docs.victoriametrics.com/keyConcepts.html#range-query).'\n  },\n  {\n    label: 'time',\n    insertText: 'time',\n    detail: 'time()',\n    documentation: 'returns unix timestamp for every returned point.'\n  },\n  {\n    label: 'timezone_offset',\n    insertText: 'timezone_offset',\n    detail: 'timezone_offset(tz)',\n    documentation: 'returns offset in seconds for the given timezone `tz` relative to UTC. This can be useful when combining with datetime-related functions. For example, `day_of_week(time()+timezone_offset(\"America/Los_Angeles\"))` would return weekdays for `America/Los_Angeles` time zone. Special `Local` time zone can be used for returning an offset for the time zone set on the host where VictoriaMetrics runs. See [the list of supported timezones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones).'\n  },\n  {\n    label: 'ttf',\n    insertText: 'ttf',\n    detail: 'ttf(free)',\n    documentation: 'estimates the time in seconds needed to exhaust `free` resources. For instance, `ttf(node_filesystem_avail_byte)` returns the time to storage space exhaustion. This function may be useful for capacity planning.'\n  },\n  {\n    label: 'union',\n    insertText: 'union',\n    detail: 'union(q1, ..., qN)',\n    documentation: 'returns a union of time series returned from `q1`, ..., `qN`. The `union` function name can be skipped - the following queries are equivalent: `union(q1, q2)` and `(q1, q2)`. It is expected that each `q*` query returns time series with unique sets of labels. Otherwise only the first time series out of series with identical set of labels is returned. Use `alias` functions for giving unique labelsets per each `q*` query:'\n  },\n  {\n    label: 'vector',\n    insertText: 'vector',\n    detail: 'vector(q)',\n    documentation: 'returns `q`, e.g. it does nothing in MetricsQL.'\n  },\n  {\n    label: 'year',\n    insertText: 'year',\n    detail: 'year(q)',\n    documentation: 'returns the year for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  }\n]\n\nconst MANIPULATION_FUNCTIONS: CompletionItem[] = [\n  {\n    label: 'alias',\n    insertText: 'alias',\n    detail: 'alias(q, \"name\")',\n    documentation: 'sets the given `name` to all the time series returned by `q`. For example, `alias(up, \"foobar\")` would rename `up` series to `foobar` series.'\n  },\n  {\n    label: 'drop_common_labels',\n    insertText: 'drop_common_labels',\n    detail: 'drop_common_labels(q1, ...., qN)',\n    documentation: 'drops common `label=\"value\"` pairs among time series returned from `q1, ..., qN`.'\n  },\n  {\n    label: 'label_copy',\n    insertText: 'label_copy',\n    detail: 'label_copy(q, \"src_label1\", \"dst_label1\", ..., \"src_labelN\", \"dst_labelN\")',\n    documentation: 'copies label values from `src_label*` to `dst_label*` for all the time series returned by `q`. If `src_label` is empty, then the corresponding `dst_label` is left untouched.'\n  },\n  {\n    label: 'label_del',\n    insertText: 'label_del',\n    detail: 'label_del(q, \"label1\", ..., \"labelN\")',\n    documentation: 'deletes the given `label*` labels from all the time series returned by `q`.'\n  },\n  {\n    label: 'label_graphite_group',\n    insertText: 'label_graphite_group',\n    detail: 'label_graphite_group(q, groupNum1, ... groupNumN)',\n    documentation: 'replaces metric names returned from `q` with the given Graphite group values concatenated via `.` char. For example, `label_graphite_group({__graphite__=\"foo*.bar.*\"}, 0, 2)` would substitute `foo<any_value>.bar.<other_value>` metric names with `foo<any_value>.<other_value>`. This function is useful for aggregating Graphite metrics with `aggregate functions`. For example, the following query would return per-app memory usage:'\n  },\n  {\n    label: 'label_join',\n    insertText: 'label_join',\n    detail: 'label_join(q, \"dst_label\", \"separator\", \"src_label1\", ..., \"src_labelN\")',\n    documentation: 'joins `src_label*` values with the given `separator` and stores the result in `dst_label`. This is performed individually per each time series returned by `q`. For example, `label_join(up{instance=\"xxx\",job=\"yyy\"}, \"foo\", \"-\", \"instance\", \"job\")` would store `xxx-yyy` label value into `foo` label.'\n  },\n  {\n    label: 'label_keep',\n    insertText: 'label_keep',\n    detail: 'label_keep(q, \"label1\", ..., \"labelN\")',\n    documentation: 'deletes all the labels except of the listed `label*` labels in all the time series returned by `q`.'\n  },\n  {\n    label: 'label_lowercase',\n    insertText: 'label_lowercase',\n    detail: 'label_lowercase(q, \"label1\", ..., \"labelN\")',\n    documentation: 'lowercases values for the given `label*` labels in all the time series returned by `q`.'\n  },\n  {\n    label: 'label_map',\n    insertText: 'label_map',\n    detail: 'label_map(q, \"label\", \"src_value1\", \"dst_value1\", ..., \"src_valueN\", \"dst_valueN\")',\n    documentation: 'maps `label` values from `src_*` to `dst*` for all the time series returned by `q`.'\n  },\n  {\n    label: 'label_match',\n    insertText: 'label_match',\n    detail: 'label_match(q, \"label\", \"regexp\")',\n    documentation: 'drops time series from `q` with `label` not matching the given `regexp`. This function can be useful after `rollup`.'\n  },\n  {\n    label: 'label_mismatch',\n    insertText: 'label_mismatch',\n    detail: 'label_mismatch(q, \"label\", \"regexp\")',\n    documentation: 'drops time series from `q` with `label` matching the given `regexp`. This function can be useful after `rollup`.'\n  },\n  {\n    label: 'label_move',\n    insertText: 'label_move',\n    detail: 'label_move(q, \"src_label1\", \"dst_label1\", ..., \"src_labelN\", \"dst_labelN\")',\n    documentation: 'moves label values from `src_label*` to `dst_label*` for all the time series returned by `q`. If `src_label` is empty, then the corresponding `dst_label` is left untouched.'\n  },\n  {\n    label: 'label_replace',\n    insertText: 'label_replace',\n    detail: 'label_replace(q, \"dst_label\", \"replacement\", \"src_label\", \"regex\")',\n    documentation: 'applies the given `regex` to `src_label` and stores the `replacement` in `dst_label` if the given `regex` matches `src_label`. The `replacement` may contain references to regex captures such as `$1`, `$2`, etc. These references are substituted by the corresponding regex captures. For example, `label_replace(up{job=\"node-exporter\"}, \"foo\", \"bar-$1\", \"job\", \"node-(.+)\")` would store `bar-exporter` label value into `foo` label.'\n  },\n  {\n    label: 'label_set',\n    insertText: 'label_set',\n    detail: 'label_set(q, \"label1\", \"value1\", ..., \"labelN\", \"valueN\")',\n    documentation: 'sets `{label1=\"value1\", ..., labelN=\"valueN\"}` labels to all the time series returned by `q`.'\n  },\n  {\n    label: 'label_transform',\n    insertText: 'label_transform',\n    detail: 'label_transform(q, \"label\", \"regexp\", \"replacement\")',\n    documentation: 'substitutes all the `regexp` occurrences by the given `replacement` in the given `label`.'\n  },\n  {\n    label: 'label_uppercase',\n    insertText: 'label_uppercase',\n    detail: 'label_uppercase(q, \"label1\", ..., \"labelN\")',\n    documentation: 'uppercases values for the given `label*` labels in all the time series returned by `q`.'\n  },\n  {\n    label: 'label_value',\n    insertText: 'label_value',\n    detail: 'label_value(q, \"label\")',\n    documentation: 'returns number values for the given `label` for every time series returned by `q`. For example, if `label_value(foo, \"bar\")` is applied to `foo{bar=\"1.234\"}`, then it will return a time series `foo{bar=\"1.234\"}` with `1.234` value.'\n  }\n]\n\nconst AGGREGATE_FUNCTIONS: CompletionItem[] = [\n  {\n    label: 'any',\n    insertText: 'any',\n    detail: 'any(q) by (group_labels)',\n    documentation: 'returns a single series per `group_labels` out of time series returned by `q`. See also `group`.'\n  },\n  {\n    label: 'avg',\n    insertText: 'avg',\n    detail: 'avg(q) by (group_labels)',\n    documentation: 'returns the average value per `group_labels` for time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'bottomk',\n    insertText: 'bottomk',\n    detail: 'bottomk(k, q)',\n    documentation: 'returns up to `k` points with the smallest values across all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp. See also `topk`.'\n  },\n  {\n    label: 'bottomk_avg',\n    insertText: 'bottomk_avg',\n    detail: 'bottomk_avg(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the smallest averages. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `bottomk_avg(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the smallest averages plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `topk_avg`.'\n  },\n  {\n    label: 'bottomk_last',\n    insertText: 'bottomk_last',\n    detail: 'bottomk_last(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the smallest last values. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `bottomk_max(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the smallest maximums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `topk_last`.'\n  },\n  {\n    label: 'bottomk_max',\n    insertText: 'bottomk_max',\n    detail: 'bottomk_max(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the smallest maximums. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `bottomk_max(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the smallest maximums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `topk_max`.'\n  },\n  {\n    label: 'bottomk_median',\n    insertText: 'bottomk_median',\n    detail: 'bottomk_median(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q with the smallest medians. If an optional`other_label=other_value`arg is set, then the sum of the remaining time series is returned with the given label. For example,`bottomk_median(3, sum(process_resident_memory_bytes) by (job), \"job=other\")`would return up to 3 time series with the smallest medians plus a time series with`{job=\"other\"}\\\\` label with the sum of the remaining series if any. See also `topk_median`.'\n  },\n  {\n    label: 'bottomk_min',\n    insertText: 'bottomk_min',\n    detail: 'bottomk_min(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the smallest minimums. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `bottomk_min(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the smallest minimums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `topk_min`.'\n  },\n  {\n    label: 'count',\n    insertText: 'count',\n    detail: 'count(q) by (group_labels)',\n    documentation: 'returns the number of non-empty points per `group_labels` for time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'count_values',\n    insertText: 'count_values',\n    detail: 'count_values(\"label\", q)',\n    documentation: 'counts the number of points with the same value and stores the counts in a time series with an additional `label`, which contains each initial value. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'distinct',\n    insertText: 'distinct',\n    detail: 'distinct(q)',\n    documentation: 'calculates the number of unique values per each group of points with the same timestamp.'\n  },\n  {\n    label: 'geomean',\n    insertText: 'geomean',\n    detail: 'geomean(q)',\n    documentation: 'calculates geometric mean per each group of points with the same timestamp.'\n  },\n  {\n    label: 'group',\n    insertText: 'group',\n    detail: 'group(q) by (group_labels)',\n    documentation: 'returns `1` per each `group_labels` for time series returned by `q`. See also `any`.'\n  },\n  {\n    label: 'histogram',\n    insertText: 'histogram',\n    detail: 'histogram(q)',\n    documentation: 'calculates [VictoriaMetrics histogram](https://valyala.medium.com/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350) per each group of points with the same timestamp. Useful for visualizing big number of time series via a heatmap. See [this article](https://medium.com/@valyala/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350) for more details.'\n  },\n  {\n    label: 'limitk',\n    insertText: 'limitk',\n    detail: 'limitk(k, q) by (group_labels)',\n    documentation: 'returns up to `k` time series per each `group_labels` out of time series returned by `q`. The returned set of time series remain the same across calls. See also `limit_offset`.'\n  },\n  {\n    label: 'mad',\n    insertText: 'mad',\n    detail: 'mad(q) by (group_labels)',\n    documentation: 'returns the [Median absolute deviation](https://en.wikipedia.org/wiki/Median_absolute_deviation) per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp. See also `outliers_mad`.'\n  },\n  {\n    label: 'max',\n    insertText: 'max',\n    detail: 'max(q) by (group_labels)',\n    documentation: 'returns the maximum value per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'median',\n    insertText: 'median',\n    detail: 'median(q) by (group_labels)',\n    documentation: 'returns the median value per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'min',\n    insertText: 'min',\n    detail: 'min(q) by (group_labels)',\n    documentation: 'returns the minimum value per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'mode',\n    insertText: 'mode',\n    detail: 'mode(q) by (group_labels)',\n    documentation: 'returns [mode](https://en.wikipedia.org/wiki/Mode_(statistics)) per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'outliers_mad',\n    insertText: 'outliers_mad',\n    detail: 'outliers_mad(tolerance, q)',\n    documentation: 'returns time series from `q` with at least a single point outside [Median absolute deviation](https://en.wikipedia.org/wiki/Median_absolute_deviation) (aka MAD) multiplied by `tolerance`. E.g. it returns time series with at least a single point below `median(q) - mad(q)` or a single point above `median(q) + mad(q)`. See also `outliersk`.'\n  },\n  {\n    label: 'outliersk',\n    insertText: 'outliersk',\n    detail: 'outliersk(k, q)',\n    documentation: 'returns up to `k` time series with the biggest standard deviation (aka outliers) out of time series returned by `q`. See also `outliers_mad`.'\n  },\n  {\n    label: 'quantile',\n    insertText: 'quantile',\n    detail: 'quantile(phi, q) by (group_labels)',\n    documentation: 'calculates `phi`-quantile per each `group_labels` for all the time series returned by `q`. `phi` must be in the range `[0...1]`. The aggregate is calculated individually per each group of points with the same timestamp. See also `quantiles`.'\n  },\n  {\n    label: 'quantiles',\n    insertText: 'quantiles',\n    detail: 'quantiles(\"phiLabel\", phi1, ..., phiN, q)',\n    documentation: 'calculates `phi*`-quantiles for all the time series returned by `q` and return them in time series with `{phiLabel=\"phi*\"}` label. `phi*` must be in the range `[0...1]`. The aggregate is calculated individually per each group of points with the same timestamp. See also `quantile`.'\n  },\n  {\n    label: 'stddev',\n    insertText: 'stddev',\n    detail: 'stddev(q) by (group_labels)',\n    documentation: 'calculates standard deviation per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'stdvar',\n    insertText: 'stdvar',\n    detail: 'stdvar(q) by (group_labels)',\n    documentation: 'calculates standard variance per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'sum',\n    insertText: 'sum',\n    detail: 'sum(q) by (group_labels)',\n    documentation: 'returns the sum per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'sum2',\n    insertText: 'sum2',\n    detail: 'sum2(q) by (group_labels)',\n    documentation: 'calculates the sum of squares per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'topk',\n    insertText: 'topk',\n    detail: 'topk(k, q)',\n    documentation: 'returns up to `k` points with the biggest values across all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp. See also `bottomk`.'\n  },\n  {\n    label: 'topk_avg',\n    insertText: 'topk_avg',\n    detail: 'topk_avg(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the biggest averages. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `topk_avg(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the biggest averages plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `bottomk_avg`.'\n  },\n  {\n    label: 'topk_last',\n    insertText: 'topk_last',\n    detail: 'topk_last(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the biggest last values. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `topk_max(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the biggest maximums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `bottomk_last`.'\n  },\n  {\n    label: 'topk_max',\n    insertText: 'topk_max',\n    detail: 'topk_max(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the biggest maximums. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `topk_max(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the biggest maximums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `bottomk_max`.'\n  },\n  {\n    label: 'topk_median',\n    insertText: 'topk_median',\n    detail: 'topk_median(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the biggest medians. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `topk_median(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the biggest medians plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `bottomk_median`.'\n  },\n  {\n    label: 'topk_min',\n    insertText: 'topk_min',\n    detail: 'topk_min(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the biggest minimums. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `topk_min(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the biggest minimums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `bottomk_min`.'\n  },\n  {\n    label: 'zscore',\n    insertText: 'zscore',\n    detail: 'zscore(q) by (group_labels)',\n    documentation: 'returns [z-score](https://en.wikipedia.org/wiki/Standard_score) values per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp. Useful for detecting anomalies in the group of related time series.'\n  }\n]\n\nexport const FUNCTIONS = [\n  ...ROLLUP_FUNCTIONS,\n  ...TRANSFORM_FUNCTIONS,\n  ...MANIPULATION_FUNCTIONS,\n  ...AGGREGATE_FUNCTIONS,\n  {\n    insertText: 'count_scalar',\n    label: 'count_scalar',\n    detail: 'count_scalar(v instant-vector)',\n    documentation:\n      'Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause.',\n  }\n];\n\nexport const metricsqlGrammar: Grammar = {\n  comment: {\n    pattern: /#.*/,\n  },\n  'context-aggregation': {\n    pattern: /((by|without)\\s*)\\([^)]*\\)/, // by ()\n    lookbehind: true,\n    inside: {\n      'label-key': {\n        pattern: /[^(),\\s][^,)]*[^),\\s]*/,\n        alias: 'attr-name',\n      },\n      punctuation: /[()]/,\n    },\n  },\n  'context-labels': {\n    pattern: /\\{[^}]*(?=}?)/,\n    greedy: true,\n    inside: {\n      comment: {\n        pattern: /#.*/,\n      },\n      'label-key': {\n        pattern: /[a-z_]\\w*(?=\\s*(=|!=|=~|!~))/,\n        alias: 'attr-name',\n        greedy: true,\n      },\n      'label-value': {\n        pattern: /\"(?:\\\\.|[^\\\\\"])*\"/,\n        greedy: true,\n        alias: 'attr-value',\n      },\n      punctuation: /[{]/,\n    },\n  },\n  function: new RegExp(`\\\\b(?:${FUNCTIONS.map((f) => f.label).join('|')})(?=\\\\s*\\\\()`, 'i'),\n  'context-range': [\n    {\n      pattern: /\\[[^\\]]*(?=])/, // [1m]\n      inside: {\n        'range-duration': {\n          pattern: /\\b\\d+[smhdwy]\\b/i,\n          alias: 'number',\n        },\n      },\n    },\n    {\n      pattern: /(offset\\s+)\\w+/, // offset 1m\n      lookbehind: true,\n      inside: {\n        'range-duration': {\n          pattern: /\\b\\d+[smhdwy]\\b/i,\n          alias: 'number',\n        },\n      },\n    },\n  ],\n  idList: {\n    pattern: /\\d+(\\|\\d+)+/,\n    alias: 'number',\n  },\n  number: /\\b-?\\d+((\\.\\d*)?([eE][+-]?\\d+)?)?\\b/,\n  operator: new RegExp(`/[-+*/=%^~]|&&?|\\\\|?\\\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\\\b(?:${OPERATORS.join('|')})\\\\b`, 'i'),\n  punctuation: /[{};()`,.]/,\n};\n\nexport default metricsqlGrammar;\n","import { map } from \"lodash\";\n\nimport { SelectableValue } from \"@grafana/data\";\n\nexport const DATASOURCE_TYPE = 'victoriametrics-datasource'\nexport const ANNOTATION_QUERY_STEP_DEFAULT = '60s';\n\nexport const FORMAT_OPTIONS: Array<SelectableValue<string>> = [\n    { label: 'Time series', value: 'time_series' },\n    { label: 'Table', value: 'table' },\n    { label: 'Heatmap', value: 'heatmap' },\n];\n\nexport const INTERVAL_FACTOR_OPTIONS: Array<SelectableValue<number>> = map([1, 2, 3, 4, 5, 10], (value: number) => ({\n    value,\n    label: '1/' + value,\n}))\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState } from 'react';\n\nimport { DataSourceApi, SelectableValue, toOption } from '@grafana/data';\nimport { Select } from '@grafana/ui';\n\nimport { DATASOURCE_TYPE } from \"../../consts\";\nimport { promQueryModeller } from '../PromQueryModeller';\nimport { getOperationParamId } from '../shared/operationUtils';\nimport { QueryBuilderLabelFilter, QueryBuilderOperationParamEditorProps } from '../shared/types';\nimport { PromVisualQuery } from '../types';\n\nexport function LabelParamEditor({\n  onChange,\n  index,\n  operationIndex,\n  value,\n  query,\n  datasource,\n}: QueryBuilderOperationParamEditorProps) {\n  const [state, setState] = useState<{\n    options?: Array<SelectableValue<any>>;\n    isLoading?: boolean;\n  }>({});\n\n  return (\n    <Select\n      inputId={getOperationParamId(operationIndex, index)}\n      autoFocus={value === '' ? true : undefined}\n      openMenuOnFocus\n      onOpenMenu={async () => {\n        setState({ isLoading: true });\n        const options = await loadGroupByLabels(query, datasource);\n        setState({ options, isLoading: undefined });\n      }}\n      isLoading={state.isLoading}\n      allowCustomValue\n      noOptionsMessage=\"No labels found\"\n      loadingMessage=\"Loading labels\"\n      options={state.options}\n      value={toOption(value as string)}\n      onChange={(value) => onChange(index, value.value!)}\n    />\n  );\n}\n\nasync function loadGroupByLabels(\n  query: PromVisualQuery,\n  datasource: DataSourceApi\n): Promise<Array<SelectableValue<any>>> {\n  let labels: QueryBuilderLabelFilter[] = query.labels;\n\n  // This function is used by both Prometheus and Loki and this the only difference.\n  if (datasource.type === DATASOURCE_TYPE) {\n    labels = [{ label: '__name__', op: '=', value: query.metric }, ...query.labels];\n  }\n\n  const expr = promQueryModeller.renderLabels(labels);\n  const result = await datasource.languageProvider.fetchSeriesLabels(expr);\n\n  return Object.keys(result).map((x) => ({\n    label: x,\n    value: x,\n  }));\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-12-01: remove unused arguments from 'renderParams'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { capitalize } from 'lodash';\nimport pluralize from 'pluralize';\n\nimport { SelectableValue } from '@grafana/data';\n\nimport { LabelParamEditor } from '../components/LabelParamEditor';\nimport { PromVisualQueryOperationCategory } from '../types';\n\nimport {\n  QueryBuilderOperation,\n  QueryBuilderOperationDef,\n  QueryBuilderOperationParamDef,\n  QueryBuilderOperationParamValue,\n  QueryWithOperations,\n} from './types';\n\nexport function functionRendererLeft(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n  const params = renderParams(model, def);\n  const str = model.id + '(';\n\n  if (innerExpr) {\n    params.push(innerExpr);\n  }\n\n  return str + params.join(', ') + ')';\n}\n\nexport function functionRendererRight(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n  const params = renderParams(model, def);\n  const str = model.id + '(';\n\n  if (innerExpr) {\n    params.unshift(innerExpr);\n  }\n\n  return str + params.join(', ') + ')';\n}\n\nfunction rangeRendererWithParams(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string,\n  renderLeft: boolean\n) {\n  if (def.params.length < 2) {\n    throw `Cannot render a function with params of length [${def.params.length}]`;\n  }\n\n  let rangeVector = (model.params ?? [])[0] ?? '5m';\n\n  // Next frame the remaining parameters, but get rid of the first one because it's used to move the\n  // instant vector into a range vector.\n  const params = renderParams(\n    {\n      ...model,\n      params: model.params.slice(1),\n    },\n    {\n      ...def,\n      params: def.params.slice(1),\n      defaultParams: def.defaultParams.slice(1),\n    }\n  );\n\n  const str = model.id + '(';\n\n  // Depending on the renderLeft variable, render parameters to the left or right\n  // renderLeft === true (renderLeft) => (param1, param2, rangeVector[...])\n  // renderLeft === false (renderRight) => (rangeVector[...], param1, param2)\n  if (innerExpr) {\n    renderLeft ? params.push(`${innerExpr}[${rangeVector}]`) : params.unshift(`${innerExpr}[${rangeVector}]`);\n  }\n\n  // stick everything together\n  return str + params.join(', ') + ')';\n}\n\nexport function rangeRendererRightWithParams(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string\n) {\n  return rangeRendererWithParams(model, def, innerExpr, false);\n}\n\nexport function rangeRendererLeftWithParams(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string\n) {\n  return rangeRendererWithParams(model, def, innerExpr, true);\n}\n\nexport function renderParams(model: QueryBuilderOperation, def: QueryBuilderOperationDef) {\n  return (model.params ?? []).map((value, index) => {\n    const paramDef = def.params[index];\n    if (paramDef?.type === 'string') {\n      return '\"' + value + '\"';\n    }\n\n    return value;\n  });\n}\n\nexport function defaultAddOperationHandler<T extends QueryWithOperations>(def: QueryBuilderOperationDef, query: T) {\n  const newOperation: QueryBuilderOperation = {\n    id: def.id,\n    params: def.defaultParams,\n  };\n\n  return {\n    ...query,\n    operations: [...query.operations, newOperation],\n  };\n}\n\nexport function getPromAndLokiOperationDisplayName(funcName: string) {\n  return capitalize(funcName.replace(/_/g, ' '));\n}\n\nexport function getOperationParamId(operationIndex: number, paramIndex: number) {\n  return `operations.${operationIndex}.param.${paramIndex}`;\n}\n\nexport function getRangeVectorParamDef(withRateInterval = false): QueryBuilderOperationParamDef {\n  const param: QueryBuilderOperationParamDef = {\n    name: 'Range',\n    type: 'string',\n    options: [\n      {\n        label: '$__interval',\n        value: '$__interval',\n        // tooltip: 'Dynamic interval based on max data points, scrape and min interval',\n      },\n      { label: '1m', value: '1m' },\n      { label: '5m', value: '5m' },\n      { label: '10m', value: '10m' },\n      { label: '1h', value: '1h' },\n      { label: '24h', value: '24h' },\n    ],\n  };\n\n  if (withRateInterval) {\n    (param.options as Array<SelectableValue<string>>).unshift({\n      label: '$__rate_interval',\n      value: '$__rate_interval',\n      // tooltip: 'Always above 4x scrape interval',\n    });\n  }\n\n  return param;\n}\n\n/**\n * This function is shared between Prometheus and Loki variants\n */\nexport function createAggregationOperation<T extends QueryWithOperations>(\n  name: string,\n  overrides: Partial<QueryBuilderOperationDef> = {}\n): QueryBuilderOperationDef[] {\n  return [\n    {\n      id: name,\n      name: getPromAndLokiOperationDisplayName(name),\n      params: [\n        {\n          name: 'By label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n        },\n      ],\n      defaultParams: [],\n      alternativesKey: 'plain aggregations',\n      category: PromVisualQueryOperationCategory.Aggregations,\n      renderer: functionRendererLeft,\n      paramChangedHandler: getOnLabelAddedHandler(`__${name}_by`),\n      explainHandler: getAggregationExplainer(name, ''),\n      addOperationHandler: defaultAddOperationHandler,\n      ...overrides,\n    },\n    {\n      id: `__${name}_by`,\n      name: `${getPromAndLokiOperationDisplayName(name)} by`,\n      params: [\n        {\n          name: 'Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          editor: LabelParamEditor,\n        },\n      ],\n      defaultParams: [''],\n      alternativesKey: 'aggregations by',\n      category: PromVisualQueryOperationCategory.Aggregations,\n      renderer: getAggregationByRenderer(name),\n      paramChangedHandler: getLastLabelRemovedHandler(name),\n      explainHandler: getAggregationExplainer(name, 'by'),\n      addOperationHandler: defaultAddOperationHandler,\n      hideFromList: true,\n      ...overrides,\n    },\n    {\n      id: `__${name}_without`,\n      name: `${getPromAndLokiOperationDisplayName(name)} without`,\n      params: [\n        {\n          name: 'Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          editor: LabelParamEditor,\n        },\n      ],\n      defaultParams: [''],\n      alternativesKey: 'aggregations by',\n      category: PromVisualQueryOperationCategory.Aggregations,\n      renderer: getAggregationWithoutRenderer(name),\n      paramChangedHandler: getLastLabelRemovedHandler(name),\n      explainHandler: getAggregationExplainer(name, 'without'),\n      addOperationHandler: defaultAddOperationHandler,\n      hideFromList: true,\n      ...overrides,\n    },\n  ];\n}\n\nexport function createAggregationOperationWithParam(\n  name: string,\n  paramsDef: { params: QueryBuilderOperationParamDef[]; defaultParams: QueryBuilderOperationParamValue[] },\n  overrides: Partial<QueryBuilderOperationDef> = {}\n): QueryBuilderOperationDef[] {\n  const operations = createAggregationOperation(name, overrides);\n  operations[0].params.unshift(...paramsDef.params);\n  operations[1].params.unshift(...paramsDef.params);\n  operations[2].params.unshift(...paramsDef.params);\n  operations[0].defaultParams = paramsDef.defaultParams;\n  operations[1].defaultParams = [...paramsDef.defaultParams, ''];\n  operations[2].defaultParams = [...paramsDef.defaultParams, ''];\n  operations[1].renderer = getAggregationByRendererWithParameter(name);\n  operations[2].renderer = getAggregationByRendererWithParameter(name);\n  return operations;\n}\n\nfunction getAggregationByRenderer(aggregation: string) {\n  return function aggregationRenderer(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n    return `${aggregation} by(${model.params.join(', ')}) (${innerExpr})`;\n  };\n}\n\nfunction getAggregationWithoutRenderer(aggregation: string) {\n  return function aggregationRenderer(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n    return `${aggregation} without(${model.params.join(', ')}) (${innerExpr})`;\n  };\n}\n\n/**\n * Very simple poc implementation, needs to be modified to support all aggregation operators\n */\nfunction getAggregationExplainer(aggregationName: string, mode: 'by' | 'without' | '') {\n  return function aggregationExplainer(model: QueryBuilderOperation) {\n    const labels = model.params.map((label) => `\\`${label}\\``).join(' and ');\n    const labelWord = pluralize('label', model.params.length);\n\n    switch (mode) {\n      case 'by':\n        return `Calculates ${aggregationName} over dimensions while preserving ${labelWord} ${labels}.`;\n      case 'without':\n        return `Calculates ${aggregationName} over the dimensions ${labels}. All other labels are preserved.`;\n      default:\n        return `Calculates ${aggregationName} over the dimensions.`;\n    }\n  };\n}\n\nfunction getAggregationByRendererWithParameter(aggregation: string) {\n  return function aggregationRenderer(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n    const restParamIndex = def.params.findIndex((param) => param.restParam);\n    const params = model.params.slice(0, restParamIndex);\n    const restParams = model.params.slice(restParamIndex);\n\n    return `${aggregation} by(${restParams.join(', ')}) (${params\n      .map((param, idx) => (def.params[idx].type === 'string' ? `\\\"${param}\\\"` : param))\n      .join(', ')}, ${innerExpr})`;\n  };\n}\n\n/**\n * This function will transform operations without labels to their plan aggregation operation\n */\nfunction getLastLabelRemovedHandler(changeToOperationId: string) {\n  return function onParamChanged(index: number, op: QueryBuilderOperation, def: QueryBuilderOperationDef) {\n    // If definition has more params then is defined there are no optional rest params anymore.\n    // We then transform this operation into a different one\n    if (op.params.length < def.params.length) {\n      return {\n        ...op,\n        id: changeToOperationId,\n      };\n    }\n\n    return op;\n  };\n}\n\nfunction getOnLabelAddedHandler(changeToOperationId: string) {\n  return function onParamChanged(index: number, op: QueryBuilderOperation, def: QueryBuilderOperationDef) {\n    // Check if we actually have the label param. As it's optional the aggregation can have one less, which is the\n    // case of just simple aggregation without label. When user adds the label it now has the same number of params\n    // as its definition, and now we can change it to its `_by` variant.\n    if (op.params.length === def.params.length) {\n      return {\n        ...op,\n        id: changeToOperationId,\n      };\n    }\n    return op;\n  };\n}\n","import { VisualQueryBinary } from './shared/LokiAndPromQueryModellerBase';\nimport { QueryBuilderLabelFilter, QueryBuilderOperation } from './shared/types';\n\n/**\n * Visual query model\n */\nexport interface PromVisualQuery {\n  metric: string;\n  labels: QueryBuilderLabelFilter[];\n  operations: QueryBuilderOperation[];\n  binaryQueries?: PromVisualQueryBinary[];\n}\n\nexport type PromVisualQueryBinary = VisualQueryBinary<PromVisualQuery>;\n\nexport enum PromVisualQueryOperationCategory {\n  Aggregations = 'Aggregations',\n  RangeFunctions = 'Range functions',\n  Functions = 'Functions',\n  BinaryOps = 'Binary operations',\n  Trigonometric = 'Trigonometric',\n  Time = 'Time Functions',\n}\n\nexport enum PromOperationId {\n  Absent = 'absent',\n  AbsentOverTime = 'absent_over_time',\n  Acos = 'acos',\n  Acosh = 'acosh',\n  Asin = 'asin',\n  Asinh = 'asinh',\n  Atan = 'atan',\n  Atanh = 'atanh',\n  Avg = 'avg',\n  AvgOverTime = 'avg_over_time',\n  BottomK = 'bottomk',\n  Ceil = 'ceil',\n  Changes = 'changes',\n  Clamp = 'clamp',\n  ClampMax = 'clamp_max',\n  ClampMin = 'clamp_min',\n  Cos = 'cos',\n  Cosh = 'cosh',\n  Count = 'count',\n  CountOverTime = 'count_over_time',\n  CountValues = 'count_values',\n  DayOfMonth = 'day_of_month',\n  DayOfWeek = 'day_of_week',\n  DaysInMonth = 'days_in_month',\n  Deg = 'deg',\n  Delta = 'delta',\n  Deriv = 'deriv',\n  Exp = 'exp',\n  Floor = 'floor',\n  Group = 'group',\n  HistogramQuantile = 'histogram_quantile',\n  HoltWinters = 'holt_winters',\n  Hour = 'hour',\n  Idelta = 'idelta',\n  Increase = 'increase',\n  Irate = 'irate',\n  LabelJoin = 'label_join',\n  LabelReplace = 'label_replace',\n  LastOverTime = 'last_over_time',\n  Ln = 'ln',\n  Log10 = 'log10',\n  Log2 = 'log2',\n  Max = 'max',\n  MaxOverTime = 'max_over_time',\n  Min = 'min',\n  MinOverTime = 'min_over_time',\n  Minute = 'minute',\n  Month = 'month',\n  Pi = 'pi',\n  PredictLinear = 'predict_linear',\n  PresentOverTime = 'present_over_time',\n  Quantile = 'quantile',\n  QuantileOverTime = 'quantile_over_time',\n  Rad = 'rad',\n  Rate = 'rate',\n  Resets = 'resets',\n  Round = 'round',\n  Scalar = 'scalar',\n  Sgn = 'sgn',\n  Sin = 'sin',\n  Sinh = 'sinh',\n  Sort = 'sort',\n  SortDesc = 'sort_desc',\n  Sqrt = 'sqrt',\n  Stddev = 'stddev',\n  StddevOverTime = 'stddev_over_time',\n  Sum = 'sum',\n  SumOverTime = 'sum_over_time',\n  Tan = 'tan',\n  Tanh = 'tanh',\n  Time = 'time',\n  Timestamp = 'timestamp',\n  TopK = 'topk',\n  Vector = 'vector',\n  Year = 'year',\n  // Binary ops\n  Addition = '__addition',\n  Subtraction = '__subtraction',\n  MultiplyBy = '__multiply_by',\n  DivideBy = '__divide_by',\n  Modulo = '__modulo',\n  Exponent = '__exponent',\n  NestedQuery = '__nested_query',\n  EqualTo = '__equal_to',\n  NotEqualTo = '__not_equal_to',\n  GreaterThan = '__greater_than',\n  LessThan = '__less_than',\n  GreaterOrEqual = '__greater_or_equal',\n  LessOrEqual = '__less_or_equal',\n\n  // MetricsQL\n  AscentOverTime = 'ascent_over_time',\n  ChangesPrometheus = 'changes_prometheus',\n  DecreasesOverTime = 'decreases_over_time',\n  DefaultRollup = 'default_rollup',\n  DeltaPrometheus = 'delta_prometheus',\n  DerivFast = 'deriv_fast',\n  DescentOverTime = 'descent_over_time',\n  DistinctOverTime = 'distinct_over_time',\n  FirstOverTime = 'first_over_time',\n  GeomeanOverTime = 'geomean_over_time',\n  HistogramOverTime = 'histogram_over_time',\n  Ideriv = 'ideriv',\n  IncreasePrometheus = 'increase_prometheus',\n  IncreasePure = 'increase_pure',\n  IncreasesOverTime = 'increases_over_time',\n  Integrate = 'integrate',\n  Lag = 'lag',\n  Lifetime = 'lifetime',\n  MadOverTime = 'mad_over_time',\n  MedianOverTime = 'median_over_time',\n  ModeOverTime = 'mode_over_time',\n  RangeOverTime = 'range_over_time',\n  RateOverSum = 'rate_over_sum',\n  Rollup = 'rollup',\n  RollupCandlestick = 'rollup_candlestick',\n  RollupDelta = 'rollup_delta',\n  RollupDeriv = 'rollup_deriv',\n  RollupIncrease = 'rollup_increase',\n  RollupRate = 'rollup_rate',\n  RollupScrapeInterval = 'rollup_scrape_interval',\n  ScrapeInterval = 'scrape_interval',\n  StaleSamplesOverTime = 'stale_samples_over_time',\n  StdvarOverTime = 'stdvar_over_time',\n  Sum2OverTime = 'sum2_over_time',\n  TimestampWithName = 'timestamp_with_name',\n  TfirstOverTime = 'tfirst_over_time',\n  TlastChangeOverTime = 'tlast_change_over_time',\n  TlastOverTime = 'tlast_over_time',\n  TmaxOverTime = 'tmax_over_time',\n  TminOverTime = 'tmin_over_time',\n  ZscoreOverTime = 'zscore_over_time',\n  HistogramAvg = 'histogram_avg',\n  HistogramStddev = 'histogram_stddev',\n  HistogramStdvar = 'histogram_stdvar',\n  PrometheusBuckets = 'prometheus_buckets',\n  Abs = 'abs',\n  Interpolate = 'interpolate',\n  KeepLastValue = 'keep_last_value',\n  KeepNextValue = 'keep_next_value',\n  RangeAvg = 'range_avg',\n  RangeFirst = 'range_first',\n  RangeLast = 'range_last',\n  RangeLinearRegression = 'range_linear_regression',\n  RangeMad = 'range_mad',\n  RangeMax = 'range_max',\n  RangeMedian = 'range_median',\n  RangeMin = 'range_min',\n  RangeStddev = 'range_stddev',\n  RangeStdvar = 'range_stdvar',\n  RangeSum = 'range_sum',\n  RangeZscore = 'range_zscore',\n  RemoveResets = 'remove_resets',\n  RunningAvg = 'running_avg',\n  RunningMax = 'running_max',\n  RunningMin = 'running_min',\n  RunningSum = 'running_sum',\n  Distinct = 'distinct',\n  Geomean = 'geomean',\n  Histogram = 'histogram',\n  BottomkAvg = 'bottomk_avg',\n  BottomkLast = 'bottomk_last',\n  BottomkMax = 'bottomk_max',\n  BottomkMedian = 'bottomk_median',\n  BottomkMin = 'bottomk_min',\n  TopkAvg = 'topk_avg',\n  TopkLast = 'topk_last',\n  TopkMax = 'topk_max',\n  TopkMedian = 'topk_median',\n  TopkMin = 'topk_min',\n  Any = 'any',\n  Limitk = 'limitk',\n  Mad = 'mad',\n  Median = 'median',\n  Mode = 'mode',\n  Share = 'share',\n  Stdvar = 'stdvar',\n  Sum2 = 'sum2',\n  Zscore = 'zscore',\n  LabelDel = 'label_del',\n  LabelKeep = 'label_keep',\n  LabelLowercase = 'label_lowercase',\n  LabelUppercase = 'label_uppercase',\n  SortByLabel = 'sort_by_label',\n  SortByLabelDesc = 'sort_by_label_desc',\n  SortByLabelNumeric = 'sort_by_label_numeric',\n  SortByLabelNumericDesc = 'sort_by_label_numeric_desc',\n  End = 'end',\n  Now = 'now',\n  Start = 'start',\n  Step = 'step',\n  CountEqOverTime = 'count_eq_over_time',\n  CountGtOverTime = 'count_gt_over_time',\n  CountLeOverTime = 'count_le_over_time',\n  CountNeOverTime = 'count_ne_over_time',\n  DurationOverTime = 'duration_over_time',\n  ShareGtOverTime = 'share_gt_over_time',\n  ShareLeOverTime = 'share_le_over_time',\n  ShareEqOverTime = 'share_eq_over_time',\n  BitmapAnd = 'bitmap_and',\n  BitmapOr = 'bitmap_or',\n  BitmapXor = 'bitmap_xor',\n  Rand = 'rand',\n  RandExponential = 'rand_exponential',\n  RandNormal = 'rand_normal',\n  TimezoneOffset = 'timezone_offset',\n  LabelSet = 'label_set',\n  LabelCopy = 'label_copy',\n  LabelMove = 'label_move',\n  LabelMap = 'label_map'\n}\n\nexport interface PromQueryPattern {\n  name: string;\n  operations: QueryBuilderOperation[];\n}\n","import { defaultAddOperationHandler } from './shared/operationUtils';\nimport { QueryBuilderOperation, QueryBuilderOperationDef, QueryBuilderOperationParamDef } from './shared/types';\nimport { PromOperationId, PromVisualQueryOperationCategory } from './types';\n\nexport const binaryScalarDefs = [\n  {\n    id: PromOperationId.Addition,\n    name: 'Add scalar',\n    sign: '+',\n  },\n  {\n    id: PromOperationId.Subtraction,\n    name: 'Subtract scalar',\n    sign: '-',\n  },\n  {\n    id: PromOperationId.MultiplyBy,\n    name: 'Multiply by scalar',\n    sign: '*',\n  },\n  {\n    id: PromOperationId.DivideBy,\n    name: 'Divide by scalar',\n    sign: '/',\n  },\n  {\n    id: PromOperationId.Modulo,\n    name: 'Modulo by scalar',\n    sign: '%',\n  },\n  {\n    id: PromOperationId.Exponent,\n    name: 'Exponent',\n    sign: '^',\n  },\n  {\n    id: PromOperationId.EqualTo,\n    name: 'Equal to',\n    sign: '==',\n    comparison: true,\n  },\n  {\n    id: PromOperationId.NotEqualTo,\n    name: 'Not equal to',\n    sign: '!=',\n    comparison: true,\n  },\n  {\n    id: PromOperationId.GreaterThan,\n    name: 'Greater than',\n    sign: '>',\n    comparison: true,\n  },\n  {\n    id: PromOperationId.LessThan,\n    name: 'Less than',\n    sign: '<',\n    comparison: true,\n  },\n  {\n    id: PromOperationId.GreaterOrEqual,\n    name: 'Greater or equal to',\n    sign: '>=',\n    comparison: true,\n  },\n  {\n    id: PromOperationId.LessOrEqual,\n    name: 'Less or equal to',\n    sign: '<=',\n    comparison: true,\n  },\n];\n\nexport const binaryScalarOperatorToOperatorName = binaryScalarDefs.reduce((acc, def) => {\n  acc[def.sign] = {\n    id: def.id,\n    comparison: def.comparison,\n  };\n  return acc;\n}, {} as Record<string, { id: string; comparison?: boolean }>);\n\n// Not sure about this one. It could also be a more generic 'Simple math operation' where user specifies\n// both the operator and the operand in a single input\nexport const binaryScalarOperations: QueryBuilderOperationDef[] = binaryScalarDefs.map((opDef) => {\n  const params: QueryBuilderOperationParamDef[] = [{ name: 'Value', type: 'number' }];\n  const defaultParams: any[] = [2];\n  if (opDef.comparison) {\n    params.push({\n      name: 'Bool',\n      type: 'boolean',\n      description: 'If checked comparison will return 0 or 1 for the value rather than filtering.',\n    });\n    defaultParams.push(false);\n  }\n\n  return {\n    id: opDef.id,\n    name: opDef.name,\n    params,\n    defaultParams,\n    alternativesKey: 'binary scalar operations',\n    category: PromVisualQueryOperationCategory.BinaryOps,\n    renderer: getSimpleBinaryRenderer(opDef.sign),\n    addOperationHandler: defaultAddOperationHandler,\n  };\n});\n\nfunction getSimpleBinaryRenderer(operator: string) {\n  return function binaryRenderer(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n    let param = model.params[0];\n    let bool = '';\n    if (model.params.length === 2) {\n      bool = model.params[1] ? ' bool' : '';\n    }\n\n    return `${innerExpr} ${operator}${bool} ${param}`;\n  };\n}\n","import { binaryScalarOperations } from './binaryScalarOperations';\nimport { LabelParamEditor } from './components/LabelParamEditor';\nimport {\n  defaultAddOperationHandler,\n  functionRendererLeft,\n  functionRendererRight,\n  getPromAndLokiOperationDisplayName,\n  getRangeVectorParamDef,\n  rangeRendererLeftWithParams,\n  rangeRendererRightWithParams,\n} from './shared/operationUtils';\nimport {\n  QueryBuilderOperation,\n  QueryBuilderOperationDef,\n  QueryWithOperations,\n  VisualQueryModeller,\n} from './shared/types';\nimport { PromOperationId, PromVisualQuery, PromVisualQueryOperationCategory } from './types';\n\nexport function getOperationDefinitions(): QueryBuilderOperationDef[] {\n  return [\n    {\n      id: PromOperationId.HistogramQuantile,\n      name: 'Histogram quantile',\n      params: [{ name: 'Quantile', type: 'number', options: [0.99, 0.95, 0.9, 0.75, 0.5, 0.25] }],\n      defaultParams: [0.9],\n      category: PromVisualQueryOperationCategory.Functions,\n      renderer: functionRendererLeft,\n      addOperationHandler: defaultAddOperationHandler,\n    },\n    {\n      id: PromOperationId.LabelReplace,\n      name: 'Label replace',\n      params: [\n        { name: 'Destination label', type: 'string' },\n        { name: 'Replacement', type: 'string' },\n        { name: 'Source label', type: 'string' },\n        { name: 'Regex', type: 'string' },\n      ],\n      category: PromVisualQueryOperationCategory.Functions,\n      defaultParams: ['', '$1', '', '(.*)'],\n      renderer: functionRendererRight,\n      addOperationHandler: defaultAddOperationHandler,\n    },\n    {\n      id: PromOperationId.Ln,\n      name: 'Ln',\n      params: [],\n      defaultParams: [],\n      category: PromVisualQueryOperationCategory.Functions,\n      renderer: functionRendererLeft,\n      addOperationHandler: defaultAddOperationHandler,\n    },\n    createRangeFunction(PromOperationId.Changes),\n    createRangeFunction(PromOperationId.Rate, true),\n    createRangeFunction(PromOperationId.Irate),\n    createRangeFunction(PromOperationId.Increase, true),\n    createRangeFunction(PromOperationId.Idelta),\n    createRangeFunction(PromOperationId.Delta),\n    createFunction({\n      id: PromOperationId.HoltWinters,\n      params: [\n        getRangeVectorParamDef(),\n        { name: 'Smoothing Factor', type: 'number' },\n        { name: 'Trend Factor', type: 'number' },\n      ],\n      defaultParams: ['$__interval', 0.5, 0.5],\n      alternativesKey: 'range function',\n      category: PromVisualQueryOperationCategory.RangeFunctions,\n      renderer: rangeRendererRightWithParams,\n      addOperationHandler: addOperationWithRangeVector,\n      changeTypeHandler: operationTypeChangedHandlerForRangeFunction,\n    }),\n    createFunction({\n      id: PromOperationId.PredictLinear,\n      params: [getRangeVectorParamDef(), { name: 'Seconds from now', type: 'number' }],\n      defaultParams: ['$__interval', 60],\n      alternativesKey: 'range function',\n      category: PromVisualQueryOperationCategory.RangeFunctions,\n      renderer: rangeRendererRightWithParams,\n      addOperationHandler: addOperationWithRangeVector,\n      changeTypeHandler: operationTypeChangedHandlerForRangeFunction,\n    }),\n    createFunction({\n      id: PromOperationId.QuantileOverTime,\n      params: [getRangeVectorParamDef(), { name: 'Quantile', type: 'number' }],\n      defaultParams: ['$__interval', 0.5],\n      alternativesKey: 'overtime function',\n      category: PromVisualQueryOperationCategory.RangeFunctions,\n      renderer: rangeRendererLeftWithParams,\n      addOperationHandler: addOperationWithRangeVector,\n      changeTypeHandler: operationTypeChangedHandlerForRangeFunction,\n    }),\n    ...binaryScalarOperations,\n    {\n      id: PromOperationId.NestedQuery,\n      name: 'Binary operation with query',\n      params: [],\n      defaultParams: [],\n      category: PromVisualQueryOperationCategory.BinaryOps,\n      renderer: (model, def, innerExpr) => innerExpr,\n      addOperationHandler: addNestedQueryHandler,\n    },\n    createFunction({ id: PromOperationId.Absent }),\n    createFunction({\n      id: PromOperationId.Acos,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Acosh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Asin,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Asinh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Atan,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Atanh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({ id: PromOperationId.Ceil }),\n    createFunction({\n      id: PromOperationId.Clamp,\n      name: 'Clamp',\n      params: [\n        { name: 'Minimum Scalar', type: 'number' },\n        { name: 'Maximum Scalar', type: 'number' },\n      ],\n      defaultParams: [1, 1],\n    }),\n\n    createFunction({\n      id: PromOperationId.ClampMax,\n      params: [{ name: 'Maximum Scalar', type: 'number' }],\n      defaultParams: [1],\n    }),\n    createFunction({\n      id: PromOperationId.ClampMin,\n      params: [{ name: 'Minimum Scalar', type: 'number' }],\n      defaultParams: [1],\n    }),\n    createFunction({\n      id: PromOperationId.Cos,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Cosh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.DayOfMonth,\n      category: PromVisualQueryOperationCategory.Time,\n    }),\n    createFunction({\n      id: PromOperationId.DayOfWeek,\n      category: PromVisualQueryOperationCategory.Time,\n    }),\n    createFunction({\n      id: PromOperationId.DaysInMonth,\n      category: PromVisualQueryOperationCategory.Time,\n    }),\n    createFunction({ id: PromOperationId.Deg }),\n    createRangeFunction(PromOperationId.Deriv),\n    //\n    createFunction({ id: PromOperationId.Exp }),\n    createFunction({ id: PromOperationId.Floor }),\n    createFunction({ id: PromOperationId.Group }),\n    createFunction({ id: PromOperationId.Hour }),\n    createFunction({\n      id: PromOperationId.LabelJoin,\n      params: [\n        {\n          name: 'Destination Label',\n          type: 'string',\n          editor: LabelParamEditor,\n        },\n        {\n          name: 'Separator',\n          type: 'string',\n        },\n        {\n          name: 'Source Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          editor: LabelParamEditor,\n        },\n      ],\n      defaultParams: ['', ',', ''],\n      renderer: labelJoinRenderer,\n      addOperationHandler: labelJoinAddOperationHandler,\n    }),\n    createFunction({ id: PromOperationId.Log10 }),\n    createFunction({ id: PromOperationId.Log2 }),\n    createFunction({ id: PromOperationId.Minute }),\n    createFunction({ id: PromOperationId.Month }),\n    createFunction({\n      id: PromOperationId.Pi,\n      renderer: (model) => `${model.id}()`,\n    }),\n    createFunction({\n      id: PromOperationId.Quantile,\n      params: [{ name: 'Value', type: 'number' }],\n      defaultParams: [1],\n      renderer: functionRendererLeft,\n    }),\n    createFunction({ id: PromOperationId.Rad }),\n    createRangeFunction(PromOperationId.Resets),\n    createFunction({\n      id: PromOperationId.Round,\n      category: PromVisualQueryOperationCategory.Functions,\n      params: [{ name: 'To Nearest', type: 'number' }],\n      defaultParams: [1],\n    }),\n    createFunction({ id: PromOperationId.Scalar }),\n    createFunction({ id: PromOperationId.Sgn }),\n    createFunction({ id: PromOperationId.Sin, category: PromVisualQueryOperationCategory.Trigonometric }),\n    createFunction({\n      id: PromOperationId.Sinh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({ id: PromOperationId.Sort }),\n    createFunction({ id: PromOperationId.SortDesc }),\n    createFunction({ id: PromOperationId.Sqrt }),\n    createFunction({ id: PromOperationId.Stddev }),\n    createFunction({\n      id: PromOperationId.Tan,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Tanh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Time,\n      renderer: (model) => `${model.id}()`,\n    }),\n    createFunction({ id: PromOperationId.Timestamp }),\n    createFunction({\n      id: PromOperationId.Vector,\n      params: [{ name: 'Value', type: 'number' }],\n      defaultParams: [1],\n      renderer: (model) => `${model.id}(${model.params[0]})`,\n    }),\n    createFunction({ id: PromOperationId.Year }),\n  ];\n}\n\nexport function createFunction(definition: Partial<QueryBuilderOperationDef>): QueryBuilderOperationDef {\n  return {\n    ...definition,\n    id: definition.id!,\n    name: definition.name ?? getPromAndLokiOperationDisplayName(definition.id!),\n    params: definition.params ?? [],\n    defaultParams: definition.defaultParams ?? [],\n    category: definition.category ?? PromVisualQueryOperationCategory.Functions,\n    renderer: definition.renderer ?? (definition.params ? functionRendererRight : functionRendererLeft),\n    addOperationHandler: definition.addOperationHandler ?? defaultAddOperationHandler,\n  };\n}\n\nexport function createRangeFunction(name: string, withRateInterval = false): QueryBuilderOperationDef {\n  return {\n    id: name,\n    name: getPromAndLokiOperationDisplayName(name),\n    params: [getRangeVectorParamDef(withRateInterval)],\n    defaultParams: [withRateInterval ? '$__rate_interval' : '$__interval'],\n    alternativesKey: 'range function',\n    category: PromVisualQueryOperationCategory.RangeFunctions,\n    renderer: operationWithRangeVectorRenderer,\n    addOperationHandler: addOperationWithRangeVector,\n    changeTypeHandler: operationTypeChangedHandlerForRangeFunction,\n  };\n}\n\nexport function operationTypeChangedHandlerForRangeFunction(\n  operation: QueryBuilderOperation,\n  newDef: QueryBuilderOperationDef\n) {\n  // validate current parameter\n  if (operation.params[0] === '$__rate_interval' && newDef.defaultParams[0] !== '$__rate_interval') {\n    operation.params = newDef.defaultParams;\n  } else if (operation.params[0] === '$__interval' && newDef.defaultParams[0] !== '$__interval') {\n    operation.params = newDef.defaultParams;\n  }\n\n  return operation;\n}\n\nexport function operationWithRangeVectorRenderer(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string\n) {\n  let rangeVector = (model.params ?? [])[0] ?? '5m';\n  return `${def.id}(${innerExpr}[${rangeVector}])`;\n}\n\n/**\n * Since there can only be one operation with range vector this will replace the current one (if one was added )\n */\nexport function addOperationWithRangeVector(\n  def: QueryBuilderOperationDef,\n  query: PromVisualQuery,\n  modeller: VisualQueryModeller\n) {\n  const newOperation: QueryBuilderOperation = {\n    id: def.id,\n    params: def.defaultParams,\n  };\n\n  if (query.operations.length > 0) {\n    // If operation exists it has to be in the registry so no point to check if it was found\n    const firstOp = modeller.getOperationDef(query.operations[0].id)!;\n\n    if (firstOp.addOperationHandler === addOperationWithRangeVector) {\n      return {\n        ...query,\n        operations: [newOperation, ...query.operations.slice(1)],\n      };\n    }\n  }\n\n  return {\n    ...query,\n    operations: [newOperation, ...query.operations],\n  };\n}\n\nfunction addNestedQueryHandler(def: QueryBuilderOperationDef, query: PromVisualQuery): PromVisualQuery {\n  return {\n    ...query,\n    binaryQueries: [\n      ...(query.binaryQueries ?? []),\n      {\n        operator: '/',\n        query,\n      },\n    ],\n  };\n}\n\nfunction labelJoinRenderer(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n  if (typeof model.params[1] !== 'string') {\n    throw 'The separator must be a string';\n  }\n  const separator = `\"${model.params[1]}\"`;\n  return `${model.id}(${innerExpr}, \"${model.params[0]}\", ${separator}, \"${model.params.slice(2).join(separator)}\")`;\n}\n\nfunction labelJoinAddOperationHandler<T extends QueryWithOperations>(def: QueryBuilderOperationDef, query: T) {\n  const newOperation: QueryBuilderOperation = {\n    id: def.id,\n    params: def.defaultParams,\n  };\n\n  return {\n    ...query,\n    operations: [...query.operations, newOperation],\n  };\n}\n","import { addOperationWithRangeVector } from './operations';\nimport {\n  createAggregationOperation,\n  createAggregationOperationWithParam,\n  getPromAndLokiOperationDisplayName,\n  getRangeVectorParamDef,\n} from './shared/operationUtils';\nimport { QueryBuilderOperation, QueryBuilderOperationDef } from './shared/types';\nimport { PromVisualQueryOperationCategory, PromOperationId } from './types';\n\nexport function getAggregationOperations(): QueryBuilderOperationDef[] {\n  return [\n    ...createAggregationOperation(PromOperationId.Sum),\n    ...createAggregationOperation(PromOperationId.Avg),\n    ...createAggregationOperation(PromOperationId.Min),\n    ...createAggregationOperation(PromOperationId.Max),\n    ...createAggregationOperation(PromOperationId.Count),\n    ...createAggregationOperationWithParam(PromOperationId.TopK, {\n      params: [{ name: 'K-value', type: 'number' }],\n      defaultParams: [5],\n    }),\n    ...createAggregationOperationWithParam(PromOperationId.BottomK, {\n      params: [{ name: 'K-value', type: 'number' }],\n      defaultParams: [5],\n    }),\n    ...createAggregationOperationWithParam(PromOperationId.CountValues, {\n      params: [{ name: 'Identifier', type: 'string' }],\n      defaultParams: ['count'],\n    }),\n    createAggregationOverTime(PromOperationId.SumOverTime),\n    createAggregationOverTime(PromOperationId.AvgOverTime),\n    createAggregationOverTime(PromOperationId.MinOverTime),\n    createAggregationOverTime(PromOperationId.MaxOverTime),\n    createAggregationOverTime(PromOperationId.CountOverTime),\n    createAggregationOverTime(PromOperationId.LastOverTime),\n    createAggregationOverTime(PromOperationId.PresentOverTime),\n    createAggregationOverTime(PromOperationId.AbsentOverTime),\n    createAggregationOverTime(PromOperationId.StddevOverTime),\n  ];\n}\n\nexport function createAggregationOverTime(name: string): QueryBuilderOperationDef {\n  return {\n    id: name,\n    name: getPromAndLokiOperationDisplayName(name),\n    params: [getRangeVectorParamDef()],\n    defaultParams: ['$__interval'],\n    alternativesKey: 'overtime function',\n    category: PromVisualQueryOperationCategory.RangeFunctions,\n    renderer: operationWithRangeVectorRenderer,\n    addOperationHandler: addOperationWithRangeVector,\n  };\n}\n\nfunction operationWithRangeVectorRenderer(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string\n) {\n  let rangeVector = (model.params ?? [])[0] ?? '$__interval';\n  return `${def.id}(${innerExpr}[${rangeVector}])`;\n}\n","import { createAggregationOperation } from \"../../shared/operationUtils\";\nimport { PromOperationId } from \"../../types\";\n\nconst operationFunctions = [\n  PromOperationId.Any,\n  PromOperationId.Limitk,\n  PromOperationId.Mad,\n  PromOperationId.Median,\n  PromOperationId.Mode,\n  PromOperationId.Share,\n  PromOperationId.Stdvar,\n  PromOperationId.Sum2,\n  PromOperationId.Zscore\n]\n\nexport function getOperationFunctions () {\n  return operationFunctions.map(id => createAggregationOperation(id)).flat()\n}\n","import { createAggregationOverTime } from \"../../aggregations\";\nimport { PromOperationId } from \"../../types\";\n\nconst overTimeFunctions = [\n  PromOperationId.AscentOverTime,\n  PromOperationId.ChangesPrometheus,\n  PromOperationId.DecreasesOverTime,\n  PromOperationId.DefaultRollup,\n  PromOperationId.DeltaPrometheus,\n  PromOperationId.DerivFast,\n  PromOperationId.DescentOverTime,\n  PromOperationId.DistinctOverTime,\n  PromOperationId.FirstOverTime,\n  PromOperationId.GeomeanOverTime,\n  PromOperationId.HistogramOverTime,\n  PromOperationId.Ideriv,\n  PromOperationId.IncreasePrometheus,\n  PromOperationId.IncreasePure,\n  PromOperationId.IncreasesOverTime,\n  PromOperationId.Integrate,\n  PromOperationId.Lag,\n  PromOperationId.Lifetime,\n  PromOperationId.MadOverTime,\n  PromOperationId.MedianOverTime,\n  PromOperationId.ModeOverTime,\n  PromOperationId.RangeOverTime,\n  PromOperationId.RateOverSum,\n  PromOperationId.Rollup,\n  PromOperationId.RollupCandlestick,\n  PromOperationId.RollupDelta,\n  PromOperationId.RollupDeriv,\n  PromOperationId.RollupIncrease,\n  PromOperationId.RollupRate,\n  PromOperationId.RollupScrapeInterval,\n  PromOperationId.ScrapeInterval,\n  PromOperationId.StaleSamplesOverTime,\n  PromOperationId.StdvarOverTime,\n  PromOperationId.Sum2OverTime,\n  PromOperationId.TimestampWithName,\n  PromOperationId.TfirstOverTime,\n  PromOperationId.TlastChangeOverTime,\n  PromOperationId.TlastOverTime,\n  PromOperationId.TmaxOverTime,\n  PromOperationId.TminOverTime,\n  PromOperationId.ZscoreOverTime,\n  PromOperationId.HistogramAvg,\n  PromOperationId.HistogramStddev,\n  PromOperationId.HistogramStdvar,\n  PromOperationId.PrometheusBuckets,\n]\n\nexport function getOverTimeFunctions() {\n  return overTimeFunctions.map(id => createAggregationOverTime(id))\n}\n","import { createFunction } from \"../../operations\";\nimport { QueryBuilderOperationDef } from \"../../shared/types\";\nimport { PromOperationId } from \"../../types\";\n\nconst basicFunctions = [\n  PromOperationId.Abs,\n  PromOperationId.Interpolate,\n  PromOperationId.KeepLastValue,\n  PromOperationId.KeepNextValue,\n  PromOperationId.RangeAvg,\n  PromOperationId.RangeFirst,\n  PromOperationId.RangeLast,\n  PromOperationId.RangeLinearRegression,\n  PromOperationId.RangeMad,\n  PromOperationId.RangeMax,\n  PromOperationId.RangeMedian,\n  PromOperationId.RangeMin,\n  PromOperationId.RangeStddev,\n  PromOperationId.RangeStdvar,\n  PromOperationId.RangeSum,\n  PromOperationId.RangeZscore,\n  PromOperationId.RemoveResets,\n  PromOperationId.RunningAvg,\n  PromOperationId.RunningMax,\n  PromOperationId.RunningMin,\n  PromOperationId.RunningSum,\n  PromOperationId.Distinct,\n  PromOperationId.Geomean,\n  PromOperationId.Histogram\n]\n\nexport function getBasicFunctions(): QueryBuilderOperationDef[] {\n  return basicFunctions.map(id => createFunction({ id }))\n}\n","import { createFunction } from \"../../operations\";\nimport { QueryBuilderOperationDef } from \"../../shared/types\";\nimport { PromOperationId } from \"../../types\";\n\nconst bitmapFunctions = [\n  PromOperationId.BitmapAnd,\n  PromOperationId.BitmapOr,\n  PromOperationId.BitmapXor,\n]\n\nexport function getBitmapFunctions(): QueryBuilderOperationDef[] {\n  return bitmapFunctions.map(id => createFunction({\n    id,\n    params: [{ name: 'mask', type: 'number' }],\n    defaultParams: [1],\n  }))\n}\n","import { LabelParamEditor } from \"../../components/LabelParamEditor\";\nimport { createFunction } from \"../../operations\";\nimport { PromOperationId } from \"../../types\";\n\nconst labelFunctions = [\n  PromOperationId.LabelDel,\n  PromOperationId.LabelKeep,\n  PromOperationId.LabelLowercase,\n  PromOperationId.LabelUppercase,\n  PromOperationId.SortByLabel,\n  PromOperationId.SortByLabelDesc,\n  PromOperationId.SortByLabelNumeric,\n  PromOperationId.SortByLabelNumericDesc\n]\n\nexport function getBaseLabelFunctions () {\n  return labelFunctions.map(id => createFunction({\n    id: id,\n    params: [\n      {\n        name: 'Label',\n        type: 'string',\n        restParam: true,\n        optional: true,\n        editor: LabelParamEditor,\n      },\n    ],\n    defaultParams: [''],\n    renderer: (model, def, innerExpr) => {\n      return `${model.id}(${innerExpr}, ${model.params.map(item => `\"${item}\"`).join(', ')})`;\n    },\n    addOperationHandler: (def, query) => ({\n      ...query,\n      operations: [...query.operations, {\n        id: def.id,\n        params: def.defaultParams,\n      }],\n    }),\n  }))\n}\n","import { LabelParamEditor } from \"../../components/LabelParamEditor\";\nimport { createFunction } from \"../../operations\";\nimport { PromOperationId } from \"../../types\";\n\nconst copyMoveLabelFunctions = [\n  PromOperationId.LabelCopy,\n  PromOperationId.LabelMove\n]\n\nexport function getCopyMoveLabelFunctions() {\n  return copyMoveLabelFunctions.map(id => createFunction({\n    id: id,\n    params: [\n      {\n        name: 'src_label',\n        type: 'string',\n        restParam: true,\n        editor: LabelParamEditor,\n      },\n      {\n        name: 'dst_label',\n        type: 'string',\n        restParam: true,\n        editor: LabelParamEditor,\n      }\n    ],\n    defaultParams: ['', ''],\n    renderer: (model, def, innerExpr) => {\n      return `${model.id}(${innerExpr}, ${model.params.map(item => `\"${item}\"`).join(', ')})`;\n    },\n  }))\n}\n","import { createFunction } from \"../../operations\";\nimport { QueryBuilderOperationDef } from \"../../shared/types\";\nimport { PromOperationId } from \"../../types\";\n\nconst randFunctions = [\n  PromOperationId.Rand,\n  PromOperationId.RandExponential,\n  PromOperationId.RandNormal,\n]\n\nexport function getRandFunctions(): QueryBuilderOperationDef[] {\n  return randFunctions.map(id => createFunction({\n    id,\n    params: [{ name: 'seed', type: 'number', optional: true }],\n    defaultParams: [1],\n    renderer: (model) => `${model.id}(${model.params[0] ?? ''})`\n  }))\n}\n","import {\n  addOperationWithRangeVector,\n  createFunction,\n  operationTypeChangedHandlerForRangeFunction\n} from \"../../operations\";\nimport { getRangeVectorParamDef, rangeRendererRightWithParams } from \"../../shared/operationUtils\";\nimport { QueryBuilderOperationDef } from \"../../shared/types\";\nimport { PromOperationId, PromVisualQueryOperationCategory } from \"../../types\";\n\nconst rangeFunctions = [\n  // [id, param_name]\n  [PromOperationId.CountEqOverTime, 'eq'],\n  [PromOperationId.CountGtOverTime, 'gt'],\n  [PromOperationId.CountLeOverTime, 'le'],\n  [PromOperationId.CountNeOverTime, 'ne'],\n  [PromOperationId.DurationOverTime, 'max_interval'],\n  [PromOperationId.ShareGtOverTime, 'gt'],\n  [PromOperationId.ShareLeOverTime, 'le'],\n  [PromOperationId.ShareEqOverTime, 'eq']\n]\n\nexport function getRangeFunctions(): QueryBuilderOperationDef[] {\n  return rangeFunctions.map(id => createFunction({\n    id: id[0],\n    params: [getRangeVectorParamDef(), { name: id[1], type: 'number' }],\n    defaultParams: ['$__interval', 60],\n    alternativesKey: 'range function',\n    category: PromVisualQueryOperationCategory.RangeFunctions,\n    renderer: rangeRendererRightWithParams,\n    addOperationHandler: addOperationWithRangeVector,\n    changeTypeHandler: operationTypeChangedHandlerForRangeFunction,\n  }))\n}\n","import { createFunction } from \"../../operations\";\nimport { PromOperationId } from \"../../types\";\n\nconst simpleTimeFunctions = [\n  PromOperationId.End,\n  PromOperationId.Now,\n  PromOperationId.Start,\n  PromOperationId.Step,\n]\n\nexport function getSimpleTimeFunctions () {\n  return simpleTimeFunctions.map(id => createFunction({\n    id,\n    renderer: (model) => `${model.id}()`\n  }))\n}\n","import { createFunction } from \"../../operations\";\nimport { PromOperationId } from \"../../types\";\n\n// @ts-ignore\nconst timezones = Intl?.supportedValuesOf ? Intl.supportedValuesOf('timeZone') : [];\n\nexport function getTimezoneOffset() {\n  return createFunction({\n    id: PromOperationId.TimezoneOffset,\n    params: [{ name: 'tz', type: 'string', options: timezones }],\n    defaultParams: [''],\n  })\n}\n","import { createFunction } from \"../../operations\";\nimport { QueryBuilderOperation, QueryBuilderOperationDef } from \"../../shared/types\";\nimport { PromOperationId } from \"../../types\";\n\nconst TopBottomKFunctions = [\n  PromOperationId.BottomkAvg,\n  PromOperationId.BottomkLast,\n  PromOperationId.BottomkMax,\n  PromOperationId.BottomkMedian,\n  PromOperationId.BottomkMin,\n  PromOperationId.TopkAvg,\n  PromOperationId.TopkLast,\n  PromOperationId.TopkMax,\n  PromOperationId.TopkMedian,\n  PromOperationId.TopkMin\n]\n\nexport function getTopBottomKFunctions(): QueryBuilderOperationDef[] {\n  return TopBottomKFunctions.map(id => createFunction({\n    id: id,\n    params: [\n      { name: 'K-value', type: 'number' },\n      { name: 'other_label=other_value', type: 'string', optional: true },\n    ],\n    defaultParams: [5, ''],\n    renderer: (model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) => {\n      return `${model.id}(${model.params[0]}, ${innerExpr}, \"${model.params[1]}\")`;\n    },\n  }))\n}\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { Registry } from '@grafana/data';\n\nimport { PromVisualQueryOperationCategory } from '../types';\n\nimport { QueryBuilderLabelFilter, QueryBuilderOperation, QueryBuilderOperationDef, VisualQueryModeller } from './types';\n\nexport interface VisualQueryBinary<T> {\n  operator: string;\n  vectorMatchesType?: 'on' | 'ignoring';\n  vectorMatches?: string;\n  query: T;\n}\n\nexport interface PromLokiVisualQuery {\n  metric?: string;\n  labels: QueryBuilderLabelFilter[];\n  operations: QueryBuilderOperation[];\n  binaryQueries?: Array<VisualQueryBinary<PromLokiVisualQuery>>;\n}\n\nexport abstract class LokiAndPromQueryModellerBase implements VisualQueryModeller {\n  protected operationsRegistry: Registry<QueryBuilderOperationDef>;\n  private categories: string[] = [];\n\n  constructor(getOperations: () => QueryBuilderOperationDef[]) {\n    this.operationsRegistry = new Registry<QueryBuilderOperationDef>(getOperations);\n  }\n\n  protected setOperationCategories(categories: string[]) {\n    this.categories = categories;\n  }\n\n  getOperationsForCategory(category: string) {\n    return this.operationsRegistry.list().filter((op) => op.category === category && !op.hideFromList);\n  }\n\n  getAlternativeOperations(key: string) {\n    return this.operationsRegistry.list().filter((op) => op.alternativesKey && op.alternativesKey === key);\n  }\n\n  getCategories() {\n    return this.categories;\n  }\n\n  getOperationDef(id: string): QueryBuilderOperationDef | undefined {\n    return this.operationsRegistry.getIfExists(id);\n  }\n\n  renderOperations(queryString: string, operations: QueryBuilderOperation[]) {\n    for (const operation of operations) {\n      const def = this.operationsRegistry.getIfExists(operation.id);\n      if (!def) {\n        throw new Error(`Could not find operation ${operation.id} in the registry`);\n      }\n      queryString = def.renderer(operation, def, queryString);\n    }\n\n    return queryString;\n  }\n\n  renderBinaryQueries(queryString: string, binaryQueries?: Array<VisualQueryBinary<PromLokiVisualQuery>>) {\n    if (binaryQueries) {\n      for (const binQuery of binaryQueries) {\n        queryString = `${this.renderBinaryQuery(queryString, binQuery)}`;\n      }\n    }\n    return queryString;\n  }\n\n  private renderBinaryQuery(leftOperand: string, binaryQuery: VisualQueryBinary<PromLokiVisualQuery>) {\n    let result = leftOperand + ` ${binaryQuery.operator} `;\n\n    if (binaryQuery.vectorMatches) {\n      result += `${binaryQuery.vectorMatchesType}(${binaryQuery.vectorMatches}) `;\n    }\n\n    return result + this.renderQuery(binaryQuery.query, true);\n  }\n\n  renderLabels(labels: QueryBuilderLabelFilter[]) {\n    if (labels.length === 0) {\n      return '';\n    }\n\n    let expr = '{';\n    for (const filter of labels) {\n      if (expr !== '{') {\n        expr += ', ';\n      }\n\n      expr += `${filter.label}${filter.op}\"${filter.value}\"`;\n    }\n\n    return expr + `}`;\n  }\n\n  renderQuery(query: PromLokiVisualQuery, nested?: boolean) {\n    let queryString = `${query.metric ?? ''}${this.renderLabels(query.labels)}`;\n    queryString = this.renderOperations(queryString, query.operations);\n\n    if (!nested && this.hasBinaryOp(query) && Boolean(query.binaryQueries?.length)) {\n      queryString = `(${queryString})`;\n    }\n\n    queryString = this.renderBinaryQueries(queryString, query.binaryQueries);\n\n    if (nested && (this.hasBinaryOp(query) || Boolean(query.binaryQueries?.length))) {\n      queryString = `(${queryString})`;\n    }\n\n    return queryString;\n  }\n\n  hasBinaryOp(query: PromLokiVisualQuery): boolean {\n    return (\n      query.operations.find((op) => {\n        const def = this.getOperationDef(op.id);\n        return def?.category === PromVisualQueryOperationCategory.BinaryOps;\n      }) !== undefined\n    );\n  }\n}\n","import { FUNCTIONS } from '../metricsql';\n\nimport { getAggregationOperations } from './aggregations';\nimport { getMetricsqlFunctions } from './metricsql-functions';\nimport { getOperationDefinitions } from './operations';\nimport { LokiAndPromQueryModellerBase } from './shared/LokiAndPromQueryModellerBase';\nimport { PromQueryPattern, PromVisualQueryOperationCategory } from './types';\nexport class PromQueryModeller extends LokiAndPromQueryModellerBase {\n  constructor() {\n    super(() => {\n      const allOperations = [...getOperationDefinitions(), ...getAggregationOperations(), ...getMetricsqlFunctions()];\n      for (const op of allOperations) {\n        const func = FUNCTIONS.find((x) => x.insertText === op.id);\n        if (func) {\n          op.documentation = func.documentation;\n        }\n      }\n      return allOperations;\n    });\n\n    this.setOperationCategories(Object.values(PromVisualQueryOperationCategory));\n  }\n\n  getQueryPatterns(): PromQueryPattern[] {\n    return [\n      {\n        name: 'Rate then sum',\n        operations: [\n          { id: 'rate', params: ['$__rate_interval'] },\n          { id: 'sum', params: [] },\n        ],\n      },\n      {\n        name: 'Rate then sum by(label) then avg',\n        operations: [\n          { id: 'rate', params: ['$__rate_interval'] },\n          { id: '__sum_by', params: [''] },\n          { id: 'avg', params: [] },\n        ],\n      },\n      {\n        name: 'Histogram quantile on rate',\n        operations: [\n          { id: 'rate', params: ['$__rate_interval'] },\n          { id: '__sum_by', params: ['le'] },\n          { id: 'histogram_quantile', params: [0.95] },\n        ],\n      },\n      {\n        name: 'Histogram quantile on increase ',\n        operations: [\n          { id: 'increase', params: ['$__rate_interval'] },\n          { id: '__max_by', params: ['le'] },\n          { id: 'histogram_quantile', params: [0.95] },\n        ],\n      },\n    ];\n  }\n}\n\nexport const promQueryModeller = new PromQueryModeller();\n","import { QueryBuilderOperationDef } from \"../../shared/types\";\n\nimport { getLabelMap } from \"./labelMap\";\nimport { getLabelSet } from \"./labelSet\";\nimport { getBaseLabelFunctions } from \"./labelsBasic\";\nimport { getCopyMoveLabelFunctions } from \"./labelsCopyMove\";\n\nexport function getLabelFunctions(): QueryBuilderOperationDef[] {\n  return [\n    ...getCopyMoveLabelFunctions(),\n    ...getBaseLabelFunctions(),\n    getLabelMap(),\n    getLabelSet(),\n  ]\n}\n","import { LabelParamEditor } from \"../../components/LabelParamEditor\";\nimport { createFunction } from \"../../operations\";\nimport { PromOperationId } from \"../../types\";\n\nexport function getLabelMap() {\n  return  createFunction({\n    id: PromOperationId.LabelMap,\n    params: [\n      {\n        name: 'Label',\n        type: 'string',\n        editor: LabelParamEditor,\n      },\n      {\n        name: 'src_value',\n        type: 'string',\n        restParam: true,\n      },\n      {\n        name: 'dst_value',\n        type: 'string',\n        restParam: true,\n      }\n    ],\n    defaultParams: ['', '', ''],\n    renderer: (model, def, innerExpr) => {\n      return `${model.id}(${innerExpr}, ${model.params.map(item => `\"${item}\"`).join(', ')})`;\n    },\n  })\n}\n","import { LabelParamEditor } from \"../../components/LabelParamEditor\";\nimport { createFunction } from \"../../operations\";\nimport { PromOperationId } from \"../../types\";\n\nexport function getLabelSet() {\n  return createFunction({\n    id: PromOperationId.LabelSet,\n    params: [\n      {\n        name: 'Label',\n        type: 'string',\n        restParam: true,\n        editor: LabelParamEditor,\n      },\n      {\n        name: 'Value',\n        type: 'string',\n        restParam: true,\n      }\n    ],\n    defaultParams: ['', ''],\n    renderer: (model, def, innerExpr) => {\n      return `${model.id}(${innerExpr}, ${model.params.map(item => `\"${item}\"`).join(', ')})`;\n    },\n  })\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-12-01: remove unused arguments from 'varTypeFunc'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { SyntaxNode, TreeCursor } from '@lezer/common';\n\nimport { QueryBuilderOperation } from './types';\n\n// This is used for error type for some reason\nexport const ErrorName = '⚠';\n\nexport function getLeftMostChild(cur: SyntaxNode): SyntaxNode {\n  return cur.firstChild ? getLeftMostChild(cur.firstChild) : cur;\n}\n\nexport function makeError(expr: string, node: SyntaxNode) {\n  return {\n    text: getString(expr, node),\n    // TODO: this are positions in the string with the replaced variables. Means it cannot be used to show exact\n    //  placement of the error for the user. We need some translation table to positions before the variable\n    //  replace.\n    from: node.from,\n    to: node.to,\n    parentType: node.parent?.name,\n  };\n}\n\n// Taken from template_srv, but copied so to not mess with the regex.index which is manipulated in the service\n/*\n * This regex matches 3 types of variable reference with an optional format specifier\n * \\$(\\w+)                          $var1\n * \\[\\[([\\s\\S]+?)(?::(\\w+))?\\]\\]    [[var2]] or [[var2:fmt2]]\n * \\${(\\w+)(?::(\\w+))?}             ${var3} or ${var3:fmt3}\n */\nconst variableRegex = /\\$(\\w+)|\\[\\[([\\s\\S]+?)(?::(\\w+))?\\]\\]|\\${(\\w+)(?:\\.([^:^\\}]+))?(?::([^\\}]+))?}/g;\n\n/**\n * As variables with $ are creating parsing errors, we first replace them with magic string that is parsable and at\n * the same time we can get the variable and its format back from it.\n * @param expr\n */\nexport function replaceVariables(expr: string) {\n  return expr.replace(variableRegex, (match, var1, var2, fmt2, var3, fieldPath, fmt3) => {\n    const fmt = fmt2 || fmt3;\n    let variable = var1;\n    let varType = '0';\n\n    if (var2) {\n      variable = var2;\n      varType = '1';\n    }\n\n    if (var3) {\n      variable = var3;\n      varType = '2';\n    }\n\n    return `__V_${varType}__` + variable + '__V__' + (fmt ? '__F__' + fmt + '__F__' : '');\n  });\n}\n\nconst varTypeFunc = [\n  (v: string) => `\\$${v}`,\n  (v: string, f?: string) => `[[${v}${f ? `:${f}` : ''}]]`,\n  (v: string, f?: string) => `\\$\\{${v}${f ? `:${f}` : ''}\\}`,\n];\n\n/**\n * Get back the text with variables in their original format.\n * @param expr\n */\nexport function returnVariables(expr: string) {\n  return expr.replace(/__V_(\\d)__(.+?)__V__(?:__F__(\\w+)__F__)?/g, (match, type, v, f) => {\n    return varTypeFunc[parseInt(type, 10)](v, f);\n  });\n}\n\n/**\n * Get the actual string of the expression. That is not stored in the tree so we have to get the indexes from the node\n * and then based on that get it from the expression.\n * @param expr\n * @param node\n */\nexport function getString(expr: string, node: SyntaxNode | TreeCursor | null | undefined) {\n  if (!node) {\n    return '';\n  }\n  return returnVariables(expr.substring(node.from, node.to));\n}\n\n/**\n * Create simple scalar binary op object.\n * @param opDef - definition of the op to be created\n * @param expr\n * @param numberNode - the node for the scalar\n * @param hasBool - whether operation has a bool modifier. Is used only for ops for which it makes sense.\n */\nexport function makeBinOp(\n  opDef: { id: string; comparison?: boolean },\n  expr: string,\n  numberNode: SyntaxNode,\n  hasBool: boolean\n): QueryBuilderOperation {\n  const params: any[] = [parseFloat(getString(expr, numberNode))];\n  if (opDef.comparison) {\n    params.push(hasBool);\n  }\n  return {\n    id: opDef.id,\n    params,\n  };\n}\n\n/**\n * Get all nodes with type in the tree. This traverses the tree so it is safe only when you know there shouldn't be\n * too much nesting but you just want to skip some of the wrappers. For example getting function args this way would\n * not be safe is it would also find arguments of nested functions.\n * @param expr\n * @param cur\n * @param type - can be string or number, some data-sources (loki) haven't migrated over to using numeric constants defined in the lezer parsing library (e.g. lezer-promql).\n * @todo Remove string type definition when all data-sources have migrated to numeric constants\n */\nexport function getAllByType(expr: string, cur: SyntaxNode, type: number | string): string[] {\n  if (cur.type.id === type || cur.name === type) {\n    return [getString(expr, cur)];\n  }\n  const values: string[] = [];\n  let pos = 0;\n  let child = cur.childAfter(pos);\n  while (child) {\n    values.push(...getAllByType(expr, child, type));\n    pos = child.to;\n    child = cur.childAfter(pos);\n  }\n  return values;\n}\n\n// Debugging function for convenience. Gives you nice output similar to linux tree util.\n// @ts-ignore\nexport function log(expr: string, cur?: SyntaxNode) {\n  if (!cur) {\n    console.log('<empty>');\n    return;\n  }\n  const json = toJson(expr, cur);\n  const text = jsonToText(json);\n\n  if (!text) {\n    console.log('<empty>');\n    return;\n  }\n  console.log(text);\n}\n\nfunction toJson(expr: string, cur: SyntaxNode) {\n  const treeJson: any = {};\n  const name = nodeToString(expr, cur);\n  const children = [];\n\n  let pos = 0;\n  let child = cur.childAfter(pos);\n  while (child) {\n    children.push(toJson(expr, child));\n    pos = child.to;\n    child = cur.childAfter(pos);\n  }\n\n  treeJson.name = name;\n  treeJson.children = children;\n  return treeJson;\n}\n\ntype JsonNode = {\n  name: string;\n  children: JsonNode[];\n};\n\nfunction jsonToText(\n  node: JsonNode,\n  context: { lastChild: boolean; indent: string } = {\n    lastChild: true,\n    indent: '',\n  }\n) {\n  const name = node.name;\n  const { lastChild, indent } = context;\n  const newIndent = indent !== '' ? indent + (lastChild ? '└─' : '├─') : '';\n  let text = newIndent + name;\n\n  const children = node.children;\n  children.forEach((child: any, index: number) => {\n    const isLastChild = index === children.length - 1;\n    text +=\n      '\\n' +\n      jsonToText(child, {\n        lastChild: isLastChild,\n        indent: indent + (lastChild ? '  ' : '│ '),\n      });\n  });\n\n  return text;\n}\n\nfunction nodeToString(expr: string, node: SyntaxNode) {\n  return node.name + ': ' + getString(expr, node);\n}\n","import { SyntaxNode } from '@lezer/common';\nimport {\n  AggregateExpr,\n  AggregateModifier,\n  AggregateOp,\n  BinaryExpr,\n  BinModifiers,\n  Expr,\n  FunctionCall,\n  FunctionCallArgs,\n  FunctionCallBody,\n  FunctionIdentifier,\n  GroupingLabel,\n  GroupingLabelList,\n  GroupingLabels,\n  LabelMatcher,\n  LabelName,\n  MatchOp,\n  MetricIdentifier,\n  NumberLiteral,\n  On,\n  OnOrIgnoring,\n  ParenExpr,\n  parser,\n  StringLiteral,\n  VectorSelector,\n  Without,\n} from 'lezer-metricsql';\n\nimport { binaryScalarOperatorToOperatorName } from './binaryScalarOperations';\nimport {\n  ErrorName,\n  getAllByType,\n  getLeftMostChild,\n  getString,\n  makeBinOp,\n  makeError,\n  replaceVariables,\n} from './shared/parsingUtils';\nimport { QueryBuilderLabelFilter, QueryBuilderOperation } from './shared/types';\nimport { PromVisualQuery, PromVisualQueryBinary } from './types';\n\n/**\n * Parses a PromQL query into a visual query model.\n *\n * It traverses the tree and uses sort of state machine to update the query model. The query model is modified\n * during the traversal and sent to each handler as context.\n *\n * @param expr\n */\nexport function buildVisualQueryFromString(expr: string): Context {\n  const replacedExpr = replaceVariables(expr);\n  const tree = parser.parse(replacedExpr);\n  const node = tree.topNode;\n\n  // This will be modified in the handlers.\n  const visQuery: PromVisualQuery = {\n    metric: '',\n    labels: [],\n    operations: [],\n  };\n  const context: Context = {\n    query: visQuery,\n    errors: [],\n  };\n\n  try {\n    // @ts-ignore\n    handleExpression(replacedExpr, node, context);\n  } catch (err) {\n    // Not ideal to log it here, but otherwise we would lose the stack trace.\n    console.error(err);\n    if (err instanceof Error) {\n      context.errors.push({\n        text: err.message,\n      });\n    }\n  }\n\n  // If we have empty query, we want to reset errors\n  if (isEmptyQuery(context.query)) {\n    context.errors = [];\n  }\n  return context;\n}\n\ninterface ParsingError {\n  text: string;\n  from?: number;\n  to?: number;\n  parentType?: string;\n}\n\ninterface Context {\n  query: PromVisualQuery;\n  errors: ParsingError[];\n}\n\n// Although 0 isn't explicitly provided in the lezer-promql library as the error node ID, it does appear to be the ID of error nodes within lezer.\nconst ErrorId = 0;\n\n/**\n * Handler for default state. It will traverse the tree and call the appropriate handler for each node. The node\n * handled here does not necessarily need to be of type == Expr.\n * @param expr\n * @param node\n * @param context\n */\nexport function handleExpression(expr: string, node: SyntaxNode, context: Context) {\n  const visQuery = context.query;\n\n  switch (node.type.id) {\n    case MetricIdentifier: {\n      // Expectation is that there is only one of those per query.\n      visQuery.metric = getString(expr, node);\n      break;\n    }\n\n    case LabelMatcher: {\n      // Same as MetricIdentifier should be just one per query.\n      visQuery.labels.push(getLabel(expr, node));\n      const err = node.getChild(ErrorName);\n      if (err) {\n        context.errors.push(makeError(expr, err));\n      }\n      break;\n    }\n\n    case FunctionCall: {\n      handleFunction(expr, node, context);\n      break;\n    }\n\n    case AggregateExpr: {\n      handleAggregation(expr, node, context);\n      break;\n    }\n\n    case BinaryExpr: {\n      handleBinary(expr, node, context);\n      break;\n    }\n\n    case ErrorId: {\n      if (isIntervalVariableError(node)) {\n        break;\n      }\n      context.errors.push(makeError(expr, node));\n      break;\n    }\n\n    default: {\n      if (node.type.id === ParenExpr) {\n        // We don't support parenthesis in the query to group expressions. We just report error but go on with the\n        // parsing.\n        context.errors.push(makeError(expr, node));\n      }\n      // Any other nodes we just ignore and go to its children. This should be fine as there are lots of wrapper\n      // nodes that can be skipped.\n      // TODO: there are probably cases where we will just skip nodes we don't support and we should be able to\n      //  detect those and report back.\n      let child = node.firstChild;\n      while (child) {\n        handleExpression(expr, child, context);\n        child = child.nextSibling;\n      }\n    }\n  }\n}\n\nfunction isIntervalVariableError(node: SyntaxNode) {\n  return node.prevSibling?.type.id === Expr && node.prevSibling?.firstChild?.type.id === VectorSelector;\n}\n\nfunction getLabel(expr: string, node: SyntaxNode): QueryBuilderLabelFilter {\n  const label = getString(expr, node.getChild(LabelName));\n  const op = getString(expr, node.getChild(MatchOp));\n  const value = getString(expr, node.getChild(StringLiteral)).replace(/\"/g, '');\n  return {\n    label,\n    op,\n    value,\n  };\n}\n\nconst rangeFunctions = ['changes', 'rate', 'irate', 'increase', 'delta'];\n\n/**\n * Handle function call which is usually and identifier and its body > arguments.\n * @param expr\n * @param node\n * @param context\n */\nfunction handleFunction(expr: string, node: SyntaxNode, context: Context) {\n  const visQuery = context.query;\n  const nameNode = node.getChild(FunctionIdentifier);\n  const funcName = getString(expr, nameNode);\n\n  const body = node.getChild(FunctionCallBody);\n  const callArgs = body!.getChild(FunctionCallArgs);\n  const params = [];\n  let interval = '';\n\n  // This is a bit of a shortcut to get the interval argument. Reasons are\n  // - interval is not part of the function args per promQL grammar but we model it as argument for the function in\n  //   the query model.\n  // - it is easier to handle template variables this way as template variable is an error for the parser\n  if (rangeFunctions.includes(funcName) || funcName.endsWith('_over_time')) {\n    let match = getString(expr, node).match(/(?<!\\{[^}]*)\\[(.+?)](?![^{]*})/);\n    if (match?.[1]) {\n      interval = match[1];\n      params.push(match[1]);\n    }\n  }\n\n  const op = { id: funcName, params };\n  // We unshift operations to keep the more natural order that we want to have in the visual query editor.\n  visQuery.operations.unshift(op);\n\n  if (callArgs) {\n    if (getString(expr, callArgs) === interval + ']') {\n      // This is a special case where we have a function with a single argument and it is the interval.\n      // This happens when you start adding operations in query builder and did not set a metric yet.\n      return;\n    }\n    updateFunctionArgs(expr, callArgs, context, op);\n  }\n}\n\n/**\n * Handle aggregation as they are distinct type from other functions.\n * @param expr\n * @param node\n * @param context\n */\nfunction handleAggregation(expr: string, node: SyntaxNode, context: Context) {\n  const visQuery = context.query;\n  const nameNode = node.getChild(AggregateOp);\n  let funcName = getString(expr, nameNode);\n\n  const modifier = node.getChild(AggregateModifier);\n  const labels = [];\n\n  if (modifier) {\n    const byModifier = modifier.getChild('By');\n    if (byModifier && funcName) {\n      funcName = `__${funcName}_by`;\n    }\n\n    const withoutModifier = modifier.getChild(Without);\n    if (withoutModifier) {\n      funcName = `__${funcName}_without`;\n    }\n\n    labels.push(...getAllByType(expr, modifier, GroupingLabel));\n  }\n\n  const body = node.getChild(FunctionCallBody);\n  const callArgs = body!.getChild(FunctionCallArgs);\n\n  const op: QueryBuilderOperation = { id: funcName, params: [] };\n  visQuery.operations.unshift(op);\n  updateFunctionArgs(expr, callArgs, context, op);\n  // We add labels after params in the visual query editor.\n  op.params.push(...labels);\n}\n\n/**\n * Handle (probably) all types of arguments that function or aggregation can have.\n *\n *  FunctionCallArgs are nested bit weirdly basically its [firstArg, ...rest] where rest is again FunctionCallArgs so\n *  we cannot just get all the children and iterate them as arguments we have to again recursively traverse through\n *  them.\n *\n * @param expr\n * @param node\n * @param context\n * @param op - We need the operation to add the params to as an additional context.\n */\nfunction updateFunctionArgs(expr: string, node: SyntaxNode | null, context: Context, op: QueryBuilderOperation) {\n  if (!node) {\n    return;\n  }\n  switch (node.type.id) {\n    // In case we have an expression we don't know what kind so we have to look at the child as it can be anything.\n    case Expr:\n    // FunctionCallArgs are nested bit weirdly as mentioned so we have to go one deeper in this case.\n    case FunctionCallArgs: {\n      let child = node.firstChild;\n      while (child) {\n        updateFunctionArgs(expr, child, context, op);\n        child = child.nextSibling;\n      }\n      break;\n    }\n\n    case NumberLiteral: {\n      op.params.push(parseFloat(getString(expr, node)));\n      break;\n    }\n\n    case StringLiteral: {\n      op.params.push(getString(expr, node).replace(/\"/g, ''));\n      break;\n    }\n\n    default: {\n      // Means we get to something that does not seem like simple function arg and is probably nested query so jump\n      // back to main context\n      handleExpression(expr, node, context);\n    }\n  }\n}\n\n/**\n * Right now binary expressions can be represented in 2 way in visual query. As additional operation in case it is\n * just operation with scalar or it creates a binaryQuery when it's 2 queries.\n * @param expr\n * @param node\n * @param context\n */\nfunction handleBinary(expr: string, node: SyntaxNode, context: Context) {\n  const visQuery = context.query;\n  const left = node.firstChild!;\n  const op = getString(expr, left.nextSibling);\n  const binModifier = getBinaryModifier(expr, node.getChild(BinModifiers));\n\n  const right = node.lastChild!;\n\n  const opDef = binaryScalarOperatorToOperatorName[op];\n\n  const leftNumber = left.getChild(NumberLiteral);\n  const rightNumber = right.getChild(NumberLiteral);\n\n  const rightBinary = right.getChild(BinaryExpr);\n\n  if (leftNumber) {\n    // TODO: this should be already handled in case parent is binary expression as it has to be added to parent\n    //  if query starts with a number that isn't handled now.\n  } else {\n    // If this is binary we don't really know if there is a query or just chained scalars. So\n    // we have to traverse a bit deeper to know\n    handleExpression(expr, left, context);\n  }\n\n  if (rightNumber) {\n    visQuery.operations.push(makeBinOp(opDef, expr, right, !!binModifier?.isBool));\n  } else if (rightBinary) {\n    // Due to the way binary ops are parsed we can get a binary operation on the right that starts with a number which\n    // is a factor for a current binary operation. So we have to add it as an operation now.\n    const leftMostChild = getLeftMostChild(right);\n    if (leftMostChild?.type.id === NumberLiteral) {\n      visQuery.operations.push(makeBinOp(opDef, expr, leftMostChild, !!binModifier?.isBool));\n    }\n\n    // If we added the first number literal as operation here we still can continue and handle the rest as the first\n    // number will be just skipped.\n    handleExpression(expr, right, context);\n  } else {\n    visQuery.binaryQueries = visQuery.binaryQueries || [];\n    const binQuery: PromVisualQueryBinary = {\n      operator: op,\n      query: {\n        metric: '',\n        labels: [],\n        operations: [],\n      },\n    };\n    if (binModifier?.isMatcher) {\n      binQuery.vectorMatchesType = binModifier.matchType;\n      binQuery.vectorMatches = binModifier.matches;\n    }\n    visQuery.binaryQueries.push(binQuery);\n    handleExpression(expr, right, {\n      query: binQuery.query,\n      errors: context.errors,\n    });\n  }\n}\n\nfunction getBinaryModifier(\n  expr: string,\n  node: SyntaxNode | null\n):\n  | { isBool: true; isMatcher: false }\n  | { isBool: false; isMatcher: true; matches: string; matchType: 'ignoring' | 'on' }\n  | undefined {\n  if (!node) {\n    return undefined;\n  }\n  if (node.getChild('Bool')) {\n    return { isBool: true, isMatcher: false };\n  } else {\n    const matcher = node.getChild(OnOrIgnoring);\n    if (!matcher) {\n      // Not sure what this could be, maybe should be an error.\n      return undefined;\n    }\n    const labels = getString(expr, matcher.getChild(GroupingLabels)?.getChild(GroupingLabelList));\n    return {\n      isMatcher: true,\n      isBool: false,\n      matches: labels,\n      matchType: matcher.getChild(On) ? 'on' : 'ignoring',\n    };\n  }\n}\n\nfunction isEmptyQuery(query: PromVisualQuery) {\n  return query.labels.length === 0 && query.operations.length === 0 && !query.metric;\n}\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { parser, VectorSelector } from 'lezer-metricsql';\n\nimport { PromQueryModeller } from './querybuilder/PromQueryModeller';\nimport { buildVisualQueryFromString } from './querybuilder/parsing';\nimport { QueryBuilderLabelFilter } from './querybuilder/shared/types';\nimport { PromVisualQuery } from './querybuilder/types';\n\n/**\n * Adds label filter to existing query. Useful for query modification for example for ad hoc filters.\n *\n * It uses PromQL parser to find instances of metric and labels, alters them and then splices them back into the query.\n * Ideally we could use the parse -> change -> render is a simple 3 steps but right now building the visual query\n * object does not support all possible queries.\n *\n * So instead this just operates on substrings of the query with labels and operates just on those. This makes this\n * more robust and can alter even invalid queries, and preserves in general the query structure and whitespace.\n * @param query\n * @param key\n * @param value\n * @param operator\n */\nexport function addLabelToQuery(query: string, key: string, value: string | number, operator = '='): string {\n  if (!key || !value) {\n    throw new Error('Need label to add to query.');\n  }\n\n  const vectorSelectorPositions = getVectorSelectorPositions(query);\n  if (!vectorSelectorPositions.length) {\n    return query;\n  }\n\n  const filter = toLabelFilter(key, value, operator);\n  return addFilter(query, vectorSelectorPositions, filter);\n}\n\ntype VectorSelectorPosition = { from: number; to: number; query: PromVisualQuery };\n\n/**\n * Parse the string and get all VectorSelector positions in the query together with parsed representation of the vector\n * selector.\n * @param query\n */\nfunction getVectorSelectorPositions(query: string): VectorSelectorPosition[] {\n  const tree = parser.parse(query);\n  const positions: VectorSelectorPosition[] = [];\n  tree.iterate({\n    enter: ({ to, from, type }): false | void => {\n      if (type.id === VectorSelector) {\n        const visQuery = buildVisualQueryFromString(query.substring(from, to));\n        positions.push({ query: visQuery.query, from, to });\n        return false;\n      }\n    },\n  });\n  return positions;\n}\n\nfunction toLabelFilter(key: string, value: string | number, operator: string): QueryBuilderLabelFilter {\n  // We need to make sure that we convert the value back to string because it may be a number\n  const transformedValue = value === Infinity ? '+Inf' : value.toString();\n  return { label: key, op: operator, value: transformedValue };\n}\n\nfunction addFilter(\n  query: string,\n  vectorSelectorPositions: VectorSelectorPosition[],\n  filter: QueryBuilderLabelFilter\n): string {\n  const modeller = new PromQueryModeller();\n  let newQuery = '';\n  let prev = 0;\n\n  for (let i = 0; i < vectorSelectorPositions.length; i++) {\n    // This is basically just doing splice on a string for each matched vector selector.\n\n    const match = vectorSelectorPositions[i];\n    const isLast = i === vectorSelectorPositions.length - 1;\n\n    const start = query.substring(prev, match.from);\n    const end = isLast ? query.substring(match.to) : '';\n\n    if (!labelExists(match.query.labels, filter)) {\n      // We don't want to add duplicate labels.\n      match.query.labels.push(filter);\n    }\n    const newLabels = modeller.renderQuery(match.query);\n    newQuery += start + newLabels + end;\n    prev = match.to;\n  }\n  return newQuery;\n}\n\n/**\n * Check if label exists in the list of labels but ignore the operator.\n * @param labels\n * @param filter\n */\nfunction labelExists(labels: QueryBuilderLabelFilter[], filter: QueryBuilderLabelFilter) {\n  return labels.find((label) => label.label === filter.label && label.value === filter.value);\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-14: add enum AbstractLabelOperator\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { invert } from 'lodash';\nimport { Token } from 'prismjs';\n\nimport { AbstractQuery, AbstractLabelMatcher, DateTime, dateMath } from '@grafana/data';\nimport { DataQuery } from '@grafana/schema'\n\nimport { addLabelToQuery } from './add_label_to_query';\nimport { SUGGESTIONS_LIMIT } from './language_provider';\nimport { PromMetricsMetadata, PromMetricsMetadataItem } from './types';\n\nexport const processHistogramMetrics = (metrics: string[]) => {\n  const resultSet: Set<string> = new Set();\n  const regexp = new RegExp('_bucket($|:)');\n  for (let index = 0; index < metrics.length; index++) {\n    const metric = metrics[index];\n    const isHistogramValue = regexp.test(metric);\n    if (isHistogramValue) {\n      resultSet.add(metric);\n    }\n  }\n  return [...resultSet];\n};\n\nexport function processLabels(labels: Array<{ [key: string]: string }>, withName = false) {\n  // For processing we are going to use sets as they have significantly better performance than arrays\n  // After we process labels, we will convert sets to arrays and return object with label values in arrays\n  const valueSet: { [key: string]: Set<string> } = {};\n  labels.forEach((label) => {\n    const { __name__, ...rest } = label;\n    if (withName) {\n      valueSet['__name__'] = valueSet['__name__'] || new Set();\n      if (!valueSet['__name__'].has(__name__)) {\n        valueSet['__name__'].add(__name__);\n      }\n    }\n\n    Object.keys(rest).forEach((key) => {\n      if (!valueSet[key]) {\n        valueSet[key] = new Set();\n      }\n      if (!valueSet[key].has(rest[key])) {\n        valueSet[key].add(rest[key]);\n      }\n    });\n  });\n\n  // valueArray that we are going to return in the object\n  const valueArray: { [key: string]: string[] } = {};\n  limitSuggestions(Object.keys(valueSet)).forEach((key) => {\n    valueArray[key] = limitSuggestions(Array.from(valueSet[key]));\n  });\n\n  return { values: valueArray, keys: Object.keys(valueArray) };\n}\n\n// const cleanSelectorRegexp = /\\{(\\w+=\"[^\"\\n]*?\")(,\\w+=\"[^\"\\n]*?\")*\\}/;\nexport const selectorRegexp = /\\{[^}]*?(\\}|$)/;\nexport const labelRegexp = /\\b(\\w+)(!?=~?)(\"[^\"\\n]*?\")/g;\nexport function parseSelector(query: string, cursorOffset = 1): { labelKeys: any[]; selector: string } {\n  if (!query.match(selectorRegexp)) {\n    // Special matcher for metrics\n    if (query.match(/^[A-Za-z:][\\w:]*$/)) {\n      return {\n        selector: `{__name__=\"${query}\"}`,\n        labelKeys: ['__name__'],\n      };\n    }\n    throw new Error('Query must contain a selector: ' + query);\n  }\n\n  // Check if inside a selector\n  const prefix = query.slice(0, cursorOffset);\n  const prefixOpen = prefix.lastIndexOf('{');\n  const prefixClose = prefix.lastIndexOf('}');\n  if (prefixOpen === -1) {\n    throw new Error('Not inside selector, missing open brace: ' + prefix);\n  }\n  if (prefixClose > -1 && prefixClose > prefixOpen) {\n    throw new Error('Not inside selector, previous selector already closed: ' + prefix);\n  }\n  const suffix = query.slice(cursorOffset);\n  const suffixCloseIndex = suffix.indexOf('}');\n  const suffixClose = suffixCloseIndex + cursorOffset;\n  const suffixOpenIndex = suffix.indexOf('{');\n  const suffixOpen = suffixOpenIndex + cursorOffset;\n  if (suffixClose === -1) {\n    throw new Error('Not inside selector, missing closing brace in suffix: ' + suffix);\n  }\n  if (suffixOpenIndex > -1 && suffixOpen < suffixClose) {\n    throw new Error('Not inside selector, next selector opens before this one closed: ' + suffix);\n  }\n\n  // Extract clean labels to form clean selector, incomplete labels are dropped\n  const selector = query.slice(prefixOpen, suffixClose);\n  const labels: { [key: string]: { value: string; operator: string } } = {};\n  selector.replace(labelRegexp, (label, key, operator, value) => {\n    const labelOffset = query.indexOf(label);\n    const valueStart = labelOffset + key.length + operator.length + 1;\n    const valueEnd = labelOffset + key.length + operator.length + value.length - 1;\n    // Skip label if cursor is in value\n    if (cursorOffset < valueStart || cursorOffset > valueEnd) {\n      labels[key] = { value, operator };\n    }\n    return '';\n  });\n\n  // Add metric if there is one before the selector\n  const metricPrefix = query.slice(0, prefixOpen);\n  const metricMatch = metricPrefix.match(/[A-Za-z:][\\w:]*$/);\n  if (metricMatch) {\n    labels['__name__'] = { value: `\"${metricMatch[0]}\"`, operator: '=' };\n  }\n\n  // Build sorted selector\n  const labelKeys = Object.keys(labels).sort();\n  const cleanSelector = labelKeys.map((key) => `${key}${labels[key].operator}${labels[key].value}`).join(',');\n\n  const selectorString = ['{', cleanSelector, '}'].join('');\n\n  return { labelKeys, selector: selectorString };\n}\n\nexport function expandRecordingRules(query: string, mapping: { [name: string]: string }): string {\n  const ruleNames = Object.keys(mapping);\n  const rulesRegex = new RegExp(`(\\\\s|^)(${ruleNames.join('|')})(\\\\s|$|\\\\(|\\\\[|\\\\{)`, 'ig');\n  const expandedQuery = query.replace(rulesRegex, (match, pre, name, post) => `${pre}${mapping[name]}${post}`);\n\n  // Split query into array, so if query uses operators, we can correctly add labels to each individual part.\n  const queryArray = expandedQuery.split(/(\\+|\\-|\\*|\\/|\\%|\\^)/);\n\n  // Regex that matches occurrences of ){ or }{ or ]{ which is a sign of incorrecly added labels.\n  const invalidLabelsRegex = /(\\)\\{|\\}\\{|\\]\\{)/;\n  const correctlyExpandedQueryArray = queryArray.map((query) => {\n    return addLabelsToExpression(query, invalidLabelsRegex);\n  });\n\n  return correctlyExpandedQueryArray.join('');\n}\n\nfunction addLabelsToExpression(expr: string, invalidLabelsRegexp: RegExp) {\n  const match = expr.match(invalidLabelsRegexp);\n  if (!match) {\n    return expr;\n  }\n\n  // Split query into 2 parts - before the invalidLabelsRegex match and after.\n  const indexOfRegexMatch = match.index ?? 0;\n  const exprBeforeRegexMatch = expr.slice(0, indexOfRegexMatch + 1);\n  const exprAfterRegexMatch = expr.slice(indexOfRegexMatch + 1);\n\n  // Create arrayOfLabelObjects with label objects that have key, operator and value.\n  const arrayOfLabelObjects: Array<{ key: string; operator: string; value: string }> = [];\n  exprAfterRegexMatch.replace(labelRegexp, (label, key, operator, value) => {\n    arrayOfLabelObjects.push({ key, operator, value });\n    return '';\n  });\n\n  // Loop through all label objects and add them to query.\n  // As a starting point we have valid query without the labels.\n  let result = exprBeforeRegexMatch;\n  arrayOfLabelObjects.filter(Boolean).forEach((obj) => {\n    // Remove extra set of quotes from obj.value\n    const value = obj.value.slice(1, -1);\n    result = addLabelToQuery(result, obj.key, value, obj.operator);\n  });\n\n  return result;\n}\n\n/**\n * Adds metadata for synthetic metrics for which the API does not provide metadata.\n * See https://github.com/grafana/grafana/issues/22337 for details.\n *\n * @param metadata HELP and TYPE metadata from /api/v1/metadata\n */\nexport function fixSummariesMetadata(metadata: { [metric: string]: PromMetricsMetadataItem[] }): PromMetricsMetadata {\n  if (!metadata) {\n    return metadata;\n  }\n  const baseMetadata: PromMetricsMetadata = {};\n  const summaryMetadata: PromMetricsMetadata = {};\n  for (const metric in metadata) {\n    // NOTE: based on prometheus-documentation, we can receive\n    // multiple metadata-entries for the given metric, it seems\n    // it happens when the same metric is on multiple targets\n    // and their help-text differs\n    // (https://prometheus.io/docs/prometheus/latest/querying/api/#querying-metric-metadata)\n    // for now we just use the first entry.\n    const item = metadata[metric][0];\n    baseMetadata[metric] = item;\n\n    if (item.type === 'histogram') {\n      summaryMetadata[`${metric}_bucket`] = {\n        type: 'counter',\n        help: `Cumulative counters for the observation buckets (${item.help})`,\n      };\n      summaryMetadata[`${metric}_count`] = {\n        type: 'counter',\n        help: `Count of events that have been observed for the histogram metric (${item.help})`,\n      };\n      summaryMetadata[`${metric}_sum`] = {\n        type: 'counter',\n        help: `Total sum of all observed values for the histogram metric (${item.help})`,\n      };\n    }\n    if (item.type === 'summary') {\n      summaryMetadata[`${metric}_count`] = {\n        type: 'counter',\n        help: `Count of events that have been observed for the base metric (${item.help})`,\n      };\n      summaryMetadata[`${metric}_sum`] = {\n        type: 'counter',\n        help: `Total sum of all observed values for the base metric (${item.help})`,\n      };\n    }\n  }\n  // Synthetic series\n  const syntheticMetadata: PromMetricsMetadata = {};\n  syntheticMetadata['ALERTS'] = {\n    type: 'counter',\n    help: 'Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state.',\n  };\n\n  return { ...baseMetadata, ...summaryMetadata, ...syntheticMetadata };\n}\n\nexport function roundMsToMin(milliseconds: number): number {\n  return roundSecToMin(milliseconds / 1000);\n}\n\nexport function roundSecToMin(seconds: number): number {\n  return Math.floor(seconds / 60);\n}\n\nexport function limitSuggestions(items: string[]) {\n  return items.slice(0, SUGGESTIONS_LIMIT);\n}\n\nexport function addLimitInfo(items: any[] | undefined): string {\n  return items && items.length >= SUGGESTIONS_LIMIT ? `, limited to the first ${SUGGESTIONS_LIMIT} received items` : '';\n}\n\n// NOTE: the following 2 exported functions are very similar to the prometheus*Escape\n// functions in datasource.ts, but they are not exactly the same algorithm, and we found\n// no way to reuse one in the another or vice versa.\n\n// Prometheus regular-expressions use the RE2 syntax (https://github.com/google/re2/wiki/Syntax),\n// so every character that matches something in that list has to be escaped.\n// the list of metacharacters is: *+?()|\\.[]{}^$\n// we make a javascript regular expression that matches those characters:\nconst RE2_METACHARACTERS = /[*+?()|\\\\.\\[\\]{}^$]/g;\nfunction escapePrometheusRegexp(value: string): string {\n  return value.replace(RE2_METACHARACTERS, '\\\\$&');\n}\n\n// based on the openmetrics-documentation, the 3 symbols we have to handle are:\n// - \\n ... the newline character\n// - \\  ... the backslash character\n// - \"  ... the double-quote character\nexport function escapeLabelValueInExactSelector(labelValue: string): string {\n  return labelValue.replace(/\\\\/g, '\\\\\\\\').replace(/\\n/g, '\\\\n').replace(/\"/g, '\\\\\"');\n}\n\nexport function escapeLabelValueInRegexSelector(labelValue: string): string {\n  return escapeLabelValueInExactSelector(escapePrometheusRegexp(labelValue));\n}\n\nexport function escapeMetricNameSpecialCharacters(metricName: string) {\n  const specialChars = /[-+*\\/%^=]/g;\n  return metricName.replace(specialChars, (match) => '\\\\' + match);\n}\n\nexport function unescapeMetricNameSpecialCharacters(escapedMetricName: string) {\n  const escapedSpecialChars = /\\\\([-+*\\/%^=])/g;\n  return escapedMetricName.replace(escapedSpecialChars, (match, p1) => p1);\n}\n\nexport enum AbstractLabelOperator {\n  Equal = \"Equal\",\n  NotEqual = \"NotEqual\",\n  EqualRegEx = \"EqualRegEx\",\n  NotEqualRegEx = \"NotEqualRegEx\"\n}\n\nconst FromPromLikeMap: Record<string, AbstractLabelOperator> = {\n  '=': AbstractLabelOperator.Equal,\n  '!=': AbstractLabelOperator.NotEqual,\n  '=~': AbstractLabelOperator.EqualRegEx,\n  '!~': AbstractLabelOperator.NotEqualRegEx,\n};\nconst ToPromLikeMap: Record<AbstractLabelOperator, string> = invert(FromPromLikeMap) as Record<\n  AbstractLabelOperator,\n  string\n>;\n\nexport function toPromLikeExpr(labelBasedQuery: AbstractQuery): string {\n  const expr = labelBasedQuery.labelMatchers\n    .map((selector: AbstractLabelMatcher) => {\n      const operator = ToPromLikeMap[selector.operator];\n      if (operator) {\n        return `${selector.name}${operator}\"${selector.value}\"`;\n      } else {\n        return '';\n      }\n    })\n    .filter((e: string) => e !== '')\n    .join(', ');\n\n  return expr ? `{${expr}}` : '';\n}\n\nexport function toPromLikeQuery(labelBasedQuery: AbstractQuery): PromLikeQuery {\n  return {\n    refId: labelBasedQuery.refId,\n    expr: toPromLikeExpr(labelBasedQuery),\n    range: true,\n  };\n}\n\nexport interface PromLikeQuery extends DataQuery {\n  expr: string;\n  range: boolean;\n}\n\nexport function extractLabelMatchers(tokens: Array<string | Token>): AbstractLabelMatcher[] {\n  const labelMatchers: AbstractLabelMatcher[] = [];\n\n  for (let prop in tokens) {\n    if (tokens[prop] instanceof Token) {\n      let token: Token = tokens[prop] as Token;\n      if (token.type === 'context-labels') {\n        let labelKey = '';\n        let labelValue = '';\n        let labelOperator = '';\n        let contentTokens: any[] = token.content as any[];\n        for (let currentToken in contentTokens) {\n          if (typeof contentTokens[currentToken] === 'string') {\n            let currentStr: string;\n            currentStr = contentTokens[currentToken] as string;\n            if (currentStr === '=' || currentStr === '!=' || currentStr === '=~' || currentStr === '!~') {\n              labelOperator = currentStr;\n            }\n          } else if (contentTokens[currentToken] instanceof Token) {\n            switch (contentTokens[currentToken].type) {\n              case 'label-key':\n                labelKey = contentTokens[currentToken].content as string;\n                break;\n              case 'label-value':\n                labelValue = contentTokens[currentToken].content as string;\n                labelValue = labelValue.substring(1, labelValue.length - 1);\n                const labelComparator = FromPromLikeMap[labelOperator];\n                if (labelComparator) {\n                  labelMatchers.push({ name: labelKey, operator: labelComparator, value: labelValue });\n                }\n                break;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return labelMatchers;\n}\n\nexport function getVictoriaMetricsTime(date: string | DateTime, roundUp: boolean) {\n  if (typeof date === 'string') {\n    date = dateMath.parse(date, roundUp)!;\n  }\n\n  return Math.ceil(date.valueOf() / 1000);\n}\n\nexport function truncateResult<T>(array: T[], limit?: number): T[] {\n  if (limit === undefined) {\n    limit = 1000;\n  }\n  array.length = Math.min(array.length, limit);\n  return array;\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-14: remove PromCheatSheet\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { chain, difference, once } from 'lodash';\nimport { LRUCache as LRU } from 'lru-cache'\nimport Prism from 'prismjs';\nimport { Value } from \"slate\";\n\nimport {\n  AbstractLabelMatcher,\n  AbstractQuery,\n  dateTime,\n  getDefaultTimeRange,\n  HistoryItem,\n  LanguageProvider,\n  TimeRange,\n} from '@grafana/data';\nimport { BackendSrvRequest } from '@grafana/runtime';\nimport { CompletionItem, CompletionItemGroup, SearchFunctionType, TypeaheadInput, TypeaheadOutput } from '@grafana/ui';\n\nimport { Label } from \"./components/monaco-query-field/monaco-completion-provider/situation\";\nimport { PrometheusDatasource } from './datasource';\nimport {\n  AbstractLabelOperator,\n  addLimitInfo,\n  extractLabelMatchers,\n  fixSummariesMetadata,\n  parseSelector,\n  processHistogramMetrics,\n  processLabels,\n  roundSecToMin,\n  toPromLikeQuery,\n} from './language_utils';\nimport PromqlSyntax, { FUNCTIONS, RATE_RANGES } from './metricsql';\nimport { PromMetricsMetadata, PromQuery } from './types';\n\nconst DEFAULT_KEYS = ['job', 'instance'];\nconst EMPTY_SELECTOR = '{}';\nconst HISTORY_ITEM_COUNT = 5;\nconst HISTORY_COUNT_CUTOFF = 1000 * 60 * 60 * 24; // 24h\n// Max number of items (metrics, labels, values) that we display as suggestions. Prevents from running out of memory.\nexport const SUGGESTIONS_LIMIT = 10000;\n\nconst wrapLabel = (label: string): CompletionItem => ({ label });\n\nconst setFunctionKind = (suggestion: CompletionItem): CompletionItem => {\n  suggestion.kind = 'function';\n  return suggestion;\n};\n\nexport function addHistoryMetadata(item: CompletionItem, history: any[]): CompletionItem {\n  const cutoffTs = Date.now() - HISTORY_COUNT_CUTOFF;\n  const historyForItem = history.filter((h) => h.ts > cutoffTs && h.query === item.label);\n  const count = historyForItem.length;\n  const recent = historyForItem[0];\n  let hint = `Queried ${count} times in the last 24h.`;\n\n  if (recent) {\n    const lastQueried = dateTime(recent.ts).fromNow();\n    hint = `${hint} Last queried ${lastQueried}.`;\n  }\n\n  return {\n    ...item,\n    documentation: hint,\n  };\n}\n\nfunction addMetricsMetadata(metric: string, metadata?: PromMetricsMetadata): CompletionItem {\n  const item: CompletionItem = { label: metric };\n  if (metadata && metadata[metric]) {\n    item.documentation = getMetadataString(metric, metadata);\n  }\n  return item;\n}\n\nexport function getMetadataString(metric: string, metadata: PromMetricsMetadata): string | undefined {\n  if (!metadata[metric]) {\n    return undefined;\n  }\n  const { type, help } = metadata[metric];\n  return `${type.toUpperCase()}: ${help}`;\n}\n\n// const PREFIX_DELIMITER_REGEX = /(=\"|!=\"|=~\"|!~\"|\\{|\\[|\\(|\\+|-|\\/|\\*|%|\\^|\\band\\b|\\bor\\b|\\bunless\\b|==|>=|!=|<=|>|<|=|~|,)/;\n\ninterface AutocompleteContext {\n  history?: Array<HistoryItem<PromQuery>>;\n}\nexport default class PromQlLanguageProvider extends LanguageProvider {\n  histogramMetrics: string[];\n  timeRange: TimeRange;\n  metrics: string[];\n  metricsMetadata?: PromMetricsMetadata;\n  declare startTask: Promise<any>;\n  datasource: PrometheusDatasource;\n  labelKeys: string[] = [];\n  declare labelFetchTs: number;\n  withTemplates: Array<{label: string, comment: string, value: string}>\n\n  /**\n   *  Cache for labels of series. This is bit simplistic in the sense that it just counts responses each as a 1 and does\n   *  not account for different size of a response. If that is needed a `length` function can be added in the options.\n   *  10 as a max size is totally arbitrary right now.\n   */\n  private labelsCache = new LRU<string, Record<string, string[]>>({ max: 10 });\n\n  constructor(datasource: PrometheusDatasource, initialValues?: Partial<PromQlLanguageProvider>) {\n    super();\n\n    this.datasource = datasource;\n    this.histogramMetrics = [];\n    this.timeRange = getDefaultTimeRange();\n    this.metrics = [];\n    this.withTemplates = []\n\n    Object.assign(this, initialValues);\n  }\n\n  get syntax() {\n    return PromqlSyntax;\n  }\n\n  request = async (url: string, defaultValue: any, params = {}, options?: Partial<BackendSrvRequest>): Promise<any> => {\n    try {\n      const res = await this.datasource.metadataRequest(url, params, options);\n      return res.data.data;\n    } catch (error) {\n      console.error(error);\n    }\n\n    return defaultValue;\n  };\n\n  start = async (timeRange?: TimeRange): Promise<any[]> => {\n    this.timeRange = timeRange ?? getDefaultTimeRange();\n\n    if (this.datasource.lookupsDisabled) {\n      return [];\n    }\n\n    this.metrics = (await this.fetchLabelValues('__name__')) || [];\n    this.histogramMetrics = processHistogramMetrics(this.metrics).sort();\n    return Promise.all([this.loadMetricsMetadata(), this.fetchLabels()]);\n  };\n\n  async loadMetricsMetadata() {\n    this.metricsMetadata = fixSummariesMetadata(\n      await this.request('/api/v1/metadata', {}, {}, { showErrorAlert: false })\n    );\n  }\n\n  getLabelKeys(): string[] {\n    return this.labelKeys;\n  }\n\n  provideCompletionItems = async (\n    { prefix, text, value, labelKey, wrapperClasses }: TypeaheadInput,\n    context: AutocompleteContext = {}\n  ): Promise<TypeaheadOutput> => {\n    const emptyResult: TypeaheadOutput = { suggestions: [] };\n\n    if (!value) {\n      return emptyResult;\n    }\n\n    // Local text properties\n    const empty = value.document.text.length === 0;\n    const selectedLines = value.document.getTextsAtRange(value.selection);\n    const currentLine = selectedLines.size === 1 ? selectedLines.first().getText() : null;\n\n    const nextCharacter = currentLine ? currentLine[value.selection.anchor.offset] : null;\n\n    // Syntax spans have 3 classes by default. More indicate a recognized token\n    const tokenRecognized = wrapperClasses.length > 3;\n    // Non-empty prefix, but not inside known token\n    const prefixUnrecognized = prefix && !tokenRecognized;\n\n    // Prevent suggestions in `function(|suffix)`\n    const noSuffix = !nextCharacter || nextCharacter === ')';\n\n    // Prefix is safe if it does not immediately follow a complete expression and has no text after it\n    const safePrefix = prefix && !text.match(/^[\\]})\\s]+$/) && noSuffix;\n\n    // About to type next operand if preceded by binary operator\n    const operatorsPattern = /[+\\-*/^%]/;\n    const isNextOperand = text.match(operatorsPattern);\n\n    // Determine candidates by CSS context\n    if (wrapperClasses.includes('context-range')) {\n      // Suggestions for metric[|]\n      return this.getRangeCompletionItems();\n    } else if (wrapperClasses.includes('context-labels')) {\n      // Suggestions for metric{|} and metric{foo=|}, as well as metric-independent label queries like {|}\n      return this.getLabelCompletionItems({ prefix, text, value, labelKey, wrapperClasses });\n    } else if (wrapperClasses.includes('context-aggregation')) {\n      // Suggestions for sum(metric) by (|)\n      return this.getAggregationCompletionItems(value);\n    } else if (empty) {\n      // Suggestions for empty query field\n      return this.getEmptyCompletionItems(context);\n    } else if (prefixUnrecognized && noSuffix && !isNextOperand) {\n      // Show term suggestions in a couple of scenarios\n      return this.getBeginningCompletionItems(context);\n    } else if (prefixUnrecognized && safePrefix) {\n      // Show term suggestions in a couple of scenarios\n      return this.getTermCompletionItems();\n    }\n\n    return emptyResult;\n  };\n\n  getBeginningCompletionItems = (context: AutocompleteContext): TypeaheadOutput => {\n    return {\n      suggestions: [...this.getEmptyCompletionItems(context).suggestions, ...this.getTermCompletionItems().suggestions],\n    };\n  };\n\n  getEmptyCompletionItems = (context: AutocompleteContext): TypeaheadOutput => {\n    const { history } = context;\n    const suggestions: CompletionItemGroup[] = [];\n\n    if (history && history.length) {\n      const historyItems = chain(history)\n        .map((h) => h.query.expr)\n        .filter()\n        .uniq()\n        .take(HISTORY_ITEM_COUNT)\n        .map(wrapLabel)\n        .map((item) => addHistoryMetadata(item, history))\n        .value();\n\n      suggestions.push({\n        searchFunctionType: SearchFunctionType.Prefix,\n        skipSort: true,\n        label: 'History',\n        items: historyItems,\n      });\n    }\n\n    return { suggestions };\n  };\n\n  getTermCompletionItems = (): TypeaheadOutput => {\n    const { metrics, metricsMetadata } = this;\n    const suggestions: CompletionItemGroup[] = [];\n\n    suggestions.push({\n      searchFunctionType: SearchFunctionType.Prefix,\n      label: 'Functions',\n      items: FUNCTIONS.map(setFunctionKind),\n    });\n\n    if (metrics && metrics.length) {\n      suggestions.push({\n        label: 'Metrics',\n        items: metrics.map((m) => addMetricsMetadata(m, metricsMetadata)),\n        searchFunctionType: SearchFunctionType.Fuzzy,\n      });\n    }\n\n    return { suggestions };\n  };\n\n  getRangeCompletionItems(): TypeaheadOutput {\n    return {\n      context: 'context-range',\n      suggestions: [\n        {\n          label: 'Range vector',\n          items: [...RATE_RANGES],\n        },\n      ],\n    };\n  }\n\n  getAggregationCompletionItems = async (value: Value): Promise<TypeaheadOutput> => {\n    const suggestions: CompletionItemGroup[] = [];\n\n    // Stitch all query lines together to support multi-line queries\n    let queryOffset;\n    const queryText = value.document.getBlocks().reduce((text, block) => {\n      if (text === undefined) {\n        return '';\n      }\n      if (!block) {\n        return text;\n      }\n\n      const blockText = block?.getText();\n\n      if (value.anchorBlock.key === block.key) {\n        // Newline characters are not accounted for but this is irrelevant\n        // for the purpose of extracting the selector string\n        queryOffset = value.selection.anchor.offset + text.length;\n      }\n\n      return text + blockText;\n    }, '');\n\n    // Try search for selector part on the left-hand side, such as `sum (m) by (l)`\n    const openParensAggregationIndex = queryText.lastIndexOf('(', queryOffset);\n    let openParensSelectorIndex = queryText.lastIndexOf('(', openParensAggregationIndex - 1);\n    let closeParensSelectorIndex = queryText.indexOf(')', openParensSelectorIndex);\n\n    // Try search for selector part of an alternate aggregation clause, such as `sum by (l) (m)`\n    if (openParensSelectorIndex === -1) {\n      const closeParensAggregationIndex = queryText.indexOf(')', queryOffset);\n      closeParensSelectorIndex = queryText.indexOf(')', closeParensAggregationIndex + 1);\n      openParensSelectorIndex = queryText.lastIndexOf('(', closeParensSelectorIndex);\n    }\n\n    const result = {\n      suggestions,\n      context: 'context-aggregation',\n    };\n\n    // Suggestions are useless for alternative aggregation clauses without a selector in context\n    if (openParensSelectorIndex === -1) {\n      return result;\n    }\n\n    // Range vector syntax not accounted for by subsequent parse so discard it if present\n    const selectorString = queryText\n      .slice(openParensSelectorIndex + 1, closeParensSelectorIndex)\n      .replace(/\\[[^\\]]+\\]$/, '');\n\n    const selector = parseSelector(selectorString, selectorString.length - 2).selector;\n\n    const series = await this.getSeries(selector);\n    const labelKeys = Object.keys(series);\n    if (labelKeys.length > 0) {\n      const limitInfo = addLimitInfo(labelKeys);\n      suggestions.push({\n        label: `Labels${limitInfo}`,\n        items: labelKeys.map(wrapLabel),\n        searchFunctionType: SearchFunctionType.Fuzzy,\n      });\n    }\n    return result;\n  };\n\n  getLabelCompletionItems = async ({\n    text,\n    wrapperClasses,\n    labelKey,\n    value,\n  }: TypeaheadInput): Promise<TypeaheadOutput> => {\n    if (!value) {\n      return { suggestions: [] };\n    }\n\n    const suggestions: CompletionItemGroup[] = [];\n    const line = value.anchorBlock.getText();\n    const cursorOffset = value.selection.anchor.offset;\n    const suffix = line.substr(cursorOffset);\n    const prefix = line.substr(0, cursorOffset);\n    const isValueStart = text.match(/^(=|=~|!=|!~)/);\n    const isValueEnd = suffix.match(/^\"?[,}]|$/);\n    // Detect cursor in front of value, e.g., {key=|\"}\n    const isPreValue = prefix.match(/(=|=~|!=|!~)$/) && suffix.match(/^\"/);\n\n    // Don't suggest anything at the beginning or inside a value\n    const isValueEmpty = isValueStart && isValueEnd;\n    const hasValuePrefix = isValueEnd && !isValueStart;\n    if ((!isValueEmpty && !hasValuePrefix) || isPreValue) {\n      return { suggestions };\n    }\n\n    // Get normalized selector\n    let selector;\n    let parsedSelector;\n    try {\n      parsedSelector = parseSelector(line, cursorOffset);\n      selector = parsedSelector.selector;\n    } catch {\n      selector = EMPTY_SELECTOR;\n    }\n\n    const containsMetric = selector.includes('__name__=');\n    const existingKeys = parsedSelector ? parsedSelector.labelKeys : [];\n\n    let series: Record<string, string[]> = {};\n    // Query labels for selector\n    if (selector) {\n      series = await this.getSeries(selector, !containsMetric);\n    }\n\n    if (Object.keys(series).length === 0) {\n      console.warn(`Server did not return any values for selector = ${selector}`);\n      return { suggestions };\n    }\n\n    let context: string | undefined;\n\n    if ((text && isValueStart) || wrapperClasses.includes('attr-value')) {\n      // Label values\n      if (labelKey && series[labelKey]) {\n        context = 'context-label-values';\n        const limitInfo = addLimitInfo(series[labelKey]);\n        suggestions.push({\n          label: `Label values for \"${labelKey}\"${limitInfo}`,\n          items: series[labelKey].map(wrapLabel),\n          searchFunctionType: SearchFunctionType.Fuzzy,\n        });\n      }\n    } else {\n      // Label keys\n      const labelKeys = series ? Object.keys(series) : containsMetric ? null : DEFAULT_KEYS;\n\n      if (labelKeys) {\n        const possibleKeys = difference(labelKeys, existingKeys);\n        if (possibleKeys.length) {\n          context = 'context-labels';\n          const newItems = possibleKeys.map((key) => ({ label: key }));\n          const limitInfo = addLimitInfo(newItems);\n          const newSuggestion: CompletionItemGroup = {\n            label: `Labels${limitInfo}`,\n            items: newItems,\n            searchFunctionType: SearchFunctionType.Fuzzy,\n          };\n          suggestions.push(newSuggestion);\n        }\n      }\n    }\n\n    return { context, suggestions };\n  };\n\n  importFromAbstractQuery(labelBasedQuery: AbstractQuery): PromQuery {\n    return toPromLikeQuery(labelBasedQuery);\n  }\n\n  exportToAbstractQuery(query: PromQuery): AbstractQuery {\n    const promQuery = query.expr;\n    if (!promQuery || promQuery.length === 0) {\n      return { refId: query.refId, labelMatchers: [] };\n    }\n    const tokens = Prism.tokenize(promQuery, PromqlSyntax);\n    const labelMatchers: AbstractLabelMatcher[] = extractLabelMatchers(tokens);\n    const nameLabelValue = getNameLabelValue(promQuery, tokens);\n    if (nameLabelValue && nameLabelValue.length > 0) {\n      labelMatchers.push({\n        name: '__name__',\n        operator: AbstractLabelOperator.Equal,\n        value: nameLabelValue,\n      });\n    }\n\n    return {\n      refId: query.refId,\n      labelMatchers,\n    };\n  }\n\n  async getSeries(selector: string, withName?: boolean): Promise<Record<string, string[]>> {\n    if (this.datasource.lookupsDisabled) {\n      return {};\n    }\n    try {\n      if (selector === EMPTY_SELECTOR) {\n        return await this.fetchDefaultSeries();\n      } else {\n        return await this.fetchSeriesLabels(selector, withName);\n      }\n    } catch (error) {\n      // TODO: better error handling\n      console.error(error);\n      return {};\n    }\n  }\n\n  getSeriesLabels = async (selector: string, otherLabels: Label[]): Promise<string[]> => {\n    // Exclude __name__ from output\n    otherLabels.push({ name: '__name__', value: '', op: '!=' });\n    const possibleLabelNames = await this.fetchSeriesLabelsMatch(selector);\n    const usedLabelNames = new Set(otherLabels.map((l) => l.name)); // names used in the query\n    return possibleLabelNames.filter((l) => !usedLabelNames.has(l));\n  };\n\n  fetchSeriesLabelsMatch = async (name: string): Promise<string[]> => {\n    const interpolatedName = this.datasource.interpolateString(name);\n    const range = this.datasource.getAdjustedInterval(this.timeRange);\n    const urlParams = {\n      ...range,\n      'match[]': interpolatedName,\n    };\n    const url = `/api/v1/labels`;\n\n    return await this.request(url, [], urlParams)\n  };\n\n  fetchSeriesValuesWithMatch = async (\n    name: string,\n    match?: string,\n    timeRange: TimeRange = this.timeRange\n  ): Promise<string[]> => {\n    const interpolatedName = name ? this.datasource.interpolateString(name) : null;\n    const interpolatedMatch = match ? this.datasource.interpolateString(match) : null;\n    const range = this.datasource.getAdjustedInterval(timeRange);\n    const urlParams = {\n      ...range,\n      ...(interpolatedMatch && { 'match[]': interpolatedMatch }),\n    };\n\n    const value = await this.request(`/api/v1/label/${interpolatedName}/values`, [], urlParams);\n    return value ?? [];\n  };\n\n  fetchLabelValues = async (key: string): Promise<string[]> => {\n    const params = this.datasource.getTimeRangeParams();\n    const limit = this.datasource.getLimitMetrics('maxTagValues');\n    const url = `/api/v1/label/${this.datasource.interpolateString(key)}/values`;\n    return await this.request(url, [], { ...params, limit });\n  };\n\n  async getLabelValues(key: string): Promise<string[]> {\n    return await this.fetchLabelValues(key);\n  }\n\n  /**\n   * Fetches all label keys\n   */\n  async fetchLabels(): Promise<string[]> {\n    const url = '/api/v1/labels';\n    const params = this.datasource.getTimeRangeParams();\n    const limit = this.datasource.getLimitMetrics('maxTagKeys');\n    this.labelFetchTs = Date.now().valueOf();\n\n    const res = await this.request(url, [], { ...params, limit });\n    if (Array.isArray(res)) {\n      this.labelKeys = res.slice().sort();\n    }\n\n    return [];\n  }\n\n  /**\n   * Fetch labels for a series. This is cached by its args but also by the global timeRange currently selected as\n   * they can change over requested time.\n   * @param name\n   * @param withName\n   */\n  fetchSeriesLabels = async (name: string, withName?: boolean): Promise<Record<string, string[]>> => {\n    const interpolatedName = this.datasource.interpolateString(name);\n    const range = this.datasource.getTimeRangeParams();\n    const limit = this.datasource.getLimitMetrics('maxSeries');\n    const urlParams = {\n      ...range,\n      limit,\n      'match[]': interpolatedName,\n    };\n    const url = `/api/v1/series`;\n    // Cache key is a bit different here. We add the `withName` param and also round up to a minute the intervals.\n    // The rounding may seem strange but makes relative intervals like now-1h less prone to need separate request every\n    // millisecond while still actually getting all the keys for the correct interval. This still can create problems\n    // when user does not the newest values for a minute if already cached.\n    const cacheParams = new URLSearchParams({\n      'match[]': interpolatedName,\n      start: roundSecToMin(parseInt(range.start, 10)).toString(),\n      end: roundSecToMin(parseInt(range.end, 10)).toString(),\n      withName: withName ? 'true' : 'false',\n    });\n\n    const cacheKey = `/api/v1/series?${cacheParams.toString()}`;\n    let value = this.labelsCache.get(cacheKey);\n    if (!value) {\n      const data = await this.request(url, [], urlParams);\n      const { values } = processLabels(data, withName);\n      value = values;\n      this.labelsCache.set(cacheKey, value);\n    }\n    return value;\n  };\n\n  /**\n   * Fetch series for a selector. Use this for raw results. Use fetchSeriesLabels() to get labels.\n   * @param match\n   */\n  fetchSeries = async (match: string): Promise<Array<Record<string, string>>> => {\n    const url = '/api/v1/series';\n    const range = this.datasource.getTimeRangeParams();\n    const limit = this.datasource.getLimitMetrics('maxSeries');\n    const params = { ...range, 'match[]': match, limit };\n    return await this.request(url, {}, params);\n  };\n\n  /**\n   * Fetch this only one as we assume this won't change over time. This is cached differently from fetchSeriesLabels\n   * because we can cache more aggressively here and also we do not want to invalidate this cache the same way as in\n   * fetchSeriesLabels.\n   */\n  fetchDefaultSeries = once(async () => {\n    const values = await Promise.all(DEFAULT_KEYS.map((key) => this.fetchLabelValues(key)));\n    return DEFAULT_KEYS.reduce((acc, key, i) => ({ ...acc, [key]: values[i] }), {});\n  });\n}\n\nfunction getNameLabelValue(promQuery: string, tokens: any): string {\n  let nameLabelValue = '';\n  for (let prop in tokens) {\n    if (typeof tokens[prop] === 'string') {\n      nameLabelValue = tokens[prop] as string;\n      break;\n    }\n  }\n  return nameLabelValue;\n}\n","// The MIT License (MIT)\n//\n// Copyright (c) Celian Garcia and Augustin Husson @ Amadeus IT Group\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n'use strict';\n// noinspection JSUnusedGlobalSymbols\nexport var promLanguageDefinition = {\n    id: 'promql',\n    extensions: ['.promql'],\n    aliases: ['Prometheus', 'prometheus', 'prom', 'Prom', 'promql', 'Promql', 'promQL', 'PromQL'],\n    mimetypes: [],\n    loader: function () { return import('./promql'); } // eslint-disable-line @typescript-eslint/explicit-function-return-type\n};\n","import { useRef } from 'react';\nvar useLatest = function (value) {\n    var ref = useRef(value);\n    ref.current = value;\n    return ref;\n};\nexport default useLatest;\n","const Components = {\n  Breadcrumbs: {\n    breadcrumb: (title) => `data-testid ${title} breadcrumb`\n  },\n  TimePicker: {\n    openButton: \"data-testid TimePicker Open Button\",\n    fromField: \"Time Range from field\",\n    toField: \"Time Range to field\",\n    applyTimeRange: \"data-testid TimePicker submit button\",\n    calendar: {\n      label: \"Time Range calendar\",\n      openButton: \"Open time range calendar\",\n      closeButton: \"Close time range Calendar\"\n    },\n    absoluteTimeRangeTitle: \"data-testid-absolute-time-range-narrow\"\n  },\n  DataSourcePermissions: {\n    form: () => 'form[name=\"addPermission\"]',\n    roleType: \"Role to add new permission to\",\n    rolePicker: \"Built-in role picker\",\n    permissionLevel: \"Permission Level\"\n  },\n  DataSource: {\n    TestData: {\n      QueryTab: {\n        scenarioSelectContainer: \"Test Data Query scenario select container\",\n        scenarioSelect: \"Test Data Query scenario select\",\n        max: \"TestData max\",\n        min: \"TestData min\",\n        noise: \"TestData noise\",\n        seriesCount: \"TestData series count\",\n        spread: \"TestData spread\",\n        startValue: \"TestData start value\",\n        drop: \"TestData drop values\"\n      }\n    },\n    DataSourceHttpSettings: {\n      urlInput: \"Datasource HTTP settings url\"\n    },\n    Jaeger: {\n      traceIDInput: \"Trace ID\"\n    },\n    Prometheus: {\n      configPage: {\n        exemplarsAddButton: \"Add exemplar config button\",\n        internalLinkSwitch: \"Internal link switch\"\n      },\n      exemplarMarker: \"Exemplar marker\"\n    }\n  },\n  Menu: {\n    MenuComponent: (title) => `${title} menu`,\n    MenuGroup: (title) => `${title} menu group`,\n    MenuItem: (title) => `${title} menu item`,\n    SubMenu: {\n      container: \"SubMenu container\",\n      icon: \"SubMenu icon\"\n    }\n  },\n  Panels: {\n    Panel: {\n      title: (title) => `data-testid Panel header ${title}`,\n      headerItems: (item) => `Panel header item ${item}`,\n      menuItems: (item) => `data-testid Panel menu item ${item}`,\n      menu: (title) => `data-testid Panel menu ${title}`,\n      containerByTitle: (title) => `${title} panel`,\n      headerCornerInfo: (mode) => `Panel header ${mode}`,\n      loadingBar: () => `Panel loading bar`,\n      HoverWidget: {\n        container: \"data-testid hover-header-container\",\n        dragIcon: \"data-testid drag-icon\"\n      }\n    },\n    Visualization: {\n      Graph: {\n        container: \"Graph container\",\n        VisualizationTab: {\n          legendSection: \"Legend section\"\n        },\n        Legend: {\n          legendItemAlias: (name) => `gpl alias ${name}`,\n          showLegendSwitch: \"gpl show legend\"\n        },\n        xAxis: {\n          labels: () => \"div.flot-x-axis > div.flot-tick-label\"\n        }\n      },\n      BarGauge: {\n        /**\n         * @deprecated use valueV2 from Grafana 8.3 instead\n         */\n        value: \"Bar gauge value\",\n        valueV2: \"data-testid Bar gauge value\"\n      },\n      PieChart: {\n        svgSlice: \"Pie Chart Slice\"\n      },\n      Text: {\n        container: () => \".markdown-html\"\n      },\n      Table: {\n        header: \"table header\",\n        footer: \"table-footer\"\n      }\n    }\n  },\n  VizLegend: {\n    seriesName: (name) => `VizLegend series ${name}`\n  },\n  Drawer: {\n    General: {\n      title: (title) => `Drawer title ${title}`,\n      expand: \"Drawer expand\",\n      contract: \"Drawer contract\",\n      close: \"Drawer close\",\n      rcContentWrapper: () => \".rc-drawer-content-wrapper\"\n    }\n  },\n  PanelEditor: {\n    General: {\n      content: \"Panel editor content\"\n    },\n    OptionsPane: {\n      content: \"Panel editor option pane content\",\n      select: \"Panel editor option pane select\",\n      fieldLabel: (type) => `${type} field property editor`\n    },\n    // not sure about the naming *DataPane*\n    DataPane: {\n      content: \"Panel editor data pane content\"\n    },\n    applyButton: \"data-testid Apply changes and go back to dashboard\",\n    toggleVizPicker: \"data-testid toggle-viz-picker\",\n    toggleVizOptions: \"data-testid toggle-viz-options\",\n    toggleTableView: \"toggle-table-view\",\n    // [Geomap] Map controls\n    measureButton: \"show measure tools\"\n  },\n  PanelInspector: {\n    Data: {\n      content: \"Panel inspector Data content\"\n    },\n    Stats: {\n      content: \"Panel inspector Stats content\"\n    },\n    Json: {\n      content: \"Panel inspector Json content\"\n    },\n    Query: {\n      content: \"Panel inspector Query content\",\n      refreshButton: \"Panel inspector Query refresh button\",\n      jsonObjectKeys: () => \".json-formatter-key\"\n    }\n  },\n  Tab: {\n    title: (title) => `Tab ${title}`,\n    active: () => '[class*=\"-activeTabStyle\"]'\n  },\n  RefreshPicker: {\n    /**\n     * @deprecated use runButtonV2 from Grafana 8.3 instead\n     */\n    runButton: \"RefreshPicker run button\",\n    /**\n     * @deprecated use intervalButtonV2 from Grafana 8.3 instead\n     */\n    intervalButton: \"RefreshPicker interval button\",\n    runButtonV2: \"data-testid RefreshPicker run button\",\n    intervalButtonV2: \"data-testid RefreshPicker interval button\"\n  },\n  QueryTab: {\n    content: \"Query editor tab content\",\n    queryInspectorButton: \"Query inspector button\",\n    queryHistoryButton: \"Rich history button\",\n    addQuery: \"Query editor add query button\"\n  },\n  QueryHistory: {\n    queryText: \"Query text\"\n  },\n  QueryEditorRows: {\n    rows: \"Query editor row\"\n  },\n  QueryEditorRow: {\n    actionButton: (title) => `${title}`,\n    title: (refId) => `Query editor row title ${refId}`,\n    container: (refId) => `Query editor row ${refId}`\n  },\n  AlertTab: {\n    content: \"Alert editor tab content\"\n  },\n  Alert: {\n    /**\n     * @deprecated use alertV2 from Grafana 8.3 instead\n     */\n    alert: (severity) => `Alert ${severity}`,\n    alertV2: (severity) => `data-testid Alert ${severity}`\n  },\n  TransformTab: {\n    content: \"data-testid Transform editor tab content\",\n    newTransform: (name) => `data-testid New transform ${name}`,\n    transformationEditor: (name) => `data-testid Transformation editor ${name}`,\n    transformationEditorDebugger: (name) => `data-testid Transformation editor debugger ${name}`\n  },\n  Transforms: {\n    card: (name) => `data-testid New transform ${name}`,\n    Reduce: {\n      modeLabel: \"Transform mode label\",\n      calculationsLabel: \"Transform calculations label\"\n    },\n    SpatialOperations: {\n      actionLabel: \"root Action field property editor\",\n      locationLabel: \"root Location field property editor\",\n      location: {\n        autoOption: \"Auto location option\",\n        coords: {\n          option: \"Coords location option\",\n          latitudeFieldLabel: \"root Latitude field field property editor\",\n          longitudeFieldLabel: \"root Longitude field field property editor\"\n        },\n        geohash: {\n          option: \"Geohash location option\",\n          geohashFieldLabel: \"root Geohash field field property editor\"\n        },\n        lookup: {\n          option: \"Lookup location option\",\n          lookupFieldLabel: \"root Lookup field field property editor\",\n          gazetteerFieldLabel: \"root Gazetteer field property editor\"\n        }\n      }\n    },\n    searchInput: \"search transformations\",\n    addTransformationButton: \"data-testid add transformation button\"\n  },\n  NavBar: {\n    Configuration: {\n      button: \"Configuration\"\n    },\n    Toggle: {\n      button: \"Toggle menu\"\n    },\n    Reporting: {\n      button: \"Reporting\"\n    }\n  },\n  NavMenu: {\n    item: \"data-testid Nav menu item\"\n  },\n  NavToolbar: {\n    container: \"data-testid Nav toolbar\"\n  },\n  PageToolbar: {\n    container: () => \".page-toolbar\",\n    item: (tooltip) => `${tooltip}`,\n    itemButton: (title) => `data-testid ${title}`\n  },\n  QueryEditorToolbarItem: {\n    button: (title) => `QueryEditor toolbar item button ${title}`\n  },\n  BackButton: {\n    backArrow: \"Go Back\"\n  },\n  OptionsGroup: {\n    group: (title) => title ? `Options group ${title}` : \"Options group\",\n    toggle: (title) => title ? `Options group ${title} toggle` : \"Options group toggle\"\n  },\n  PluginVisualization: {\n    item: (title) => `Plugin visualization item ${title}`,\n    current: () => '[class*=\"-currentVisualizationItem\"]'\n  },\n  Select: {\n    option: \"Select option\",\n    input: () => 'input[id*=\"time-options-input\"]',\n    singleValue: () => 'div[class*=\"-singleValue\"]'\n  },\n  FieldConfigEditor: {\n    content: \"Field config editor content\"\n  },\n  OverridesConfigEditor: {\n    content: \"Field overrides editor content\"\n  },\n  FolderPicker: {\n    /**\n     * @deprecated use containerV2 from Grafana 8.3 instead\n     */\n    container: \"Folder picker select container\",\n    containerV2: \"data-testid Folder picker select container\",\n    input: \"Select a folder\"\n  },\n  ReadonlyFolderPicker: {\n    container: \"data-testid Readonly folder picker select container\"\n  },\n  DataSourcePicker: {\n    container: \"data-testid Data source picker select container\",\n    /**\n     * @deprecated use inputV2 instead\n     */\n    input: () => 'input[id=\"data-source-picker\"]',\n    inputV2: \"data-testid Select a data source\"\n  },\n  TimeZonePicker: {\n    /**\n     * @deprecated use TimeZonePicker.containerV2 from Grafana 8.3 instead\n     */\n    container: \"Time zone picker select container\",\n    containerV2: \"data-testid Time zone picker select container\"\n  },\n  WeekStartPicker: {\n    /**\n     * @deprecated use WeekStartPicker.containerV2 from Grafana 8.3 instead\n     */\n    container: \"Choose starting day of the week\",\n    containerV2: \"data-testid Choose starting day of the week\",\n    placeholder: \"Choose starting day of the week\"\n  },\n  TraceViewer: {\n    spanBar: \"data-testid SpanBar--wrapper\"\n  },\n  QueryField: { container: \"Query field\" },\n  QueryBuilder: {\n    queryPatterns: \"Query patterns\",\n    labelSelect: \"Select label\",\n    valueSelect: \"Select value\",\n    matchOperatorSelect: \"Select match operator\"\n  },\n  ValuePicker: {\n    button: (name) => `Value picker button ${name}`,\n    select: (name) => `Value picker select ${name}`\n  },\n  Search: {\n    /**\n     * @deprecated use sectionV2 from Grafana 8.3 instead\n     */\n    section: \"Search section\",\n    sectionV2: \"data-testid Search section\",\n    /**\n     * @deprecated use itemsV2 from Grafana 8.3 instead\n     */\n    items: \"Search items\",\n    itemsV2: \"data-testid Search items\",\n    cards: \"data-testid Search cards\",\n    collapseFolder: (sectionId) => `data-testid Collapse folder ${sectionId}`,\n    expandFolder: (sectionId) => `data-testid Expand folder ${sectionId}`,\n    dashboardItem: (item) => `${Components.Search.dashboardItems} ${item}`,\n    dashboardCard: (item) => `data-testid Search card ${item}`,\n    folderHeader: (folderName) => `data-testid Folder header ${folderName}`,\n    folderContent: (folderName) => `data-testid Folder content ${folderName}`,\n    dashboardItems: \"data-testid Dashboard search item\"\n  },\n  DashboardLinks: {\n    container: \"data-testid Dashboard link container\",\n    dropDown: \"data-testid Dashboard link dropdown\",\n    link: \"data-testid Dashboard link\"\n  },\n  LoadingIndicator: {\n    icon: \"Loading indicator\"\n  },\n  CallToActionCard: {\n    /**\n     * @deprecated use buttonV2 from Grafana 8.3 instead\n     */\n    button: (name) => `Call to action button ${name}`,\n    buttonV2: (name) => `data-testid Call to action button ${name}`\n  },\n  DataLinksContextMenu: {\n    singleLink: \"Data link\"\n  },\n  CodeEditor: {\n    container: \"Code editor container\"\n  },\n  DashboardImportPage: {\n    textarea: \"data-testid-import-dashboard-textarea\",\n    submit: \"data-testid-load-dashboard\"\n  },\n  ImportDashboardForm: {\n    name: \"data-testid-import-dashboard-title\",\n    submit: \"data-testid-import-dashboard-submit\"\n  },\n  PanelAlertTabContent: {\n    content: \"Unified alert editor tab content\"\n  },\n  VisualizationPreview: {\n    card: (name) => `data-testid suggestion-${name}`\n  },\n  ColorSwatch: {\n    name: `data-testid-colorswatch`\n  },\n  DashboardRow: {\n    title: (title) => `data-testid dashboard-row-title-${title}`\n  },\n  UserProfile: {\n    profileSaveButton: \"data-testid-user-profile-save\",\n    preferencesSaveButton: \"data-testid-shared-prefs-save\",\n    orgsTable: \"data-testid-user-orgs-table\",\n    sessionsTable: \"data-testid-user-sessions-table\"\n  },\n  FileUpload: {\n    inputField: \"data-testid-file-upload-input-field\",\n    fileNameSpan: \"data-testid-file-upload-file-name\"\n  },\n  DebugOverlay: {\n    wrapper: \"debug-overlay\"\n  },\n  OrgRolePicker: {\n    input: \"Role\"\n  },\n  AnalyticsToolbarButton: {\n    button: \"Dashboard insights\"\n  },\n  Variables: {\n    variableOption: \"data-testid variable-option\"\n  },\n  Annotations: {\n    annotationsTypeInput: \"annotations-type-input\",\n    annotationsChoosePanelInput: \"choose-panels-input\"\n  }\n};\n\nexport { Components };\n//# sourceMappingURL=components.js.map\n","import { Components } from './components.js';\nexport { Components } from './components.js';\nimport { Pages } from './pages.js';\nexport { Pages } from './pages.js';\n\nconst selectors = {\n  pages: Pages,\n  components: Components\n};\n\nexport { selectors };\n//# sourceMappingURL=index.js.map\n","import { Components } from './components.js';\n\nconst Pages = {\n  Login: {\n    url: \"/login\",\n    username: \"Username input field\",\n    password: \"Password input field\",\n    submit: \"Login button\",\n    skip: \"Skip change password button\"\n  },\n  Home: {\n    url: \"/\"\n  },\n  DataSource: {\n    name: \"Data source settings page name input field\",\n    delete: \"Data source settings page Delete button\",\n    readOnly: \"Data source settings page read only message\",\n    saveAndTest: \"data-testid Data source settings page Save and Test button\",\n    alert: \"Data source settings page Alert\"\n  },\n  DataSources: {\n    url: \"/datasources\",\n    dataSources: (dataSourceName) => `Data source list item ${dataSourceName}`\n  },\n  EditDataSource: {\n    url: (dataSourceUid) => `/datasources/edit/${dataSourceUid}`,\n    settings: \"Datasource settings page basic settings\"\n  },\n  AddDataSource: {\n    url: \"/datasources/new\",\n    /** @deprecated Use dataSourcePluginsV2 */\n    dataSourcePlugins: (pluginName) => `Data source plugin item ${pluginName}`,\n    dataSourcePluginsV2: (pluginName) => `Add new data source ${pluginName}`\n  },\n  ConfirmModal: {\n    delete: \"data-testid Confirm Modal Danger Button\"\n  },\n  AddDashboard: {\n    url: \"/dashboard/new\",\n    itemButton: (title) => `data-testid ${title}`,\n    addNewPanel: \"Add new panel\",\n    addNewRow: \"Add new row\",\n    addNewPanelLibrary: \"Add new panel from panel library\"\n  },\n  Dashboard: {\n    url: (uid) => `/d/${uid}`,\n    DashNav: {\n      /**\n       * @deprecated use navV2 from Grafana 8.3 instead\n       */\n      nav: \"Dashboard navigation\",\n      navV2: \"data-testid Dashboard navigation\",\n      publicDashboardTag: \"data-testid public dashboard tag\"\n    },\n    SubMenu: {\n      submenu: \"Dashboard submenu\",\n      submenuItem: \"data-testid template variable\",\n      submenuItemLabels: (item) => `data-testid Dashboard template variables submenu Label ${item}`,\n      submenuItemValueDropDownValueLinkTexts: (item) => `data-testid Dashboard template variables Variable Value DropDown value link text ${item}`,\n      submenuItemValueDropDownDropDown: \"Variable options\",\n      submenuItemValueDropDownOptionTexts: (item) => `data-testid Dashboard template variables Variable Value DropDown option text ${item}`,\n      Annotations: {\n        annotationsWrapper: \"data-testid annotation-wrapper\",\n        annotationLabel: (label) => `data-testid Dashboard annotations submenu Label ${label}`,\n        annotationToggle: (label) => `data-testid Dashboard annotations submenu Toggle ${label}`\n      }\n    },\n    Settings: {\n      Actions: {\n        close: \"data-testid dashboard-settings-close\"\n      },\n      General: {\n        deleteDashBoard: \"Dashboard settings page delete dashboard button\",\n        sectionItems: (item) => `Dashboard settings section item ${item}`,\n        saveDashBoard: \"Dashboard settings aside actions Save button\",\n        saveAsDashBoard: \"Dashboard settings aside actions Save As button\",\n        /**\n         * @deprecated use components.TimeZonePicker.containerV2 from Grafana 8.3 instead\n         */\n        timezone: \"Time zone picker select container\",\n        title: \"Tab General\"\n      },\n      Annotations: {\n        List: {\n          /**\n           * @deprecated use addAnnotationCTAV2 from Grafana 8.3 instead\n           */\n          addAnnotationCTA: Components.CallToActionCard.button(\"Add annotation query\"),\n          addAnnotationCTAV2: Components.CallToActionCard.buttonV2(\"Add annotation query\")\n        },\n        Settings: {\n          name: \"Annotations settings name input\"\n        },\n        NewAnnotation: {\n          panelFilterSelect: \"data-testid annotations-panel-filter\",\n          showInLabel: \"show-in-label\",\n          previewInDashboard: \"data-testid annotations-preview\"\n        }\n      },\n      Variables: {\n        List: {\n          /**\n           * @deprecated use addVariableCTAV2 from Grafana 8.3 instead\n           */\n          addVariableCTA: Components.CallToActionCard.button(\"Add variable\"),\n          addVariableCTAV2: Components.CallToActionCard.buttonV2(\"Add variable\"),\n          newButton: \"Variable editor New variable button\",\n          table: \"Variable editor Table\",\n          tableRowNameFields: (variableName) => `Variable editor Table Name field ${variableName}`,\n          tableRowDefinitionFields: (variableName) => `Variable editor Table Definition field ${variableName}`,\n          tableRowArrowUpButtons: (variableName) => `Variable editor Table ArrowUp button ${variableName}`,\n          tableRowArrowDownButtons: (variableName) => `Variable editor Table ArrowDown button ${variableName}`,\n          tableRowDuplicateButtons: (variableName) => `Variable editor Table Duplicate button ${variableName}`,\n          tableRowRemoveButtons: (variableName) => `Variable editor Table Remove button ${variableName}`\n        },\n        Edit: {\n          General: {\n            headerLink: \"Variable editor Header link\",\n            modeLabelNew: \"Variable editor Header mode New\",\n            /**\n             * @deprecated\n             */\n            modeLabelEdit: \"Variable editor Header mode Edit\",\n            generalNameInput: \"Variable editor Form Name field\",\n            generalNameInputV2: \"data-testid Variable editor Form Name field\",\n            generalTypeSelect: \"Variable editor Form Type select\",\n            generalTypeSelectV2: \"data-testid Variable editor Form Type select\",\n            generalLabelInput: \"Variable editor Form Label field\",\n            generalLabelInputV2: \"data-testid Variable editor Form Label field\",\n            generalHideSelect: \"Variable editor Form Hide select\",\n            generalHideSelectV2: \"data-testid Variable editor Form Hide select\",\n            selectionOptionsMultiSwitch: \"Variable editor Form Multi switch\",\n            selectionOptionsIncludeAllSwitch: \"Variable editor Form IncludeAll switch\",\n            selectionOptionsCustomAllInput: \"Variable editor Form IncludeAll field\",\n            selectionOptionsCustomAllInputV2: \"data-testid Variable editor Form IncludeAll field\",\n            previewOfValuesOption: \"Variable editor Preview of Values option\",\n            submitButton: \"Variable editor Submit button\",\n            applyButton: \"data-testid Variable editor Apply button\"\n          },\n          QueryVariable: {\n            queryOptionsDataSourceSelect: Components.DataSourcePicker.container,\n            queryOptionsRefreshSelect: \"Variable editor Form Query Refresh select\",\n            queryOptionsRefreshSelectV2: \"data-testid Variable editor Form Query Refresh select\",\n            queryOptionsRegExInput: \"Variable editor Form Query RegEx field\",\n            queryOptionsRegExInputV2: \"data-testid Variable editor Form Query RegEx field\",\n            queryOptionsSortSelect: \"Variable editor Form Query Sort select\",\n            queryOptionsSortSelectV2: \"data-testid Variable editor Form Query Sort select\",\n            queryOptionsQueryInput: \"Variable editor Form Default Variable Query Editor textarea\",\n            valueGroupsTagsEnabledSwitch: \"Variable editor Form Query UseTags switch\",\n            valueGroupsTagsTagsQueryInput: \"Variable editor Form Query TagsQuery field\",\n            valueGroupsTagsTagsValuesQueryInput: \"Variable editor Form Query TagsValuesQuery field\"\n          },\n          ConstantVariable: {\n            constantOptionsQueryInput: \"Variable editor Form Constant Query field\",\n            constantOptionsQueryInputV2: \"data-testid Variable editor Form Constant Query field\"\n          },\n          DatasourceVariable: {\n            datasourceSelect: \"data-testid datasource variable datasource type\"\n          },\n          TextBoxVariable: {\n            textBoxOptionsQueryInput: \"Variable editor Form TextBox Query field\",\n            textBoxOptionsQueryInputV2: \"data-testid Variable editor Form TextBox Query field\"\n          },\n          CustomVariable: {\n            customValueInput: \"data-testid custom-variable-input\"\n          },\n          IntervalVariable: {\n            intervalsValueInput: \"data-testid interval variable intervals input\"\n          }\n        }\n      }\n    },\n    Annotations: {\n      marker: \"data-testid annotation-marker\"\n    }\n  },\n  Dashboards: {\n    url: \"/dashboards\",\n    /**\n     * @deprecated use components.Search.dashboardItem from Grafana 8.3 instead\n     */\n    dashboards: (title) => `Dashboard search item ${title}`\n  },\n  SaveDashboardAsModal: {\n    newName: \"Save dashboard title field\",\n    save: \"Save dashboard button\"\n  },\n  SaveDashboardModal: {\n    save: \"Dashboard settings Save Dashboard Modal Save button\",\n    saveVariables: \"Dashboard settings Save Dashboard Modal Save variables checkbox\",\n    saveTimerange: \"Dashboard settings Save Dashboard Modal Save timerange checkbox\"\n  },\n  SharePanelModal: {\n    linkToRenderedImage: \"Link to rendered image\"\n  },\n  ShareDashboardModal: {\n    shareButton: \"Share dashboard or panel\",\n    PublicDashboard: {\n      Tab: \"Tab Public dashboard\",\n      WillBePublicCheckbox: \"data-testid public dashboard will be public checkbox\",\n      LimitedDSCheckbox: \"data-testid public dashboard limited datasources checkbox\",\n      CostIncreaseCheckbox: \"data-testid public dashboard cost may increase checkbox\",\n      PauseSwitch: \"data-testid public dashboard pause switch\",\n      EnableAnnotationsSwitch: \"data-testid public dashboard on off switch for annotations\",\n      CreateButton: \"data-testid public dashboard create button\",\n      DeleteButton: \"data-testid public dashboard delete button\",\n      CopyUrlInput: \"data-testid public dashboard copy url input\",\n      CopyUrlButton: \"data-testid public dashboard copy url button\",\n      SettingsDropdown: \"data-testid public dashboard settings dropdown\",\n      TemplateVariablesWarningAlert: \"data-testid public dashboard disabled template variables alert\",\n      UnsupportedDataSourcesWarningAlert: \"data-testid public dashboard unsupported data sources alert\",\n      NoUpsertPermissionsWarningAlert: \"data-testid public dashboard no upsert permissions alert\",\n      EnableTimeRangeSwitch: \"data-testid public dashboard on off switch for time range\",\n      EmailSharingConfiguration: {\n        Container: \"data-testid email sharing config container\",\n        ShareType: \"data-testid public dashboard share type\",\n        EmailSharingInput: \"data-testid public dashboard email sharing input\",\n        EmailSharingInviteButton: \"data-testid public dashboard email sharing invite button\",\n        EmailSharingList: \"data-testid public dashboard email sharing list\",\n        DeleteEmail: \"data-testid public dashboard delete email button\",\n        ReshareLink: \"data-testid public dashboard reshare link button\"\n      }\n    }\n  },\n  PublicDashboard: {\n    page: \"public-dashboard-page\",\n    NotAvailable: {\n      container: \"public-dashboard-not-available\",\n      title: \"public-dashboard-title\",\n      pausedDescription: \"public-dashboard-paused-description\"\n    }\n  },\n  RequestViewAccess: {\n    form: \"request-view-access-form\",\n    recipientInput: \"request-view-access-recipient-input\",\n    submitButton: \"request-view-access-submit-button\"\n  },\n  Explore: {\n    url: \"/explore\",\n    General: {\n      container: \"data-testid Explore\",\n      graph: \"Explore Graph\",\n      table: \"Explore Table\",\n      scrollView: \"data-testid explorer scroll view\"\n    }\n  },\n  SoloPanel: {\n    url: (page) => `/d-solo/${page}`\n  },\n  PluginsList: {\n    page: \"Plugins list page\",\n    list: \"Plugins list\",\n    listItem: \"Plugins list item\",\n    signatureErrorNotice: \"Unsigned plugins notice\"\n  },\n  PluginPage: {\n    page: \"Plugin page\",\n    signatureInfo: \"Plugin signature info\",\n    disabledInfo: \"Plugin disabled info\"\n  },\n  PlaylistForm: {\n    name: \"Playlist name\",\n    interval: \"Playlist interval\",\n    itemDelete: \"Delete playlist item\"\n  },\n  BrowseDashbards: {\n    table: {\n      row: (uid) => `data-testid ${uid} row`,\n      checkbox: (uid) => `data-testid ${uid} checkbox`\n    }\n  },\n  Search: {\n    url: \"/?search=openn\",\n    FolderView: {\n      url: \"/?search=open&layout=folders\"\n    }\n  },\n  PublicDashboards: {\n    ListItem: {\n      linkButton: \"public-dashboard-link-button\",\n      configButton: \"public-dashboard-configuration-button\",\n      trashcanButton: \"public-dashboard-remove-button\",\n      pauseSwitch: \"data-testid public dashboard pause switch\"\n    }\n  },\n  UserListPage: {\n    tabs: {\n      allUsers: \"data-testid all-users-tab\",\n      orgUsers: \"data-testid org-users-tab\",\n      publicDashboardsUsers: \"data-testid public-dashboards-users-tab\",\n      users: \"data-testid users-tab\"\n    },\n    org: {\n      url: \"/org/users\"\n    },\n    admin: {\n      url: \"/admin/users\"\n    },\n    publicDashboards: {\n      container: \"data-testid public-dashboards-users-list\"\n    },\n    UserListAdminPage: {\n      container: \"data-testid user-list-admin-page\"\n    },\n    UsersListPage: {\n      container: \"data-testid users-list-page\"\n    },\n    UsersListPublicDashboardsPage: {\n      container: \"data-testid users-list-public-dashboards-page\",\n      DashboardsListModal: {\n        listItem: (uid) => `data-testid dashboards-list-item-${uid}`\n      }\n    }\n  }\n};\n\nexport { Pages };\n//# sourceMappingURL=pages.js.map\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-12-01: remove unused functions and methods\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { monacoTypes } from '@grafana/ui';\n\n// this thing here is a workaround in a way.\n// what we want to achieve, is that when the autocomplete-window\n// opens, the \"second, extra popup\" with the extra help,\n// also opens automatically.\n// but there is no API to achieve it.\n// the way to do it is to implement the `storageService`\n// interface, and provide our custom implementation,\n// which will default to `true` for the correct string-key.\n// unfortunately, while the typescript-interface exists,\n// it is not exported from monaco-editor,\n// so we cannot rely on typescript to make sure\n// we do it right. all we can do is to manually\n// lookup the interface, and make sure we code our code right.\n// our code is a \"best effort\" approach,\n// i am not 100% how the `scope` and `target` things work,\n// but so far it seems to work ok.\n// i would use an another approach, if there was one available.\n\nfunction makeStorageService() {\n  // we need to return an object that fulfills this interface:\n  // https://github.com/microsoft/vscode/blob/ff1e16eebb93af79fd6d7af1356c4003a120c563/src/vs/platform/storage/common/storage.ts#L37\n  // unfortunately it is not export from monaco-editor\n\n  const strings = new Map<string, string>();\n\n  // we want this to be true by default\n  strings.set('expandSuggestionDocs', true.toString());\n\n  return {\n    // we do not implement the on* handlers\n    onDidChangeValue: (data: unknown): void => undefined,\n    onDidChangeTarget: (data: unknown): void => undefined,\n    onWillSaveState: (data: unknown): void => undefined,\n\n    get: (key: string, scope: unknown, fallbackValue?: string): string | undefined => {\n      return strings.get(key) ?? fallbackValue;\n    },\n\n    getBoolean: (key: string, scope: unknown, fallbackValue?: boolean): boolean | undefined => {\n      const val = strings.get(key);\n      if (val !== undefined) {\n        // the interface-docs say the value will be converted\n        // to a boolean but do not specify how, so we improvise\n        return val === 'true';\n      } else {\n        return fallbackValue;\n      }\n    },\n\n    getNumber: (key: string, scope: unknown, fallbackValue?: number): number | undefined => {\n      const val = strings.get(key);\n      if (val !== undefined) {\n        return parseInt(val, 10);\n      } else {\n        return fallbackValue;\n      }\n    },\n\n    store: (\n      key: string,\n      value: string | boolean | number | undefined | null,\n      scope: unknown,\n      target: unknown\n    ): void => {\n      // the interface-docs say if the value is nullish, it should act as delete\n      if (value === null || value === undefined) {\n        strings.delete(key);\n      } else {\n        strings.set(key, value.toString());\n      }\n    },\n\n    remove: (key: string, scope: unknown): void => {\n      strings.delete(key);\n    },\n\n    keys: (scope: unknown, target: unknown): string[] => {\n      return Array.from(strings.keys());\n    },\n\n    logStorage: (): void => {\n      console.log('logStorage: not implemented');\n    },\n\n    migrate: (): Promise<void> => {\n      // we do not implement this\n      return Promise.resolve(undefined);\n    },\n\n    isNew: (scope: unknown): boolean => {\n      // we create a new storage for every session, we do not persist it,\n      // so we return `true`.\n      return true;\n    },\n\n    flush: (reason?: unknown): Promise<void> => {\n      // we do not implement this\n      return Promise.resolve(undefined);\n    },\n  };\n}\n\nlet overrideServices: monacoTypes.editor.IEditorOverrideServices | null = null;\n\nexport function getOverrideServices(): monacoTypes.editor.IEditorOverrideServices {\n  // only have one instance of this for every query editor\n  if (overrideServices === null) {\n    overrideServices = {\n      storageService: makeStorageService(),\n    };\n  }\n\n  return overrideServices;\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: remove argument for NeverCaseError\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n// this helper class is used to make typescript warn you when you forget\n// a case-block in a switch statement.\n// example code that triggers the typescript-error:\n//\n// const x:'A'|'B'|'C' = 'A';\n//\n// switch(x) {\n//   case 'A':\n//     // something\n//   case 'B':\n//     // something\n//   default:\n//     throw new NeverCaseError();\n// }\n//\n//\n// typescript will show an error in this case,\n// when you add the missing `case 'C'` code,\n// the problem will be fixed.\n\nexport class NeverCaseError extends Error {\n  constructor() {\n    super('should never happen');\n  }\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-14: replace promql FUNCTIONS to metricsql\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { escapeLabelValueInExactSelector } from '../../../language_utils';\nimport { FUNCTIONS } from '../../../metricsql';\n\nimport type { Situation, Label } from './situation';\nimport { NeverCaseError } from './util';\n// FIXME: we should not load this from the \"outside\", but we cannot do that while we have the \"old\" query-field too\n\nexport enum CompletionType {\n  history = 'HISTORY',\n  function = 'FUNCTION',\n  metricName = 'METRIC_NAME',\n  withTemplate = 'WITH_TEMPLATE',\n  duration = 'DURATION',\n  labelName = 'LABEL_NAME',\n  labelValue = 'LABEL_VALUE',\n}\n\ntype Completion = {\n  type: CompletionType;\n  label: string;\n  insertText: string;\n  detail?: string;\n  documentation?: string;\n  triggerOnInsert?: boolean;\n};\n\ntype Metric = {\n  name: string;\n  help: string;\n  type: string;\n};\n\ntype WithTemplate = {\n  name: string;\n  help: string;\n  value: string;\n};\n\nexport type DataProvider = {\n  getHistory: () => Promise<string[]>;\n  getAllMetricNames: () => Promise<Metric[]>;\n  getAllWithTemplates: () => Promise<WithTemplate[]>;\n  getAllLabelNames: () => Promise<string[]>;\n  getLabelValues: (labelName: string) => Promise<string[]>;\n  getSeries: (selector: string) => Promise<Record<string, string[]>>;\n};\n\n// we order items like: history, functions, metrics\n\nasync function getAllMetricNamesCompletions(dataProvider: DataProvider): Promise<Completion[]> {\n  const metrics = await dataProvider.getAllMetricNames();\n  return metrics.map((metric) => ({\n    type: CompletionType.metricName,\n    label: metric.name,\n    insertText: metric.name,\n    detail: `${metric.name} : ${metric.type}`,\n    documentation: metric.help,\n  }));\n}\n\nasync function getAllWithTemplatesCompletions(dataProvider: DataProvider): Promise<Completion[]> {\n  const metrics = await dataProvider.getAllWithTemplates();\n  return metrics.map((metric) => ({\n    type: CompletionType.withTemplate,\n    label: metric.name,\n    insertText: metric.name,\n    detail: metric.value,\n    documentation: metric.help,\n  }));\n}\n\nconst FUNCTION_COMPLETIONS: Completion[] = FUNCTIONS.map((f) => ({\n  type: CompletionType.function,\n  label: f.label,\n  insertText: f.insertText ?? '', // i don't know what to do when this is nullish. it should not be.\n  detail: f.detail,\n  documentation: f.documentation,\n}));\n\nasync function getAllFunctionsAndMetricNamesCompletions(dataProvider: DataProvider): Promise<Completion[]> {\n  const metricNames = await getAllMetricNamesCompletions(dataProvider);\n  const withTemplates = await getAllWithTemplatesCompletions(dataProvider);\n  return [...FUNCTION_COMPLETIONS, ...metricNames, ...withTemplates];\n}\n\nconst DURATION_COMPLETIONS: Completion[] = [\n  '$__interval',\n  '$__range',\n  '$__rate_interval',\n  '1m',\n  '5m',\n  '10m',\n  '30m',\n  '1h',\n  '1d',\n].map((text) => ({\n  type: CompletionType.duration,\n  label: text,\n  insertText: text,\n}));\n\nasync function getAllHistoryCompletions(dataProvider: DataProvider): Promise<Completion[]> {\n  // function getAllHistoryCompletions(queryHistory: PromHistoryItem[]): Completion[] {\n  // NOTE: the typescript types are wrong. historyItem.query.expr can be undefined\n  const allHistory = await dataProvider.getHistory();\n  // FIXME: find a better history-limit\n  return allHistory.slice(0, 10).map((expr) => ({\n    type: CompletionType.history,\n    label: expr,\n    insertText: expr,\n  }));\n}\n\nfunction makeSelector(metricName: string | undefined, labels: Label[]): string {\n  const allLabels = [...labels];\n\n  // we transform the metricName to a label, if it exists\n  if (metricName !== undefined) {\n    allLabels.push({ name: '__name__', value: metricName, op: '=' });\n  }\n\n  const allLabelTexts = allLabels.map(\n    (label) => `${label.name}${label.op}\"${escapeLabelValueInExactSelector(label.value)}\"`\n  );\n\n  return `{${allLabelTexts.join(',')}}`;\n}\n\nasync function getLabelNames(\n  metric: string | undefined,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<string[]> {\n  if (metric === undefined && otherLabels.length === 0) {\n    // if there is no filtering, we have to use a special endpoint\n    return dataProvider.getAllLabelNames();\n  } else {\n    const selector = makeSelector(metric, otherLabels);\n    const data = await dataProvider.getSeries(selector);\n    const possibleLabelNames = Object.keys(data); // all names from prometheus\n    const usedLabelNames = new Set(otherLabels.map((l) => l.name)); // names used in the query\n    return possibleLabelNames.filter((l) => !usedLabelNames.has(l));\n  }\n}\n\nasync function getLabelNamesForCompletions(\n  metric: string | undefined,\n  suffix: string,\n  triggerOnInsert: boolean,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<Completion[]> {\n  const labelNames = await getLabelNames(metric, otherLabels, dataProvider);\n  const labelNamesCompletion: Completion[] = labelNames.map((text) => ({\n    type: CompletionType.labelName,\n    label: text,\n    insertText: `${text}${suffix}`,\n    triggerOnInsert,\n  }))\n  const withTemplatesCompletions = await getAllWithTemplatesCompletions(dataProvider);\n  const withTemplatesCompletionsLabels = withTemplatesCompletions.filter((c) => {\n    const regexp = new RegExp(`${c.label}\\\\s?=\\\\s?`, 'gm')\n    return c.detail?.replace(regexp, '').charAt(0) === '{'\n  })\n  return labelNamesCompletion.concat(withTemplatesCompletionsLabels)\n}\n\nasync function getLabelNamesForSelectorCompletions(\n  metric: string | undefined,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<Completion[]> {\n  return getLabelNamesForCompletions(metric, '=', true, otherLabels, dataProvider);\n}\nasync function getLabelNamesForByCompletions(\n  metric: string | undefined,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<Completion[]> {\n  return getLabelNamesForCompletions(metric, '', false, otherLabels, dataProvider);\n}\n\nasync function getLabelValues(\n  metric: string | undefined,\n  labelName: string,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<string[]> {\n  if (metric === undefined && otherLabels.length === 0) {\n    // if there is no filtering, we have to use a special endpoint\n    return dataProvider.getLabelValues(labelName);\n  } else {\n    const selector = makeSelector(metric, otherLabels);\n    const data = await dataProvider.getSeries(selector);\n    return data[labelName] ?? [];\n  }\n}\n\nasync function getLabelValuesForMetricCompletions(\n  metric: string | undefined,\n  labelName: string,\n  betweenQuotes: boolean,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<Completion[]> {\n  const values = await getLabelValues(metric, labelName, otherLabels, dataProvider);\n  return values.map((text) => ({\n    type: CompletionType.labelValue,\n    label: text,\n    insertText: betweenQuotes ? text : `\"${text}\"`, // FIXME: escaping strange characters?\n  }));\n}\n\nexport async function getCompletions(situation: Situation, dataProvider: DataProvider): Promise<Completion[]> {\n  switch (situation.type) {\n    case 'IN_DURATION':\n      return DURATION_COMPLETIONS;\n    case 'IN_FUNCTION':\n      return getAllFunctionsAndMetricNamesCompletions(dataProvider);\n    case 'AT_ROOT': {\n      return getAllFunctionsAndMetricNamesCompletions(dataProvider);\n    }\n    case 'EMPTY': {\n      const metricNames = await getAllMetricNamesCompletions(dataProvider);\n      const historyCompletions = await getAllHistoryCompletions(dataProvider);\n      return [...historyCompletions, ...FUNCTION_COMPLETIONS, ...metricNames];\n    }\n    case 'IN_LABEL_SELECTOR_NO_LABEL_NAME':\n      return getLabelNamesForSelectorCompletions(situation.metricName, situation.otherLabels, dataProvider);\n    case 'IN_GROUPING':\n      return getLabelNamesForByCompletions(situation.metricName, situation.otherLabels, dataProvider);\n    case 'IN_LABEL_SELECTOR_WITH_LABEL_NAME':\n      return getLabelValuesForMetricCompletions(\n        situation.metricName,\n        situation.labelName,\n        situation.betweenQuotes,\n        situation.otherLabels,\n        dataProvider\n      );\n    default:\n      throw new NeverCaseError();\n  }\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: remove argument for NeverCaseError\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport type { SyntaxNode, Tree } from '@lezer/common';\nimport {\n  AggregateExpr,\n  AggregateModifier,\n  EqlRegex,\n  EqlSingle,\n  FunctionCallBody,\n  GroupingLabels,\n  Identifier,\n  LabelMatcher,\n  LabelMatchers,\n  LabelMatchList,\n  LabelName,\n  MatchOp,\n  MatrixSelector,\n  MetricIdentifier,\n  Neq,\n  NeqRegex,\n  parser,\n  MetricsQL,\n  StringLiteral,\n  VectorSelector,\n} from 'lezer-metricsql';\n\nimport { NeverCaseError } from './util';\n\ntype Direction = 'parent' | 'firstChild' | 'lastChild' | 'nextSibling';\n\ntype NodeTypeId =\n  | 0 // this is used as error-id\n  | typeof AggregateExpr\n  | typeof AggregateModifier\n  | typeof FunctionCallBody\n  | typeof GroupingLabels\n  | typeof Identifier\n  | typeof LabelMatcher\n  | typeof LabelMatchers\n  | typeof LabelMatchList\n  | typeof LabelName\n  | typeof MetricIdentifier\n  | typeof MetricsQL\n  | typeof StringLiteral\n  | typeof VectorSelector\n  | typeof MatrixSelector\n  | typeof MatchOp\n  | typeof EqlSingle\n  | typeof Neq\n  | typeof EqlRegex\n  | typeof NeqRegex;\n\ntype Path = Array<[Direction, NodeTypeId]>;\n\nfunction move(node: SyntaxNode, direction: Direction): SyntaxNode | null {\n  switch (direction) {\n    case 'parent':\n      return node.parent;\n    case 'firstChild':\n      return node.firstChild;\n    case 'lastChild':\n      return node.lastChild;\n    case 'nextSibling':\n      return node.nextSibling;\n    default:\n      throw new NeverCaseError();\n  }\n}\n\nfunction walk(node: SyntaxNode, path: Path): SyntaxNode | null {\n  let current: SyntaxNode | null = node;\n  for (const [direction, expectedType] of path) {\n    current = move(current, direction);\n    if (current === null) {\n      // we could not move in the direction, we stop\n      return null;\n    }\n    if (current.type.id !== expectedType) {\n      // the reached node has wrong type, we stop\n      return null;\n    }\n  }\n  return current;\n}\n\nfunction getNodeText(node: SyntaxNode, text: string): string {\n  return text.slice(node.from, node.to);\n}\n\nfunction parsePromQLStringLiteral(text: string): string {\n  // if it is a string-literal, it is inside quotes of some kind\n  const inside = text.slice(1, text.length - 1);\n\n  // FIXME: support https://prometheus.io/docs/prometheus/latest/querying/basics/#string-literals\n  // FIXME: maybe check other promql code, if all is supported or not\n\n  // for now we do only some very simple un-escaping\n\n  // we start with double-quotes\n  if (text.startsWith('\"') && text.endsWith('\"')) {\n    // NOTE: this is not 100% perfect, we only unescape the double-quote,\n    // there might be other characters too\n    return inside.replace(/\\\\\"/, '\"');\n  }\n\n  // then single-quote\n  if (text.startsWith(\"'\") && text.endsWith(\"'\")) {\n    // NOTE: this is not 100% perfect, we only unescape the single-quote,\n    // there might be other characters too\n    return inside.replace(/\\\\'/, \"'\");\n  }\n\n  // then backticks\n  if (text.startsWith('`') && text.endsWith('`')) {\n    return inside;\n  }\n\n  throw new Error('FIXME: invalid string literal');\n}\n\ntype LabelOperator = '=' | '!=' | '=~' | '!~';\n\nexport type Label = {\n  name: string;\n  value: string;\n  op: LabelOperator;\n};\n\nexport type Situation =\n  | {\n      type: 'IN_FUNCTION';\n    }\n  | {\n      type: 'AT_ROOT';\n    }\n  | {\n      type: 'EMPTY';\n    }\n  | {\n      type: 'IN_DURATION';\n    }\n  | {\n      type: 'IN_LABEL_SELECTOR_NO_LABEL_NAME';\n      metricName?: string;\n      otherLabels: Label[];\n    }\n  | {\n      type: 'IN_GROUPING';\n      metricName: string;\n      otherLabels: Label[];\n    }\n  | {\n      type: 'IN_LABEL_SELECTOR_WITH_LABEL_NAME';\n      metricName?: string;\n      labelName: string;\n      betweenQuotes: boolean;\n      otherLabels: Label[];\n    };\n\ntype Resolver = {\n  path: NodeTypeId[];\n  fun: (node: SyntaxNode, text: string, pos: number) => Situation | null;\n};\n\nfunction isPathMatch(resolverPath: NodeTypeId[], cursorPath: number[]): boolean {\n  return resolverPath.every((item, index) => item === cursorPath[index]);\n}\n\nconst ERROR_NODE_NAME: NodeTypeId = 0; // this is used as error-id\n\nconst RESOLVERS: Resolver[] = [\n  {\n    path: [LabelMatchers, VectorSelector],\n    fun: resolveLabelKeysWithEquals,\n  },\n  {\n    path: [MetricsQL],\n    fun: resolveTopLevel,\n  },\n  {\n    path: [FunctionCallBody],\n    fun: resolveInFunction,\n  },\n  {\n    path: [StringLiteral, LabelMatcher],\n    fun: resolveLabelMatcher,\n  },\n  {\n    path: [ERROR_NODE_NAME, LabelMatcher],\n    fun: resolveLabelMatcher,\n  },\n  {\n    path: [ERROR_NODE_NAME, MatrixSelector],\n    fun: resolveDurations,\n  },\n  {\n    path: [GroupingLabels],\n    fun: resolveLabelsForGrouping,\n  },\n];\n\nconst LABEL_OP_MAP = new Map<number, LabelOperator>([\n  [EqlSingle, '='],\n  [EqlRegex, '=~'],\n  [Neq, '!='],\n  [NeqRegex, '!~'],\n]);\n\nfunction getLabelOp(opNode: SyntaxNode): LabelOperator | null {\n  const opChild = opNode.firstChild;\n  if (opChild === null) {\n    return null;\n  }\n\n  return LABEL_OP_MAP.get(opChild.type.id) ?? null;\n}\n\nfunction getLabel(labelMatcherNode: SyntaxNode, text: string): Label | null {\n  if (labelMatcherNode.type.id !== LabelMatcher) {\n    return null;\n  }\n\n  const nameNode = walk(labelMatcherNode, [['firstChild', LabelName]]);\n\n  if (nameNode === null) {\n    return null;\n  }\n\n  const opNode = walk(nameNode, [['nextSibling', MatchOp]]);\n  if (opNode === null) {\n    return null;\n  }\n\n  const op = getLabelOp(opNode);\n  if (op === null) {\n    return null;\n  }\n\n  const valueNode = walk(labelMatcherNode, [['lastChild', StringLiteral]]);\n\n  if (valueNode === null) {\n    return null;\n  }\n\n  const name = getNodeText(nameNode, text);\n  const value = parsePromQLStringLiteral(getNodeText(valueNode, text));\n\n  return { name, value, op };\n}\n\nfunction getLabels(labelMatchersNode: SyntaxNode, text: string): Label[] {\n  if (labelMatchersNode.type.id !== LabelMatchers) {\n    return [];\n  }\n\n  let listNode: SyntaxNode | null = walk(labelMatchersNode, [['firstChild', LabelMatchList]]);\n\n  const labels: Label[] = [];\n\n  while (listNode !== null) {\n    const matcherNode = walk(listNode, [['lastChild', LabelMatcher]]);\n    if (matcherNode === null) {\n      // unexpected, we stop\n      return [];\n    }\n\n    const label = getLabel(matcherNode, text);\n    if (label !== null) {\n      labels.push(label);\n    }\n\n    // there might be more labels\n    listNode = walk(listNode, [['firstChild', LabelMatchList]]);\n  }\n\n  // our labels-list is last-first, so we reverse it\n  labels.reverse();\n\n  return labels;\n}\n\nfunction getNodeChildren(node: SyntaxNode): SyntaxNode[] {\n  let child: SyntaxNode | null = node.firstChild;\n  const children: SyntaxNode[] = [];\n  while (child !== null) {\n    children.push(child);\n    child = child.nextSibling;\n  }\n  return children;\n}\n\nfunction getNodeInSubtree(node: SyntaxNode, typeId: NodeTypeId): SyntaxNode | null {\n  // first we try the current node\n  if (node.type.id === typeId) {\n    return node;\n  }\n\n  // then we try the children\n  const children = getNodeChildren(node);\n  for (const child of children) {\n    const n = getNodeInSubtree(child, typeId);\n    if (n !== null) {\n      return n;\n    }\n  }\n\n  return null;\n}\n\nfunction resolveLabelsForGrouping(node: SyntaxNode, text: string): Situation | null {\n  const aggrExpNode = walk(node, [\n    ['parent', AggregateModifier],\n    ['parent', AggregateExpr],\n  ]);\n  if (aggrExpNode === null) {\n    return null;\n  }\n  const bodyNode = aggrExpNode.getChild(FunctionCallBody);\n  if (bodyNode === null) {\n    return null;\n  }\n\n  const metricIdNode = getNodeInSubtree(bodyNode, MetricIdentifier);\n  if (metricIdNode === null) {\n    return null;\n  }\n\n  const idNode = walk(metricIdNode, [['firstChild', Identifier]]);\n  if (idNode === null) {\n    return null;\n  }\n\n  const metricName = getNodeText(idNode, text);\n  return {\n    type: 'IN_GROUPING',\n    metricName,\n    otherLabels: [],\n  };\n}\n\nfunction resolveLabelMatcher(node: SyntaxNode, text: string): Situation | null {\n  // we can arrive here in two situation. `node` is either:\n  // - a StringNode (like in `{job=\"^\"}`)\n  // - or an error node (like in `{job=^}`)\n  const inStringNode = !node.type.isError;\n\n  const parent = walk(node, [['parent', LabelMatcher]]);\n  if (parent === null) {\n    return null;\n  }\n\n  const labelNameNode = walk(parent, [['firstChild', LabelName]]);\n  if (labelNameNode === null) {\n    return null;\n  }\n\n  const labelName = getNodeText(labelNameNode, text);\n\n  // now we need to go up, to the parent of LabelMatcher,\n  // there can be one or many `LabelMatchList` parents, we have\n  // to go through all of them\n\n  const firstListNode = walk(parent, [['parent', LabelMatchList]]);\n  if (firstListNode === null) {\n    return null;\n  }\n\n  let listNode = firstListNode;\n\n  // we keep going through the parent-nodes\n  // as long as they are LabelMatchList.\n  // as soon as we reawch LabelMatchers, we stop\n  let labelMatchersNode: SyntaxNode | null = null;\n  while (labelMatchersNode === null) {\n    const p = listNode.parent;\n    if (p === null) {\n      return null;\n    }\n\n    const { id } = p.type;\n\n    switch (id) {\n      case LabelMatchList:\n        //we keep looping\n        listNode = p;\n        continue;\n      case LabelMatchers:\n        // we reached the end, we can stop the loop\n        labelMatchersNode = p;\n        continue;\n      default:\n        // we reached some other node, we stop\n        return null;\n    }\n  }\n\n  // now we need to find the other names\n  const allLabels = getLabels(labelMatchersNode, text);\n\n  // we need to remove \"our\" label from all-labels, if it is in there\n  const otherLabels = allLabels.filter((label) => label.name !== labelName);\n\n  const metricNameNode = walk(labelMatchersNode, [\n    ['parent', VectorSelector],\n    ['firstChild', MetricIdentifier],\n    ['firstChild', Identifier],\n  ]);\n\n  if (metricNameNode === null) {\n    // we are probably in a situation without a metric name\n    return {\n      type: 'IN_LABEL_SELECTOR_WITH_LABEL_NAME',\n      labelName,\n      betweenQuotes: inStringNode,\n      otherLabels,\n    };\n  }\n\n  const metricName = getNodeText(metricNameNode, text);\n\n  return {\n    type: 'IN_LABEL_SELECTOR_WITH_LABEL_NAME',\n    metricName,\n    labelName,\n    betweenQuotes: inStringNode,\n    otherLabels,\n  };\n}\n\nfunction resolveTopLevel(): Situation {\n  return {\n    type: 'AT_ROOT',\n  };\n}\n\nfunction resolveInFunction(): Situation {\n  return {\n    type: 'IN_FUNCTION',\n  };\n}\n\nfunction resolveDurations(): Situation {\n  return {\n    type: 'IN_DURATION',\n  };\n}\n\nfunction subTreeHasError(node: SyntaxNode): boolean {\n  return getNodeInSubtree(node, ERROR_NODE_NAME) !== null;\n}\n\nfunction resolveLabelKeysWithEquals(node: SyntaxNode, text: string, pos: number): Situation | null {\n  // for example `something{^}`\n\n  // there are some false positives that can end up in this situation, that we want\n  // to eliminate:\n  // `something{a~^}` (if this subtree contains any error-node, we stop)\n  if (subTreeHasError(node)) {\n    return null;\n  }\n\n  // next false positive:\n  // `something{a=\"1\"^}`\n  const child = walk(node, [['firstChild', LabelMatchList]]);\n  if (child !== null) {\n    // means the label-matching part contains at least one label already.\n    //\n    // in this case, we will need to have a `,` character at the end,\n    // to be able to suggest adding the next label.\n    // the area between the end-of-the-child-node and the cursor-pos\n    // must contain a `,` in this case.\n    const textToCheck = text.slice(child.to, pos);\n\n    if (!textToCheck.includes(',')) {\n      return null;\n    }\n  }\n\n  const metricNameNode = walk(node, [\n    ['parent', VectorSelector],\n    ['firstChild', MetricIdentifier],\n    ['firstChild', Identifier],\n  ]);\n\n  const otherLabels = getLabels(node, text);\n\n  if (metricNameNode === null) {\n    // we are probably in a situation without a metric name.\n    return {\n      type: 'IN_LABEL_SELECTOR_NO_LABEL_NAME',\n      otherLabels,\n    };\n  }\n\n  const metricName = getNodeText(metricNameNode, text);\n\n  return {\n    type: 'IN_LABEL_SELECTOR_NO_LABEL_NAME',\n    metricName,\n    otherLabels,\n  };\n}\n\n// we find the first error-node in the tree that is at the cursor-position.\n// NOTE: this might be too slow, might need to optimize it\n// (ideas: we do not need to go into every subtree, based on from/to)\n// also, only go to places that are in the sub-tree of the node found\n// by default by lezer. problem is, `next()` will go upward too,\n// and we do not want to go higher than our node\nfunction getErrorNode(tree: Tree, pos: number): SyntaxNode | null {\n  const cur = tree.cursorAt(pos);\n  while (true) {\n    if (cur.from === pos && cur.to === pos) {\n      const { node } = cur;\n      if (node.type.isError) {\n        return node;\n      }\n    }\n\n    if (!cur.next()) {\n      break;\n    }\n  }\n  return null;\n}\n\nexport function getSituation(text: string, pos: number): Situation | null {\n  // there is a special-case when we are at the start of writing text,\n  // so we handle that case first\n\n  if (text === '') {\n    return {\n      type: 'EMPTY',\n    };\n  }\n\n  /*\n\tMetricsQL\n  Expr\n  VectorSelector\n  LabelMatchers\n  */\n  const tree = parser.parse(text);\n\n  // if the tree contains error, it is very probable that\n  // our node is one of those error-nodes.\n  // also, if there are errors, the node lezer finds us,\n  // might not be the best node.\n  // so first we check if there is an error-node at the cursor-position\n  // @ts-ignore\n  const maybeErrorNode = getErrorNode(tree, pos);\n\n  const cur = maybeErrorNode != null ? maybeErrorNode.cursor() : tree.cursorAt(pos);\n  const currentNode = cur.node;\n\n  const ids = [cur.type.id];\n  while (cur.parent()) {\n    ids.push(cur.type.id);\n  }\n\n  for (let resolver of RESOLVERS) {\n    // i do not use a foreach because i want to stop as soon\n    // as i find something\n    if (isPathMatch(resolver.path, ids)) {\n      // @ts-ignore\n      return resolver.fun(currentNode, text, pos);\n    }\n  }\n\n  return null;\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: change param 'documentation' for suggestions\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { IMarkdownString } from \"monaco-editor\";\n\nimport type { Monaco, monacoTypes } from '@grafana/ui';\n\nimport { escapeMetricNameSpecialCharacters } from \"../../../language_utils\";\n\nimport { CompletionType, DataProvider, getCompletions } from './completions';\nimport { getSituation } from './situation';\nimport { NeverCaseError } from './util';\n\nexport function getSuggestOptions(): monacoTypes.editor.ISuggestOptions {\n  return {\n    // monaco-editor sometimes provides suggestions automatically, i am not\n    // sure based on what, seems to be by analyzing the words already\n    // written.\n    // to try it out:\n    // - enter `go_goroutines{job~`\n    // - have the cursor at the end of the string\n    // - press ctrl-enter\n    // - you will get two suggestions\n    // those were not provided by grafana, they are offered automatically.\n    // i want to remove those. the only way i found is:\n    // - every suggestion-item has a `kind` attribute,\n    //   that controls the icon to the left of the suggestion.\n    // - items auto-generated by monaco have `kind` set to `text`.\n    // - we make sure grafana-provided suggestions do not have `kind` set to `text`.\n    // - and then we tell monaco not to show suggestions of kind `text`\n    showWords: false,\n  };\n}\n\nfunction getMonacoCompletionItemKind(type: CompletionType, monaco: Monaco): monacoTypes.languages.CompletionItemKind {\n  switch (type) {\n    case CompletionType.duration:\n      return monaco.languages.CompletionItemKind.Unit;\n    case CompletionType.function:\n      return monaco.languages.CompletionItemKind.Variable;\n    case CompletionType.history:\n      return monaco.languages.CompletionItemKind.Snippet;\n    case CompletionType.labelName:\n      return monaco.languages.CompletionItemKind.Enum;\n    case CompletionType.labelValue:\n      return monaco.languages.CompletionItemKind.EnumMember;\n    case CompletionType.metricName:\n      return monaco.languages.CompletionItemKind.Constructor;\n    case CompletionType.withTemplate:\n      return monaco.languages.CompletionItemKind.Constant;\n    default:\n      throw new NeverCaseError();\n  }\n}\nexport function getCompletionProvider(\n  monaco: Monaco,\n  dataProvider: DataProvider\n): monacoTypes.languages.CompletionItemProvider {\n  const provideCompletionItems = (\n    model: monacoTypes.editor.ITextModel,\n    position: monacoTypes.Position\n  ): monacoTypes.languages.ProviderResult<monacoTypes.languages.CompletionList> => {\n    const word = model.getWordAtPosition(position);\n    const range =\n      word != null\n        ? monaco.Range.lift({\n            startLineNumber: position.lineNumber,\n            endLineNumber: position.lineNumber,\n            startColumn: word.startColumn,\n            endColumn: word.endColumn,\n          })\n        : monaco.Range.fromPositions(position);\n    // documentation says `position` will be \"adjusted\" in `getOffsetAt`\n    // i don't know what that means, to be sure i clone it\n    const positionClone = {\n      column: position.column,\n      lineNumber: position.lineNumber,\n    };\n    const offset = model.getOffsetAt(positionClone);\n    const situation = getSituation(model.getValue(), offset);\n    const completionsPromise = situation != null ? getCompletions(situation, dataProvider) : Promise.resolve([]);\n    return completionsPromise.then((items) => {\n      // monaco by-default alphabetically orders the items.\n      // to stop it, we use a number-as-string sortkey,\n      // so that monaco keeps the order we use\n      const maxIndexDigits = items.length.toString().length;\n      const suggestions: monacoTypes.languages.CompletionItem[] = items.map((item, index) => ({\n        kind: getMonacoCompletionItemKind(item.type, monaco),\n        label: item.label,\n        insertText: item.type === CompletionType.metricName ? escapeMetricNameSpecialCharacters(item.insertText) : item.insertText,\n        detail: item.detail,\n        documentation: { value: item.documentation } as IMarkdownString,\n        sortText: index.toString().padStart(maxIndexDigits, '0'), // to force the order we have\n        range,\n        command: item.triggerOnInsert\n          ? {\n              id: 'editor.action.triggerSuggest',\n              title: '',\n            }\n          : undefined,\n      }));\n      return { suggestions };\n    });\n  };\n\n  return {\n    triggerCharacters: ['{', ',', '[', '(', '=', '~', ' ', '\"'],\n    provideCompletionItems,\n  };\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: remove onChangeRef\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport { promLanguageDefinition } from 'monaco-promql';\nimport React, { useRef, useEffect } from 'react';\nimport { useLatest } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { useTheme2, ReactMonacoEditor, Monaco, monacoTypes } from '@grafana/ui';\n\nimport { Props } from './MonacoQueryFieldProps';\nimport { getOverrideServices } from './getOverrideServices';\nimport { getCompletionProvider, getSuggestOptions } from './monaco-completion-provider';\n\nconst options: monacoTypes.editor.IStandaloneEditorConstructionOptions = {\n  codeLens: false,\n  contextmenu: false,\n  // we need `fixedOverflowWidgets` because otherwise in grafana-dashboards\n  // the popup is clipped by the panel-visualizations.\n  fixedOverflowWidgets: true,\n  folding: false,\n  fontSize: 14,\n  lineDecorationsWidth: 8, // used as \"padding-left\"\n  lineNumbers: 'off',\n  minimap: { enabled: false },\n  overviewRulerBorder: false,\n  overviewRulerLanes: 0,\n  padding: {\n    // these numbers were picked so that visually this matches the previous version\n    // of the query-editor the best\n    top: 4,\n    bottom: 5,\n  },\n  renderLineHighlight: 'none',\n  scrollbar: {\n    vertical: 'hidden',\n    verticalScrollbarSize: 8, // used as \"padding-right\"\n    horizontal: 'hidden',\n    horizontalScrollbarSize: 0,\n  },\n  scrollBeyondLastLine: false,\n  suggest: getSuggestOptions(),\n  suggestFontSize: 12,\n  wordWrap: 'on',\n};\n\n// this number was chosen by testing various values. it might be necessary\n// because of the width of the border, not sure.\n//it needs to do 2 things:\n// 1. when the editor is single-line, it should make the editor height be visually correct\n// 2. when the editor is multi-line, the editor should not be \"scrollable\" (meaning,\n//    you do a scroll-movement in the editor, and it will scroll the content by a couple pixels\n//    up & down. this we want to avoid)\nconst EDITOR_HEIGHT_OFFSET = 2;\n\nconst PROMQL_LANG_ID = promLanguageDefinition.id;\n\n// we must only run the promql-setup code once\nlet PROMQL_SETUP_STARTED = false;\n\nfunction ensurePromQL(monaco: Monaco) {\n  if (!PROMQL_SETUP_STARTED) {\n    PROMQL_SETUP_STARTED = true;\n    const { aliases, extensions, mimetypes, loader } = promLanguageDefinition;\n    monaco.languages.register({ id: PROMQL_LANG_ID, aliases, extensions, mimetypes });\n\n    loader().then((mod) => {\n      monaco.languages.setMonarchTokensProvider(PROMQL_LANG_ID, mod.language);\n      monaco.languages.setLanguageConfiguration(PROMQL_LANG_ID, mod.languageConfiguration);\n    });\n  }\n}\n\nconst getStyles = (theme: GrafanaTheme2, placeholder: string) => {\n  return {\n    container: css`\n      border-radius: ${theme.shape.borderRadius()};\n      border: 1px solid ${theme.components.input.borderColor};\n    `,\n    placeholder: css`\n      ::after {\n        content: '${placeholder}';\n        font-family: ${theme.typography.fontFamilyMonospace};\n        opacity: 0.3;\n      }\n    `,\n  };\n};\n\nconst MonacoQueryField = (props: Props) => {\n  // we need only one instance of `overrideServices` during the lifetime of the react component\n  const overrideServicesRef = useRef(getOverrideServices());\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { languageProvider, history, onBlur, onRunQuery, initialValue, placeholder, readOnly } = props;\n\n  const lpRef = useLatest(languageProvider);\n  const historyRef = useLatest(history);\n  const onRunQueryRef = useLatest(onRunQuery);\n  const onBlurRef = useLatest(onBlur);\n\n  const autocompleteDisposeFun = useRef<(() => void) | null>(null);\n\n  const theme = useTheme2();\n  const styles = getStyles(theme, placeholder);\n\n  useEffect(() => {\n    // when we unmount, we unregister the autocomplete-function, if it was registered\n    return () => {\n      autocompleteDisposeFun.current?.();\n    };\n  }, []);\n\n  return (\n    <div\n      aria-label={selectors.components.QueryField.container}\n      className={styles.container}\n      // NOTE: we will be setting inline-style-width/height on this element\n      ref={containerRef}\n    >\n      <ReactMonacoEditor\n        overrideServices={overrideServicesRef.current}\n        options={{\n          ...options,\n          readOnly\n        }}\n        language=\"promql\"\n        value={initialValue}\n        beforeMount={(monaco) => {\n          ensurePromQL(monaco);\n        }}\n        onMount={(editor, monaco) => {\n          // we setup on-blur\n          editor.onDidBlurEditorWidget(() => {\n            onBlurRef.current(editor.getValue());\n          });\n\n          // we construct a DataProvider object\n          const getSeries = (selector: string) => lpRef.current.getSeries(selector);\n\n          const getHistory = () =>\n            Promise.resolve(historyRef.current.map((h) => h.query.expr).filter((expr) => expr !== undefined));\n\n          const getAllMetricNames = () => {\n            const { metrics, metricsMetadata } = lpRef.current;\n            const result = metrics.map((m) => {\n              const metaItem = metricsMetadata?.[m];\n              return {\n                name: m,\n                help: metaItem?.help ?? '',\n                type: metaItem?.type ?? '',\n              };\n            });\n\n            return Promise.resolve(result);\n          };\n\n          const getAllWithTemplates = () => {\n            const { withTemplates } = lpRef.current;\n            const result = withTemplates.map(t => ({\n              name: t.label,\n              help: t.comment || \"\",\n              value: t.value\n            }))\n\n            return Promise.resolve(result);\n          };\n\n          const getAllLabelNames = () => Promise.resolve(lpRef.current.getLabelKeys());\n\n          const getLabelValues = (labelName: string) => lpRef.current.getLabelValues(labelName);\n\n          const dataProvider = {\n            getSeries,\n            getHistory,\n            getAllMetricNames,\n            getAllWithTemplates,\n            getAllLabelNames,\n            getLabelValues\n          };\n          const completionProvider = getCompletionProvider(monaco, dataProvider);\n\n          // completion-providers in monaco are not registered directly to editor-instances,\n          // they are registered to languages. this makes it hard for us to have\n          // separate completion-providers for every query-field-instance\n          // (but we need that, because they might connect to different datasources).\n          // the trick we do is, we wrap the callback in a \"proxy\",\n          // and in the proxy, the first thing is, we check if we are called from\n          // \"our editor instance\", and if not, we just return nothing. if yes,\n          // we call the completion-provider.\n          const filteringCompletionProvider: monacoTypes.languages.CompletionItemProvider = {\n            ...completionProvider,\n            provideCompletionItems: (model, position, context, token) => {\n              // if the model-id does not match, then this call is from a different editor-instance,\n              // not \"our instance\", so return nothing\n              if (editor.getModel()?.id !== model.id) {\n                return { suggestions: [] };\n              }\n              return completionProvider.provideCompletionItems(model, position, context, token);\n            },\n          };\n\n          const { dispose } = monaco.languages.registerCompletionItemProvider(\n            PROMQL_LANG_ID,\n            filteringCompletionProvider\n          );\n\n          autocompleteDisposeFun.current = dispose;\n          // this code makes the editor resize itself so that the content fits\n          // (it will grow taller when necessary)\n          // FIXME: maybe move this functionality into CodeEditor, like:\n          // <CodeEditor resizingMode=\"single-line\"/>\n          const updateElementHeight = () => {\n            const containerDiv = containerRef.current;\n            if (containerDiv !== null) {\n              const pixelHeight = editor.getContentHeight();\n              containerDiv.style.height = `${pixelHeight + EDITOR_HEIGHT_OFFSET}px`;\n              containerDiv.style.width = '100%';\n              const pixelWidth = containerDiv.clientWidth;\n              editor.layout({ width: pixelWidth, height: pixelHeight });\n            }\n          };\n\n          editor.onDidContentSizeChange(updateElementHeight);\n          updateElementHeight();\n\n          // handle: shift + enter\n          editor.addAction({\n            id: \"execute-shift-enter\",\n            label: \"Execute\",\n            keybindings: [monaco.KeyMod.Shift | monaco.KeyCode.Enter],\n            run: () => onRunQueryRef.current(editor.getValue() || \"\")\n          });\n\n          /* Something in this configuration of monaco doesn't bubble up [mod]+K, which the\n          command palette uses. Pass the event out of monaco manually\n          */\n          editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyK, function () {\n            global.dispatchEvent(new KeyboardEvent('keydown', { key: 'k', metaKey: true }));\n          });\n\n          if (placeholder) {\n            const placeholderDecorators = [\n              {\n                range: new monaco.Range(1, 1, 1, 1),\n                contents: [\n                  { value: \"**bold** _italics_ regular `code`\" }\n                ],\n                options: {\n                  className: styles.placeholder,\n                  isWholeLine: true,\n                },\n              },\n            ];\n\n            let decorators: string[] = [];\n\n            const checkDecorators: () => void = () => {\n              const model = editor.getModel();\n\n              if (!model) {\n                return;\n              }\n\n              const newDecorators = model.getValueLength() === 0 ? placeholderDecorators : [];\n              decorators = model.deltaDecorations(decorators, newDecorators);\n            };\n\n            checkDecorators();\n            editor.onDidChangeModelContent(checkDecorators);\n          }\n        }}\n      />\n    </div>\n  );\n};\n\n// we will lazy-load this module using React.lazy,\n// and that only supports default-exports,\n// so we have to default-export this, even if\n// it is against the style-guidelines.\n\nexport default MonacoQueryField;\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: remove lazy Field import\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Suspense } from 'react';\n\nimport Field from './MonacoQueryField'\nimport { Props } from './MonacoQueryFieldProps';\n\nexport const MonacoQueryFieldLazy = (props: Props) => {\n  return (\n    <Suspense fallback={null}>\n      <Field {...props} />\n    </Suspense>\n  );\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: remove handleChange function\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useRef } from 'react';\n\nimport { MonacoQueryFieldLazy } from './MonacoQueryFieldLazy';\nimport { Props as MonacoProps } from './MonacoQueryFieldProps';\n\ntype Props = Omit<MonacoProps, 'onRunQuery' | 'onBlur'> & {\n  onChange: (query: string) => void;\n  onRunQuery: () => void;\n  runQueryOnBlur: boolean;\n};\n\nexport const MonacoQueryFieldWrapper = (props: Props) => {\n  const lastRunValueRef = useRef<string | null>(null);\n  const { runQueryOnBlur, onRunQuery, onChange, ...rest } = props;\n\n  const handleRunQuery = (value: string) => {\n    lastRunValueRef.current = value;\n    onChange(value);\n    onRunQuery();\n  };\n\n  const handleBlur = (value: string) => {\n    if (runQueryOnBlur) {\n      // run handleRunQuery only if the current value is different from the last-time-executed value\n      if (value !== lastRunValueRef.current) {\n        handleRunQuery(value);\n      }\n    } else {\n      onChange(value);\n    }\n  };\n\n  return <MonacoQueryFieldLazy onRunQuery={handleRunQuery} onBlur={handleBlur} {...rest} />;\n};\n","import React, { FC, useEffect } from 'react';\n\nimport { PrometheusDatasource } from \"../../../datasource\";\nimport PrometheusLanguageProvider from \"../../../language_provider\";\nimport { MonacoQueryFieldWrapper } from \"../../monaco-query-field/MonacoQueryFieldWrapper\";\n\ninterface Props {\n  initialValue: string;\n  datasource: PrometheusDatasource\n  onChange: (value: string) => void;\n}\n\nconst TemplateEditor: FC<Props> = ({ initialValue, datasource, onChange }) => {\n\n  useEffect(() => {\n    // updating the languageProvider without using previous templates WITH\n    datasource.languageProvider = new PrometheusLanguageProvider(datasource as PrometheusDatasource)\n    datasource.languageProvider?.start?.()\n  }, [datasource])\n\n  return (\n    <MonacoQueryFieldWrapper\n      runQueryOnBlur={false}\n      languageProvider={datasource.languageProvider}\n      history={[]}\n      onChange={onChange}\n      onRunQuery={() => {}}\n      initialValue={initialValue}\n      placeholder=\"Enter a WITH expressions...\"\n    />\n  );\n}\n\nexport default TemplateEditor;\n","import { useCallback } from \"react\";\nimport { lastValueFrom } from \"rxjs\";\n\nimport { DataSourceInstanceSettings } from \"@grafana/data\";\nimport { getBackendSrv } from \"@grafana/runtime\";\n\nimport { PromOptions } from \"../../../types\";\n\ninterface UpdateDatasourceArgs {\n  datasourceUID: string;\n  dashboardUID: string;\n}\n\ninterface UpdateDatasourceResult {\n  data: {\n    datasource: DataSourceInstanceSettings<PromOptions>\n  }\n}\n\nexport default ({ datasourceUID, dashboardUID }: UpdateDatasourceArgs) => {\n  const fetchDatasource = useCallback(async (method: 'GET' | 'PUT', data?: DataSourceInstanceSettings<PromOptions>) => {\n    return await lastValueFrom(getBackendSrv().fetch({\n      url: `/api/datasources/uid/${datasourceUID}`,\n      method,\n      data\n    }))\n  }, [datasourceUID])\n\n  const getDatasourceBody = useCallback(async (value: string) => {\n    const response = await fetchDatasource('GET')\n    const data = response.data as DataSourceInstanceSettings<PromOptions>\n    const withTemplates = data?.jsonData?.withTemplates || []\n    const targetTemplate = withTemplates.find(t => t?.uid === dashboardUID)\n    if (!targetTemplate) {\n      withTemplates.push({ uid: dashboardUID, expr: value })\n    } else {\n      targetTemplate.expr = value\n    }\n\n    return {\n      ...data,\n      jsonData: {\n        ...data.jsonData,\n        withTemplates\n      },\n    }\n  }, [dashboardUID, fetchDatasource])\n\n  const updateDatasource = useCallback(async (value: string) => {\n    const data = await getDatasourceBody(value)\n    const response = await fetchDatasource('PUT', data) as UpdateDatasourceResult\n    return response?.data?.datasource?.jsonData?.withTemplates || []\n  }, [getDatasourceBody, fetchDatasource])\n\n  return {\n    updateDatasource\n  }\n}\n","import { useCallback, useState } from \"react\";\nimport { lastValueFrom } from \"rxjs\";\n\nimport { getBackendSrv } from \"@grafana/runtime\";\n\ninterface ValidateResult {\n  title: string;\n  icon: \"exclamation-triangle\" | \"check\" | \"fa fa-spinner\";\n  color: 'blue' | 'red' | 'green' | \"orange\";\n  error?: string;\n}\n\nconst validateStatus: {[key: string]: ValidateResult} = {\n  noValidate: {\n    title: \"No validation\",\n    icon: \"exclamation-triangle\",\n    color: \"orange\"\n  },\n  success: {\n    title: \"Valid WITH Expression\",\n    icon: \"check\",\n    color: \"green\"\n  },\n  await: {\n    title: \"Validating WITH Expressions...\",\n    icon: \"fa fa-spinner\",\n    color: \"blue\"\n  },\n  invalid: {\n    title: \"Invalid WITH Expression\",\n    icon:\"exclamation-triangle\",\n    color: \"red\"\n  },\n  serverError: {\n    title: \"Unable to Validate WITH Expressions\",\n    icon: \"exclamation-triangle\",\n    color: \"red\"\n  }\n}\n\nexport default (datasourceId: number) => {\n  const [validateResult, setValidateResult] = useState<ValidateResult>(validateStatus.noValidate)\n\n  const isValidExpr = useCallback(async (expr: string) => {\n    if (!expr) {\n      setValidateResult(validateStatus.noValidate)\n      return true\n    }\n\n    setValidateResult(validateStatus.await)\n\n    try {\n      // replace Grafana variables with '1s' for validation\n      const val = expr.replace(/\\$__interval|\\$__range|\\$__rate_interval/gm, '1s')\n      const withTemplate = encodeURIComponent(`WITH(${val})()`)\n      const response = await lastValueFrom(getBackendSrv().fetch({\n        url: `api/datasources/proxy/${datasourceId}/expand-with-exprs?query=${withTemplate}&format=json`,\n        method: 'GET',\n      }));\n      const { status, error = \"\" } = response?.data as { status: \"success\" | \"error\", error?: string }\n      setValidateResult({\n        ...(status === \"success\" ? validateStatus.success : validateStatus.invalid),\n        error\n      })\n      return status === \"success\"\n    } catch (e) {\n      console.error('Error validating WITH templates:', e);\n      if (e instanceof Error) {\n        setValidateResult({\n          ...validateStatus.serverError,\n          error: e.message,\n        })\n      }\n      return false\n    }\n  }, [datasourceId])\n\n  return {\n    validateResult,\n    isValidExpr\n  }\n}\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from \"@grafana/data\";\n\nexport default (theme: GrafanaTheme2) => ({\n  body: css`\n    display: grid;\n    gap: ${theme.spacing(1)};\n  `,\n  button: css`\n    display: flex;\n    gap: ${theme.spacing(1)};\n    justify-content: space-between;\n    align-items: center;\n  `\n});\n","import React, { FC, useCallback, useEffect, useState } from 'react'\n\nimport { Badge, Button, useStyles2 } from \"@grafana/ui\";\n\nimport TemplateEditor from \"../TemplateEditor/TemplateEditor\";\nimport useUpdateDatasource from \"../hooks/useUpdateDatasource\";\nimport useValidateExpr from \"../hooks/useValidateExpr\";\nimport { WithTemplateConfigProps } from \"../index\";\n\nimport getStyles from \"./style\";\n\ninterface Props extends WithTemplateConfigProps {\n  handleClose: () => void;\n}\n\nconst WithTemplateBody: FC<Props> = ({ datasource, dashboardUID, template, setTemplate, handleClose }) => {\n  const styles = useStyles2(getStyles);\n\n  const { validateResult, isValidExpr } = useValidateExpr(datasource.id)\n  const { updateDatasource } = useUpdateDatasource({\n    datasourceUID: datasource.uid,\n    dashboardUID\n  })\n\n  const [value, setValue] = useState(template?.expr || \"\")\n  const [isLoading, setIsLoading] = useState(false)\n\n  const handleSave = useCallback(async () => {\n    setIsLoading(true)\n    const isValid = await isValidExpr(value)\n    if (!isValid) {\n      setIsLoading(false)\n      return\n    }\n    try {\n      const templates = await updateDatasource(value)\n      datasource.withTemplatesUpdate(templates)\n      setTemplate(templates.find(t => t?.uid === dashboardUID))\n      handleClose()\n    } catch (e) {\n      console.error(e)\n    }\n    setIsLoading(false)\n  }, [value, isValidExpr, updateDatasource, datasource, dashboardUID, setTemplate, handleClose])\n\n  useEffect(() => {\n    setTemplate(datasource.withTemplates.find(t => t.uid === dashboardUID))\n  }, [setTemplate, datasource, dashboardUID])\n\n  useEffect(() => {\n    value && isValidExpr(value)\n  }, [value, isValidExpr])\n\n  useEffect(() => {\n    setValue(template?.expr || \"\")\n  }, [template])\n\n  return (\n    <div className={styles.body}>\n      <TemplateEditor\n        initialValue={value}\n        datasource={datasource}\n        onChange={setValue}\n      />\n      <Badge\n        icon={validateResult.icon || \"info\"}\n        color={validateResult.color || \"blue\"}\n        text={validateResult.error || validateResult.title}\n      />\n      <div className={styles.button}>\n        <a\n          className=\"text-link\"\n          target=\"_blank\"\n          href={\"https://github.com/VictoriaMetrics/grafana-datasource#how-to-use-with-templates\"}\n          rel=\"noreferrer\"\n        >\n          <Button\n            variant={'secondary'}\n            fill={\"text\"}\n            icon={\"book\"}\n            size={\"sm\"}\n          >\n            How it works?\n          </Button>\n        </a>\n        <Button\n          variant={'success'}\n          onClick={handleSave}\n          disabled={isLoading}\n        >\n          Save\n        </Button>\n      </div>\n    </div>\n  )\n}\n\nexport default WithTemplateBody;\n","import { lastValueFrom } from \"rxjs\";\n\nimport { getBackendSrv } from \"@grafana/runtime\";\n\nimport { DashboardResponse } from \"../types\";\n\n\nconst getDashboardByUID = async (uid: string) => {\n  const response: {data: DashboardResponse} = await lastValueFrom(getBackendSrv().fetch({\n    url: `/api/dashboards/uid/${uid}`,\n    method: 'GET',\n  }));\n\n  return response?.data;\n}\n\nexport default getDashboardByUID\n","import React, { FC, useEffect, useMemo, useState } from 'react'\n\nimport { CoreApp } from \"@grafana/data\";\nimport { IconButton, Modal } from \"@grafana/ui\";\n\nimport { PrometheusDatasource } from \"../../datasource\";\n\nimport WarningNewDashboard from \"./WarningSavedDashboard/WarningSavedDashboard\";\nimport WithTemplateBody from \"./WithTemplateBody/WithTemplateBody\";\nimport getDashboardByUID from \"./api/getDashboardList\";\nimport { DashboardResponse, WithTemplate } from \"./types\";\n\nexport interface WithTemplateConfigProps {\n  template?: WithTemplate;\n  setTemplate: React.Dispatch<React.SetStateAction<WithTemplate | undefined>>\n  datasource: PrometheusDatasource;\n  dashboardUID: string;\n  app?: CoreApp;\n}\n\nconst WithTemplateConfig: FC<WithTemplateConfigProps> = ({ template, setTemplate, dashboardUID, datasource, app }) => {\n  const [isValidDashboard, setIsValidDashboard] = useState(app === CoreApp.Explore)\n\n  const [dashboardResponse, setDashboardResponse] = useState<DashboardResponse | null>()\n\n  const modalTitle = useMemo(() => {\n    const explore = app === CoreApp.Explore ? \"Explore\" : \"\"\n    const folderTitle = dashboardResponse?.meta?.folderTitle\n    const dashboardTitle = dashboardResponse?.dashboard?.title\n    const templatesTitle = \"WITH templates\"\n    const fullTitle = [explore, folderTitle, dashboardTitle, templatesTitle].filter(Boolean).join(\" / \")\n    return isValidDashboard ? fullTitle : templatesTitle\n  }, [isValidDashboard, dashboardResponse, app])\n\n  const [showTemplates, setShowTemplates] = useState(false);\n  const handleClose = () => setShowTemplates(false);\n  const handleOpen = () => setShowTemplates(true);\n  const handleAcceptWarning = () => setIsValidDashboard(true)\n\n  useEffect(() => {\n    setTemplate(datasource.withTemplates.find(t => t.uid === dashboardUID))\n  }, [setTemplate, datasource, dashboardUID])\n\n  useEffect(() => {\n    const fetchDashboard = async () => {\n      try {\n        const dashboardResponse = await getDashboardByUID(dashboardUID)\n        setDashboardResponse(dashboardResponse)\n        setIsValidDashboard(true)\n      } catch (e) {\n        console.error(e)\n      }\n    }\n    if (dashboardUID) {\n      fetchDashboard()\n    } else if (app !== CoreApp.Explore) {\n      setIsValidDashboard(false)\n    }\n  }, [dashboardUID, app]);\n\n  return (\n    <>\n      <IconButton\n        key=\"with_templates\"\n        name=\"cog\"\n        tooltip=\"WITH templates\"\n        onClick={handleOpen}\n      />\n      <Modal\n        title={modalTitle}\n        isOpen={showTemplates}\n        closeOnEscape={true}\n        closeOnBackdropClick={false}\n        onDismiss={handleClose}\n      >\n        {isValidDashboard ? (\n          <WithTemplateBody\n            datasource={datasource}\n            dashboardUID={dashboardUID || app || \"\"}\n            handleClose={handleClose}\n            template={template}\n            setTemplate={setTemplate}\n          />\n        ) : (\n          <WarningNewDashboard\n            onAccept={handleAcceptWarning}\n            onClose={handleClose}\n          />\n        )}\n      </Modal>\n    </>\n  )\n}\n\nexport default WithTemplateConfig;\n","import { WithTemplate } from \"../types\";\n\nimport splitByCommaOutsideBrackets from \"./splitByCommaOutsideBrackets\";\n\nexport const getArrayFromTemplate = (template?: WithTemplate) => {\n  if (!template) {return []}\n  const { expr } = template\n  const arr = splitByCommaOutsideBrackets(expr)\n\n  return arr.filter(a => a).map(a => {\n    const commentMatch = a.match(/#.*\\n/gm);\n    const comment = commentMatch?.join('')?.trim() || ''\n\n    const variableMatch = a.match(/(.*?)=/);\n    const variableName = variableMatch?.[0]?.slice(0, -2) || '';\n\n    return {\n      label: `${variableName}`,\n      comment: comment.replace(/#/gm, ''),\n      value: a.replace(comment, '').trim(),\n    }\n  })\n}\n\nexport const formatTemplateString = (expr: string) => {\n  const arr = getArrayFromTemplate({ expr, uid: '' })\n  const values = arr.map(a => a.value)\n  return values.join(',\\n')\n}\n\nexport const mergeTemplateWithQuery = (query = \"\", template?: WithTemplate) => {\n  const templateExpr = template?.expr\n  if (!templateExpr) {return query}\n  const labels = getArrayFromTemplate(template).map(a => a.label)\n  const includesWithTemplate = labels.some(l => {\n    // remove arguments for functions\n    const name = l.replace(/(\\w+)\\(.*?\\)/g, '$1')\n    return query.includes(name)\n  })\n  if (!includesWithTemplate) {return query}\n  return `WITH(\n  ${formatTemplateString(templateExpr)}\n)\n${query}`\n}\n","const isOpeningBracket = (char: string): boolean => ['(', '{', '['].includes(char);\nconst isClosingBracket = (char: string): boolean => [')', '}', ']'].includes(char);\nconst isQuote = (char: string): boolean => ['\"', \"'\"].includes(char);\n\nconst shouldSplit = (char: string, bracketsCount: number, quotesCount: number): boolean =>\n  char === ',' && bracketsCount === 0 && quotesCount % 2 === 0;\n\nconst splitByCommaOutsideBrackets = (str: string): string[] => {\n  let bracketsCount = 0;\n  let quotesCount = 0;\n\n  return str.split('').reduce((result: string[], char: string) => {\n    if (isQuote(char)) {quotesCount++;}\n\n    if (quotesCount % 2 === 0) {\n      if (isOpeningBracket(char)) {bracketsCount++;}\n      if (isClosingBracket(char)) {bracketsCount--;}\n    }\n\n    if (shouldSplit(char, bracketsCount, quotesCount)) {\n      result.push('');\n    } else {\n      result[result.length - 1] += char;\n    }\n\n    return result;\n  }, ['']);\n};\n\nexport default splitByCommaOutsideBrackets;\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-12-01: remove interface QueryBuilderOperationEditorProps\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Shared types that can be reused by Loki and other data sources\n */\n\nimport { ComponentType } from \"react\";\n\nimport { DataSourceApi, RegistryItem, SelectableValue } from \"@grafana/data\";\n\nexport interface QueryBuilderLabelFilter {\n  label: string;\n  op: string;\n  value: string;\n}\n\nexport interface QueryBuilderOperation {\n  id: string;\n  params: QueryBuilderOperationParamValue[];\n}\n\nexport interface QueryWithOperations {\n  operations: QueryBuilderOperation[];\n}\n\nexport interface QueryBuilderOperationDef<T = any> extends RegistryItem {\n  documentation?: string;\n  params: QueryBuilderOperationParamDef[];\n  defaultParams: QueryBuilderOperationParamValue[];\n  category: string;\n  hideFromList?: boolean;\n  alternativesKey?: string;\n  /** Can be used to control operation placement when adding a new operations, lower are placed first */\n  orderRank?: number;\n  renderer: QueryBuilderOperationRenderer;\n  addOperationHandler: QueryBuilderAddOperationHandler<T>;\n  paramChangedHandler?: QueryBuilderOnParamChangedHandler;\n  explainHandler?: QueryBuilderExplainOperationHandler;\n  changeTypeHandler?: (op: QueryBuilderOperation, newDef: QueryBuilderOperationDef<T>) => QueryBuilderOperation;\n}\n\nexport type QueryBuilderAddOperationHandler<T> = (\n  def: QueryBuilderOperationDef,\n  query: T,\n  modeller: VisualQueryModeller\n) => T;\n\nexport type QueryBuilderExplainOperationHandler = (op: QueryBuilderOperation, def: QueryBuilderOperationDef) => string;\n\nexport type QueryBuilderOnParamChangedHandler = (\n  index: number,\n  operation: QueryBuilderOperation,\n  operationDef: QueryBuilderOperationDef\n) => QueryBuilderOperation;\n\nexport type QueryBuilderOperationRenderer = (\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string\n) => string;\n\nexport type QueryBuilderOperationParamValue = string | number | boolean;\n\nexport interface QueryBuilderOperationParamDef {\n  name: string;\n  type: \"string\" | \"number\" | \"boolean\" | \"metric\";\n  options?: string[] | number[] | Array<SelectableValue<string>>;\n  hideName?: boolean;\n  restParam?: boolean;\n  optional?: boolean;\n  placeholder?: string;\n  description?: string;\n  minWidth?: number;\n  editor?: ComponentType<QueryBuilderOperationParamEditorProps>;\n  runQueryOnEnter?: boolean;\n}\n\nexport interface QueryBuilderOperationParamEditorProps {\n  value?: QueryBuilderOperationParamValue;\n  paramDef: QueryBuilderOperationParamDef;\n  /** Parameter index */\n  index: number;\n  operation: QueryBuilderOperation;\n  operationIndex: number;\n  query: any;\n  datasource: DataSourceApi;\n  onChange: (index: number, value: QueryBuilderOperationParamValue) => void;\n  onRunQuery: () => void;\n}\n\nexport enum QueryEditorMode {\n  Code = \"code\",\n  Builder = \"builder\",\n}\n\nexport interface VisualQueryModeller {\n  getOperationsForCategory(category: string): QueryBuilderOperationDef[];\n  getAlternativeOperations(key: string): QueryBuilderOperationDef[];\n  getCategories(): string[];\n  getOperationDef(id: string): QueryBuilderOperationDef | undefined;\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react';\n\nimport { RadioButtonGroup } from '@grafana/ui';\n\n\nimport { QueryEditorMode } from './types';\n\nexport interface Props {\n  mode: QueryEditorMode;\n  onChange: (mode: QueryEditorMode) => void;\n}\n\nconst editorModes = [\n  {\n    label: 'Builder',\n    value: QueryEditorMode.Builder,\n  },\n  { label: 'Code', value: QueryEditorMode.Code },\n];\n\nexport function QueryEditorModeToggle({ mode, onChange }: Props) {\n  return (\n    <div data-testid={'QueryEditorModeToggle'}>\n      <RadioButtonGroup options={editorModes} size=\"sm\" value={mode} onChange={onChange} />\n    </div>\n  );\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport { uniqueId } from 'lodash';\nimport React, { HTMLProps, useRef } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Switch, useStyles2 } from '@grafana/ui';\n\nimport { Stack } from '../../components/QueryEditor';\n\nexport interface Props extends Omit<HTMLProps<HTMLInputElement>, 'value' | 'ref'> {\n  value?: boolean;\n  label: string;\n}\n\nexport function QueryHeaderSwitch({ label, ...inputProps }: Props) {\n  const dashedLabel = label.replace(' ', '-');\n  const switchIdRef = useRef(uniqueId(`switch-${dashedLabel}`));\n  const styles = useStyles2(getStyles);\n\n  return (\n    <Stack gap={1}>\n      <label htmlFor={switchIdRef.current} className={styles.switchLabel}>\n        {label}\n      </label>\n      <Switch {...inputProps} id={switchIdRef.current} />\n    </Stack>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    switchLabel: css({\n      color: theme.colors.text.secondary,\n      cursor: 'pointer',\n      fontSize: theme.typography.bodySmall.fontSize,\n      '&:hover': {\n        color: theme.colors.text.primary,\n      },\n    }),\n  };\n};\n","type StoreValue = string | number | boolean | null;\n\nexport class Store {\n  get(key: string) {\n    return window.localStorage[key];\n  }\n\n  set(key: string, value: StoreValue) {\n    window.localStorage[key] = value;\n  }\n\n  getObject<T = unknown>(key: string, def: T): T;\n  getObject<T = unknown>(key: string, def?: T) {\n    let ret = def;\n    if (this.exists(key)) {\n      const json = window.localStorage[key];\n      try {\n        ret = JSON.parse(json);\n      } catch (error) {\n        console.error(`Error parsing store object: ${key}. Returning default: ${def}. [${error}]`);\n      }\n    }\n    return ret;\n  }\n\n  /* Returns true when successfully stored, throws error if not successfully stored */\n  setObject(key: string, value: any) {\n    let json;\n    try {\n      json = JSON.stringify(value);\n    } catch (error) {\n      throw new Error(`Could not stringify object: ${key}. [${error}]`);\n    }\n    try {\n      this.set(key, json);\n    } catch (error) {\n      // Likely hitting storage quota\n      const errorToThrow = new Error(`Could not save item in localStorage: ${key}. [${error}]`);\n      if (error instanceof Error) {\n        errorToThrow.name = error.name;\n      }\n      throw errorToThrow;\n    }\n    return true;\n  }\n\n  exists(key: string) {\n    return window.localStorage[key] !== void 0;\n  }\n\n  delete(key: string) {\n    window.localStorage.removeItem(key);\n  }\n}\n\nconst store = new Store();\nexport default store;\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: remove PromLabelQueryResponse\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { DataQuery, DataSourceJsonData, QueryResultMeta, ScopedVars } from '@grafana/data';\n\nimport { WithTemplate } from \"./components/WithTemplateConfig/types\";\nimport { QueryEditorMode } from './querybuilder/shared/types';\n\nexport interface PromQuery extends DataQuery {\n  expr: string;\n  format?: string;\n  instant?: boolean;\n  range?: boolean;\n  exemplar?: boolean;\n  hinting?: boolean;\n  interval?: string;\n  intervalFactor?: number;\n  // Timezone offset to align start & end time on backend\n  utcOffsetSec?: number;\n  legendFormat?: string;\n  valueWithRefId?: boolean;\n  requestId?: string;\n  showingGraph?: boolean;\n  showingTable?: boolean;\n  /** Code, Builder or Explain */\n  editorMode?: QueryEditorMode;\n  trace?: number;\n}\n\nexport interface PromOptions extends DataSourceJsonData {\n  timeInterval?: string;\n  queryTimeout?: string;\n  httpMethod?: string;\n  directUrl?: string;\n  vmuiUrl?: string;\n  customQueryParameters?: string;\n  disableMetricsLookup?: boolean;\n  exemplarTraceIdDestinations?: ExemplarTraceIdDestination[];\n  withTemplates?: WithTemplate[];\n  limitMetrics?: LimitMetrics;\n}\n\nexport enum PromQueryType {\n  timeSeriesQuery = 'timeSeriesQuery',\n}\n\nexport type LimitMetrics = {\n  maxTagKeys?: number;\n  maxTagValues?: number;\n  maxSeries?: number;\n};\n\nexport type ExemplarTraceIdDestination = {\n  name: string;\n  url?: string;\n  urlDisplayLabel?: string;\n  datasourceUid?: string;\n};\n\nexport interface PromQueryRequest extends PromQuery {\n  step?: number;\n  requestId?: string;\n  start: number;\n  end: number;\n  headers?: any;\n}\n\nexport interface PromMetricsMetadataItem {\n  type: string;\n  help: string;\n  unit?: string;\n}\n\nexport interface PromMetricsMetadata {\n  [metric: string]: PromMetricsMetadataItem;\n}\n\nexport interface PromDataSuccessResponse<T = PromData> {\n  status: 'success';\n  data: T;\n  trace?: TracingData;\n  isPartial?: boolean;\n}\n\nexport interface PromDataErrorResponse<T = PromData> {\n  status: 'error';\n  errorType: string;\n  error: string;\n  data: T;\n}\n\nexport type PromData = PromMatrixData | PromVectorData | PromScalarData | PromExemplarData[];\n\nexport interface Labels {\n  [index: string]: any;\n}\n\nexport interface Exemplar {\n  labels: Labels;\n  value: number;\n  timestamp: number;\n}\n\nexport interface PromExemplarData {\n  seriesLabels: PromMetric;\n  exemplars: Exemplar[];\n}\n\nexport interface PromVectorData {\n  resultType: 'vector';\n  result: Array<{\n    metric: PromMetric;\n    value: PromValue;\n  }>;\n}\n\nexport interface PromMatrixData {\n  resultType: 'matrix';\n  result: Array<{\n    metric: PromMetric;\n    values: PromValue[];\n  }>;\n}\n\nexport interface PromScalarData {\n  resultType: 'scalar';\n  result: PromValue;\n}\n\nexport type PromValue = [number, any];\n\nexport interface PromMetric {\n  __name__?: string;\n  [index: string]: any;\n}\n\nexport function isMatrixData(result: MatrixOrVectorResult): result is PromMatrixData['result'][0] {\n  return 'values' in result;\n}\n\nexport function isExemplarData(result: PromData): result is PromExemplarData[] {\n  if (result == null || !Array.isArray(result)) {\n    return false;\n  }\n  return result.length ? 'exemplars' in result[0] : false;\n}\n\nexport type MatrixOrVectorResult = PromMatrixData['result'][0] | PromVectorData['result'][0];\n\nexport interface TransformOptions {\n  format?: string;\n  step?: number;\n  legendFormat?: string;\n  start: number;\n  end: number;\n  query: string;\n  responseListLength: number;\n  scopedVars?: ScopedVars;\n  refId: string;\n  valueWithRefId?: boolean;\n  meta: QueryResultMeta;\n}\n\n/**\n * Auto = query.legendFormat == '__auto'\n * Verbose = query.legendFormat == null/undefined/''\n * Custom query.legendFormat.length > 0 && query.legendFormat !== '__auto'\n */\nexport enum LegendFormatMode {\n  Auto = '__auto',\n  Verbose = '__verbose',\n  Custom = '__custom',\n}\n\nexport interface QueryBuilderLabelFilter {\n  label: string;\n  op: string;\n  value: string;\n}\n\nexport enum PromVariableQueryType {\n  LabelNames,\n  LabelValues,\n  MetricNames,\n  VarQueryResult,\n  SeriesQuery,\n  ClassicQuery,\n}\n\nexport interface PromVariableQuery extends DataQuery {\n  query?: string;\n  expr?: string;\n  qryType?: PromVariableQueryType;\n  label?: string;\n  metric?: string;\n  varQuery?: string;\n  seriesQuery?: string;\n  labelFilters?: QueryBuilderLabelFilter[];\n  match?: string;\n  classicQuery?: string;\n}\n\nexport type StandardPromVariableQuery = {\n  query: string;\n  refId: string;\n};\n\nexport interface TracingData {\n  message: string;\n  duration_msec: number;\n  children: TracingData[];\n}\n","import { CoreApp } from '@grafana/data';\n\nimport store from '../store';\nimport { LegendFormatMode, PromQuery } from '../types';\n\nimport { QueryEditorMode } from './shared/types';\n\nconst queryEditorModeDefaultLocalStorageKey = 'PrometheusQueryEditorModeDefault';\n\nexport function changeEditorMode(query: PromQuery, editorMode: QueryEditorMode, onChange: (query: PromQuery) => void) {\n  // If empty query store new mode as default\n  if (query.expr === '') {\n    store.set(queryEditorModeDefaultLocalStorageKey, editorMode);\n  }\n\n  onChange({ ...query, editorMode });\n}\n\nfunction getDefaultEditorMode(expr: string) {\n  // If we already have an expression default to code view\n  if (expr != null && expr !== '') {\n    return QueryEditorMode.Code;\n  }\n\n  const value = store.get(queryEditorModeDefaultLocalStorageKey) as QueryEditorMode;\n  switch (value) {\n    case QueryEditorMode.Builder:\n    case QueryEditorMode.Code:\n      return value;\n    default:\n      return QueryEditorMode.Builder;\n  }\n}\n\n/**\n * Returns query with defaults, and boolean true/false depending on change was required\n */\nexport function getQueryWithDefaults(query: PromQuery, app: CoreApp | undefined): PromQuery {\n  let result = query;\n\n  if (!query.editorMode) {\n    result = { ...query, editorMode: getDefaultEditorMode(query.expr) };\n  }\n\n  if (query.expr == null) {\n    result = { ...result, expr: '', legendFormat: LegendFormatMode.Auto };\n  }\n\n  if (query.range == null && query.instant == null) {\n    // Default to range query\n    result = { ...result, range: true };\n\n    // In explore we default to both instant & range\n    if (app === CoreApp.Explore) {\n      result.instant = true;\n    }\n  }\n\n  return result;\n}\n","function n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){var r;return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!(null===(r=n.constructor)||void 0===r?void 0:r[L])||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?n.add(t):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)||(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0)),n}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function g(n){O(n),n.p.forEach(S),n.p=null}function O(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.g=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.O||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(g(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),g(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o,u=o,a=!1;3===e.i&&(u=new Set(o),o.clear(),a=!0),i(u,(function(r,i){return A(n,e,o,r,i,t,a)})),x(n,o,!1),t&&n.u&&b(\"Patches\").N(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s,v){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),r(c)){var p=M(e,c,s&&i&&3!==i.i&&!u(i.R,a)?s.concat(a):void 0);if(f(o,a,p),!r(p))return;e.m=!1}else v&&o.add(c);if(t(c)&&!y(c)){if(!e.h.D&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),!n.l&&n.h.D&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function N(n,r,t){var e=s(r)?b(\"MapSet\").F(r,t):v(r)?b(\"MapSet\").T(r,t):n.O?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,R:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function R(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=D(r,c),u.I=!1}else e=D(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function D(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function F(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return\"production\"!==process.env.NODE_ENV&&f(r),en.get(r,n)},set:function(r){var t=this[Q];\"production\"!==process.env.NODE_ENV&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.g&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,R:{},l:r,t:n,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.R,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=i[s];\"string\"!=typeof p&&\"number\"!=typeof p&&(p=\"\"+p),0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},N:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.R,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.R,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.R=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=N(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.g&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,R:void 0,t:n,k:this,C:!1,g:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.R.set(n,!0),t.o.set(n,r),t.R.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.R.set(n,!1):r.R.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.R=new Map,i(n.t,(function(r){n.R.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=N(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,g:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{F:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){F(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=N(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.R[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&(void 0!==t||r in n.o)||Number.isNaN(t)&&Number.isNaN(n.o[r])||(n.o[r]=t,n.R[r]=!0),!0},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.R[r]=!1,E(n),k(n)):delete n.R[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.O=B,this.D=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=N(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?g(c):O(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw g(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.D&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=R(e));var i=w(this),o=N(this,e,void 0);return o[Q].C=!0,O(i),o},i.finishDraft=function(r,t){var e=r&&r[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.D=n},i.setUseProxies=function(r){r&&!B&&n(20),this.O=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,R as current,J as enableAllPlugins,F as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,r as isDraft,t as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nvar __defProp = Object.defineProperty;\r\nvar __defProps = Object.defineProperties;\r\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\r\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\r\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\r\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\r\nvar __defNormalProp = function (obj, key, value) { return key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value: value }) : obj[key] = value; };\r\nvar __spreadValues = function (a, b) {\r\n    for (var prop in b || (b = {}))\r\n        if (__hasOwnProp.call(b, prop))\r\n            __defNormalProp(a, prop, b[prop]);\r\n    if (__getOwnPropSymbols)\r\n        for (var _i = 0, _c = __getOwnPropSymbols(b); _i < _c.length; _i++) {\r\n            var prop = _c[_i];\r\n            if (__propIsEnum.call(b, prop))\r\n                __defNormalProp(a, prop, b[prop]);\r\n        }\r\n    return a;\r\n};\r\nvar __spreadProps = function (a, b) { return __defProps(a, __getOwnPropDescs(b)); };\r\nvar __async = function (__this, __arguments, generator) {\r\n    return new Promise(function (resolve, reject) {\r\n        var fulfilled = function (value) {\r\n            try {\r\n                step(generator.next(value));\r\n            }\r\n            catch (e) {\r\n                reject(e);\r\n            }\r\n        };\r\n        var rejected = function (value) {\r\n            try {\r\n                step(generator.throw(value));\r\n            }\r\n            catch (e) {\r\n                reject(e);\r\n            }\r\n        };\r\n        var step = function (x) { return x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected); };\r\n        step((generator = generator.apply(__this, __arguments)).next());\r\n    });\r\n};\r\n// src/index.ts\r\nimport { enableES5 } from \"immer\";\r\nexport * from \"redux\";\r\nimport { default as default2, current as current2, freeze, original, isDraft as isDraft4 } from \"immer\";\r\nimport { createSelector as createSelector2 } from \"reselect\";\r\n// src/createDraftSafeSelector.ts\r\nimport { current, isDraft } from \"immer\";\r\nimport { createSelector } from \"reselect\";\r\nvar createDraftSafeSelector = function () {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var selector = createSelector.apply(void 0, args);\r\n    var wrappedSelector = function (value) {\r\n        var rest = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            rest[_i - 1] = arguments[_i];\r\n        }\r\n        return selector.apply(void 0, __spreadArray([isDraft(value) ? current(value) : value], rest));\r\n    };\r\n    return wrappedSelector;\r\n};\r\n// src/configureStore.ts\r\nimport { createStore, compose as compose2, applyMiddleware, combineReducers } from \"redux\";\r\n// src/devtoolsExtension.ts\r\nimport { compose } from \"redux\";\r\nvar composeWithDevTools = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : function () {\r\n    if (arguments.length === 0)\r\n        return void 0;\r\n    if (typeof arguments[0] === \"object\")\r\n        return compose;\r\n    return compose.apply(null, arguments);\r\n};\r\nvar devToolsEnhancer = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__ : function () {\r\n    return function (noop2) {\r\n        return noop2;\r\n    };\r\n};\r\n// src/isPlainObject.ts\r\nfunction isPlainObject(value) {\r\n    if (typeof value !== \"object\" || value === null)\r\n        return false;\r\n    var proto = Object.getPrototypeOf(value);\r\n    if (proto === null)\r\n        return true;\r\n    var baseProto = proto;\r\n    while (Object.getPrototypeOf(baseProto) !== null) {\r\n        baseProto = Object.getPrototypeOf(baseProto);\r\n    }\r\n    return proto === baseProto;\r\n}\r\n// src/getDefaultMiddleware.ts\r\nimport thunkMiddleware from \"redux-thunk\";\r\n// src/tsHelpers.ts\r\nvar hasMatchFunction = function (v) {\r\n    return v && typeof v.match === \"function\";\r\n};\r\n// src/createAction.ts\r\nfunction createAction(type, prepareAction) {\r\n    function actionCreator() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (prepareAction) {\r\n            var prepared = prepareAction.apply(void 0, args);\r\n            if (!prepared) {\r\n                throw new Error(\"prepareAction did not return an object\");\r\n            }\r\n            return __spreadValues(__spreadValues({\r\n                type: type,\r\n                payload: prepared.payload\r\n            }, \"meta\" in prepared && { meta: prepared.meta }), \"error\" in prepared && { error: prepared.error });\r\n        }\r\n        return { type: type, payload: args[0] };\r\n    }\r\n    actionCreator.toString = function () { return \"\" + type; };\r\n    actionCreator.type = type;\r\n    actionCreator.match = function (action) { return action.type === type; };\r\n    return actionCreator;\r\n}\r\nfunction isAction(action) {\r\n    return isPlainObject(action) && \"type\" in action;\r\n}\r\nfunction isActionCreator(action) {\r\n    return typeof action === \"function\" && \"type\" in action && hasMatchFunction(action);\r\n}\r\nfunction isFSA(action) {\r\n    return isAction(action) && typeof action.type === \"string\" && Object.keys(action).every(isValidKey);\r\n}\r\nfunction isValidKey(key) {\r\n    return [\"type\", \"payload\", \"error\", \"meta\"].indexOf(key) > -1;\r\n}\r\nfunction getType(actionCreator) {\r\n    return \"\" + actionCreator;\r\n}\r\n// src/actionCreatorInvariantMiddleware.ts\r\nfunction getMessage(type) {\r\n    var splitType = type ? (\"\" + type).split(\"/\") : [];\r\n    var actionName = splitType[splitType.length - 1] || \"actionCreator\";\r\n    return \"Detected an action creator with type \\\"\" + (type || \"unknown\") + \"\\\" being dispatched. \\nMake sure you're calling the action creator before dispatching, i.e. `dispatch(\" + actionName + \"())` instead of `dispatch(\" + actionName + \")`. This is necessary even if the action has no payload.\";\r\n}\r\nfunction createActionCreatorInvariantMiddleware(options) {\r\n    if (options === void 0) { options = {}; }\r\n    if (process.env.NODE_ENV === \"production\") {\r\n        return function () { return function (next) { return function (action) { return next(action); }; }; };\r\n    }\r\n    var _c = options.isActionCreator, isActionCreator2 = _c === void 0 ? isActionCreator : _c;\r\n    return function () { return function (next) { return function (action) {\r\n        if (isActionCreator2(action)) {\r\n            console.warn(getMessage(action.type));\r\n        }\r\n        return next(action);\r\n    }; }; };\r\n}\r\n// src/utils.ts\r\nimport createNextState, { isDraftable } from \"immer\";\r\nfunction getTimeMeasureUtils(maxDelay, fnName) {\r\n    var elapsed = 0;\r\n    return {\r\n        measureTime: function (fn) {\r\n            var started = Date.now();\r\n            try {\r\n                return fn();\r\n            }\r\n            finally {\r\n                var finished = Date.now();\r\n                elapsed += finished - started;\r\n            }\r\n        },\r\n        warnIfExceeded: function () {\r\n            if (elapsed > maxDelay) {\r\n                console.warn(fnName + \" took \" + elapsed + \"ms, which is more than the warning threshold of \" + maxDelay + \"ms. \\nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\\nIt is disabled in production builds, so you don't need to worry about that.\");\r\n            }\r\n        }\r\n    };\r\n}\r\nvar MiddlewareArray = /** @class */ (function (_super) {\r\n    __extends(MiddlewareArray, _super);\r\n    function MiddlewareArray() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.apply(this, args) || this;\r\n        Object.setPrototypeOf(_this, MiddlewareArray.prototype);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MiddlewareArray, Symbol.species, {\r\n        get: function () {\r\n            return MiddlewareArray;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    MiddlewareArray.prototype.concat = function () {\r\n        var arr = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            arr[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.concat.apply(this, arr);\r\n    };\r\n    MiddlewareArray.prototype.prepend = function () {\r\n        var arr = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            arr[_i] = arguments[_i];\r\n        }\r\n        if (arr.length === 1 && Array.isArray(arr[0])) {\r\n            return new (MiddlewareArray.bind.apply(MiddlewareArray, __spreadArray([void 0], arr[0].concat(this))))();\r\n        }\r\n        return new (MiddlewareArray.bind.apply(MiddlewareArray, __spreadArray([void 0], arr.concat(this))))();\r\n    };\r\n    return MiddlewareArray;\r\n}(Array));\r\nvar EnhancerArray = /** @class */ (function (_super) {\r\n    __extends(EnhancerArray, _super);\r\n    function EnhancerArray() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.apply(this, args) || this;\r\n        Object.setPrototypeOf(_this, EnhancerArray.prototype);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(EnhancerArray, Symbol.species, {\r\n        get: function () {\r\n            return EnhancerArray;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    EnhancerArray.prototype.concat = function () {\r\n        var arr = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            arr[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.concat.apply(this, arr);\r\n    };\r\n    EnhancerArray.prototype.prepend = function () {\r\n        var arr = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            arr[_i] = arguments[_i];\r\n        }\r\n        if (arr.length === 1 && Array.isArray(arr[0])) {\r\n            return new (EnhancerArray.bind.apply(EnhancerArray, __spreadArray([void 0], arr[0].concat(this))))();\r\n        }\r\n        return new (EnhancerArray.bind.apply(EnhancerArray, __spreadArray([void 0], arr.concat(this))))();\r\n    };\r\n    return EnhancerArray;\r\n}(Array));\r\nfunction freezeDraftable(val) {\r\n    return isDraftable(val) ? createNextState(val, function () {\r\n    }) : val;\r\n}\r\n// src/immutableStateInvariantMiddleware.ts\r\nvar isProduction = process.env.NODE_ENV === \"production\";\r\nvar prefix = \"Invariant failed\";\r\nfunction invariant(condition, message) {\r\n    if (condition) {\r\n        return;\r\n    }\r\n    if (isProduction) {\r\n        throw new Error(prefix);\r\n    }\r\n    throw new Error(prefix + \": \" + (message || \"\"));\r\n}\r\nfunction stringify(obj, serializer, indent, decycler) {\r\n    return JSON.stringify(obj, getSerialize(serializer, decycler), indent);\r\n}\r\nfunction getSerialize(serializer, decycler) {\r\n    var stack = [], keys = [];\r\n    if (!decycler)\r\n        decycler = function (_, value) {\r\n            if (stack[0] === value)\r\n                return \"[Circular ~]\";\r\n            return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\";\r\n        };\r\n    return function (key, value) {\r\n        if (stack.length > 0) {\r\n            var thisPos = stack.indexOf(this);\r\n            ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\r\n            ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\r\n            if (~stack.indexOf(value))\r\n                value = decycler.call(this, key, value);\r\n        }\r\n        else\r\n            stack.push(value);\r\n        return serializer == null ? value : serializer.call(this, key, value);\r\n    };\r\n}\r\nfunction isImmutableDefault(value) {\r\n    return typeof value !== \"object\" || value == null || Object.isFrozen(value);\r\n}\r\nfunction trackForMutations(isImmutable, ignorePaths, obj) {\r\n    var trackedProperties = trackProperties(isImmutable, ignorePaths, obj);\r\n    return {\r\n        detectMutations: function () {\r\n            return detectMutations(isImmutable, ignorePaths, trackedProperties, obj);\r\n        }\r\n    };\r\n}\r\nfunction trackProperties(isImmutable, ignorePaths, obj, path, checkedObjects) {\r\n    if (ignorePaths === void 0) { ignorePaths = []; }\r\n    if (path === void 0) { path = \"\"; }\r\n    if (checkedObjects === void 0) { checkedObjects = new Set(); }\r\n    var tracked = { value: obj };\r\n    if (!isImmutable(obj) && !checkedObjects.has(obj)) {\r\n        checkedObjects.add(obj);\r\n        tracked.children = {};\r\n        for (var key in obj) {\r\n            var childPath = path ? path + \".\" + key : key;\r\n            if (ignorePaths.length && ignorePaths.indexOf(childPath) !== -1) {\r\n                continue;\r\n            }\r\n            tracked.children[key] = trackProperties(isImmutable, ignorePaths, obj[key], childPath);\r\n        }\r\n    }\r\n    return tracked;\r\n}\r\nfunction detectMutations(isImmutable, ignoredPaths, trackedProperty, obj, sameParentRef, path) {\r\n    if (ignoredPaths === void 0) { ignoredPaths = []; }\r\n    if (sameParentRef === void 0) { sameParentRef = false; }\r\n    if (path === void 0) { path = \"\"; }\r\n    var prevObj = trackedProperty ? trackedProperty.value : void 0;\r\n    var sameRef = prevObj === obj;\r\n    if (sameParentRef && !sameRef && !Number.isNaN(obj)) {\r\n        return { wasMutated: true, path: path };\r\n    }\r\n    if (isImmutable(prevObj) || isImmutable(obj)) {\r\n        return { wasMutated: false };\r\n    }\r\n    var keysToDetect = {};\r\n    for (var key in trackedProperty.children) {\r\n        keysToDetect[key] = true;\r\n    }\r\n    for (var key in obj) {\r\n        keysToDetect[key] = true;\r\n    }\r\n    var hasIgnoredPaths = ignoredPaths.length > 0;\r\n    var _loop_1 = function (key) {\r\n        var nestedPath = path ? path + \".\" + key : key;\r\n        if (hasIgnoredPaths) {\r\n            var hasMatches = ignoredPaths.some(function (ignored) {\r\n                if (ignored instanceof RegExp) {\r\n                    return ignored.test(nestedPath);\r\n                }\r\n                return nestedPath === ignored;\r\n            });\r\n            if (hasMatches) {\r\n                return \"continue\";\r\n            }\r\n        }\r\n        var result = detectMutations(isImmutable, ignoredPaths, trackedProperty.children[key], obj[key], sameRef, nestedPath);\r\n        if (result.wasMutated) {\r\n            return { value: result };\r\n        }\r\n    };\r\n    for (var key in keysToDetect) {\r\n        var state_1 = _loop_1(key);\r\n        if (typeof state_1 === \"object\")\r\n            return state_1.value;\r\n    }\r\n    return { wasMutated: false };\r\n}\r\nfunction createImmutableStateInvariantMiddleware(options) {\r\n    if (options === void 0) { options = {}; }\r\n    if (process.env.NODE_ENV === \"production\") {\r\n        return function () { return function (next) { return function (action) { return next(action); }; }; };\r\n    }\r\n    var _c = options.isImmutable, isImmutable = _c === void 0 ? isImmutableDefault : _c, ignoredPaths = options.ignoredPaths, _d = options.warnAfter, warnAfter = _d === void 0 ? 32 : _d, ignore = options.ignore;\r\n    ignoredPaths = ignoredPaths || ignore;\r\n    var track = trackForMutations.bind(null, isImmutable, ignoredPaths);\r\n    return function (_c) {\r\n        var getState = _c.getState;\r\n        var state = getState();\r\n        var tracker = track(state);\r\n        var result;\r\n        return function (next) { return function (action) {\r\n            var measureUtils = getTimeMeasureUtils(warnAfter, \"ImmutableStateInvariantMiddleware\");\r\n            measureUtils.measureTime(function () {\r\n                state = getState();\r\n                result = tracker.detectMutations();\r\n                tracker = track(state);\r\n                invariant(!result.wasMutated, \"A state mutation was detected between dispatches, in the path '\" + (result.path || \"\") + \"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)\");\r\n            });\r\n            var dispatchedAction = next(action);\r\n            measureUtils.measureTime(function () {\r\n                state = getState();\r\n                result = tracker.detectMutations();\r\n                tracker = track(state);\r\n                result.wasMutated && invariant(!result.wasMutated, \"A state mutation was detected inside a dispatch, in the path: \" + (result.path || \"\") + \". Take a look at the reducer(s) handling the action \" + stringify(action) + \". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)\");\r\n            });\r\n            measureUtils.warnIfExceeded();\r\n            return dispatchedAction;\r\n        }; };\r\n    };\r\n}\r\n// src/serializableStateInvariantMiddleware.ts\r\nfunction isPlain(val) {\r\n    var type = typeof val;\r\n    return val == null || type === \"string\" || type === \"boolean\" || type === \"number\" || Array.isArray(val) || isPlainObject(val);\r\n}\r\nfunction findNonSerializableValue(value, path, isSerializable, getEntries, ignoredPaths, cache) {\r\n    if (path === void 0) { path = \"\"; }\r\n    if (isSerializable === void 0) { isSerializable = isPlain; }\r\n    if (ignoredPaths === void 0) { ignoredPaths = []; }\r\n    var foundNestedSerializable;\r\n    if (!isSerializable(value)) {\r\n        return {\r\n            keyPath: path || \"<root>\",\r\n            value: value\r\n        };\r\n    }\r\n    if (typeof value !== \"object\" || value === null) {\r\n        return false;\r\n    }\r\n    if (cache == null ? void 0 : cache.has(value))\r\n        return false;\r\n    var entries = getEntries != null ? getEntries(value) : Object.entries(value);\r\n    var hasIgnoredPaths = ignoredPaths.length > 0;\r\n    var _loop_2 = function (key, nestedValue) {\r\n        var nestedPath = path ? path + \".\" + key : key;\r\n        if (hasIgnoredPaths) {\r\n            var hasMatches = ignoredPaths.some(function (ignored) {\r\n                if (ignored instanceof RegExp) {\r\n                    return ignored.test(nestedPath);\r\n                }\r\n                return nestedPath === ignored;\r\n            });\r\n            if (hasMatches) {\r\n                return \"continue\";\r\n            }\r\n        }\r\n        if (!isSerializable(nestedValue)) {\r\n            return { value: {\r\n                    keyPath: nestedPath,\r\n                    value: nestedValue\r\n                } };\r\n        }\r\n        if (typeof nestedValue === \"object\") {\r\n            foundNestedSerializable = findNonSerializableValue(nestedValue, nestedPath, isSerializable, getEntries, ignoredPaths, cache);\r\n            if (foundNestedSerializable) {\r\n                return { value: foundNestedSerializable };\r\n            }\r\n        }\r\n    };\r\n    for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\r\n        var _c = entries_1[_i], key = _c[0], nestedValue = _c[1];\r\n        var state_2 = _loop_2(key, nestedValue);\r\n        if (typeof state_2 === \"object\")\r\n            return state_2.value;\r\n    }\r\n    if (cache && isNestedFrozen(value))\r\n        cache.add(value);\r\n    return false;\r\n}\r\nfunction isNestedFrozen(value) {\r\n    if (!Object.isFrozen(value))\r\n        return false;\r\n    for (var _i = 0, _c = Object.values(value); _i < _c.length; _i++) {\r\n        var nestedValue = _c[_i];\r\n        if (typeof nestedValue !== \"object\" || nestedValue === null)\r\n            continue;\r\n        if (!isNestedFrozen(nestedValue))\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\nfunction createSerializableStateInvariantMiddleware(options) {\r\n    if (options === void 0) { options = {}; }\r\n    if (process.env.NODE_ENV === \"production\") {\r\n        return function () { return function (next) { return function (action) { return next(action); }; }; };\r\n    }\r\n    var _c = options.isSerializable, isSerializable = _c === void 0 ? isPlain : _c, getEntries = options.getEntries, _d = options.ignoredActions, ignoredActions = _d === void 0 ? [] : _d, _e = options.ignoredActionPaths, ignoredActionPaths = _e === void 0 ? [\"meta.arg\", \"meta.baseQueryMeta\"] : _e, _f = options.ignoredPaths, ignoredPaths = _f === void 0 ? [] : _f, _g = options.warnAfter, warnAfter = _g === void 0 ? 32 : _g, _h = options.ignoreState, ignoreState = _h === void 0 ? false : _h, _j = options.ignoreActions, ignoreActions = _j === void 0 ? false : _j, _k = options.disableCache, disableCache = _k === void 0 ? false : _k;\r\n    var cache = !disableCache && WeakSet ? new WeakSet() : void 0;\r\n    return function (storeAPI) { return function (next) { return function (action) {\r\n        var result = next(action);\r\n        var measureUtils = getTimeMeasureUtils(warnAfter, \"SerializableStateInvariantMiddleware\");\r\n        if (!ignoreActions && !(ignoredActions.length && ignoredActions.indexOf(action.type) !== -1)) {\r\n            measureUtils.measureTime(function () {\r\n                var foundActionNonSerializableValue = findNonSerializableValue(action, \"\", isSerializable, getEntries, ignoredActionPaths, cache);\r\n                if (foundActionNonSerializableValue) {\r\n                    var keyPath = foundActionNonSerializableValue.keyPath, value = foundActionNonSerializableValue.value;\r\n                    console.error(\"A non-serializable value was detected in an action, in the path: `\" + keyPath + \"`. Value:\", value, \"\\nTake a look at the logic that dispatched this action: \", action, \"\\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)\", \"\\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)\");\r\n                }\r\n            });\r\n        }\r\n        if (!ignoreState) {\r\n            measureUtils.measureTime(function () {\r\n                var state = storeAPI.getState();\r\n                var foundStateNonSerializableValue = findNonSerializableValue(state, \"\", isSerializable, getEntries, ignoredPaths, cache);\r\n                if (foundStateNonSerializableValue) {\r\n                    var keyPath = foundStateNonSerializableValue.keyPath, value = foundStateNonSerializableValue.value;\r\n                    console.error(\"A non-serializable value was detected in the state, in the path: `\" + keyPath + \"`. Value:\", value, \"\\nTake a look at the reducer(s) handling this action type: \" + action.type + \".\\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)\");\r\n                }\r\n            });\r\n            measureUtils.warnIfExceeded();\r\n        }\r\n        return result;\r\n    }; }; };\r\n}\r\n// src/getDefaultMiddleware.ts\r\nfunction isBoolean(x) {\r\n    return typeof x === \"boolean\";\r\n}\r\nfunction curryGetDefaultMiddleware() {\r\n    return function curriedGetDefaultMiddleware(options) {\r\n        return getDefaultMiddleware(options);\r\n    };\r\n}\r\nfunction getDefaultMiddleware(options) {\r\n    if (options === void 0) { options = {}; }\r\n    var _c = options.thunk, thunk = _c === void 0 ? true : _c, _d = options.immutableCheck, immutableCheck = _d === void 0 ? true : _d, _e = options.serializableCheck, serializableCheck = _e === void 0 ? true : _e, _f = options.actionCreatorCheck, actionCreatorCheck = _f === void 0 ? true : _f;\r\n    var middlewareArray = new MiddlewareArray();\r\n    if (thunk) {\r\n        if (isBoolean(thunk)) {\r\n            middlewareArray.push(thunkMiddleware);\r\n        }\r\n        else {\r\n            middlewareArray.push(thunkMiddleware.withExtraArgument(thunk.extraArgument));\r\n        }\r\n    }\r\n    if (process.env.NODE_ENV !== \"production\") {\r\n        if (immutableCheck) {\r\n            var immutableOptions = {};\r\n            if (!isBoolean(immutableCheck)) {\r\n                immutableOptions = immutableCheck;\r\n            }\r\n            middlewareArray.unshift(createImmutableStateInvariantMiddleware(immutableOptions));\r\n        }\r\n        if (serializableCheck) {\r\n            var serializableOptions = {};\r\n            if (!isBoolean(serializableCheck)) {\r\n                serializableOptions = serializableCheck;\r\n            }\r\n            middlewareArray.push(createSerializableStateInvariantMiddleware(serializableOptions));\r\n        }\r\n        if (actionCreatorCheck) {\r\n            var actionCreatorOptions = {};\r\n            if (!isBoolean(actionCreatorCheck)) {\r\n                actionCreatorOptions = actionCreatorCheck;\r\n            }\r\n            middlewareArray.unshift(createActionCreatorInvariantMiddleware(actionCreatorOptions));\r\n        }\r\n    }\r\n    return middlewareArray;\r\n}\r\n// src/configureStore.ts\r\nvar IS_PRODUCTION = process.env.NODE_ENV === \"production\";\r\nfunction configureStore(options) {\r\n    var curriedGetDefaultMiddleware = curryGetDefaultMiddleware();\r\n    var _c = options || {}, _d = _c.reducer, reducer = _d === void 0 ? void 0 : _d, _e = _c.middleware, middleware = _e === void 0 ? curriedGetDefaultMiddleware() : _e, _f = _c.devTools, devTools = _f === void 0 ? true : _f, _g = _c.preloadedState, preloadedState = _g === void 0 ? void 0 : _g, _h = _c.enhancers, enhancers = _h === void 0 ? void 0 : _h;\r\n    var rootReducer;\r\n    if (typeof reducer === \"function\") {\r\n        rootReducer = reducer;\r\n    }\r\n    else if (isPlainObject(reducer)) {\r\n        rootReducer = combineReducers(reducer);\r\n    }\r\n    else {\r\n        throw new Error('\"reducer\" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');\r\n    }\r\n    var finalMiddleware = middleware;\r\n    if (typeof finalMiddleware === \"function\") {\r\n        finalMiddleware = finalMiddleware(curriedGetDefaultMiddleware);\r\n        if (!IS_PRODUCTION && !Array.isArray(finalMiddleware)) {\r\n            throw new Error(\"when using a middleware builder function, an array of middleware must be returned\");\r\n        }\r\n    }\r\n    if (!IS_PRODUCTION && finalMiddleware.some(function (item) { return typeof item !== \"function\"; })) {\r\n        throw new Error(\"each middleware provided to configureStore must be a function\");\r\n    }\r\n    var middlewareEnhancer = applyMiddleware.apply(void 0, finalMiddleware);\r\n    var finalCompose = compose2;\r\n    if (devTools) {\r\n        finalCompose = composeWithDevTools(__spreadValues({\r\n            trace: !IS_PRODUCTION\r\n        }, typeof devTools === \"object\" && devTools));\r\n    }\r\n    var defaultEnhancers = new EnhancerArray(middlewareEnhancer);\r\n    var storeEnhancers = defaultEnhancers;\r\n    if (Array.isArray(enhancers)) {\r\n        storeEnhancers = __spreadArray([middlewareEnhancer], enhancers);\r\n    }\r\n    else if (typeof enhancers === \"function\") {\r\n        storeEnhancers = enhancers(defaultEnhancers);\r\n    }\r\n    var composedEnhancer = finalCompose.apply(void 0, storeEnhancers);\r\n    return createStore(rootReducer, preloadedState, composedEnhancer);\r\n}\r\n// src/createReducer.ts\r\nimport createNextState2, { isDraft as isDraft2, isDraftable as isDraftable2 } from \"immer\";\r\n// src/mapBuilders.ts\r\nfunction executeReducerBuilderCallback(builderCallback) {\r\n    var actionsMap = {};\r\n    var actionMatchers = [];\r\n    var defaultCaseReducer;\r\n    var builder = {\r\n        addCase: function (typeOrActionCreator, reducer) {\r\n            if (process.env.NODE_ENV !== \"production\") {\r\n                if (actionMatchers.length > 0) {\r\n                    throw new Error(\"`builder.addCase` should only be called before calling `builder.addMatcher`\");\r\n                }\r\n                if (defaultCaseReducer) {\r\n                    throw new Error(\"`builder.addCase` should only be called before calling `builder.addDefaultCase`\");\r\n                }\r\n            }\r\n            var type = typeof typeOrActionCreator === \"string\" ? typeOrActionCreator : typeOrActionCreator.type;\r\n            if (!type) {\r\n                throw new Error(\"`builder.addCase` cannot be called with an empty action type\");\r\n            }\r\n            if (type in actionsMap) {\r\n                throw new Error(\"`builder.addCase` cannot be called with two reducers for the same action type\");\r\n            }\r\n            actionsMap[type] = reducer;\r\n            return builder;\r\n        },\r\n        addMatcher: function (matcher, reducer) {\r\n            if (process.env.NODE_ENV !== \"production\") {\r\n                if (defaultCaseReducer) {\r\n                    throw new Error(\"`builder.addMatcher` should only be called before calling `builder.addDefaultCase`\");\r\n                }\r\n            }\r\n            actionMatchers.push({ matcher: matcher, reducer: reducer });\r\n            return builder;\r\n        },\r\n        addDefaultCase: function (reducer) {\r\n            if (process.env.NODE_ENV !== \"production\") {\r\n                if (defaultCaseReducer) {\r\n                    throw new Error(\"`builder.addDefaultCase` can only be called once\");\r\n                }\r\n            }\r\n            defaultCaseReducer = reducer;\r\n            return builder;\r\n        }\r\n    };\r\n    builderCallback(builder);\r\n    return [actionsMap, actionMatchers, defaultCaseReducer];\r\n}\r\n// src/createReducer.ts\r\nfunction isStateFunction(x) {\r\n    return typeof x === \"function\";\r\n}\r\nvar hasWarnedAboutObjectNotation = false;\r\nfunction createReducer(initialState, mapOrBuilderCallback, actionMatchers, defaultCaseReducer) {\r\n    if (actionMatchers === void 0) { actionMatchers = []; }\r\n    if (process.env.NODE_ENV !== \"production\") {\r\n        if (typeof mapOrBuilderCallback === \"object\") {\r\n            if (!hasWarnedAboutObjectNotation) {\r\n                hasWarnedAboutObjectNotation = true;\r\n                console.warn(\"The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer\");\r\n            }\r\n        }\r\n    }\r\n    var _c = typeof mapOrBuilderCallback === \"function\" ? executeReducerBuilderCallback(mapOrBuilderCallback) : [mapOrBuilderCallback, actionMatchers, defaultCaseReducer], actionsMap = _c[0], finalActionMatchers = _c[1], finalDefaultCaseReducer = _c[2];\r\n    var getInitialState;\r\n    if (isStateFunction(initialState)) {\r\n        getInitialState = function () { return freezeDraftable(initialState()); };\r\n    }\r\n    else {\r\n        var frozenInitialState_1 = freezeDraftable(initialState);\r\n        getInitialState = function () { return frozenInitialState_1; };\r\n    }\r\n    function reducer(state, action) {\r\n        if (state === void 0) { state = getInitialState(); }\r\n        var caseReducers = __spreadArray([\r\n            actionsMap[action.type]\r\n        ], finalActionMatchers.filter(function (_c) {\r\n            var matcher = _c.matcher;\r\n            return matcher(action);\r\n        }).map(function (_c) {\r\n            var reducer2 = _c.reducer;\r\n            return reducer2;\r\n        }));\r\n        if (caseReducers.filter(function (cr) { return !!cr; }).length === 0) {\r\n            caseReducers = [finalDefaultCaseReducer];\r\n        }\r\n        return caseReducers.reduce(function (previousState, caseReducer) {\r\n            if (caseReducer) {\r\n                if (isDraft2(previousState)) {\r\n                    var draft = previousState;\r\n                    var result = caseReducer(draft, action);\r\n                    if (result === void 0) {\r\n                        return previousState;\r\n                    }\r\n                    return result;\r\n                }\r\n                else if (!isDraftable2(previousState)) {\r\n                    var result = caseReducer(previousState, action);\r\n                    if (result === void 0) {\r\n                        if (previousState === null) {\r\n                            return previousState;\r\n                        }\r\n                        throw Error(\"A case reducer on a non-draftable value must not return undefined\");\r\n                    }\r\n                    return result;\r\n                }\r\n                else {\r\n                    return createNextState2(previousState, function (draft) {\r\n                        return caseReducer(draft, action);\r\n                    });\r\n                }\r\n            }\r\n            return previousState;\r\n        }, state);\r\n    }\r\n    reducer.getInitialState = getInitialState;\r\n    return reducer;\r\n}\r\n// src/createSlice.ts\r\nvar hasWarnedAboutObjectNotation2 = false;\r\nfunction getType2(slice, actionKey) {\r\n    return slice + \"/\" + actionKey;\r\n}\r\nfunction createSlice(options) {\r\n    var name = options.name;\r\n    if (!name) {\r\n        throw new Error(\"`name` is a required option for createSlice\");\r\n    }\r\n    if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"development\") {\r\n        if (options.initialState === void 0) {\r\n            console.error(\"You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`\");\r\n        }\r\n    }\r\n    var initialState = typeof options.initialState == \"function\" ? options.initialState : freezeDraftable(options.initialState);\r\n    var reducers = options.reducers || {};\r\n    var reducerNames = Object.keys(reducers);\r\n    var sliceCaseReducersByName = {};\r\n    var sliceCaseReducersByType = {};\r\n    var actionCreators = {};\r\n    reducerNames.forEach(function (reducerName) {\r\n        var maybeReducerWithPrepare = reducers[reducerName];\r\n        var type = getType2(name, reducerName);\r\n        var caseReducer;\r\n        var prepareCallback;\r\n        if (\"reducer\" in maybeReducerWithPrepare) {\r\n            caseReducer = maybeReducerWithPrepare.reducer;\r\n            prepareCallback = maybeReducerWithPrepare.prepare;\r\n        }\r\n        else {\r\n            caseReducer = maybeReducerWithPrepare;\r\n        }\r\n        sliceCaseReducersByName[reducerName] = caseReducer;\r\n        sliceCaseReducersByType[type] = caseReducer;\r\n        actionCreators[reducerName] = prepareCallback ? createAction(type, prepareCallback) : createAction(type);\r\n    });\r\n    function buildReducer() {\r\n        if (process.env.NODE_ENV !== \"production\") {\r\n            if (typeof options.extraReducers === \"object\") {\r\n                if (!hasWarnedAboutObjectNotation2) {\r\n                    hasWarnedAboutObjectNotation2 = true;\r\n                    console.warn(\"The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice\");\r\n                }\r\n            }\r\n        }\r\n        var _c = typeof options.extraReducers === \"function\" ? executeReducerBuilderCallback(options.extraReducers) : [options.extraReducers], _d = _c[0], extraReducers = _d === void 0 ? {} : _d, _e = _c[1], actionMatchers = _e === void 0 ? [] : _e, _f = _c[2], defaultCaseReducer = _f === void 0 ? void 0 : _f;\r\n        var finalCaseReducers = __spreadValues(__spreadValues({}, extraReducers), sliceCaseReducersByType);\r\n        return createReducer(initialState, function (builder) {\r\n            for (var key in finalCaseReducers) {\r\n                builder.addCase(key, finalCaseReducers[key]);\r\n            }\r\n            for (var _i = 0, actionMatchers_1 = actionMatchers; _i < actionMatchers_1.length; _i++) {\r\n                var m = actionMatchers_1[_i];\r\n                builder.addMatcher(m.matcher, m.reducer);\r\n            }\r\n            if (defaultCaseReducer) {\r\n                builder.addDefaultCase(defaultCaseReducer);\r\n            }\r\n        });\r\n    }\r\n    var _reducer;\r\n    return {\r\n        name: name,\r\n        reducer: function (state, action) {\r\n            if (!_reducer)\r\n                _reducer = buildReducer();\r\n            return _reducer(state, action);\r\n        },\r\n        actions: actionCreators,\r\n        caseReducers: sliceCaseReducersByName,\r\n        getInitialState: function () {\r\n            if (!_reducer)\r\n                _reducer = buildReducer();\r\n            return _reducer.getInitialState();\r\n        }\r\n    };\r\n}\r\n// src/entities/entity_state.ts\r\nfunction getInitialEntityState() {\r\n    return {\r\n        ids: [],\r\n        entities: {}\r\n    };\r\n}\r\nfunction createInitialStateFactory() {\r\n    function getInitialState(additionalState) {\r\n        if (additionalState === void 0) { additionalState = {}; }\r\n        return Object.assign(getInitialEntityState(), additionalState);\r\n    }\r\n    return { getInitialState: getInitialState };\r\n}\r\n// src/entities/state_selectors.ts\r\nfunction createSelectorsFactory() {\r\n    function getSelectors(selectState) {\r\n        var selectIds = function (state) { return state.ids; };\r\n        var selectEntities = function (state) { return state.entities; };\r\n        var selectAll = createDraftSafeSelector(selectIds, selectEntities, function (ids, entities) { return ids.map(function (id) { return entities[id]; }); });\r\n        var selectId = function (_, id) { return id; };\r\n        var selectById = function (entities, id) { return entities[id]; };\r\n        var selectTotal = createDraftSafeSelector(selectIds, function (ids) { return ids.length; });\r\n        if (!selectState) {\r\n            return {\r\n                selectIds: selectIds,\r\n                selectEntities: selectEntities,\r\n                selectAll: selectAll,\r\n                selectTotal: selectTotal,\r\n                selectById: createDraftSafeSelector(selectEntities, selectId, selectById)\r\n            };\r\n        }\r\n        var selectGlobalizedEntities = createDraftSafeSelector(selectState, selectEntities);\r\n        return {\r\n            selectIds: createDraftSafeSelector(selectState, selectIds),\r\n            selectEntities: selectGlobalizedEntities,\r\n            selectAll: createDraftSafeSelector(selectState, selectAll),\r\n            selectTotal: createDraftSafeSelector(selectState, selectTotal),\r\n            selectById: createDraftSafeSelector(selectGlobalizedEntities, selectId, selectById)\r\n        };\r\n    }\r\n    return { getSelectors: getSelectors };\r\n}\r\n// src/entities/state_adapter.ts\r\nimport createNextState3, { isDraft as isDraft3 } from \"immer\";\r\nfunction createSingleArgumentStateOperator(mutator) {\r\n    var operator = createStateOperator(function (_, state) { return mutator(state); });\r\n    return function operation(state) {\r\n        return operator(state, void 0);\r\n    };\r\n}\r\nfunction createStateOperator(mutator) {\r\n    return function operation(state, arg) {\r\n        function isPayloadActionArgument(arg2) {\r\n            return isFSA(arg2);\r\n        }\r\n        var runMutator = function (draft) {\r\n            if (isPayloadActionArgument(arg)) {\r\n                mutator(arg.payload, draft);\r\n            }\r\n            else {\r\n                mutator(arg, draft);\r\n            }\r\n        };\r\n        if (isDraft3(state)) {\r\n            runMutator(state);\r\n            return state;\r\n        }\r\n        else {\r\n            return createNextState3(state, runMutator);\r\n        }\r\n    };\r\n}\r\n// src/entities/utils.ts\r\nfunction selectIdValue(entity, selectId) {\r\n    var key = selectId(entity);\r\n    if (process.env.NODE_ENV !== \"production\" && key === void 0) {\r\n        console.warn(\"The entity passed to the `selectId` implementation returned undefined.\", \"You should probably provide your own `selectId` implementation.\", \"The entity that was passed:\", entity, \"The `selectId` implementation:\", selectId.toString());\r\n    }\r\n    return key;\r\n}\r\nfunction ensureEntitiesArray(entities) {\r\n    if (!Array.isArray(entities)) {\r\n        entities = Object.values(entities);\r\n    }\r\n    return entities;\r\n}\r\nfunction splitAddedUpdatedEntities(newEntities, selectId, state) {\r\n    newEntities = ensureEntitiesArray(newEntities);\r\n    var added = [];\r\n    var updated = [];\r\n    for (var _i = 0, newEntities_1 = newEntities; _i < newEntities_1.length; _i++) {\r\n        var entity = newEntities_1[_i];\r\n        var id = selectIdValue(entity, selectId);\r\n        if (id in state.entities) {\r\n            updated.push({ id: id, changes: entity });\r\n        }\r\n        else {\r\n            added.push(entity);\r\n        }\r\n    }\r\n    return [added, updated];\r\n}\r\n// src/entities/unsorted_state_adapter.ts\r\nfunction createUnsortedStateAdapter(selectId) {\r\n    function addOneMutably(entity, state) {\r\n        var key = selectIdValue(entity, selectId);\r\n        if (key in state.entities) {\r\n            return;\r\n        }\r\n        state.ids.push(key);\r\n        state.entities[key] = entity;\r\n    }\r\n    function addManyMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        for (var _i = 0, newEntities_2 = newEntities; _i < newEntities_2.length; _i++) {\r\n            var entity = newEntities_2[_i];\r\n            addOneMutably(entity, state);\r\n        }\r\n    }\r\n    function setOneMutably(entity, state) {\r\n        var key = selectIdValue(entity, selectId);\r\n        if (!(key in state.entities)) {\r\n            state.ids.push(key);\r\n        }\r\n        state.entities[key] = entity;\r\n    }\r\n    function setManyMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        for (var _i = 0, newEntities_3 = newEntities; _i < newEntities_3.length; _i++) {\r\n            var entity = newEntities_3[_i];\r\n            setOneMutably(entity, state);\r\n        }\r\n    }\r\n    function setAllMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        state.ids = [];\r\n        state.entities = {};\r\n        addManyMutably(newEntities, state);\r\n    }\r\n    function removeOneMutably(key, state) {\r\n        return removeManyMutably([key], state);\r\n    }\r\n    function removeManyMutably(keys, state) {\r\n        var didMutate = false;\r\n        keys.forEach(function (key) {\r\n            if (key in state.entities) {\r\n                delete state.entities[key];\r\n                didMutate = true;\r\n            }\r\n        });\r\n        if (didMutate) {\r\n            state.ids = state.ids.filter(function (id) { return id in state.entities; });\r\n        }\r\n    }\r\n    function removeAllMutably(state) {\r\n        Object.assign(state, {\r\n            ids: [],\r\n            entities: {}\r\n        });\r\n    }\r\n    function takeNewKey(keys, update, state) {\r\n        var original2 = state.entities[update.id];\r\n        var updated = Object.assign({}, original2, update.changes);\r\n        var newKey = selectIdValue(updated, selectId);\r\n        var hasNewKey = newKey !== update.id;\r\n        if (hasNewKey) {\r\n            keys[update.id] = newKey;\r\n            delete state.entities[update.id];\r\n        }\r\n        state.entities[newKey] = updated;\r\n        return hasNewKey;\r\n    }\r\n    function updateOneMutably(update, state) {\r\n        return updateManyMutably([update], state);\r\n    }\r\n    function updateManyMutably(updates, state) {\r\n        var newKeys = {};\r\n        var updatesPerEntity = {};\r\n        updates.forEach(function (update) {\r\n            if (update.id in state.entities) {\r\n                updatesPerEntity[update.id] = {\r\n                    id: update.id,\r\n                    changes: __spreadValues(__spreadValues({}, updatesPerEntity[update.id] ? updatesPerEntity[update.id].changes : null), update.changes)\r\n                };\r\n            }\r\n        });\r\n        updates = Object.values(updatesPerEntity);\r\n        var didMutateEntities = updates.length > 0;\r\n        if (didMutateEntities) {\r\n            var didMutateIds = updates.filter(function (update) { return takeNewKey(newKeys, update, state); }).length > 0;\r\n            if (didMutateIds) {\r\n                state.ids = Object.keys(state.entities);\r\n            }\r\n        }\r\n    }\r\n    function upsertOneMutably(entity, state) {\r\n        return upsertManyMutably([entity], state);\r\n    }\r\n    function upsertManyMutably(newEntities, state) {\r\n        var _c = splitAddedUpdatedEntities(newEntities, selectId, state), added = _c[0], updated = _c[1];\r\n        updateManyMutably(updated, state);\r\n        addManyMutably(added, state);\r\n    }\r\n    return {\r\n        removeAll: createSingleArgumentStateOperator(removeAllMutably),\r\n        addOne: createStateOperator(addOneMutably),\r\n        addMany: createStateOperator(addManyMutably),\r\n        setOne: createStateOperator(setOneMutably),\r\n        setMany: createStateOperator(setManyMutably),\r\n        setAll: createStateOperator(setAllMutably),\r\n        updateOne: createStateOperator(updateOneMutably),\r\n        updateMany: createStateOperator(updateManyMutably),\r\n        upsertOne: createStateOperator(upsertOneMutably),\r\n        upsertMany: createStateOperator(upsertManyMutably),\r\n        removeOne: createStateOperator(removeOneMutably),\r\n        removeMany: createStateOperator(removeManyMutably)\r\n    };\r\n}\r\n// src/entities/sorted_state_adapter.ts\r\nfunction createSortedStateAdapter(selectId, sort) {\r\n    var _c = createUnsortedStateAdapter(selectId), removeOne = _c.removeOne, removeMany = _c.removeMany, removeAll = _c.removeAll;\r\n    function addOneMutably(entity, state) {\r\n        return addManyMutably([entity], state);\r\n    }\r\n    function addManyMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        var models = newEntities.filter(function (model) { return !(selectIdValue(model, selectId) in state.entities); });\r\n        if (models.length !== 0) {\r\n            merge(models, state);\r\n        }\r\n    }\r\n    function setOneMutably(entity, state) {\r\n        return setManyMutably([entity], state);\r\n    }\r\n    function setManyMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        if (newEntities.length !== 0) {\r\n            merge(newEntities, state);\r\n        }\r\n    }\r\n    function setAllMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        state.entities = {};\r\n        state.ids = [];\r\n        addManyMutably(newEntities, state);\r\n    }\r\n    function updateOneMutably(update, state) {\r\n        return updateManyMutably([update], state);\r\n    }\r\n    function updateManyMutably(updates, state) {\r\n        var appliedUpdates = false;\r\n        for (var _i = 0, updates_1 = updates; _i < updates_1.length; _i++) {\r\n            var update = updates_1[_i];\r\n            var entity = state.entities[update.id];\r\n            if (!entity) {\r\n                continue;\r\n            }\r\n            appliedUpdates = true;\r\n            Object.assign(entity, update.changes);\r\n            var newId = selectId(entity);\r\n            if (update.id !== newId) {\r\n                delete state.entities[update.id];\r\n                state.entities[newId] = entity;\r\n            }\r\n        }\r\n        if (appliedUpdates) {\r\n            resortEntities(state);\r\n        }\r\n    }\r\n    function upsertOneMutably(entity, state) {\r\n        return upsertManyMutably([entity], state);\r\n    }\r\n    function upsertManyMutably(newEntities, state) {\r\n        var _c = splitAddedUpdatedEntities(newEntities, selectId, state), added = _c[0], updated = _c[1];\r\n        updateManyMutably(updated, state);\r\n        addManyMutably(added, state);\r\n    }\r\n    function areArraysEqual(a, b) {\r\n        if (a.length !== b.length) {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < a.length && i < b.length; i++) {\r\n            if (a[i] === b[i]) {\r\n                continue;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    function merge(models, state) {\r\n        models.forEach(function (model) {\r\n            state.entities[selectId(model)] = model;\r\n        });\r\n        resortEntities(state);\r\n    }\r\n    function resortEntities(state) {\r\n        var allEntities = Object.values(state.entities);\r\n        allEntities.sort(sort);\r\n        var newSortedIds = allEntities.map(selectId);\r\n        var ids = state.ids;\r\n        if (!areArraysEqual(ids, newSortedIds)) {\r\n            state.ids = newSortedIds;\r\n        }\r\n    }\r\n    return {\r\n        removeOne: removeOne,\r\n        removeMany: removeMany,\r\n        removeAll: removeAll,\r\n        addOne: createStateOperator(addOneMutably),\r\n        updateOne: createStateOperator(updateOneMutably),\r\n        upsertOne: createStateOperator(upsertOneMutably),\r\n        setOne: createStateOperator(setOneMutably),\r\n        setMany: createStateOperator(setManyMutably),\r\n        setAll: createStateOperator(setAllMutably),\r\n        addMany: createStateOperator(addManyMutably),\r\n        updateMany: createStateOperator(updateManyMutably),\r\n        upsertMany: createStateOperator(upsertManyMutably)\r\n    };\r\n}\r\n// src/entities/create_adapter.ts\r\nfunction createEntityAdapter(options) {\r\n    if (options === void 0) { options = {}; }\r\n    var _c = __spreadValues({\r\n        sortComparer: false,\r\n        selectId: function (instance) { return instance.id; }\r\n    }, options), selectId = _c.selectId, sortComparer = _c.sortComparer;\r\n    var stateFactory = createInitialStateFactory();\r\n    var selectorsFactory = createSelectorsFactory();\r\n    var stateAdapter = sortComparer ? createSortedStateAdapter(selectId, sortComparer) : createUnsortedStateAdapter(selectId);\r\n    return __spreadValues(__spreadValues(__spreadValues({\r\n        selectId: selectId,\r\n        sortComparer: sortComparer\r\n    }, stateFactory), selectorsFactory), stateAdapter);\r\n}\r\n// src/nanoid.ts\r\nvar urlAlphabet = \"ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW\";\r\nvar nanoid = function (size) {\r\n    if (size === void 0) { size = 21; }\r\n    var id = \"\";\r\n    var i = size;\r\n    while (i--) {\r\n        id += urlAlphabet[Math.random() * 64 | 0];\r\n    }\r\n    return id;\r\n};\r\n// src/createAsyncThunk.ts\r\nvar commonProperties = [\r\n    \"name\",\r\n    \"message\",\r\n    \"stack\",\r\n    \"code\"\r\n];\r\nvar RejectWithValue = /** @class */ (function () {\r\n    function RejectWithValue(payload, meta) {\r\n        this.payload = payload;\r\n        this.meta = meta;\r\n    }\r\n    return RejectWithValue;\r\n}());\r\nvar FulfillWithMeta = /** @class */ (function () {\r\n    function FulfillWithMeta(payload, meta) {\r\n        this.payload = payload;\r\n        this.meta = meta;\r\n    }\r\n    return FulfillWithMeta;\r\n}());\r\nvar miniSerializeError = function (value) {\r\n    if (typeof value === \"object\" && value !== null) {\r\n        var simpleError = {};\r\n        for (var _i = 0, commonProperties_1 = commonProperties; _i < commonProperties_1.length; _i++) {\r\n            var property = commonProperties_1[_i];\r\n            if (typeof value[property] === \"string\") {\r\n                simpleError[property] = value[property];\r\n            }\r\n        }\r\n        return simpleError;\r\n    }\r\n    return { message: String(value) };\r\n};\r\nvar createAsyncThunk = (function () {\r\n    function createAsyncThunk2(typePrefix, payloadCreator, options) {\r\n        var fulfilled = createAction(typePrefix + \"/fulfilled\", function (payload, requestId, arg, meta) { return ({\r\n            payload: payload,\r\n            meta: __spreadProps(__spreadValues({}, meta || {}), {\r\n                arg: arg,\r\n                requestId: requestId,\r\n                requestStatus: \"fulfilled\"\r\n            })\r\n        }); });\r\n        var pending = createAction(typePrefix + \"/pending\", function (requestId, arg, meta) { return ({\r\n            payload: void 0,\r\n            meta: __spreadProps(__spreadValues({}, meta || {}), {\r\n                arg: arg,\r\n                requestId: requestId,\r\n                requestStatus: \"pending\"\r\n            })\r\n        }); });\r\n        var rejected = createAction(typePrefix + \"/rejected\", function (error, requestId, arg, payload, meta) { return ({\r\n            payload: payload,\r\n            error: (options && options.serializeError || miniSerializeError)(error || \"Rejected\"),\r\n            meta: __spreadProps(__spreadValues({}, meta || {}), {\r\n                arg: arg,\r\n                requestId: requestId,\r\n                rejectedWithValue: !!payload,\r\n                requestStatus: \"rejected\",\r\n                aborted: (error == null ? void 0 : error.name) === \"AbortError\",\r\n                condition: (error == null ? void 0 : error.name) === \"ConditionError\"\r\n            })\r\n        }); });\r\n        var displayedWarning = false;\r\n        var AC = typeof AbortController !== \"undefined\" ? AbortController : /** @class */ (function () {\r\n            function class_1() {\r\n                this.signal = {\r\n                    aborted: false,\r\n                    addEventListener: function () {\r\n                    },\r\n                    dispatchEvent: function () {\r\n                        return false;\r\n                    },\r\n                    onabort: function () {\r\n                    },\r\n                    removeEventListener: function () {\r\n                    },\r\n                    reason: void 0,\r\n                    throwIfAborted: function () {\r\n                    }\r\n                };\r\n            }\r\n            class_1.prototype.abort = function () {\r\n                if (process.env.NODE_ENV !== \"production\") {\r\n                    if (!displayedWarning) {\r\n                        displayedWarning = true;\r\n                        console.info(\"This platform does not implement AbortController. \\nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'.\");\r\n                    }\r\n                }\r\n            };\r\n            return class_1;\r\n        }());\r\n        function actionCreator(arg) {\r\n            return function (dispatch, getState, extra) {\r\n                var requestId = (options == null ? void 0 : options.idGenerator) ? options.idGenerator(arg) : nanoid();\r\n                var abortController = new AC();\r\n                var abortReason;\r\n                var started = false;\r\n                function abort(reason) {\r\n                    abortReason = reason;\r\n                    abortController.abort();\r\n                }\r\n                var promise2 = function () {\r\n                    return __async(this, null, function () {\r\n                        var _a, _b, finalAction, conditionResult, abortedPromise, err_1, skipDispatch;\r\n                        return __generator(this, function (_c) {\r\n                            switch (_c.label) {\r\n                                case 0:\r\n                                    _c.trys.push([0, 4, , 5]);\r\n                                    conditionResult = (_a = options == null ? void 0 : options.condition) == null ? void 0 : _a.call(options, arg, { getState: getState, extra: extra });\r\n                                    if (!isThenable(conditionResult)) return [3 /*break*/, 2];\r\n                                    return [4 /*yield*/, conditionResult];\r\n                                case 1:\r\n                                    conditionResult = _c.sent();\r\n                                    _c.label = 2;\r\n                                case 2:\r\n                                    if (conditionResult === false || abortController.signal.aborted) {\r\n                                        throw {\r\n                                            name: \"ConditionError\",\r\n                                            message: \"Aborted due to condition callback returning false.\"\r\n                                        };\r\n                                    }\r\n                                    started = true;\r\n                                    abortedPromise = new Promise(function (_, reject) { return abortController.signal.addEventListener(\"abort\", function () { return reject({\r\n                                        name: \"AbortError\",\r\n                                        message: abortReason || \"Aborted\"\r\n                                    }); }); });\r\n                                    dispatch(pending(requestId, arg, (_b = options == null ? void 0 : options.getPendingMeta) == null ? void 0 : _b.call(options, { requestId: requestId, arg: arg }, { getState: getState, extra: extra })));\r\n                                    return [4 /*yield*/, Promise.race([\r\n                                            abortedPromise,\r\n                                            Promise.resolve(payloadCreator(arg, {\r\n                                                dispatch: dispatch,\r\n                                                getState: getState,\r\n                                                extra: extra,\r\n                                                requestId: requestId,\r\n                                                signal: abortController.signal,\r\n                                                abort: abort,\r\n                                                rejectWithValue: function (value, meta) {\r\n                                                    return new RejectWithValue(value, meta);\r\n                                                },\r\n                                                fulfillWithValue: function (value, meta) {\r\n                                                    return new FulfillWithMeta(value, meta);\r\n                                                }\r\n                                            })).then(function (result) {\r\n                                                if (result instanceof RejectWithValue) {\r\n                                                    throw result;\r\n                                                }\r\n                                                if (result instanceof FulfillWithMeta) {\r\n                                                    return fulfilled(result.payload, requestId, arg, result.meta);\r\n                                                }\r\n                                                return fulfilled(result, requestId, arg);\r\n                                            })\r\n                                        ])];\r\n                                case 3:\r\n                                    finalAction = _c.sent();\r\n                                    return [3 /*break*/, 5];\r\n                                case 4:\r\n                                    err_1 = _c.sent();\r\n                                    finalAction = err_1 instanceof RejectWithValue ? rejected(null, requestId, arg, err_1.payload, err_1.meta) : rejected(err_1, requestId, arg);\r\n                                    return [3 /*break*/, 5];\r\n                                case 5:\r\n                                    skipDispatch = options && !options.dispatchConditionRejection && rejected.match(finalAction) && finalAction.meta.condition;\r\n                                    if (!skipDispatch) {\r\n                                        dispatch(finalAction);\r\n                                    }\r\n                                    return [2 /*return*/, finalAction];\r\n                            }\r\n                        });\r\n                    });\r\n                }();\r\n                return Object.assign(promise2, {\r\n                    abort: abort,\r\n                    requestId: requestId,\r\n                    arg: arg,\r\n                    unwrap: function () {\r\n                        return promise2.then(unwrapResult);\r\n                    }\r\n                });\r\n            };\r\n        }\r\n        return Object.assign(actionCreator, {\r\n            pending: pending,\r\n            rejected: rejected,\r\n            fulfilled: fulfilled,\r\n            typePrefix: typePrefix\r\n        });\r\n    }\r\n    createAsyncThunk2.withTypes = function () { return createAsyncThunk2; };\r\n    return createAsyncThunk2;\r\n})();\r\nfunction unwrapResult(action) {\r\n    if (action.meta && action.meta.rejectedWithValue) {\r\n        throw action.payload;\r\n    }\r\n    if (action.error) {\r\n        throw action.error;\r\n    }\r\n    return action.payload;\r\n}\r\nfunction isThenable(value) {\r\n    return value !== null && typeof value === \"object\" && typeof value.then === \"function\";\r\n}\r\n// src/matchers.ts\r\nvar matches = function (matcher, action) {\r\n    if (hasMatchFunction(matcher)) {\r\n        return matcher.match(action);\r\n    }\r\n    else {\r\n        return matcher(action);\r\n    }\r\n};\r\nfunction isAnyOf() {\r\n    var matchers = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        matchers[_i] = arguments[_i];\r\n    }\r\n    return function (action) {\r\n        return matchers.some(function (matcher) { return matches(matcher, action); });\r\n    };\r\n}\r\nfunction isAllOf() {\r\n    var matchers = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        matchers[_i] = arguments[_i];\r\n    }\r\n    return function (action) {\r\n        return matchers.every(function (matcher) { return matches(matcher, action); });\r\n    };\r\n}\r\nfunction hasExpectedRequestMetadata(action, validStatus) {\r\n    if (!action || !action.meta)\r\n        return false;\r\n    var hasValidRequestId = typeof action.meta.requestId === \"string\";\r\n    var hasValidRequestStatus = validStatus.indexOf(action.meta.requestStatus) > -1;\r\n    return hasValidRequestId && hasValidRequestStatus;\r\n}\r\nfunction isAsyncThunkArray(a) {\r\n    return typeof a[0] === \"function\" && \"pending\" in a[0] && \"fulfilled\" in a[0] && \"rejected\" in a[0];\r\n}\r\nfunction isPending() {\r\n    var asyncThunks = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        asyncThunks[_i] = arguments[_i];\r\n    }\r\n    if (asyncThunks.length === 0) {\r\n        return function (action) { return hasExpectedRequestMetadata(action, [\"pending\"]); };\r\n    }\r\n    if (!isAsyncThunkArray(asyncThunks)) {\r\n        return isPending()(asyncThunks[0]);\r\n    }\r\n    return function (action) {\r\n        var matchers = asyncThunks.map(function (asyncThunk) { return asyncThunk.pending; });\r\n        var combinedMatcher = isAnyOf.apply(void 0, matchers);\r\n        return combinedMatcher(action);\r\n    };\r\n}\r\nfunction isRejected() {\r\n    var asyncThunks = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        asyncThunks[_i] = arguments[_i];\r\n    }\r\n    if (asyncThunks.length === 0) {\r\n        return function (action) { return hasExpectedRequestMetadata(action, [\"rejected\"]); };\r\n    }\r\n    if (!isAsyncThunkArray(asyncThunks)) {\r\n        return isRejected()(asyncThunks[0]);\r\n    }\r\n    return function (action) {\r\n        var matchers = asyncThunks.map(function (asyncThunk) { return asyncThunk.rejected; });\r\n        var combinedMatcher = isAnyOf.apply(void 0, matchers);\r\n        return combinedMatcher(action);\r\n    };\r\n}\r\nfunction isRejectedWithValue() {\r\n    var asyncThunks = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        asyncThunks[_i] = arguments[_i];\r\n    }\r\n    var hasFlag = function (action) {\r\n        return action && action.meta && action.meta.rejectedWithValue;\r\n    };\r\n    if (asyncThunks.length === 0) {\r\n        return function (action) {\r\n            var combinedMatcher = isAllOf(isRejected.apply(void 0, asyncThunks), hasFlag);\r\n            return combinedMatcher(action);\r\n        };\r\n    }\r\n    if (!isAsyncThunkArray(asyncThunks)) {\r\n        return isRejectedWithValue()(asyncThunks[0]);\r\n    }\r\n    return function (action) {\r\n        var combinedMatcher = isAllOf(isRejected.apply(void 0, asyncThunks), hasFlag);\r\n        return combinedMatcher(action);\r\n    };\r\n}\r\nfunction isFulfilled() {\r\n    var asyncThunks = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        asyncThunks[_i] = arguments[_i];\r\n    }\r\n    if (asyncThunks.length === 0) {\r\n        return function (action) { return hasExpectedRequestMetadata(action, [\"fulfilled\"]); };\r\n    }\r\n    if (!isAsyncThunkArray(asyncThunks)) {\r\n        return isFulfilled()(asyncThunks[0]);\r\n    }\r\n    return function (action) {\r\n        var matchers = asyncThunks.map(function (asyncThunk) { return asyncThunk.fulfilled; });\r\n        var combinedMatcher = isAnyOf.apply(void 0, matchers);\r\n        return combinedMatcher(action);\r\n    };\r\n}\r\nfunction isAsyncThunkAction() {\r\n    var asyncThunks = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        asyncThunks[_i] = arguments[_i];\r\n    }\r\n    if (asyncThunks.length === 0) {\r\n        return function (action) { return hasExpectedRequestMetadata(action, [\"pending\", \"fulfilled\", \"rejected\"]); };\r\n    }\r\n    if (!isAsyncThunkArray(asyncThunks)) {\r\n        return isAsyncThunkAction()(asyncThunks[0]);\r\n    }\r\n    return function (action) {\r\n        var matchers = [];\r\n        for (var _i = 0, asyncThunks_1 = asyncThunks; _i < asyncThunks_1.length; _i++) {\r\n            var asyncThunk = asyncThunks_1[_i];\r\n            matchers.push(asyncThunk.pending, asyncThunk.rejected, asyncThunk.fulfilled);\r\n        }\r\n        var combinedMatcher = isAnyOf.apply(void 0, matchers);\r\n        return combinedMatcher(action);\r\n    };\r\n}\r\n// src/listenerMiddleware/utils.ts\r\nvar assertFunction = function (func, expected) {\r\n    if (typeof func !== \"function\") {\r\n        throw new TypeError(expected + \" is not a function\");\r\n    }\r\n};\r\nvar noop = function () {\r\n};\r\nvar catchRejection = function (promise2, onError) {\r\n    if (onError === void 0) { onError = noop; }\r\n    promise2.catch(onError);\r\n    return promise2;\r\n};\r\nvar addAbortSignalListener = function (abortSignal, callback) {\r\n    abortSignal.addEventListener(\"abort\", callback, { once: true });\r\n    return function () { return abortSignal.removeEventListener(\"abort\", callback); };\r\n};\r\nvar abortControllerWithReason = function (abortController, reason) {\r\n    var signal = abortController.signal;\r\n    if (signal.aborted) {\r\n        return;\r\n    }\r\n    if (!(\"reason\" in signal)) {\r\n        Object.defineProperty(signal, \"reason\", {\r\n            enumerable: true,\r\n            value: reason,\r\n            configurable: true,\r\n            writable: true\r\n        });\r\n    }\r\n    ;\r\n    abortController.abort(reason);\r\n};\r\n// src/listenerMiddleware/exceptions.ts\r\nvar task = \"task\";\r\nvar listener = \"listener\";\r\nvar completed = \"completed\";\r\nvar cancelled = \"cancelled\";\r\nvar taskCancelled = \"task-\" + cancelled;\r\nvar taskCompleted = \"task-\" + completed;\r\nvar listenerCancelled = listener + \"-\" + cancelled;\r\nvar listenerCompleted = listener + \"-\" + completed;\r\nvar TaskAbortError = /** @class */ (function () {\r\n    function TaskAbortError(code) {\r\n        this.code = code;\r\n        this.name = \"TaskAbortError\";\r\n        this.message = task + \" \" + cancelled + \" (reason: \" + code + \")\";\r\n    }\r\n    return TaskAbortError;\r\n}());\r\n// src/listenerMiddleware/task.ts\r\nvar validateActive = function (signal) {\r\n    if (signal.aborted) {\r\n        throw new TaskAbortError(signal.reason);\r\n    }\r\n};\r\nfunction raceWithSignal(signal, promise2) {\r\n    var cleanup = noop;\r\n    return new Promise(function (resolve, reject) {\r\n        var notifyRejection = function () { return reject(new TaskAbortError(signal.reason)); };\r\n        if (signal.aborted) {\r\n            notifyRejection();\r\n            return;\r\n        }\r\n        cleanup = addAbortSignalListener(signal, notifyRejection);\r\n        promise2.finally(function () { return cleanup(); }).then(resolve, reject);\r\n    }).finally(function () {\r\n        cleanup = noop;\r\n    });\r\n}\r\nvar runTask = function (task2, cleanUp) { return __async(void 0, null, function () {\r\n    var value, error_1;\r\n    return __generator(this, function (_c) {\r\n        switch (_c.label) {\r\n            case 0:\r\n                _c.trys.push([0, 3, 4, 5]);\r\n                return [4 /*yield*/, Promise.resolve()];\r\n            case 1:\r\n                _c.sent();\r\n                return [4 /*yield*/, task2()];\r\n            case 2:\r\n                value = _c.sent();\r\n                return [2 /*return*/, {\r\n                        status: \"ok\",\r\n                        value: value\r\n                    }];\r\n            case 3:\r\n                error_1 = _c.sent();\r\n                return [2 /*return*/, {\r\n                        status: error_1 instanceof TaskAbortError ? \"cancelled\" : \"rejected\",\r\n                        error: error_1\r\n                    }];\r\n            case 4:\r\n                cleanUp == null ? void 0 : cleanUp();\r\n                return [7 /*endfinally*/];\r\n            case 5: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nvar createPause = function (signal) {\r\n    return function (promise2) {\r\n        return catchRejection(raceWithSignal(signal, promise2).then(function (output) {\r\n            validateActive(signal);\r\n            return output;\r\n        }));\r\n    };\r\n};\r\nvar createDelay = function (signal) {\r\n    var pause = createPause(signal);\r\n    return function (timeoutMs) {\r\n        return pause(new Promise(function (resolve) { return setTimeout(resolve, timeoutMs); }));\r\n    };\r\n};\r\n// src/listenerMiddleware/index.ts\r\nvar assign = Object.assign;\r\nvar INTERNAL_NIL_TOKEN = {};\r\nvar alm = \"listenerMiddleware\";\r\nvar createFork = function (parentAbortSignal, parentBlockingPromises) {\r\n    var linkControllers = function (controller) { return addAbortSignalListener(parentAbortSignal, function () { return abortControllerWithReason(controller, parentAbortSignal.reason); }); };\r\n    return function (taskExecutor, opts) {\r\n        assertFunction(taskExecutor, \"taskExecutor\");\r\n        var childAbortController = new AbortController();\r\n        linkControllers(childAbortController);\r\n        var result = runTask(function () { return __async(void 0, null, function () {\r\n            var result2;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        validateActive(parentAbortSignal);\r\n                        validateActive(childAbortController.signal);\r\n                        return [4 /*yield*/, taskExecutor({\r\n                                pause: createPause(childAbortController.signal),\r\n                                delay: createDelay(childAbortController.signal),\r\n                                signal: childAbortController.signal\r\n                            })];\r\n                    case 1:\r\n                        result2 = _c.sent();\r\n                        validateActive(childAbortController.signal);\r\n                        return [2 /*return*/, result2];\r\n                }\r\n            });\r\n        }); }, function () { return abortControllerWithReason(childAbortController, taskCompleted); });\r\n        if (opts == null ? void 0 : opts.autoJoin) {\r\n            parentBlockingPromises.push(result);\r\n        }\r\n        return {\r\n            result: createPause(parentAbortSignal)(result),\r\n            cancel: function () {\r\n                abortControllerWithReason(childAbortController, taskCancelled);\r\n            }\r\n        };\r\n    };\r\n};\r\nvar createTakePattern = function (startListening, signal) {\r\n    var take = function (predicate, timeout) { return __async(void 0, null, function () {\r\n        var unsubscribe, tuplePromise, promises, output;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    validateActive(signal);\r\n                    unsubscribe = function () {\r\n                    };\r\n                    tuplePromise = new Promise(function (resolve, reject) {\r\n                        var stopListening = startListening({\r\n                            predicate: predicate,\r\n                            effect: function (action, listenerApi) {\r\n                                listenerApi.unsubscribe();\r\n                                resolve([\r\n                                    action,\r\n                                    listenerApi.getState(),\r\n                                    listenerApi.getOriginalState()\r\n                                ]);\r\n                            }\r\n                        });\r\n                        unsubscribe = function () {\r\n                            stopListening();\r\n                            reject();\r\n                        };\r\n                    });\r\n                    promises = [\r\n                        tuplePromise\r\n                    ];\r\n                    if (timeout != null) {\r\n                        promises.push(new Promise(function (resolve) { return setTimeout(resolve, timeout, null); }));\r\n                    }\r\n                    _c.label = 1;\r\n                case 1:\r\n                    _c.trys.push([1, , 3, 4]);\r\n                    return [4 /*yield*/, raceWithSignal(signal, Promise.race(promises))];\r\n                case 2:\r\n                    output = _c.sent();\r\n                    validateActive(signal);\r\n                    return [2 /*return*/, output];\r\n                case 3:\r\n                    unsubscribe();\r\n                    return [7 /*endfinally*/];\r\n                case 4: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    return function (predicate, timeout) { return catchRejection(take(predicate, timeout)); };\r\n};\r\nvar getListenerEntryPropsFrom = function (options) {\r\n    var type = options.type, actionCreator = options.actionCreator, matcher = options.matcher, predicate = options.predicate, effect = options.effect;\r\n    if (type) {\r\n        predicate = createAction(type).match;\r\n    }\r\n    else if (actionCreator) {\r\n        type = actionCreator.type;\r\n        predicate = actionCreator.match;\r\n    }\r\n    else if (matcher) {\r\n        predicate = matcher;\r\n    }\r\n    else if (predicate) {\r\n    }\r\n    else {\r\n        throw new Error(\"Creating or removing a listener requires one of the known fields for matching an action\");\r\n    }\r\n    assertFunction(effect, \"options.listener\");\r\n    return { predicate: predicate, type: type, effect: effect };\r\n};\r\nvar createListenerEntry = function (options) {\r\n    var _c = getListenerEntryPropsFrom(options), type = _c.type, predicate = _c.predicate, effect = _c.effect;\r\n    var id = nanoid();\r\n    var entry = {\r\n        id: id,\r\n        effect: effect,\r\n        type: type,\r\n        predicate: predicate,\r\n        pending: new Set(),\r\n        unsubscribe: function () {\r\n            throw new Error(\"Unsubscribe not initialized\");\r\n        }\r\n    };\r\n    return entry;\r\n};\r\nvar cancelActiveListeners = function (entry) {\r\n    entry.pending.forEach(function (controller) {\r\n        abortControllerWithReason(controller, listenerCancelled);\r\n    });\r\n};\r\nvar createClearListenerMiddleware = function (listenerMap) {\r\n    return function () {\r\n        listenerMap.forEach(cancelActiveListeners);\r\n        listenerMap.clear();\r\n    };\r\n};\r\nvar safelyNotifyError = function (errorHandler, errorToNotify, errorInfo) {\r\n    try {\r\n        errorHandler(errorToNotify, errorInfo);\r\n    }\r\n    catch (errorHandlerError) {\r\n        setTimeout(function () {\r\n            throw errorHandlerError;\r\n        }, 0);\r\n    }\r\n};\r\nvar addListener = createAction(alm + \"/add\");\r\nvar clearAllListeners = createAction(alm + \"/removeAll\");\r\nvar removeListener = createAction(alm + \"/remove\");\r\nvar defaultErrorHandler = function () {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    console.error.apply(console, __spreadArray([alm + \"/error\"], args));\r\n};\r\nfunction createListenerMiddleware(middlewareOptions) {\r\n    var _this = this;\r\n    if (middlewareOptions === void 0) { middlewareOptions = {}; }\r\n    var listenerMap = new Map();\r\n    var extra = middlewareOptions.extra, _c = middlewareOptions.onError, onError = _c === void 0 ? defaultErrorHandler : _c;\r\n    assertFunction(onError, \"onError\");\r\n    var insertEntry = function (entry) {\r\n        entry.unsubscribe = function () { return listenerMap.delete(entry.id); };\r\n        listenerMap.set(entry.id, entry);\r\n        return function (cancelOptions) {\r\n            entry.unsubscribe();\r\n            if (cancelOptions == null ? void 0 : cancelOptions.cancelActive) {\r\n                cancelActiveListeners(entry);\r\n            }\r\n        };\r\n    };\r\n    var findListenerEntry = function (comparator) {\r\n        for (var _i = 0, _c = Array.from(listenerMap.values()); _i < _c.length; _i++) {\r\n            var entry = _c[_i];\r\n            if (comparator(entry)) {\r\n                return entry;\r\n            }\r\n        }\r\n        return void 0;\r\n    };\r\n    var startListening = function (options) {\r\n        var entry = findListenerEntry(function (existingEntry) { return existingEntry.effect === options.effect; });\r\n        if (!entry) {\r\n            entry = createListenerEntry(options);\r\n        }\r\n        return insertEntry(entry);\r\n    };\r\n    var stopListening = function (options) {\r\n        var _c = getListenerEntryPropsFrom(options), type = _c.type, effect = _c.effect, predicate = _c.predicate;\r\n        var entry = findListenerEntry(function (entry2) {\r\n            var matchPredicateOrType = typeof type === \"string\" ? entry2.type === type : entry2.predicate === predicate;\r\n            return matchPredicateOrType && entry2.effect === effect;\r\n        });\r\n        if (entry) {\r\n            entry.unsubscribe();\r\n            if (options.cancelActive) {\r\n                cancelActiveListeners(entry);\r\n            }\r\n        }\r\n        return !!entry;\r\n    };\r\n    var notifyListener = function (entry, action, api, getOriginalState) { return __async(_this, null, function () {\r\n        var internalTaskController, take, autoJoinPromises, listenerError_1;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    internalTaskController = new AbortController();\r\n                    take = createTakePattern(startListening, internalTaskController.signal);\r\n                    autoJoinPromises = [];\r\n                    _c.label = 1;\r\n                case 1:\r\n                    _c.trys.push([1, 3, 4, 6]);\r\n                    entry.pending.add(internalTaskController);\r\n                    return [4 /*yield*/, Promise.resolve(entry.effect(action, assign({}, api, {\r\n                            getOriginalState: getOriginalState,\r\n                            condition: function (predicate, timeout) { return take(predicate, timeout).then(Boolean); },\r\n                            take: take,\r\n                            delay: createDelay(internalTaskController.signal),\r\n                            pause: createPause(internalTaskController.signal),\r\n                            extra: extra,\r\n                            signal: internalTaskController.signal,\r\n                            fork: createFork(internalTaskController.signal, autoJoinPromises),\r\n                            unsubscribe: entry.unsubscribe,\r\n                            subscribe: function () {\r\n                                listenerMap.set(entry.id, entry);\r\n                            },\r\n                            cancelActiveListeners: function () {\r\n                                entry.pending.forEach(function (controller, _, set) {\r\n                                    if (controller !== internalTaskController) {\r\n                                        abortControllerWithReason(controller, listenerCancelled);\r\n                                        set.delete(controller);\r\n                                    }\r\n                                });\r\n                            }\r\n                        })))];\r\n                case 2:\r\n                    _c.sent();\r\n                    return [3 /*break*/, 6];\r\n                case 3:\r\n                    listenerError_1 = _c.sent();\r\n                    if (!(listenerError_1 instanceof TaskAbortError)) {\r\n                        safelyNotifyError(onError, listenerError_1, {\r\n                            raisedBy: \"effect\"\r\n                        });\r\n                    }\r\n                    return [3 /*break*/, 6];\r\n                case 4: return [4 /*yield*/, Promise.allSettled(autoJoinPromises)];\r\n                case 5:\r\n                    _c.sent();\r\n                    abortControllerWithReason(internalTaskController, listenerCompleted);\r\n                    entry.pending.delete(internalTaskController);\r\n                    return [7 /*endfinally*/];\r\n                case 6: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    var clearListenerMiddleware = createClearListenerMiddleware(listenerMap);\r\n    var middleware = function (api) { return function (next) { return function (action) {\r\n        if (!isAction(action)) {\r\n            return next(action);\r\n        }\r\n        if (addListener.match(action)) {\r\n            return startListening(action.payload);\r\n        }\r\n        if (clearAllListeners.match(action)) {\r\n            clearListenerMiddleware();\r\n            return;\r\n        }\r\n        if (removeListener.match(action)) {\r\n            return stopListening(action.payload);\r\n        }\r\n        var originalState = api.getState();\r\n        var getOriginalState = function () {\r\n            if (originalState === INTERNAL_NIL_TOKEN) {\r\n                throw new Error(alm + \": getOriginalState can only be called synchronously\");\r\n            }\r\n            return originalState;\r\n        };\r\n        var result;\r\n        try {\r\n            result = next(action);\r\n            if (listenerMap.size > 0) {\r\n                var currentState = api.getState();\r\n                var listenerEntries = Array.from(listenerMap.values());\r\n                for (var _i = 0, listenerEntries_1 = listenerEntries; _i < listenerEntries_1.length; _i++) {\r\n                    var entry = listenerEntries_1[_i];\r\n                    var runListener = false;\r\n                    try {\r\n                        runListener = entry.predicate(action, currentState, originalState);\r\n                    }\r\n                    catch (predicateError) {\r\n                        runListener = false;\r\n                        safelyNotifyError(onError, predicateError, {\r\n                            raisedBy: \"predicate\"\r\n                        });\r\n                    }\r\n                    if (!runListener) {\r\n                        continue;\r\n                    }\r\n                    notifyListener(entry, action, api, getOriginalState);\r\n                }\r\n            }\r\n        }\r\n        finally {\r\n            originalState = INTERNAL_NIL_TOKEN;\r\n        }\r\n        return result;\r\n    }; }; };\r\n    return {\r\n        middleware: middleware,\r\n        startListening: startListening,\r\n        stopListening: stopListening,\r\n        clearListeners: clearListenerMiddleware\r\n    };\r\n}\r\n// src/autoBatchEnhancer.ts\r\nvar SHOULD_AUTOBATCH = \"RTK_autoBatch\";\r\nvar prepareAutoBatched = function () { return function (payload) {\r\n    var _c;\r\n    return ({\r\n        payload: payload,\r\n        meta: (_c = {}, _c[SHOULD_AUTOBATCH] = true, _c)\r\n    });\r\n}; };\r\nvar promise;\r\nvar queueMicrotaskShim = typeof queueMicrotask === \"function\" ? queueMicrotask.bind(typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : globalThis) : function (cb) { return (promise || (promise = Promise.resolve())).then(cb).catch(function (err) { return setTimeout(function () {\r\n    throw err;\r\n}, 0); }); };\r\nvar createQueueWithTimer = function (timeout) {\r\n    return function (notify) {\r\n        setTimeout(notify, timeout);\r\n    };\r\n};\r\nvar rAF = typeof window !== \"undefined\" && window.requestAnimationFrame ? window.requestAnimationFrame : createQueueWithTimer(10);\r\nvar autoBatchEnhancer = function (options) {\r\n    if (options === void 0) { options = { type: \"raf\" }; }\r\n    return function (next) { return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var store = next.apply(void 0, args);\r\n        var notifying = true;\r\n        var shouldNotifyAtEndOfTick = false;\r\n        var notificationQueued = false;\r\n        var listeners = new Set();\r\n        var queueCallback = options.type === \"tick\" ? queueMicrotaskShim : options.type === \"raf\" ? rAF : options.type === \"callback\" ? options.queueNotification : createQueueWithTimer(options.timeout);\r\n        var notifyListeners = function () {\r\n            notificationQueued = false;\r\n            if (shouldNotifyAtEndOfTick) {\r\n                shouldNotifyAtEndOfTick = false;\r\n                listeners.forEach(function (l) { return l(); });\r\n            }\r\n        };\r\n        return Object.assign({}, store, {\r\n            subscribe: function (listener2) {\r\n                var wrappedListener = function () { return notifying && listener2(); };\r\n                var unsubscribe = store.subscribe(wrappedListener);\r\n                listeners.add(listener2);\r\n                return function () {\r\n                    unsubscribe();\r\n                    listeners.delete(listener2);\r\n                };\r\n            },\r\n            dispatch: function (action) {\r\n                var _a;\r\n                try {\r\n                    notifying = !((_a = action == null ? void 0 : action.meta) == null ? void 0 : _a[SHOULD_AUTOBATCH]);\r\n                    shouldNotifyAtEndOfTick = !notifying;\r\n                    if (shouldNotifyAtEndOfTick) {\r\n                        if (!notificationQueued) {\r\n                            notificationQueued = true;\r\n                            queueCallback(notifyListeners);\r\n                        }\r\n                    }\r\n                    return store.dispatch(action);\r\n                }\r\n                finally {\r\n                    notifying = true;\r\n                }\r\n            }\r\n        });\r\n    }; };\r\n};\r\n// src/index.ts\r\nenableES5();\r\nexport { EnhancerArray, MiddlewareArray, SHOULD_AUTOBATCH, TaskAbortError, addListener, autoBatchEnhancer, clearAllListeners, configureStore, createAction, createActionCreatorInvariantMiddleware, createAsyncThunk, createDraftSafeSelector, createEntityAdapter, createImmutableStateInvariantMiddleware, createListenerMiddleware, default2 as createNextState, createReducer, createSelector2 as createSelector, createSerializableStateInvariantMiddleware, createSlice, current2 as current, findNonSerializableValue, freeze, getDefaultMiddleware, getType, isAction, isActionCreator, isAllOf, isAnyOf, isAsyncThunkAction, isDraft4 as isDraft, isFSA as isFluxStandardAction, isFulfilled, isImmutableDefault, isPending, isPlain, isPlainObject, isRejected, isRejectedWithValue, miniSerializeError, nanoid, original, prepareAutoBatched, removeListener, unwrapResult };\r\n//# sourceMappingURL=redux-toolkit.esm.js.map","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { uniqBy } from 'lodash';\nimport React, { useState } from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Select } from '@grafana/ui';\n\nimport { AccessoryButton, InputGroup } from '../../components/QueryEditor';\n\nimport { QueryBuilderLabelFilter } from './types';\n\nexport interface Props {\n  defaultOp: string;\n  item: Partial<QueryBuilderLabelFilter>;\n  onChange: (value: QueryBuilderLabelFilter) => void;\n  onGetLabelNames: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  onGetLabelValues: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  onDelete: () => void;\n}\n\nexport function LabelFilterItem({ item, defaultOp, onChange, onDelete, onGetLabelNames, onGetLabelValues }: Props) {\n  const [state, setState] = useState<{\n    labelNames?: SelectableValue[];\n    labelValues?: SelectableValue[];\n    isLoadingLabelNames?: boolean;\n    isLoadingLabelValues?: boolean;\n  }>({});\n\n  const isMultiSelect = () => {\n    return operators.find((op) => op.label === item.op)?.isMultiValue;\n  };\n\n  const getSelectOptionsFromString = (item?: string): string[] => {\n    if (item) {\n      if (item.indexOf('|') > 0) {\n        return item.split('|');\n      }\n      return [item];\n    }\n    return [];\n  };\n\n  const getOptions = (): SelectableValue[] => {\n    const labelValues = state.labelValues ? [...state.labelValues] : [];\n    const selectedOptions = getSelectOptionsFromString(item?.value).map(toOption);\n\n    // Remove possible duplicated values\n    return uniqBy([...selectedOptions, ...labelValues], 'value');\n  };\n\n  return (\n    <div data-testid=\"prometheus-dimensions-filter-item\">\n      <InputGroup>\n        <Select\n          placeholder=\"Select label\"\n          aria-label={selectors.components.QueryBuilder.labelSelect}\n          inputId=\"prometheus-dimensions-filter-item-key\"\n          width=\"auto\"\n          value={item.label ? toOption(item.label) : null}\n          allowCustomValue\n          onOpenMenu={async () => {\n            setState({ isLoadingLabelNames: true });\n            const labelNames = await onGetLabelNames(item);\n            setState({ labelNames, isLoadingLabelNames: undefined });\n          }}\n          isLoading={state.isLoadingLabelNames}\n          options={state.labelNames}\n          onChange={(change) => {\n            if (change.label) {\n              onChange({\n                ...item,\n                op: item.op ?? defaultOp,\n                label: change.label,\n              } as any as QueryBuilderLabelFilter);\n            }\n          }}\n        />\n\n        <Select\n          aria-label={selectors.components.QueryBuilder.matchOperatorSelect}\n          value={toOption(item.op ?? defaultOp)}\n          options={operators}\n          width=\"auto\"\n          onChange={(change) => {\n            if (change.value != null) {\n              onChange({ ...item, op: change.value } as any as QueryBuilderLabelFilter);\n            }\n          }}\n        />\n\n        <Select\n          placeholder=\"Select value\"\n          aria-label={selectors.components.QueryBuilder.valueSelect}\n          inputId=\"prometheus-dimensions-filter-item-value\"\n          width=\"auto\"\n          value={\n            isMultiSelect()\n              ? getSelectOptionsFromString(item?.value).map(toOption)\n              : getSelectOptionsFromString(item?.value).map(toOption)[0]\n          }\n          allowCustomValue\n          onOpenMenu={async () => {\n            setState({ isLoadingLabelValues: true });\n            const labelValues = await onGetLabelValues(item);\n            setState({\n              ...state,\n              labelValues,\n              isLoadingLabelValues: undefined,\n            });\n          }}\n          isMulti={isMultiSelect()}\n          isLoading={state.isLoadingLabelValues}\n          options={getOptions()}\n          onChange={(change) => {\n            if (change.value) {\n              onChange({ ...item, value: change.value, op: item.op ?? defaultOp } as any as QueryBuilderLabelFilter);\n            } else {\n              const changes = change\n                .map((change: any) => {\n                  return change.label;\n                })\n                .join('|');\n              onChange({ ...item, value: changes, op: item.op ?? defaultOp } as any as QueryBuilderLabelFilter);\n            }\n          }}\n        />\n        <AccessoryButton aria-label=\"remove\" icon=\"times\" variant=\"secondary\" onClick={onDelete} />\n      </InputGroup>\n    </div>\n  );\n}\n\nconst operators = [\n  { label: '=~', value: '=~', isMultiValue: true },\n  { label: '=', value: '=', isMultiValue: false },\n  { label: '!=', value: '!=', isMultiValue: false },\n  { label: '!~', value: '!~', isMultiValue: true },\n];\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { isEqual } from 'lodash';\nimport React, { useEffect, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\n\nimport { EditorFieldGroup, EditorField, EditorList } from '../../components/QueryEditor';\n\nimport { LabelFilterItem } from './LabelFilterItem';\nimport { QueryBuilderLabelFilter } from './types';\n\n\nexport interface Props {\n  labelsFilters: QueryBuilderLabelFilter[];\n  onChange: (labelFilters: QueryBuilderLabelFilter[]) => void;\n  onGetLabelNames: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  onGetLabelValues: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  error?: string;\n}\n\nexport function LabelFilters({ labelsFilters, onChange, onGetLabelNames, onGetLabelValues, error }: Props) {\n  const defaultOp = '=';\n  const [items, setItems] = useState<Array<Partial<QueryBuilderLabelFilter>>>([{ op: defaultOp }]);\n\n  useEffect(() => {\n    if (labelsFilters.length > 0) {\n      setItems(labelsFilters);\n    } else {\n      setItems([{ op: defaultOp }]);\n    }\n  }, [labelsFilters]);\n\n  const onLabelsChange = (newItems: Array<Partial<QueryBuilderLabelFilter>>) => {\n    setItems(newItems);\n\n    // Extract full label filters with both label & value\n    const newLabels = newItems.filter((x) => x.label != null && x.value != null);\n    if (!isEqual(newLabels, labelsFilters)) {\n      onChange(newLabels as QueryBuilderLabelFilter[]);\n    }\n  };\n\n  return (\n    <EditorFieldGroup>\n      <EditorField label=\"Label filters\" error={error} invalid={!!error}>\n        <EditorList\n          items={items}\n          onChange={onLabelsChange}\n          renderItem={(item, onChangeItem, onDelete) => (\n            <LabelFilterItem\n              item={item}\n              defaultOp={defaultOp}\n              onChange={onChangeItem}\n              onDelete={onDelete}\n              onGetLabelNames={onGetLabelNames}\n              onGetLabelValues={onGetLabelValues}\n            />\n          )}\n        />\n      </EditorField>\n    </EditorFieldGroup>\n  );\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2, renderMarkdown } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nexport interface Props {\n  title?: React.ReactNode;\n  children?: React.ReactNode;\n  markdown?: string;\n  stepNumber?: number;\n}\n\nexport function OperationExplainedBox({ title, stepNumber, markdown, children }: Props) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.box}>\n      {stepNumber !== undefined && <div className={styles.stepNumber}>{stepNumber}</div>}\n      <div className={styles.boxInner}>\n        {title && (\n          <div className={styles.header}>\n            <span>{title}</span>\n          </div>\n        )}\n        <div className={styles.body}>\n          {markdown && <div dangerouslySetInnerHTML={{ __html: renderMarkdown(markdown) }}></div>}\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    box: css({\n      background: theme.colors.background.secondary,\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.borderRadius(),\n      position: 'relative',\n    }),\n    boxInner: css({\n      marginLeft: theme.spacing(4),\n    }),\n    stepNumber: css({\n      fontWeight: theme.typography.fontWeightMedium,\n      background: theme.colors.secondary.main,\n      width: '20px',\n      height: '20px',\n      borderRadius: '50%',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      position: 'absolute',\n      top: '10px',\n      left: '11px',\n      fontSize: theme.typography.bodySmall.fontSize,\n    }),\n    header: css({\n      paddingBottom: theme.spacing(0.5),\n      display: 'flex',\n      alignItems: 'center',\n      fontFamily: theme.typography.fontFamilyMonospace,\n    }),\n    body: css({\n      color: theme.colors.text.secondary,\n      'p:last-child': {\n        margin: 0,\n      },\n      a: {\n        color: theme.colors.text.link,\n        textDecoration: 'underline',\n      },\n    }),\n  };\n};\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import { useState, useRef, useEffect } from 'react';\n\nfunction areInputsEqual(newInputs, lastInputs) {\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n\n  for (var i = 0; i < newInputs.length; i++) {\n    if (newInputs[i] !== lastInputs[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction useMemoOne(getResult, inputs) {\n  var initial = useState(function () {\n    return {\n      inputs: inputs,\n      result: getResult()\n    };\n  })[0];\n  var isFirstRun = useRef(true);\n  var committed = useRef(initial);\n  var useCache = isFirstRun.current || Boolean(inputs && committed.current.inputs && areInputsEqual(inputs, committed.current.inputs));\n  var cache = useCache ? committed.current : {\n    inputs: inputs,\n    result: getResult()\n  };\n  useEffect(function () {\n    isFirstRun.current = false;\n    committed.current = cache;\n  }, [cache]);\n  return cache.result;\n}\nfunction useCallbackOne(callback, inputs) {\n  return useMemoOne(function () {\n    return callback;\n  }, inputs);\n}\nvar useMemo = useMemoOne;\nvar useCallback = useCallbackOne;\n\nexport { useCallback, useCallbackOne, useMemo, useMemoOne };\n","import invariant from 'tiny-invariant';\n\nvar getRect = function getRect(_ref) {\n  var top = _ref.top,\n      right = _ref.right,\n      bottom = _ref.bottom,\n      left = _ref.left;\n  var width = right - left;\n  var height = bottom - top;\n  var rect = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left,\n    width: width,\n    height: height,\n    x: left,\n    y: top,\n    center: {\n      x: (right + left) / 2,\n      y: (bottom + top) / 2\n    }\n  };\n  return rect;\n};\nvar expand = function expand(target, expandBy) {\n  return {\n    top: target.top - expandBy.top,\n    left: target.left - expandBy.left,\n    bottom: target.bottom + expandBy.bottom,\n    right: target.right + expandBy.right\n  };\n};\nvar shrink = function shrink(target, shrinkBy) {\n  return {\n    top: target.top + shrinkBy.top,\n    left: target.left + shrinkBy.left,\n    bottom: target.bottom - shrinkBy.bottom,\n    right: target.right - shrinkBy.right\n  };\n};\n\nvar shift = function shift(target, shiftBy) {\n  return {\n    top: target.top + shiftBy.y,\n    left: target.left + shiftBy.x,\n    bottom: target.bottom + shiftBy.y,\n    right: target.right + shiftBy.x\n  };\n};\n\nvar noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\nvar createBox = function createBox(_ref2) {\n  var borderBox = _ref2.borderBox,\n      _ref2$margin = _ref2.margin,\n      margin = _ref2$margin === void 0 ? noSpacing : _ref2$margin,\n      _ref2$border = _ref2.border,\n      border = _ref2$border === void 0 ? noSpacing : _ref2$border,\n      _ref2$padding = _ref2.padding,\n      padding = _ref2$padding === void 0 ? noSpacing : _ref2$padding;\n  var marginBox = getRect(expand(borderBox, margin));\n  var paddingBox = getRect(shrink(borderBox, border));\n  var contentBox = getRect(shrink(paddingBox, padding));\n  return {\n    marginBox: marginBox,\n    borderBox: getRect(borderBox),\n    paddingBox: paddingBox,\n    contentBox: contentBox,\n    margin: margin,\n    border: border,\n    padding: padding\n  };\n};\n\nvar parse = function parse(raw) {\n  var value = raw.slice(0, -2);\n  var suffix = raw.slice(-2);\n\n  if (suffix !== 'px') {\n    return 0;\n  }\n\n  var result = Number(value);\n  !!isNaN(result) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Could not parse value [raw: \" + raw + \", without suffix: \" + value + \"]\") : invariant(false) : void 0;\n  return result;\n};\n\nvar getWindowScroll = function getWindowScroll() {\n  return {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  };\n};\n\nvar offset = function offset(original, change) {\n  var borderBox = original.borderBox,\n      border = original.border,\n      margin = original.margin,\n      padding = original.padding;\n  var shifted = shift(borderBox, change);\n  return createBox({\n    borderBox: shifted,\n    border: border,\n    margin: margin,\n    padding: padding\n  });\n};\nvar withScroll = function withScroll(original, scroll) {\n  if (scroll === void 0) {\n    scroll = getWindowScroll();\n  }\n\n  return offset(original, scroll);\n};\nvar calculateBox = function calculateBox(borderBox, styles) {\n  var margin = {\n    top: parse(styles.marginTop),\n    right: parse(styles.marginRight),\n    bottom: parse(styles.marginBottom),\n    left: parse(styles.marginLeft)\n  };\n  var padding = {\n    top: parse(styles.paddingTop),\n    right: parse(styles.paddingRight),\n    bottom: parse(styles.paddingBottom),\n    left: parse(styles.paddingLeft)\n  };\n  var border = {\n    top: parse(styles.borderTopWidth),\n    right: parse(styles.borderRightWidth),\n    bottom: parse(styles.borderBottomWidth),\n    left: parse(styles.borderLeftWidth)\n  };\n  return createBox({\n    borderBox: borderBox,\n    margin: margin,\n    padding: padding,\n    border: border\n  });\n};\nvar getBox = function getBox(el) {\n  var borderBox = el.getBoundingClientRect();\n  var styles = window.getComputedStyle(el);\n  return calculateBox(borderBox, styles);\n};\n\nexport { calculateBox, createBox, expand, getBox, getRect, offset, shrink, withScroll };\n","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n    if (condition) {\n        return;\n    }\n    if (isProduction) {\n        throw new Error(prefix);\n    }\n    var provided = typeof message === 'function' ? message() : message;\n    var value = provided ? \"\".concat(prefix, \": \").concat(provided) : prefix;\n    throw new Error(value);\n}\n\nexport { invariant as default };\n","var safeIsNaN = Number.isNaN ||\n    function ponyfill(value) {\n        return typeof value === 'number' && value !== value;\n    };\nfunction isEqual(first, second) {\n    if (first === second) {\n        return true;\n    }\n    if (safeIsNaN(first) && safeIsNaN(second)) {\n        return true;\n    }\n    return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (!isEqual(newInputs[i], lastInputs[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var lastThis;\n    var lastArgs = [];\n    var lastResult;\n    var calledOnce = false;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n            return lastResult;\n        }\n        lastResult = resultFn.apply(this, newArgs);\n        calledOnce = true;\n        lastThis = this;\n        lastArgs = newArgs;\n        return lastResult;\n    }\n    return memoized;\n}\n\nexport default memoizeOne;\n","var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;\n","import React, { useLayoutEffect, useEffect, useRef, useState, useContext } from 'react';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { createStore as createStore$1, applyMiddleware, compose, bindActionCreators } from 'redux';\nimport { Provider, connect } from 'react-redux';\nimport { useMemo, useCallback } from 'use-memo-one';\nimport { getRect, expand, offset, withScroll, getBox, createBox, calculateBox } from 'css-box-model';\nimport memoizeOne from 'memoize-one';\nimport rafSchd from 'raf-schd';\nimport ReactDOM from 'react-dom';\n\nvar isProduction = process.env.NODE_ENV === 'production';\nvar spacesAndTabs = /[ \\t]{2,}/g;\nvar lineStartWithSpaces = /^[ \\t]*/gm;\n\nvar clean = function clean(value) {\n  return value.replace(spacesAndTabs, ' ').replace(lineStartWithSpaces, '').trim();\n};\n\nvar getDevMessage = function getDevMessage(message) {\n  return clean(\"\\n  %creact-beautiful-dnd\\n\\n  %c\" + clean(message) + \"\\n\\n  %c\\uD83D\\uDC77\\u200D This is a development only message. It will be removed in production builds.\\n\");\n};\n\nvar getFormattedMessage = function getFormattedMessage(message) {\n  return [getDevMessage(message), 'color: #00C584; font-size: 1.2em; font-weight: bold;', 'line-height: 1.5', 'color: #723874;'];\n};\nvar isDisabledFlag = '__react-beautiful-dnd-disable-dev-warnings';\nfunction log(type, message) {\n  var _console;\n\n  if (isProduction) {\n    return;\n  }\n\n  if (typeof window !== 'undefined' && window[isDisabledFlag]) {\n    return;\n  }\n\n  (_console = console)[type].apply(_console, getFormattedMessage(message));\n}\nvar warning = log.bind(null, 'warn');\nvar error = log.bind(null, 'error');\n\nfunction noop() {}\n\nfunction getOptions(shared, fromBinding) {\n  return _extends({}, shared, {}, fromBinding);\n}\n\nfunction bindEvents(el, bindings, sharedOptions) {\n  var unbindings = bindings.map(function (binding) {\n    var options = getOptions(sharedOptions, binding.options);\n    el.addEventListener(binding.eventName, binding.fn, options);\n    return function unbind() {\n      el.removeEventListener(binding.eventName, binding.fn, options);\n    };\n  });\n  return function unbindAll() {\n    unbindings.forEach(function (unbind) {\n      unbind();\n    });\n  };\n}\n\nvar isProduction$1 = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction RbdInvariant(message) {\n  this.message = message;\n}\n\nRbdInvariant.prototype.toString = function toString() {\n  return this.message;\n};\n\nfunction invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n\n  if (isProduction$1) {\n    throw new RbdInvariant(prefix);\n  } else {\n    throw new RbdInvariant(prefix + \": \" + (message || ''));\n  }\n}\n\nvar ErrorBoundary = function (_React$Component) {\n  _inheritsLoose(ErrorBoundary, _React$Component);\n\n  function ErrorBoundary() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.callbacks = null;\n    _this.unbind = noop;\n\n    _this.onWindowError = function (event) {\n      var callbacks = _this.getCallbacks();\n\n      if (callbacks.isDragging()) {\n        callbacks.tryAbort();\n        process.env.NODE_ENV !== \"production\" ? warning(\"\\n        An error was caught by our window 'error' event listener while a drag was occurring.\\n        The active drag has been aborted.\\n      \") : void 0;\n      }\n\n      var err = event.error;\n\n      if (err instanceof RbdInvariant) {\n        event.preventDefault();\n\n        if (process.env.NODE_ENV !== 'production') {\n          error(err.message);\n        }\n      }\n    };\n\n    _this.getCallbacks = function () {\n      if (!_this.callbacks) {\n        throw new Error('Unable to find AppCallbacks in <ErrorBoundary/>');\n      }\n\n      return _this.callbacks;\n    };\n\n    _this.setCallbacks = function (callbacks) {\n      _this.callbacks = callbacks;\n    };\n\n    return _this;\n  }\n\n  var _proto = ErrorBoundary.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.unbind = bindEvents(window, [{\n      eventName: 'error',\n      fn: this.onWindowError\n    }]);\n  };\n\n  _proto.componentDidCatch = function componentDidCatch(err) {\n    if (err instanceof RbdInvariant) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(err.message);\n      }\n\n      this.setState({});\n      return;\n    }\n\n    throw err;\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.unbind();\n  };\n\n  _proto.render = function render() {\n    return this.props.children(this.setCallbacks);\n  };\n\n  return ErrorBoundary;\n}(React.Component);\n\nvar dragHandleUsageInstructions = \"\\n  Press space bar to start a drag.\\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\\n  Some screen readers may require you to be in focus mode or to use your pass through key\\n\";\n\nvar position = function position(index) {\n  return index + 1;\n};\n\nvar onDragStart = function onDragStart(start) {\n  return \"\\n  You have lifted an item in position \" + position(start.source.index) + \"\\n\";\n};\n\nvar withLocation = function withLocation(source, destination) {\n  var isInHomeList = source.droppableId === destination.droppableId;\n  var startPosition = position(source.index);\n  var endPosition = position(destination.index);\n\n  if (isInHomeList) {\n    return \"\\n      You have moved the item from position \" + startPosition + \"\\n      to position \" + endPosition + \"\\n    \";\n  }\n\n  return \"\\n    You have moved the item from position \" + startPosition + \"\\n    in list \" + source.droppableId + \"\\n    to list \" + destination.droppableId + \"\\n    in position \" + endPosition + \"\\n  \";\n};\n\nvar withCombine = function withCombine(id, source, combine) {\n  var inHomeList = source.droppableId === combine.droppableId;\n\n  if (inHomeList) {\n    return \"\\n      The item \" + id + \"\\n      has been combined with \" + combine.draggableId;\n  }\n\n  return \"\\n      The item \" + id + \"\\n      in list \" + source.droppableId + \"\\n      has been combined with \" + combine.draggableId + \"\\n      in list \" + combine.droppableId + \"\\n    \";\n};\n\nvar onDragUpdate = function onDragUpdate(update) {\n  var location = update.destination;\n\n  if (location) {\n    return withLocation(update.source, location);\n  }\n\n  var combine = update.combine;\n\n  if (combine) {\n    return withCombine(update.draggableId, update.source, combine);\n  }\n\n  return 'You are over an area that cannot be dropped on';\n};\n\nvar returnedToStart = function returnedToStart(source) {\n  return \"\\n  The item has returned to its starting position\\n  of \" + position(source.index) + \"\\n\";\n};\n\nvar onDragEnd = function onDragEnd(result) {\n  if (result.reason === 'CANCEL') {\n    return \"\\n      Movement cancelled.\\n      \" + returnedToStart(result.source) + \"\\n    \";\n  }\n\n  var location = result.destination;\n  var combine = result.combine;\n\n  if (location) {\n    return \"\\n      You have dropped the item.\\n      \" + withLocation(result.source, location) + \"\\n    \";\n  }\n\n  if (combine) {\n    return \"\\n      You have dropped the item.\\n      \" + withCombine(result.draggableId, result.source, combine) + \"\\n    \";\n  }\n\n  return \"\\n    The item has been dropped while not over a drop area.\\n    \" + returnedToStart(result.source) + \"\\n  \";\n};\n\nvar preset = {\n  dragHandleUsageInstructions: dragHandleUsageInstructions,\n  onDragStart: onDragStart,\n  onDragUpdate: onDragUpdate,\n  onDragEnd: onDragEnd\n};\n\nvar origin = {\n  x: 0,\n  y: 0\n};\nvar add = function add(point1, point2) {\n  return {\n    x: point1.x + point2.x,\n    y: point1.y + point2.y\n  };\n};\nvar subtract = function subtract(point1, point2) {\n  return {\n    x: point1.x - point2.x,\n    y: point1.y - point2.y\n  };\n};\nvar isEqual = function isEqual(point1, point2) {\n  return point1.x === point2.x && point1.y === point2.y;\n};\nvar negate = function negate(point) {\n  return {\n    x: point.x !== 0 ? -point.x : 0,\n    y: point.y !== 0 ? -point.y : 0\n  };\n};\nvar patch = function patch(line, value, otherValue) {\n  var _ref;\n\n  if (otherValue === void 0) {\n    otherValue = 0;\n  }\n\n  return _ref = {}, _ref[line] = value, _ref[line === 'x' ? 'y' : 'x'] = otherValue, _ref;\n};\nvar distance = function distance(point1, point2) {\n  return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));\n};\nvar closest = function closest(target, points) {\n  return Math.min.apply(Math, points.map(function (point) {\n    return distance(target, point);\n  }));\n};\nvar apply = function apply(fn) {\n  return function (point) {\n    return {\n      x: fn(point.x),\n      y: fn(point.y)\n    };\n  };\n};\n\nvar executeClip = (function (frame, subject) {\n  var result = getRect({\n    top: Math.max(subject.top, frame.top),\n    right: Math.min(subject.right, frame.right),\n    bottom: Math.min(subject.bottom, frame.bottom),\n    left: Math.max(subject.left, frame.left)\n  });\n\n  if (result.width <= 0 || result.height <= 0) {\n    return null;\n  }\n\n  return result;\n});\n\nvar offsetByPosition = function offsetByPosition(spacing, point) {\n  return {\n    top: spacing.top + point.y,\n    left: spacing.left + point.x,\n    bottom: spacing.bottom + point.y,\n    right: spacing.right + point.x\n  };\n};\nvar getCorners = function getCorners(spacing) {\n  return [{\n    x: spacing.left,\n    y: spacing.top\n  }, {\n    x: spacing.right,\n    y: spacing.top\n  }, {\n    x: spacing.left,\n    y: spacing.bottom\n  }, {\n    x: spacing.right,\n    y: spacing.bottom\n  }];\n};\nvar noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\n\nvar scroll = function scroll(target, frame) {\n  if (!frame) {\n    return target;\n  }\n\n  return offsetByPosition(target, frame.scroll.diff.displacement);\n};\n\nvar increase = function increase(target, axis, withPlaceholder) {\n  if (withPlaceholder && withPlaceholder.increasedBy) {\n    var _extends2;\n\n    return _extends({}, target, (_extends2 = {}, _extends2[axis.end] = target[axis.end] + withPlaceholder.increasedBy[axis.line], _extends2));\n  }\n\n  return target;\n};\n\nvar clip = function clip(target, frame) {\n  if (frame && frame.shouldClipSubject) {\n    return executeClip(frame.pageMarginBox, target);\n  }\n\n  return getRect(target);\n};\n\nvar getSubject = (function (_ref) {\n  var page = _ref.page,\n      withPlaceholder = _ref.withPlaceholder,\n      axis = _ref.axis,\n      frame = _ref.frame;\n  var scrolled = scroll(page.marginBox, frame);\n  var increased = increase(scrolled, axis, withPlaceholder);\n  var clipped = clip(increased, frame);\n  return {\n    page: page,\n    withPlaceholder: withPlaceholder,\n    active: clipped\n  };\n});\n\nvar scrollDroppable = (function (droppable, newScroll) {\n  !droppable.frame ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n  var scrollable = droppable.frame;\n  var scrollDiff = subtract(newScroll, scrollable.scroll.initial);\n  var scrollDisplacement = negate(scrollDiff);\n\n  var frame = _extends({}, scrollable, {\n    scroll: {\n      initial: scrollable.scroll.initial,\n      current: newScroll,\n      diff: {\n        value: scrollDiff,\n        displacement: scrollDisplacement\n      },\n      max: scrollable.scroll.max\n    }\n  });\n\n  var subject = getSubject({\n    page: droppable.subject.page,\n    withPlaceholder: droppable.subject.withPlaceholder,\n    axis: droppable.axis,\n    frame: frame\n  });\n\n  var result = _extends({}, droppable, {\n    frame: frame,\n    subject: subject\n  });\n\n  return result;\n});\n\nfunction isInteger(value) {\n  if (Number.isInteger) {\n    return Number.isInteger(value);\n  }\n\n  return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n}\nfunction values(map) {\n  if (Object.values) {\n    return Object.values(map);\n  }\n\n  return Object.keys(map).map(function (key) {\n    return map[key];\n  });\n}\nfunction findIndex(list, predicate) {\n  if (list.findIndex) {\n    return list.findIndex(predicate);\n  }\n\n  for (var i = 0; i < list.length; i++) {\n    if (predicate(list[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n}\nfunction find(list, predicate) {\n  if (list.find) {\n    return list.find(predicate);\n  }\n\n  var index = findIndex(list, predicate);\n\n  if (index !== -1) {\n    return list[index];\n  }\n\n  return undefined;\n}\nfunction toArray(list) {\n  return Array.prototype.slice.call(list);\n}\n\nvar toDroppableMap = memoizeOne(function (droppables) {\n  return droppables.reduce(function (previous, current) {\n    previous[current.descriptor.id] = current;\n    return previous;\n  }, {});\n});\nvar toDraggableMap = memoizeOne(function (draggables) {\n  return draggables.reduce(function (previous, current) {\n    previous[current.descriptor.id] = current;\n    return previous;\n  }, {});\n});\nvar toDroppableList = memoizeOne(function (droppables) {\n  return values(droppables);\n});\nvar toDraggableList = memoizeOne(function (draggables) {\n  return values(draggables);\n});\n\nvar getDraggablesInsideDroppable = memoizeOne(function (droppableId, draggables) {\n  var result = toDraggableList(draggables).filter(function (draggable) {\n    return droppableId === draggable.descriptor.droppableId;\n  }).sort(function (a, b) {\n    return a.descriptor.index - b.descriptor.index;\n  });\n  return result;\n});\n\nfunction tryGetDestination(impact) {\n  if (impact.at && impact.at.type === 'REORDER') {\n    return impact.at.destination;\n  }\n\n  return null;\n}\nfunction tryGetCombine(impact) {\n  if (impact.at && impact.at.type === 'COMBINE') {\n    return impact.at.combine;\n  }\n\n  return null;\n}\n\nvar removeDraggableFromList = memoizeOne(function (remove, list) {\n  return list.filter(function (item) {\n    return item.descriptor.id !== remove.descriptor.id;\n  });\n});\n\nvar moveToNextCombine = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      draggable = _ref.draggable,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      previousImpact = _ref.previousImpact;\n\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n\n  var location = tryGetDestination(previousImpact);\n\n  if (!location) {\n    return null;\n  }\n\n  function getImpact(target) {\n    var at = {\n      type: 'COMBINE',\n      combine: {\n        draggableId: target,\n        droppableId: destination.descriptor.id\n      }\n    };\n    return _extends({}, previousImpact, {\n      at: at\n    });\n  }\n\n  var all = previousImpact.displaced.all;\n  var closestId = all.length ? all[0] : null;\n\n  if (isMovingForward) {\n    return closestId ? getImpact(closestId) : null;\n  }\n\n  var withoutDraggable = removeDraggableFromList(draggable, insideDestination);\n\n  if (!closestId) {\n    if (!withoutDraggable.length) {\n      return null;\n    }\n\n    var last = withoutDraggable[withoutDraggable.length - 1];\n    return getImpact(last.descriptor.id);\n  }\n\n  var indexOfClosest = findIndex(withoutDraggable, function (d) {\n    return d.descriptor.id === closestId;\n  });\n  !(indexOfClosest !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find displaced item in set') : invariant(false) : void 0;\n  var proposedIndex = indexOfClosest - 1;\n\n  if (proposedIndex < 0) {\n    return null;\n  }\n\n  var before = withoutDraggable[proposedIndex];\n  return getImpact(before.descriptor.id);\n});\n\nvar isHomeOf = (function (draggable, destination) {\n  return draggable.descriptor.droppableId === destination.descriptor.id;\n});\n\nvar noDisplacedBy = {\n  point: origin,\n  value: 0\n};\nvar emptyGroups = {\n  invisible: {},\n  visible: {},\n  all: []\n};\nvar noImpact = {\n  displaced: emptyGroups,\n  displacedBy: noDisplacedBy,\n  at: null\n};\n\nvar isWithin = (function (lowerBound, upperBound) {\n  return function (value) {\n    return lowerBound <= value && value <= upperBound;\n  };\n});\n\nvar isPartiallyVisibleThroughFrame = (function (frame) {\n  var isWithinVertical = isWithin(frame.top, frame.bottom);\n  var isWithinHorizontal = isWithin(frame.left, frame.right);\n  return function (subject) {\n    var isContained = isWithinVertical(subject.top) && isWithinVertical(subject.bottom) && isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n\n    if (isContained) {\n      return true;\n    }\n\n    var isPartiallyVisibleVertically = isWithinVertical(subject.top) || isWithinVertical(subject.bottom);\n    var isPartiallyVisibleHorizontally = isWithinHorizontal(subject.left) || isWithinHorizontal(subject.right);\n    var isPartiallyContained = isPartiallyVisibleVertically && isPartiallyVisibleHorizontally;\n\n    if (isPartiallyContained) {\n      return true;\n    }\n\n    var isBiggerVertically = subject.top < frame.top && subject.bottom > frame.bottom;\n    var isBiggerHorizontally = subject.left < frame.left && subject.right > frame.right;\n    var isTargetBiggerThanFrame = isBiggerVertically && isBiggerHorizontally;\n\n    if (isTargetBiggerThanFrame) {\n      return true;\n    }\n\n    var isTargetBiggerOnOneAxis = isBiggerVertically && isPartiallyVisibleHorizontally || isBiggerHorizontally && isPartiallyVisibleVertically;\n    return isTargetBiggerOnOneAxis;\n  };\n});\n\nvar isTotallyVisibleThroughFrame = (function (frame) {\n  var isWithinVertical = isWithin(frame.top, frame.bottom);\n  var isWithinHorizontal = isWithin(frame.left, frame.right);\n  return function (subject) {\n    var isContained = isWithinVertical(subject.top) && isWithinVertical(subject.bottom) && isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n    return isContained;\n  };\n});\n\nvar vertical = {\n  direction: 'vertical',\n  line: 'y',\n  crossAxisLine: 'x',\n  start: 'top',\n  end: 'bottom',\n  size: 'height',\n  crossAxisStart: 'left',\n  crossAxisEnd: 'right',\n  crossAxisSize: 'width'\n};\nvar horizontal = {\n  direction: 'horizontal',\n  line: 'x',\n  crossAxisLine: 'y',\n  start: 'left',\n  end: 'right',\n  size: 'width',\n  crossAxisStart: 'top',\n  crossAxisEnd: 'bottom',\n  crossAxisSize: 'height'\n};\n\nvar isTotallyVisibleThroughFrameOnAxis = (function (axis) {\n  return function (frame) {\n    var isWithinVertical = isWithin(frame.top, frame.bottom);\n    var isWithinHorizontal = isWithin(frame.left, frame.right);\n    return function (subject) {\n      if (axis === vertical) {\n        return isWithinVertical(subject.top) && isWithinVertical(subject.bottom);\n      }\n\n      return isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n    };\n  };\n});\n\nvar getDroppableDisplaced = function getDroppableDisplaced(target, destination) {\n  var displacement = destination.frame ? destination.frame.scroll.diff.displacement : origin;\n  return offsetByPosition(target, displacement);\n};\n\nvar isVisibleInDroppable = function isVisibleInDroppable(target, destination, isVisibleThroughFrameFn) {\n  if (!destination.subject.active) {\n    return false;\n  }\n\n  return isVisibleThroughFrameFn(destination.subject.active)(target);\n};\n\nvar isVisibleInViewport = function isVisibleInViewport(target, viewport, isVisibleThroughFrameFn) {\n  return isVisibleThroughFrameFn(viewport)(target);\n};\n\nvar isVisible = function isVisible(_ref) {\n  var toBeDisplaced = _ref.target,\n      destination = _ref.destination,\n      viewport = _ref.viewport,\n      withDroppableDisplacement = _ref.withDroppableDisplacement,\n      isVisibleThroughFrameFn = _ref.isVisibleThroughFrameFn;\n  var displacedTarget = withDroppableDisplacement ? getDroppableDisplaced(toBeDisplaced, destination) : toBeDisplaced;\n  return isVisibleInDroppable(displacedTarget, destination, isVisibleThroughFrameFn) && isVisibleInViewport(displacedTarget, viewport, isVisibleThroughFrameFn);\n};\n\nvar isPartiallyVisible = function isPartiallyVisible(args) {\n  return isVisible(_extends({}, args, {\n    isVisibleThroughFrameFn: isPartiallyVisibleThroughFrame\n  }));\n};\nvar isTotallyVisible = function isTotallyVisible(args) {\n  return isVisible(_extends({}, args, {\n    isVisibleThroughFrameFn: isTotallyVisibleThroughFrame\n  }));\n};\nvar isTotallyVisibleOnAxis = function isTotallyVisibleOnAxis(args) {\n  return isVisible(_extends({}, args, {\n    isVisibleThroughFrameFn: isTotallyVisibleThroughFrameOnAxis(args.destination.axis)\n  }));\n};\n\nvar getShouldAnimate = function getShouldAnimate(id, last, forceShouldAnimate) {\n  if (typeof forceShouldAnimate === 'boolean') {\n    return forceShouldAnimate;\n  }\n\n  if (!last) {\n    return true;\n  }\n\n  var invisible = last.invisible,\n      visible = last.visible;\n\n  if (invisible[id]) {\n    return false;\n  }\n\n  var previous = visible[id];\n  return previous ? previous.shouldAnimate : true;\n};\n\nfunction getTarget(draggable, displacedBy) {\n  var marginBox = draggable.page.marginBox;\n  var expandBy = {\n    top: displacedBy.point.y,\n    right: 0,\n    bottom: 0,\n    left: displacedBy.point.x\n  };\n  return getRect(expand(marginBox, expandBy));\n}\n\nfunction getDisplacementGroups(_ref) {\n  var afterDragging = _ref.afterDragging,\n      destination = _ref.destination,\n      displacedBy = _ref.displacedBy,\n      viewport = _ref.viewport,\n      forceShouldAnimate = _ref.forceShouldAnimate,\n      last = _ref.last;\n  return afterDragging.reduce(function process(groups, draggable) {\n    var target = getTarget(draggable, displacedBy);\n    var id = draggable.descriptor.id;\n    groups.all.push(id);\n    var isVisible = isPartiallyVisible({\n      target: target,\n      destination: destination,\n      viewport: viewport,\n      withDroppableDisplacement: true\n    });\n\n    if (!isVisible) {\n      groups.invisible[draggable.descriptor.id] = true;\n      return groups;\n    }\n\n    var shouldAnimate = getShouldAnimate(id, last, forceShouldAnimate);\n    var displacement = {\n      draggableId: id,\n      shouldAnimate: shouldAnimate\n    };\n    groups.visible[id] = displacement;\n    return groups;\n  }, {\n    all: [],\n    visible: {},\n    invisible: {}\n  });\n}\n\nfunction getIndexOfLastItem(draggables, options) {\n  if (!draggables.length) {\n    return 0;\n  }\n\n  var indexOfLastItem = draggables[draggables.length - 1].descriptor.index;\n  return options.inHomeList ? indexOfLastItem : indexOfLastItem + 1;\n}\n\nfunction goAtEnd(_ref) {\n  var insideDestination = _ref.insideDestination,\n      inHomeList = _ref.inHomeList,\n      displacedBy = _ref.displacedBy,\n      destination = _ref.destination;\n  var newIndex = getIndexOfLastItem(insideDestination, {\n    inHomeList: inHomeList\n  });\n  return {\n    displaced: emptyGroups,\n    displacedBy: displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: {\n        droppableId: destination.descriptor.id,\n        index: newIndex\n      }\n    }\n  };\n}\n\nfunction calculateReorderImpact(_ref2) {\n  var draggable = _ref2.draggable,\n      insideDestination = _ref2.insideDestination,\n      destination = _ref2.destination,\n      viewport = _ref2.viewport,\n      displacedBy = _ref2.displacedBy,\n      last = _ref2.last,\n      index = _ref2.index,\n      forceShouldAnimate = _ref2.forceShouldAnimate;\n  var inHomeList = isHomeOf(draggable, destination);\n\n  if (index == null) {\n    return goAtEnd({\n      insideDestination: insideDestination,\n      inHomeList: inHomeList,\n      displacedBy: displacedBy,\n      destination: destination\n    });\n  }\n\n  var match = find(insideDestination, function (item) {\n    return item.descriptor.index === index;\n  });\n\n  if (!match) {\n    return goAtEnd({\n      insideDestination: insideDestination,\n      inHomeList: inHomeList,\n      displacedBy: displacedBy,\n      destination: destination\n    });\n  }\n\n  var withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  var sliceFrom = insideDestination.indexOf(match);\n  var impacted = withoutDragging.slice(sliceFrom);\n  var displaced = getDisplacementGroups({\n    afterDragging: impacted,\n    destination: destination,\n    displacedBy: displacedBy,\n    last: last,\n    viewport: viewport.frame,\n    forceShouldAnimate: forceShouldAnimate\n  });\n  return {\n    displaced: displaced,\n    displacedBy: displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: {\n        droppableId: destination.descriptor.id,\n        index: index\n      }\n    }\n  };\n}\n\nfunction didStartAfterCritical(draggableId, afterCritical) {\n  return Boolean(afterCritical.effected[draggableId]);\n}\n\nvar fromCombine = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      destination = _ref.destination,\n      draggables = _ref.draggables,\n      combine = _ref.combine,\n      afterCritical = _ref.afterCritical;\n\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n\n  var combineId = combine.draggableId;\n  var combineWith = draggables[combineId];\n  var combineWithIndex = combineWith.descriptor.index;\n  var didCombineWithStartAfterCritical = didStartAfterCritical(combineId, afterCritical);\n\n  if (didCombineWithStartAfterCritical) {\n    if (isMovingForward) {\n      return combineWithIndex;\n    }\n\n    return combineWithIndex - 1;\n  }\n\n  if (isMovingForward) {\n    return combineWithIndex + 1;\n  }\n\n  return combineWithIndex;\n});\n\nvar fromReorder = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      isInHomeList = _ref.isInHomeList,\n      insideDestination = _ref.insideDestination,\n      location = _ref.location;\n\n  if (!insideDestination.length) {\n    return null;\n  }\n\n  var currentIndex = location.index;\n  var proposedIndex = isMovingForward ? currentIndex + 1 : currentIndex - 1;\n  var firstIndex = insideDestination[0].descriptor.index;\n  var lastIndex = insideDestination[insideDestination.length - 1].descriptor.index;\n  var upperBound = isInHomeList ? lastIndex : lastIndex + 1;\n\n  if (proposedIndex < firstIndex) {\n    return null;\n  }\n\n  if (proposedIndex > upperBound) {\n    return null;\n  }\n\n  return proposedIndex;\n});\n\nvar moveToNextIndex = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      isInHomeList = _ref.isInHomeList,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      previousImpact = _ref.previousImpact,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var wasAt = previousImpact.at;\n  !wasAt ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot move in direction without previous impact location') : invariant(false) : void 0;\n\n  if (wasAt.type === 'REORDER') {\n    var _newIndex = fromReorder({\n      isMovingForward: isMovingForward,\n      isInHomeList: isInHomeList,\n      location: wasAt.destination,\n      insideDestination: insideDestination\n    });\n\n    if (_newIndex == null) {\n      return null;\n    }\n\n    return calculateReorderImpact({\n      draggable: draggable,\n      insideDestination: insideDestination,\n      destination: destination,\n      viewport: viewport,\n      last: previousImpact.displaced,\n      displacedBy: previousImpact.displacedBy,\n      index: _newIndex\n    });\n  }\n\n  var newIndex = fromCombine({\n    isMovingForward: isMovingForward,\n    destination: destination,\n    displaced: previousImpact.displaced,\n    draggables: draggables,\n    combine: wasAt.combine,\n    afterCritical: afterCritical\n  });\n\n  if (newIndex == null) {\n    return null;\n  }\n\n  return calculateReorderImpact({\n    draggable: draggable,\n    insideDestination: insideDestination,\n    destination: destination,\n    viewport: viewport,\n    last: previousImpact.displaced,\n    displacedBy: previousImpact.displacedBy,\n    index: newIndex\n  });\n});\n\nvar getCombinedItemDisplacement = (function (_ref) {\n  var displaced = _ref.displaced,\n      afterCritical = _ref.afterCritical,\n      combineWith = _ref.combineWith,\n      displacedBy = _ref.displacedBy;\n  var isDisplaced = Boolean(displaced.visible[combineWith] || displaced.invisible[combineWith]);\n\n  if (didStartAfterCritical(combineWith, afterCritical)) {\n    return isDisplaced ? origin : negate(displacedBy.point);\n  }\n\n  return isDisplaced ? displacedBy.point : origin;\n});\n\nvar whenCombining = (function (_ref) {\n  var afterCritical = _ref.afterCritical,\n      impact = _ref.impact,\n      draggables = _ref.draggables;\n  var combine = tryGetCombine(impact);\n  !combine ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n  var combineWith = combine.draggableId;\n  var center = draggables[combineWith].page.borderBox.center;\n  var displaceBy = getCombinedItemDisplacement({\n    displaced: impact.displaced,\n    afterCritical: afterCritical,\n    combineWith: combineWith,\n    displacedBy: impact.displacedBy\n  });\n  return add(center, displaceBy);\n});\n\nvar distanceFromStartToBorderBoxCenter = function distanceFromStartToBorderBoxCenter(axis, box) {\n  return box.margin[axis.start] + box.borderBox[axis.size] / 2;\n};\n\nvar distanceFromEndToBorderBoxCenter = function distanceFromEndToBorderBoxCenter(axis, box) {\n  return box.margin[axis.end] + box.borderBox[axis.size] / 2;\n};\n\nvar getCrossAxisBorderBoxCenter = function getCrossAxisBorderBoxCenter(axis, target, isMoving) {\n  return target[axis.crossAxisStart] + isMoving.margin[axis.crossAxisStart] + isMoving.borderBox[axis.crossAxisSize] / 2;\n};\n\nvar goAfter = function goAfter(_ref) {\n  var axis = _ref.axis,\n      moveRelativeTo = _ref.moveRelativeTo,\n      isMoving = _ref.isMoving;\n  return patch(axis.line, moveRelativeTo.marginBox[axis.end] + distanceFromStartToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveRelativeTo.marginBox, isMoving));\n};\nvar goBefore = function goBefore(_ref2) {\n  var axis = _ref2.axis,\n      moveRelativeTo = _ref2.moveRelativeTo,\n      isMoving = _ref2.isMoving;\n  return patch(axis.line, moveRelativeTo.marginBox[axis.start] - distanceFromEndToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveRelativeTo.marginBox, isMoving));\n};\nvar goIntoStart = function goIntoStart(_ref3) {\n  var axis = _ref3.axis,\n      moveInto = _ref3.moveInto,\n      isMoving = _ref3.isMoving;\n  return patch(axis.line, moveInto.contentBox[axis.start] + distanceFromStartToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveInto.contentBox, isMoving));\n};\n\nvar whenReordering = (function (_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      droppable = _ref.droppable,\n      afterCritical = _ref.afterCritical;\n  var insideDestination = getDraggablesInsideDroppable(droppable.descriptor.id, draggables);\n  var draggablePage = draggable.page;\n  var axis = droppable.axis;\n\n  if (!insideDestination.length) {\n    return goIntoStart({\n      axis: axis,\n      moveInto: droppable.page,\n      isMoving: draggablePage\n    });\n  }\n\n  var displaced = impact.displaced,\n      displacedBy = impact.displacedBy;\n  var closestAfter = displaced.all[0];\n\n  if (closestAfter) {\n    var closest = draggables[closestAfter];\n\n    if (didStartAfterCritical(closestAfter, afterCritical)) {\n      return goBefore({\n        axis: axis,\n        moveRelativeTo: closest.page,\n        isMoving: draggablePage\n      });\n    }\n\n    var withDisplacement = offset(closest.page, displacedBy.point);\n    return goBefore({\n      axis: axis,\n      moveRelativeTo: withDisplacement,\n      isMoving: draggablePage\n    });\n  }\n\n  var last = insideDestination[insideDestination.length - 1];\n\n  if (last.descriptor.id === draggable.descriptor.id) {\n    return draggablePage.borderBox.center;\n  }\n\n  if (didStartAfterCritical(last.descriptor.id, afterCritical)) {\n    var page = offset(last.page, negate(afterCritical.displacedBy.point));\n    return goAfter({\n      axis: axis,\n      moveRelativeTo: page,\n      isMoving: draggablePage\n    });\n  }\n\n  return goAfter({\n    axis: axis,\n    moveRelativeTo: last.page,\n    isMoving: draggablePage\n  });\n});\n\nvar withDroppableDisplacement = (function (droppable, point) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return point;\n  }\n\n  return add(point, frame.scroll.diff.displacement);\n});\n\nvar getResultWithoutDroppableDisplacement = function getResultWithoutDroppableDisplacement(_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      droppable = _ref.droppable,\n      draggables = _ref.draggables,\n      afterCritical = _ref.afterCritical;\n  var original = draggable.page.borderBox.center;\n  var at = impact.at;\n\n  if (!droppable) {\n    return original;\n  }\n\n  if (!at) {\n    return original;\n  }\n\n  if (at.type === 'REORDER') {\n    return whenReordering({\n      impact: impact,\n      draggable: draggable,\n      draggables: draggables,\n      droppable: droppable,\n      afterCritical: afterCritical\n    });\n  }\n\n  return whenCombining({\n    impact: impact,\n    draggables: draggables,\n    afterCritical: afterCritical\n  });\n};\n\nvar getPageBorderBoxCenterFromImpact = (function (args) {\n  var withoutDisplacement = getResultWithoutDroppableDisplacement(args);\n  var droppable = args.droppable;\n  var withDisplacement = droppable ? withDroppableDisplacement(droppable, withoutDisplacement) : withoutDisplacement;\n  return withDisplacement;\n});\n\nvar scrollViewport = (function (viewport, newScroll) {\n  var diff = subtract(newScroll, viewport.scroll.initial);\n  var displacement = negate(diff);\n  var frame = getRect({\n    top: newScroll.y,\n    bottom: newScroll.y + viewport.frame.height,\n    left: newScroll.x,\n    right: newScroll.x + viewport.frame.width\n  });\n  var updated = {\n    frame: frame,\n    scroll: {\n      initial: viewport.scroll.initial,\n      max: viewport.scroll.max,\n      current: newScroll,\n      diff: {\n        value: diff,\n        displacement: displacement\n      }\n    }\n  };\n  return updated;\n});\n\nfunction getDraggables(ids, draggables) {\n  return ids.map(function (id) {\n    return draggables[id];\n  });\n}\n\nfunction tryGetVisible(id, groups) {\n  for (var i = 0; i < groups.length; i++) {\n    var displacement = groups[i].visible[id];\n\n    if (displacement) {\n      return displacement;\n    }\n  }\n\n  return null;\n}\n\nvar speculativelyIncrease = (function (_ref) {\n  var impact = _ref.impact,\n      viewport = _ref.viewport,\n      destination = _ref.destination,\n      draggables = _ref.draggables,\n      maxScrollChange = _ref.maxScrollChange;\n  var scrolledViewport = scrollViewport(viewport, add(viewport.scroll.current, maxScrollChange));\n  var scrolledDroppable = destination.frame ? scrollDroppable(destination, add(destination.frame.scroll.current, maxScrollChange)) : destination;\n  var last = impact.displaced;\n  var withViewportScroll = getDisplacementGroups({\n    afterDragging: getDraggables(last.all, draggables),\n    destination: destination,\n    displacedBy: impact.displacedBy,\n    viewport: scrolledViewport.frame,\n    last: last,\n    forceShouldAnimate: false\n  });\n  var withDroppableScroll = getDisplacementGroups({\n    afterDragging: getDraggables(last.all, draggables),\n    destination: scrolledDroppable,\n    displacedBy: impact.displacedBy,\n    viewport: viewport.frame,\n    last: last,\n    forceShouldAnimate: false\n  });\n  var invisible = {};\n  var visible = {};\n  var groups = [last, withViewportScroll, withDroppableScroll];\n  last.all.forEach(function (id) {\n    var displacement = tryGetVisible(id, groups);\n\n    if (displacement) {\n      visible[id] = displacement;\n      return;\n    }\n\n    invisible[id] = true;\n  });\n\n  var newImpact = _extends({}, impact, {\n    displaced: {\n      all: last.all,\n      invisible: invisible,\n      visible: visible\n    }\n  });\n\n  return newImpact;\n});\n\nvar withViewportDisplacement = (function (viewport, point) {\n  return add(viewport.scroll.diff.displacement, point);\n});\n\nvar getClientFromPageBorderBoxCenter = (function (_ref) {\n  var pageBorderBoxCenter = _ref.pageBorderBoxCenter,\n      draggable = _ref.draggable,\n      viewport = _ref.viewport;\n  var withoutPageScrollChange = withViewportDisplacement(viewport, pageBorderBoxCenter);\n  var offset = subtract(withoutPageScrollChange, draggable.page.borderBox.center);\n  return add(draggable.client.borderBox.center, offset);\n});\n\nvar isTotallyVisibleInNewLocation = (function (_ref) {\n  var draggable = _ref.draggable,\n      destination = _ref.destination,\n      newPageBorderBoxCenter = _ref.newPageBorderBoxCenter,\n      viewport = _ref.viewport,\n      withDroppableDisplacement = _ref.withDroppableDisplacement,\n      _ref$onlyOnMainAxis = _ref.onlyOnMainAxis,\n      onlyOnMainAxis = _ref$onlyOnMainAxis === void 0 ? false : _ref$onlyOnMainAxis;\n  var changeNeeded = subtract(newPageBorderBoxCenter, draggable.page.borderBox.center);\n  var shifted = offsetByPosition(draggable.page.borderBox, changeNeeded);\n  var args = {\n    target: shifted,\n    destination: destination,\n    withDroppableDisplacement: withDroppableDisplacement,\n    viewport: viewport\n  };\n  return onlyOnMainAxis ? isTotallyVisibleOnAxis(args) : isTotallyVisible(args);\n});\n\nvar moveToNextPlace = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      draggable = _ref.draggable,\n      destination = _ref.destination,\n      draggables = _ref.draggables,\n      previousImpact = _ref.previousImpact,\n      viewport = _ref.viewport,\n      previousPageBorderBoxCenter = _ref.previousPageBorderBoxCenter,\n      previousClientSelection = _ref.previousClientSelection,\n      afterCritical = _ref.afterCritical;\n\n  if (!destination.isEnabled) {\n    return null;\n  }\n\n  var insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  var isInHomeList = isHomeOf(draggable, destination);\n  var impact = moveToNextCombine({\n    isMovingForward: isMovingForward,\n    draggable: draggable,\n    destination: destination,\n    insideDestination: insideDestination,\n    previousImpact: previousImpact\n  }) || moveToNextIndex({\n    isMovingForward: isMovingForward,\n    isInHomeList: isInHomeList,\n    draggable: draggable,\n    draggables: draggables,\n    destination: destination,\n    insideDestination: insideDestination,\n    previousImpact: previousImpact,\n    viewport: viewport,\n    afterCritical: afterCritical\n  });\n\n  if (!impact) {\n    return null;\n  }\n\n  var pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact: impact,\n    draggable: draggable,\n    droppable: destination,\n    draggables: draggables,\n    afterCritical: afterCritical\n  });\n  var isVisibleInNewLocation = isTotallyVisibleInNewLocation({\n    draggable: draggable,\n    destination: destination,\n    newPageBorderBoxCenter: pageBorderBoxCenter,\n    viewport: viewport.frame,\n    withDroppableDisplacement: false,\n    onlyOnMainAxis: true\n  });\n\n  if (isVisibleInNewLocation) {\n    var clientSelection = getClientFromPageBorderBoxCenter({\n      pageBorderBoxCenter: pageBorderBoxCenter,\n      draggable: draggable,\n      viewport: viewport\n    });\n    return {\n      clientSelection: clientSelection,\n      impact: impact,\n      scrollJumpRequest: null\n    };\n  }\n\n  var distance = subtract(pageBorderBoxCenter, previousPageBorderBoxCenter);\n  var cautious = speculativelyIncrease({\n    impact: impact,\n    viewport: viewport,\n    destination: destination,\n    draggables: draggables,\n    maxScrollChange: distance\n  });\n  return {\n    clientSelection: previousClientSelection,\n    impact: cautious,\n    scrollJumpRequest: distance\n  };\n});\n\nvar getKnownActive = function getKnownActive(droppable) {\n  var rect = droppable.subject.active;\n  !rect ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot get clipped area from droppable') : invariant(false) : void 0;\n  return rect;\n};\n\nvar getBestCrossAxisDroppable = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      pageBorderBoxCenter = _ref.pageBorderBoxCenter,\n      source = _ref.source,\n      droppables = _ref.droppables,\n      viewport = _ref.viewport;\n  var active = source.subject.active;\n\n  if (!active) {\n    return null;\n  }\n\n  var axis = source.axis;\n  var isBetweenSourceClipped = isWithin(active[axis.start], active[axis.end]);\n  var candidates = toDroppableList(droppables).filter(function (droppable) {\n    return droppable !== source;\n  }).filter(function (droppable) {\n    return droppable.isEnabled;\n  }).filter(function (droppable) {\n    return Boolean(droppable.subject.active);\n  }).filter(function (droppable) {\n    return isPartiallyVisibleThroughFrame(viewport.frame)(getKnownActive(droppable));\n  }).filter(function (droppable) {\n    var activeOfTarget = getKnownActive(droppable);\n\n    if (isMovingForward) {\n      return active[axis.crossAxisEnd] < activeOfTarget[axis.crossAxisEnd];\n    }\n\n    return activeOfTarget[axis.crossAxisStart] < active[axis.crossAxisStart];\n  }).filter(function (droppable) {\n    var activeOfTarget = getKnownActive(droppable);\n    var isBetweenDestinationClipped = isWithin(activeOfTarget[axis.start], activeOfTarget[axis.end]);\n    return isBetweenSourceClipped(activeOfTarget[axis.start]) || isBetweenSourceClipped(activeOfTarget[axis.end]) || isBetweenDestinationClipped(active[axis.start]) || isBetweenDestinationClipped(active[axis.end]);\n  }).sort(function (a, b) {\n    var first = getKnownActive(a)[axis.crossAxisStart];\n    var second = getKnownActive(b)[axis.crossAxisStart];\n\n    if (isMovingForward) {\n      return first - second;\n    }\n\n    return second - first;\n  }).filter(function (droppable, index, array) {\n    return getKnownActive(droppable)[axis.crossAxisStart] === getKnownActive(array[0])[axis.crossAxisStart];\n  });\n\n  if (!candidates.length) {\n    return null;\n  }\n\n  if (candidates.length === 1) {\n    return candidates[0];\n  }\n\n  var contains = candidates.filter(function (droppable) {\n    var isWithinDroppable = isWithin(getKnownActive(droppable)[axis.start], getKnownActive(droppable)[axis.end]);\n    return isWithinDroppable(pageBorderBoxCenter[axis.line]);\n  });\n\n  if (contains.length === 1) {\n    return contains[0];\n  }\n\n  if (contains.length > 1) {\n    return contains.sort(function (a, b) {\n      return getKnownActive(a)[axis.start] - getKnownActive(b)[axis.start];\n    })[0];\n  }\n\n  return candidates.sort(function (a, b) {\n    var first = closest(pageBorderBoxCenter, getCorners(getKnownActive(a)));\n    var second = closest(pageBorderBoxCenter, getCorners(getKnownActive(b)));\n\n    if (first !== second) {\n      return first - second;\n    }\n\n    return getKnownActive(a)[axis.start] - getKnownActive(b)[axis.start];\n  })[0];\n});\n\nvar getCurrentPageBorderBoxCenter = function getCurrentPageBorderBoxCenter(draggable, afterCritical) {\n  var original = draggable.page.borderBox.center;\n  return didStartAfterCritical(draggable.descriptor.id, afterCritical) ? subtract(original, afterCritical.displacedBy.point) : original;\n};\nvar getCurrentPageBorderBox = function getCurrentPageBorderBox(draggable, afterCritical) {\n  var original = draggable.page.borderBox;\n  return didStartAfterCritical(draggable.descriptor.id, afterCritical) ? offsetByPosition(original, negate(afterCritical.displacedBy.point)) : original;\n};\n\nvar getClosestDraggable = (function (_ref) {\n  var pageBorderBoxCenter = _ref.pageBorderBoxCenter,\n      viewport = _ref.viewport,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      afterCritical = _ref.afterCritical;\n  var sorted = insideDestination.filter(function (draggable) {\n    return isTotallyVisible({\n      target: getCurrentPageBorderBox(draggable, afterCritical),\n      destination: destination,\n      viewport: viewport.frame,\n      withDroppableDisplacement: true\n    });\n  }).sort(function (a, b) {\n    var distanceToA = distance(pageBorderBoxCenter, withDroppableDisplacement(destination, getCurrentPageBorderBoxCenter(a, afterCritical)));\n    var distanceToB = distance(pageBorderBoxCenter, withDroppableDisplacement(destination, getCurrentPageBorderBoxCenter(b, afterCritical)));\n\n    if (distanceToA < distanceToB) {\n      return -1;\n    }\n\n    if (distanceToB < distanceToA) {\n      return 1;\n    }\n\n    return a.descriptor.index - b.descriptor.index;\n  });\n  return sorted[0] || null;\n});\n\nvar getDisplacedBy = memoizeOne(function getDisplacedBy(axis, displaceBy) {\n  var displacement = displaceBy[axis.line];\n  return {\n    value: displacement,\n    point: patch(axis.line, displacement)\n  };\n});\n\nvar getRequiredGrowthForPlaceholder = function getRequiredGrowthForPlaceholder(droppable, placeholderSize, draggables) {\n  var axis = droppable.axis;\n\n  if (droppable.descriptor.mode === 'virtual') {\n    return patch(axis.line, placeholderSize[axis.line]);\n  }\n\n  var availableSpace = droppable.subject.page.contentBox[axis.size];\n  var insideDroppable = getDraggablesInsideDroppable(droppable.descriptor.id, draggables);\n  var spaceUsed = insideDroppable.reduce(function (sum, dimension) {\n    return sum + dimension.client.marginBox[axis.size];\n  }, 0);\n  var requiredSpace = spaceUsed + placeholderSize[axis.line];\n  var needsToGrowBy = requiredSpace - availableSpace;\n\n  if (needsToGrowBy <= 0) {\n    return null;\n  }\n\n  return patch(axis.line, needsToGrowBy);\n};\n\nvar withMaxScroll = function withMaxScroll(frame, max) {\n  return _extends({}, frame, {\n    scroll: _extends({}, frame.scroll, {\n      max: max\n    })\n  });\n};\n\nvar addPlaceholder = function addPlaceholder(droppable, draggable, draggables) {\n  var frame = droppable.frame;\n  !!isHomeOf(draggable, droppable) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Should not add placeholder space to home list') : invariant(false) : void 0;\n  !!droppable.subject.withPlaceholder ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot add placeholder size to a subject when it already has one') : invariant(false) : void 0;\n  var placeholderSize = getDisplacedBy(droppable.axis, draggable.displaceBy).point;\n  var requiredGrowth = getRequiredGrowthForPlaceholder(droppable, placeholderSize, draggables);\n  var added = {\n    placeholderSize: placeholderSize,\n    increasedBy: requiredGrowth,\n    oldFrameMaxScroll: droppable.frame ? droppable.frame.scroll.max : null\n  };\n\n  if (!frame) {\n    var _subject = getSubject({\n      page: droppable.subject.page,\n      withPlaceholder: added,\n      axis: droppable.axis,\n      frame: droppable.frame\n    });\n\n    return _extends({}, droppable, {\n      subject: _subject\n    });\n  }\n\n  var maxScroll = requiredGrowth ? add(frame.scroll.max, requiredGrowth) : frame.scroll.max;\n  var newFrame = withMaxScroll(frame, maxScroll);\n  var subject = getSubject({\n    page: droppable.subject.page,\n    withPlaceholder: added,\n    axis: droppable.axis,\n    frame: newFrame\n  });\n  return _extends({}, droppable, {\n    subject: subject,\n    frame: newFrame\n  });\n};\nvar removePlaceholder = function removePlaceholder(droppable) {\n  var added = droppable.subject.withPlaceholder;\n  !added ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot remove placeholder form subject when there was none') : invariant(false) : void 0;\n  var frame = droppable.frame;\n\n  if (!frame) {\n    var _subject2 = getSubject({\n      page: droppable.subject.page,\n      axis: droppable.axis,\n      frame: null,\n      withPlaceholder: null\n    });\n\n    return _extends({}, droppable, {\n      subject: _subject2\n    });\n  }\n\n  var oldMaxScroll = added.oldFrameMaxScroll;\n  !oldMaxScroll ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected droppable with frame to have old max frame scroll when removing placeholder') : invariant(false) : void 0;\n  var newFrame = withMaxScroll(frame, oldMaxScroll);\n  var subject = getSubject({\n    page: droppable.subject.page,\n    axis: droppable.axis,\n    frame: newFrame,\n    withPlaceholder: null\n  });\n  return _extends({}, droppable, {\n    subject: subject,\n    frame: newFrame\n  });\n};\n\nvar moveToNewDroppable = (function (_ref) {\n  var previousPageBorderBoxCenter = _ref.previousPageBorderBoxCenter,\n      moveRelativeTo = _ref.moveRelativeTo,\n      insideDestination = _ref.insideDestination,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      destination = _ref.destination,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n\n  if (!moveRelativeTo) {\n    if (insideDestination.length) {\n      return null;\n    }\n\n    var proposed = {\n      displaced: emptyGroups,\n      displacedBy: noDisplacedBy,\n      at: {\n        type: 'REORDER',\n        destination: {\n          droppableId: destination.descriptor.id,\n          index: 0\n        }\n      }\n    };\n    var proposedPageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n      impact: proposed,\n      draggable: draggable,\n      droppable: destination,\n      draggables: draggables,\n      afterCritical: afterCritical\n    });\n    var withPlaceholder = isHomeOf(draggable, destination) ? destination : addPlaceholder(destination, draggable, draggables);\n    var isVisibleInNewLocation = isTotallyVisibleInNewLocation({\n      draggable: draggable,\n      destination: withPlaceholder,\n      newPageBorderBoxCenter: proposedPageBorderBoxCenter,\n      viewport: viewport.frame,\n      withDroppableDisplacement: false,\n      onlyOnMainAxis: true\n    });\n    return isVisibleInNewLocation ? proposed : null;\n  }\n\n  var isGoingBeforeTarget = Boolean(previousPageBorderBoxCenter[destination.axis.line] <= moveRelativeTo.page.borderBox.center[destination.axis.line]);\n\n  var proposedIndex = function () {\n    var relativeTo = moveRelativeTo.descriptor.index;\n\n    if (moveRelativeTo.descriptor.id === draggable.descriptor.id) {\n      return relativeTo;\n    }\n\n    if (isGoingBeforeTarget) {\n      return relativeTo;\n    }\n\n    return relativeTo + 1;\n  }();\n\n  var displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  return calculateReorderImpact({\n    draggable: draggable,\n    insideDestination: insideDestination,\n    destination: destination,\n    viewport: viewport,\n    displacedBy: displacedBy,\n    last: emptyGroups,\n    index: proposedIndex\n  });\n});\n\nvar moveCrossAxis = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      previousPageBorderBoxCenter = _ref.previousPageBorderBoxCenter,\n      draggable = _ref.draggable,\n      isOver = _ref.isOver,\n      draggables = _ref.draggables,\n      droppables = _ref.droppables,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var destination = getBestCrossAxisDroppable({\n    isMovingForward: isMovingForward,\n    pageBorderBoxCenter: previousPageBorderBoxCenter,\n    source: isOver,\n    droppables: droppables,\n    viewport: viewport\n  });\n\n  if (!destination) {\n    return null;\n  }\n\n  var insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  var moveRelativeTo = getClosestDraggable({\n    pageBorderBoxCenter: previousPageBorderBoxCenter,\n    viewport: viewport,\n    destination: destination,\n    insideDestination: insideDestination,\n    afterCritical: afterCritical\n  });\n  var impact = moveToNewDroppable({\n    previousPageBorderBoxCenter: previousPageBorderBoxCenter,\n    destination: destination,\n    draggable: draggable,\n    draggables: draggables,\n    moveRelativeTo: moveRelativeTo,\n    insideDestination: insideDestination,\n    viewport: viewport,\n    afterCritical: afterCritical\n  });\n\n  if (!impact) {\n    return null;\n  }\n\n  var pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact: impact,\n    draggable: draggable,\n    droppable: destination,\n    draggables: draggables,\n    afterCritical: afterCritical\n  });\n  var clientSelection = getClientFromPageBorderBoxCenter({\n    pageBorderBoxCenter: pageBorderBoxCenter,\n    draggable: draggable,\n    viewport: viewport\n  });\n  return {\n    clientSelection: clientSelection,\n    impact: impact,\n    scrollJumpRequest: null\n  };\n});\n\nvar whatIsDraggedOver = (function (impact) {\n  var at = impact.at;\n\n  if (!at) {\n    return null;\n  }\n\n  if (at.type === 'REORDER') {\n    return at.destination.droppableId;\n  }\n\n  return at.combine.droppableId;\n});\n\nvar getDroppableOver = function getDroppableOver(impact, droppables) {\n  var id = whatIsDraggedOver(impact);\n  return id ? droppables[id] : null;\n};\n\nvar moveInDirection = (function (_ref) {\n  var state = _ref.state,\n      type = _ref.type;\n  var isActuallyOver = getDroppableOver(state.impact, state.dimensions.droppables);\n  var isMainAxisMovementAllowed = Boolean(isActuallyOver);\n  var home = state.dimensions.droppables[state.critical.droppable.id];\n  var isOver = isActuallyOver || home;\n  var direction = isOver.axis.direction;\n  var isMovingOnMainAxis = direction === 'vertical' && (type === 'MOVE_UP' || type === 'MOVE_DOWN') || direction === 'horizontal' && (type === 'MOVE_LEFT' || type === 'MOVE_RIGHT');\n\n  if (isMovingOnMainAxis && !isMainAxisMovementAllowed) {\n    return null;\n  }\n\n  var isMovingForward = type === 'MOVE_DOWN' || type === 'MOVE_RIGHT';\n  var draggable = state.dimensions.draggables[state.critical.draggable.id];\n  var previousPageBorderBoxCenter = state.current.page.borderBoxCenter;\n  var _state$dimensions = state.dimensions,\n      draggables = _state$dimensions.draggables,\n      droppables = _state$dimensions.droppables;\n  return isMovingOnMainAxis ? moveToNextPlace({\n    isMovingForward: isMovingForward,\n    previousPageBorderBoxCenter: previousPageBorderBoxCenter,\n    draggable: draggable,\n    destination: isOver,\n    draggables: draggables,\n    viewport: state.viewport,\n    previousClientSelection: state.current.client.selection,\n    previousImpact: state.impact,\n    afterCritical: state.afterCritical\n  }) : moveCrossAxis({\n    isMovingForward: isMovingForward,\n    previousPageBorderBoxCenter: previousPageBorderBoxCenter,\n    draggable: draggable,\n    isOver: isOver,\n    draggables: draggables,\n    droppables: droppables,\n    viewport: state.viewport,\n    afterCritical: state.afterCritical\n  });\n});\n\nfunction isMovementAllowed(state) {\n  return state.phase === 'DRAGGING' || state.phase === 'COLLECTING';\n}\n\nfunction isPositionInFrame(frame) {\n  var isWithinVertical = isWithin(frame.top, frame.bottom);\n  var isWithinHorizontal = isWithin(frame.left, frame.right);\n  return function run(point) {\n    return isWithinVertical(point.y) && isWithinHorizontal(point.x);\n  };\n}\n\nfunction getHasOverlap(first, second) {\n  return first.left < second.right && first.right > second.left && first.top < second.bottom && first.bottom > second.top;\n}\n\nfunction getFurthestAway(_ref) {\n  var pageBorderBox = _ref.pageBorderBox,\n      draggable = _ref.draggable,\n      candidates = _ref.candidates;\n  var startCenter = draggable.page.borderBox.center;\n  var sorted = candidates.map(function (candidate) {\n    var axis = candidate.axis;\n    var target = patch(candidate.axis.line, pageBorderBox.center[axis.line], candidate.page.borderBox.center[axis.crossAxisLine]);\n    return {\n      id: candidate.descriptor.id,\n      distance: distance(startCenter, target)\n    };\n  }).sort(function (a, b) {\n    return b.distance - a.distance;\n  });\n  return sorted[0] ? sorted[0].id : null;\n}\n\nfunction getDroppableOver$1(_ref2) {\n  var pageBorderBox = _ref2.pageBorderBox,\n      draggable = _ref2.draggable,\n      droppables = _ref2.droppables;\n  var candidates = toDroppableList(droppables).filter(function (item) {\n    if (!item.isEnabled) {\n      return false;\n    }\n\n    var active = item.subject.active;\n\n    if (!active) {\n      return false;\n    }\n\n    if (!getHasOverlap(pageBorderBox, active)) {\n      return false;\n    }\n\n    if (isPositionInFrame(active)(pageBorderBox.center)) {\n      return true;\n    }\n\n    var axis = item.axis;\n    var childCenter = active.center[axis.crossAxisLine];\n    var crossAxisStart = pageBorderBox[axis.crossAxisStart];\n    var crossAxisEnd = pageBorderBox[axis.crossAxisEnd];\n    var isContained = isWithin(active[axis.crossAxisStart], active[axis.crossAxisEnd]);\n    var isStartContained = isContained(crossAxisStart);\n    var isEndContained = isContained(crossAxisEnd);\n\n    if (!isStartContained && !isEndContained) {\n      return true;\n    }\n\n    if (isStartContained) {\n      return crossAxisStart < childCenter;\n    }\n\n    return crossAxisEnd > childCenter;\n  });\n\n  if (!candidates.length) {\n    return null;\n  }\n\n  if (candidates.length === 1) {\n    return candidates[0].descriptor.id;\n  }\n\n  return getFurthestAway({\n    pageBorderBox: pageBorderBox,\n    draggable: draggable,\n    candidates: candidates\n  });\n}\n\nvar offsetRectByPosition = function offsetRectByPosition(rect, point) {\n  return getRect(offsetByPosition(rect, point));\n};\n\nvar withDroppableScroll = (function (droppable, area) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return area;\n  }\n\n  return offsetRectByPosition(area, frame.scroll.diff.value);\n});\n\nfunction getIsDisplaced(_ref) {\n  var displaced = _ref.displaced,\n      id = _ref.id;\n  return Boolean(displaced.visible[id] || displaced.invisible[id]);\n}\n\nfunction atIndex(_ref) {\n  var draggable = _ref.draggable,\n      closest = _ref.closest,\n      inHomeList = _ref.inHomeList;\n\n  if (!closest) {\n    return null;\n  }\n\n  if (!inHomeList) {\n    return closest.descriptor.index;\n  }\n\n  if (closest.descriptor.index > draggable.descriptor.index) {\n    return closest.descriptor.index - 1;\n  }\n\n  return closest.descriptor.index;\n}\n\nvar getReorderImpact = (function (_ref2) {\n  var targetRect = _ref2.pageBorderBoxWithDroppableScroll,\n      draggable = _ref2.draggable,\n      destination = _ref2.destination,\n      insideDestination = _ref2.insideDestination,\n      last = _ref2.last,\n      viewport = _ref2.viewport,\n      afterCritical = _ref2.afterCritical;\n  var axis = destination.axis;\n  var displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  var displacement = displacedBy.value;\n  var targetStart = targetRect[axis.start];\n  var targetEnd = targetRect[axis.end];\n  var withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  var closest = find(withoutDragging, function (child) {\n    var id = child.descriptor.id;\n    var childCenter = child.page.borderBox.center[axis.line];\n    var didStartAfterCritical$1 = didStartAfterCritical(id, afterCritical);\n    var isDisplaced = getIsDisplaced({\n      displaced: last,\n      id: id\n    });\n\n    if (didStartAfterCritical$1) {\n      if (isDisplaced) {\n        return targetEnd <= childCenter;\n      }\n\n      return targetStart < childCenter - displacement;\n    }\n\n    if (isDisplaced) {\n      return targetEnd <= childCenter + displacement;\n    }\n\n    return targetStart < childCenter;\n  });\n  var newIndex = atIndex({\n    draggable: draggable,\n    closest: closest,\n    inHomeList: isHomeOf(draggable, destination)\n  });\n  return calculateReorderImpact({\n    draggable: draggable,\n    insideDestination: insideDestination,\n    destination: destination,\n    viewport: viewport,\n    last: last,\n    displacedBy: displacedBy,\n    index: newIndex\n  });\n});\n\nvar combineThresholdDivisor = 4;\nvar getCombineImpact = (function (_ref) {\n  var draggable = _ref.draggable,\n      targetRect = _ref.pageBorderBoxWithDroppableScroll,\n      previousImpact = _ref.previousImpact,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      afterCritical = _ref.afterCritical;\n\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n\n  var axis = destination.axis;\n  var displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  var displacement = displacedBy.value;\n  var targetStart = targetRect[axis.start];\n  var targetEnd = targetRect[axis.end];\n  var withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  var combineWith = find(withoutDragging, function (child) {\n    var id = child.descriptor.id;\n    var childRect = child.page.borderBox;\n    var childSize = childRect[axis.size];\n    var threshold = childSize / combineThresholdDivisor;\n    var didStartAfterCritical$1 = didStartAfterCritical(id, afterCritical);\n    var isDisplaced = getIsDisplaced({\n      displaced: previousImpact.displaced,\n      id: id\n    });\n\n    if (didStartAfterCritical$1) {\n      if (isDisplaced) {\n        return targetEnd > childRect[axis.start] + threshold && targetEnd < childRect[axis.end] - threshold;\n      }\n\n      return targetStart > childRect[axis.start] - displacement + threshold && targetStart < childRect[axis.end] - displacement - threshold;\n    }\n\n    if (isDisplaced) {\n      return targetEnd > childRect[axis.start] + displacement + threshold && targetEnd < childRect[axis.end] + displacement - threshold;\n    }\n\n    return targetStart > childRect[axis.start] + threshold && targetStart < childRect[axis.end] - threshold;\n  });\n\n  if (!combineWith) {\n    return null;\n  }\n\n  var impact = {\n    displacedBy: displacedBy,\n    displaced: previousImpact.displaced,\n    at: {\n      type: 'COMBINE',\n      combine: {\n        draggableId: combineWith.descriptor.id,\n        droppableId: destination.descriptor.id\n      }\n    }\n  };\n  return impact;\n});\n\nvar getDragImpact = (function (_ref) {\n  var pageOffset = _ref.pageOffset,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      droppables = _ref.droppables,\n      previousImpact = _ref.previousImpact,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var pageBorderBox = offsetRectByPosition(draggable.page.borderBox, pageOffset);\n  var destinationId = getDroppableOver$1({\n    pageBorderBox: pageBorderBox,\n    draggable: draggable,\n    droppables: droppables\n  });\n\n  if (!destinationId) {\n    return noImpact;\n  }\n\n  var destination = droppables[destinationId];\n  var insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  var pageBorderBoxWithDroppableScroll = withDroppableScroll(destination, pageBorderBox);\n  return getCombineImpact({\n    pageBorderBoxWithDroppableScroll: pageBorderBoxWithDroppableScroll,\n    draggable: draggable,\n    previousImpact: previousImpact,\n    destination: destination,\n    insideDestination: insideDestination,\n    afterCritical: afterCritical\n  }) || getReorderImpact({\n    pageBorderBoxWithDroppableScroll: pageBorderBoxWithDroppableScroll,\n    draggable: draggable,\n    destination: destination,\n    insideDestination: insideDestination,\n    last: previousImpact.displaced,\n    viewport: viewport,\n    afterCritical: afterCritical\n  });\n});\n\nvar patchDroppableMap = (function (droppables, updated) {\n  var _extends2;\n\n  return _extends({}, droppables, (_extends2 = {}, _extends2[updated.descriptor.id] = updated, _extends2));\n});\n\nvar clearUnusedPlaceholder = function clearUnusedPlaceholder(_ref) {\n  var previousImpact = _ref.previousImpact,\n      impact = _ref.impact,\n      droppables = _ref.droppables;\n  var last = whatIsDraggedOver(previousImpact);\n  var now = whatIsDraggedOver(impact);\n\n  if (!last) {\n    return droppables;\n  }\n\n  if (last === now) {\n    return droppables;\n  }\n\n  var lastDroppable = droppables[last];\n\n  if (!lastDroppable.subject.withPlaceholder) {\n    return droppables;\n  }\n\n  var updated = removePlaceholder(lastDroppable);\n  return patchDroppableMap(droppables, updated);\n};\n\nvar recomputePlaceholders = (function (_ref2) {\n  var draggable = _ref2.draggable,\n      draggables = _ref2.draggables,\n      droppables = _ref2.droppables,\n      previousImpact = _ref2.previousImpact,\n      impact = _ref2.impact;\n  var cleaned = clearUnusedPlaceholder({\n    previousImpact: previousImpact,\n    impact: impact,\n    droppables: droppables\n  });\n  var isOver = whatIsDraggedOver(impact);\n\n  if (!isOver) {\n    return cleaned;\n  }\n\n  var droppable = droppables[isOver];\n\n  if (isHomeOf(draggable, droppable)) {\n    return cleaned;\n  }\n\n  if (droppable.subject.withPlaceholder) {\n    return cleaned;\n  }\n\n  var patched = addPlaceholder(droppable, draggable, draggables);\n  return patchDroppableMap(cleaned, patched);\n});\n\nvar update = (function (_ref) {\n  var state = _ref.state,\n      forcedClientSelection = _ref.clientSelection,\n      forcedDimensions = _ref.dimensions,\n      forcedViewport = _ref.viewport,\n      forcedImpact = _ref.impact,\n      scrollJumpRequest = _ref.scrollJumpRequest;\n  var viewport = forcedViewport || state.viewport;\n  var dimensions = forcedDimensions || state.dimensions;\n  var clientSelection = forcedClientSelection || state.current.client.selection;\n  var offset = subtract(clientSelection, state.initial.client.selection);\n  var client = {\n    offset: offset,\n    selection: clientSelection,\n    borderBoxCenter: add(state.initial.client.borderBoxCenter, offset)\n  };\n  var page = {\n    selection: add(client.selection, viewport.scroll.current),\n    borderBoxCenter: add(client.borderBoxCenter, viewport.scroll.current),\n    offset: add(client.offset, viewport.scroll.diff.value)\n  };\n  var current = {\n    client: client,\n    page: page\n  };\n\n  if (state.phase === 'COLLECTING') {\n    return _extends({\n      phase: 'COLLECTING'\n    }, state, {\n      dimensions: dimensions,\n      viewport: viewport,\n      current: current\n    });\n  }\n\n  var draggable = dimensions.draggables[state.critical.draggable.id];\n  var newImpact = forcedImpact || getDragImpact({\n    pageOffset: page.offset,\n    draggable: draggable,\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables,\n    previousImpact: state.impact,\n    viewport: viewport,\n    afterCritical: state.afterCritical\n  });\n  var withUpdatedPlaceholders = recomputePlaceholders({\n    draggable: draggable,\n    impact: newImpact,\n    previousImpact: state.impact,\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables\n  });\n\n  var result = _extends({}, state, {\n    current: current,\n    dimensions: {\n      draggables: dimensions.draggables,\n      droppables: withUpdatedPlaceholders\n    },\n    impact: newImpact,\n    viewport: viewport,\n    scrollJumpRequest: scrollJumpRequest || null,\n    forceShouldAnimate: scrollJumpRequest ? false : null\n  });\n\n  return result;\n});\n\nfunction getDraggables$1(ids, draggables) {\n  return ids.map(function (id) {\n    return draggables[id];\n  });\n}\n\nvar recompute = (function (_ref) {\n  var impact = _ref.impact,\n      viewport = _ref.viewport,\n      draggables = _ref.draggables,\n      destination = _ref.destination,\n      forceShouldAnimate = _ref.forceShouldAnimate;\n  var last = impact.displaced;\n  var afterDragging = getDraggables$1(last.all, draggables);\n  var displaced = getDisplacementGroups({\n    afterDragging: afterDragging,\n    destination: destination,\n    displacedBy: impact.displacedBy,\n    viewport: viewport.frame,\n    forceShouldAnimate: forceShouldAnimate,\n    last: last\n  });\n  return _extends({}, impact, {\n    displaced: displaced\n  });\n});\n\nvar getClientBorderBoxCenter = (function (_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      droppable = _ref.droppable,\n      draggables = _ref.draggables,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact: impact,\n    draggable: draggable,\n    draggables: draggables,\n    droppable: droppable,\n    afterCritical: afterCritical\n  });\n  return getClientFromPageBorderBoxCenter({\n    pageBorderBoxCenter: pageBorderBoxCenter,\n    draggable: draggable,\n    viewport: viewport\n  });\n});\n\nvar refreshSnap = (function (_ref) {\n  var state = _ref.state,\n      forcedDimensions = _ref.dimensions,\n      forcedViewport = _ref.viewport;\n  !(state.movementMode === 'SNAP') ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n  var needsVisibilityCheck = state.impact;\n  var viewport = forcedViewport || state.viewport;\n  var dimensions = forcedDimensions || state.dimensions;\n  var draggables = dimensions.draggables,\n      droppables = dimensions.droppables;\n  var draggable = draggables[state.critical.draggable.id];\n  var isOver = whatIsDraggedOver(needsVisibilityCheck);\n  !isOver ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Must be over a destination in SNAP movement mode') : invariant(false) : void 0;\n  var destination = droppables[isOver];\n  var impact = recompute({\n    impact: needsVisibilityCheck,\n    viewport: viewport,\n    destination: destination,\n    draggables: draggables\n  });\n  var clientSelection = getClientBorderBoxCenter({\n    impact: impact,\n    draggable: draggable,\n    droppable: destination,\n    draggables: draggables,\n    viewport: viewport,\n    afterCritical: state.afterCritical\n  });\n  return update({\n    impact: impact,\n    clientSelection: clientSelection,\n    state: state,\n    dimensions: dimensions,\n    viewport: viewport\n  });\n});\n\nvar getHomeLocation = (function (descriptor) {\n  return {\n    index: descriptor.index,\n    droppableId: descriptor.droppableId\n  };\n});\n\nvar getLiftEffect = (function (_ref) {\n  var draggable = _ref.draggable,\n      home = _ref.home,\n      draggables = _ref.draggables,\n      viewport = _ref.viewport;\n  var displacedBy = getDisplacedBy(home.axis, draggable.displaceBy);\n  var insideHome = getDraggablesInsideDroppable(home.descriptor.id, draggables);\n  var rawIndex = insideHome.indexOf(draggable);\n  !(rawIndex !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected draggable to be inside home list') : invariant(false) : void 0;\n  var afterDragging = insideHome.slice(rawIndex + 1);\n  var effected = afterDragging.reduce(function (previous, item) {\n    previous[item.descriptor.id] = true;\n    return previous;\n  }, {});\n  var afterCritical = {\n    inVirtualList: home.descriptor.mode === 'virtual',\n    displacedBy: displacedBy,\n    effected: effected\n  };\n  var displaced = getDisplacementGroups({\n    afterDragging: afterDragging,\n    destination: home,\n    displacedBy: displacedBy,\n    last: null,\n    viewport: viewport.frame,\n    forceShouldAnimate: false\n  });\n  var impact = {\n    displaced: displaced,\n    displacedBy: displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: getHomeLocation(draggable.descriptor)\n    }\n  };\n  return {\n    impact: impact,\n    afterCritical: afterCritical\n  };\n});\n\nvar patchDimensionMap = (function (dimensions, updated) {\n  return {\n    draggables: dimensions.draggables,\n    droppables: patchDroppableMap(dimensions.droppables, updated)\n  };\n});\n\nvar start = function start(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    {\n      return;\n    }\n  }\n};\nvar finish = function finish(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    {\n      return;\n    }\n  }\n};\n\nvar offsetDraggable = (function (_ref) {\n  var draggable = _ref.draggable,\n      offset$1 = _ref.offset,\n      initialWindowScroll = _ref.initialWindowScroll;\n  var client = offset(draggable.client, offset$1);\n  var page = withScroll(client, initialWindowScroll);\n\n  var moved = _extends({}, draggable, {\n    placeholder: _extends({}, draggable.placeholder, {\n      client: client\n    }),\n    client: client,\n    page: page\n  });\n\n  return moved;\n});\n\nvar getFrame = (function (droppable) {\n  var frame = droppable.frame;\n  !frame ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected Droppable to have a frame') : invariant(false) : void 0;\n  return frame;\n});\n\nvar adjustAdditionsForScrollChanges = (function (_ref) {\n  var additions = _ref.additions,\n      updatedDroppables = _ref.updatedDroppables,\n      viewport = _ref.viewport;\n  var windowScrollChange = viewport.scroll.diff.value;\n  return additions.map(function (draggable) {\n    var droppableId = draggable.descriptor.droppableId;\n    var modified = updatedDroppables[droppableId];\n    var frame = getFrame(modified);\n    var droppableScrollChange = frame.scroll.diff.value;\n    var totalChange = add(windowScrollChange, droppableScrollChange);\n    var moved = offsetDraggable({\n      draggable: draggable,\n      offset: totalChange,\n      initialWindowScroll: viewport.scroll.initial\n    });\n    return moved;\n  });\n});\n\nvar publishWhileDraggingInVirtual = (function (_ref) {\n  var state = _ref.state,\n      published = _ref.published;\n  start();\n  var withScrollChange = published.modified.map(function (update) {\n    var existing = state.dimensions.droppables[update.droppableId];\n    var scrolled = scrollDroppable(existing, update.scroll);\n    return scrolled;\n  });\n\n  var droppables = _extends({}, state.dimensions.droppables, {}, toDroppableMap(withScrollChange));\n\n  var updatedAdditions = toDraggableMap(adjustAdditionsForScrollChanges({\n    additions: published.additions,\n    updatedDroppables: droppables,\n    viewport: state.viewport\n  }));\n\n  var draggables = _extends({}, state.dimensions.draggables, {}, updatedAdditions);\n\n  published.removals.forEach(function (id) {\n    delete draggables[id];\n  });\n  var dimensions = {\n    droppables: droppables,\n    draggables: draggables\n  };\n  var wasOverId = whatIsDraggedOver(state.impact);\n  var wasOver = wasOverId ? dimensions.droppables[wasOverId] : null;\n  var draggable = dimensions.draggables[state.critical.draggable.id];\n  var home = dimensions.droppables[state.critical.droppable.id];\n\n  var _getLiftEffect = getLiftEffect({\n    draggable: draggable,\n    home: home,\n    draggables: draggables,\n    viewport: state.viewport\n  }),\n      onLiftImpact = _getLiftEffect.impact,\n      afterCritical = _getLiftEffect.afterCritical;\n\n  var previousImpact = wasOver && wasOver.isCombineEnabled ? state.impact : onLiftImpact;\n  var impact = getDragImpact({\n    pageOffset: state.current.page.offset,\n    draggable: dimensions.draggables[state.critical.draggable.id],\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables,\n    previousImpact: previousImpact,\n    viewport: state.viewport,\n    afterCritical: afterCritical\n  });\n  finish();\n\n  var draggingState = _extends({\n    phase: 'DRAGGING'\n  }, state, {\n    phase: 'DRAGGING',\n    impact: impact,\n    onLiftImpact: onLiftImpact,\n    dimensions: dimensions,\n    afterCritical: afterCritical,\n    forceShouldAnimate: false\n  });\n\n  if (state.phase === 'COLLECTING') {\n    return draggingState;\n  }\n\n  var dropPending = _extends({\n    phase: 'DROP_PENDING'\n  }, draggingState, {\n    phase: 'DROP_PENDING',\n    reason: state.reason,\n    isWaiting: false\n  });\n\n  return dropPending;\n});\n\nvar isSnapping = function isSnapping(state) {\n  return state.movementMode === 'SNAP';\n};\n\nvar postDroppableChange = function postDroppableChange(state, updated, isEnabledChanging) {\n  var dimensions = patchDimensionMap(state.dimensions, updated);\n\n  if (!isSnapping(state) || isEnabledChanging) {\n    return update({\n      state: state,\n      dimensions: dimensions\n    });\n  }\n\n  return refreshSnap({\n    state: state,\n    dimensions: dimensions\n  });\n};\n\nfunction removeScrollJumpRequest(state) {\n  if (state.isDragging && state.movementMode === 'SNAP') {\n    return _extends({\n      phase: 'DRAGGING'\n    }, state, {\n      scrollJumpRequest: null\n    });\n  }\n\n  return state;\n}\n\nvar idle = {\n  phase: 'IDLE',\n  completed: null,\n  shouldFlush: false\n};\nvar reducer = (function (state, action) {\n  if (state === void 0) {\n    state = idle;\n  }\n\n  if (action.type === 'FLUSH') {\n    return _extends({}, idle, {\n      shouldFlush: true\n    });\n  }\n\n  if (action.type === 'INITIAL_PUBLISH') {\n    !(state.phase === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'INITIAL_PUBLISH must come after a IDLE phase') : invariant(false) : void 0;\n    var _action$payload = action.payload,\n        critical = _action$payload.critical,\n        clientSelection = _action$payload.clientSelection,\n        viewport = _action$payload.viewport,\n        dimensions = _action$payload.dimensions,\n        movementMode = _action$payload.movementMode;\n    var draggable = dimensions.draggables[critical.draggable.id];\n    var home = dimensions.droppables[critical.droppable.id];\n    var client = {\n      selection: clientSelection,\n      borderBoxCenter: draggable.client.borderBox.center,\n      offset: origin\n    };\n    var initial = {\n      client: client,\n      page: {\n        selection: add(client.selection, viewport.scroll.initial),\n        borderBoxCenter: add(client.selection, viewport.scroll.initial),\n        offset: add(client.selection, viewport.scroll.diff.value)\n      }\n    };\n    var isWindowScrollAllowed = toDroppableList(dimensions.droppables).every(function (item) {\n      return !item.isFixedOnPage;\n    });\n\n    var _getLiftEffect = getLiftEffect({\n      draggable: draggable,\n      home: home,\n      draggables: dimensions.draggables,\n      viewport: viewport\n    }),\n        impact = _getLiftEffect.impact,\n        afterCritical = _getLiftEffect.afterCritical;\n\n    var result = {\n      phase: 'DRAGGING',\n      isDragging: true,\n      critical: critical,\n      movementMode: movementMode,\n      dimensions: dimensions,\n      initial: initial,\n      current: initial,\n      isWindowScrollAllowed: isWindowScrollAllowed,\n      impact: impact,\n      afterCritical: afterCritical,\n      onLiftImpact: impact,\n      viewport: viewport,\n      scrollJumpRequest: null,\n      forceShouldAnimate: null\n    };\n    return result;\n  }\n\n  if (action.type === 'COLLECTION_STARTING') {\n    if (state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Collection cannot start from phase \" + state.phase) : invariant(false) : void 0;\n\n    var _result = _extends({\n      phase: 'COLLECTING'\n    }, state, {\n      phase: 'COLLECTING'\n    });\n\n    return _result;\n  }\n\n  if (action.type === 'PUBLISH_WHILE_DRAGGING') {\n    !(state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Unexpected \" + action.type + \" received in phase \" + state.phase) : invariant(false) : void 0;\n    return publishWhileDraggingInVirtual({\n      state: state,\n      published: action.payload\n    });\n  }\n\n  if (action.type === 'MOVE') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, action.type + \" not permitted in phase \" + state.phase) : invariant(false) : void 0;\n    var _clientSelection = action.payload.client;\n\n    if (isEqual(_clientSelection, state.current.client.selection)) {\n      return state;\n    }\n\n    return update({\n      state: state,\n      clientSelection: _clientSelection,\n      impact: isSnapping(state) ? state.impact : null\n    });\n  }\n\n  if (action.type === 'UPDATE_DROPPABLE_SCROLL') {\n    if (state.phase === 'DROP_PENDING') {\n      return removeScrollJumpRequest(state);\n    }\n\n    if (state.phase === 'COLLECTING') {\n      return removeScrollJumpRequest(state);\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, action.type + \" not permitted in phase \" + state.phase) : invariant(false) : void 0;\n    var _action$payload2 = action.payload,\n        id = _action$payload2.id,\n        newScroll = _action$payload2.newScroll;\n    var target = state.dimensions.droppables[id];\n\n    if (!target) {\n      return state;\n    }\n\n    var scrolled = scrollDroppable(target, newScroll);\n    return postDroppableChange(state, scrolled, false);\n  }\n\n  if (action.type === 'UPDATE_DROPPABLE_IS_ENABLED') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Attempting to move in an unsupported phase \" + state.phase) : invariant(false) : void 0;\n    var _action$payload3 = action.payload,\n        _id = _action$payload3.id,\n        isEnabled = _action$payload3.isEnabled;\n    var _target = state.dimensions.droppables[_id];\n    !_target ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find Droppable[id: \" + _id + \"] to toggle its enabled state\") : invariant(false) : void 0;\n    !(_target.isEnabled !== isEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Trying to set droppable isEnabled to \" + String(isEnabled) + \"\\n      but it is already \" + String(_target.isEnabled)) : invariant(false) : void 0;\n\n    var updated = _extends({}, _target, {\n      isEnabled: isEnabled\n    });\n\n    return postDroppableChange(state, updated, true);\n  }\n\n  if (action.type === 'UPDATE_DROPPABLE_IS_COMBINE_ENABLED') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Attempting to move in an unsupported phase \" + state.phase) : invariant(false) : void 0;\n    var _action$payload4 = action.payload,\n        _id2 = _action$payload4.id,\n        isCombineEnabled = _action$payload4.isCombineEnabled;\n    var _target2 = state.dimensions.droppables[_id2];\n    !_target2 ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find Droppable[id: \" + _id2 + \"] to toggle its isCombineEnabled state\") : invariant(false) : void 0;\n    !(_target2.isCombineEnabled !== isCombineEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Trying to set droppable isCombineEnabled to \" + String(isCombineEnabled) + \"\\n      but it is already \" + String(_target2.isCombineEnabled)) : invariant(false) : void 0;\n\n    var _updated = _extends({}, _target2, {\n      isCombineEnabled: isCombineEnabled\n    });\n\n    return postDroppableChange(state, _updated, true);\n  }\n\n  if (action.type === 'MOVE_BY_WINDOW_SCROLL') {\n    if (state.phase === 'DROP_PENDING' || state.phase === 'DROP_ANIMATING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot move by window in phase \" + state.phase) : invariant(false) : void 0;\n    !state.isWindowScrollAllowed ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Window scrolling is currently not supported for fixed lists') : invariant(false) : void 0;\n    var _newScroll = action.payload.newScroll;\n\n    if (isEqual(state.viewport.scroll.current, _newScroll)) {\n      return removeScrollJumpRequest(state);\n    }\n\n    var _viewport = scrollViewport(state.viewport, _newScroll);\n\n    if (isSnapping(state)) {\n      return refreshSnap({\n        state: state,\n        viewport: _viewport\n      });\n    }\n\n    return update({\n      state: state,\n      viewport: _viewport\n    });\n  }\n\n  if (action.type === 'UPDATE_VIEWPORT_MAX_SCROLL') {\n    if (!isMovementAllowed(state)) {\n      return state;\n    }\n\n    var maxScroll = action.payload.maxScroll;\n\n    if (isEqual(maxScroll, state.viewport.scroll.max)) {\n      return state;\n    }\n\n    var withMaxScroll = _extends({}, state.viewport, {\n      scroll: _extends({}, state.viewport.scroll, {\n        max: maxScroll\n      })\n    });\n\n    return _extends({\n      phase: 'DRAGGING'\n    }, state, {\n      viewport: withMaxScroll\n    });\n  }\n\n  if (action.type === 'MOVE_UP' || action.type === 'MOVE_DOWN' || action.type === 'MOVE_LEFT' || action.type === 'MOVE_RIGHT') {\n    if (state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, action.type + \" received while not in DRAGGING phase\") : invariant(false) : void 0;\n\n    var _result2 = moveInDirection({\n      state: state,\n      type: action.type\n    });\n\n    if (!_result2) {\n      return state;\n    }\n\n    return update({\n      state: state,\n      impact: _result2.impact,\n      clientSelection: _result2.clientSelection,\n      scrollJumpRequest: _result2.scrollJumpRequest\n    });\n  }\n\n  if (action.type === 'DROP_PENDING') {\n    var reason = action.payload.reason;\n    !(state.phase === 'COLLECTING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only move into the DROP_PENDING phase from the COLLECTING phase') : invariant(false) : void 0;\n\n    var newState = _extends({\n      phase: 'DROP_PENDING'\n    }, state, {\n      phase: 'DROP_PENDING',\n      isWaiting: true,\n      reason: reason\n    });\n\n    return newState;\n  }\n\n  if (action.type === 'DROP_ANIMATE') {\n    var _action$payload5 = action.payload,\n        completed = _action$payload5.completed,\n        dropDuration = _action$payload5.dropDuration,\n        newHomeClientOffset = _action$payload5.newHomeClientOffset;\n    !(state.phase === 'DRAGGING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot animate drop from phase \" + state.phase) : invariant(false) : void 0;\n    var _result3 = {\n      phase: 'DROP_ANIMATING',\n      completed: completed,\n      dropDuration: dropDuration,\n      newHomeClientOffset: newHomeClientOffset,\n      dimensions: state.dimensions\n    };\n    return _result3;\n  }\n\n  if (action.type === 'DROP_COMPLETE') {\n    var _completed = action.payload.completed;\n    return {\n      phase: 'IDLE',\n      completed: _completed,\n      shouldFlush: false\n    };\n  }\n\n  return state;\n});\n\nvar beforeInitialCapture = function beforeInitialCapture(args) {\n  return {\n    type: 'BEFORE_INITIAL_CAPTURE',\n    payload: args\n  };\n};\nvar lift = function lift(args) {\n  return {\n    type: 'LIFT',\n    payload: args\n  };\n};\nvar initialPublish = function initialPublish(args) {\n  return {\n    type: 'INITIAL_PUBLISH',\n    payload: args\n  };\n};\nvar publishWhileDragging = function publishWhileDragging(args) {\n  return {\n    type: 'PUBLISH_WHILE_DRAGGING',\n    payload: args\n  };\n};\nvar collectionStarting = function collectionStarting() {\n  return {\n    type: 'COLLECTION_STARTING',\n    payload: null\n  };\n};\nvar updateDroppableScroll = function updateDroppableScroll(args) {\n  return {\n    type: 'UPDATE_DROPPABLE_SCROLL',\n    payload: args\n  };\n};\nvar updateDroppableIsEnabled = function updateDroppableIsEnabled(args) {\n  return {\n    type: 'UPDATE_DROPPABLE_IS_ENABLED',\n    payload: args\n  };\n};\nvar updateDroppableIsCombineEnabled = function updateDroppableIsCombineEnabled(args) {\n  return {\n    type: 'UPDATE_DROPPABLE_IS_COMBINE_ENABLED',\n    payload: args\n  };\n};\nvar move = function move(args) {\n  return {\n    type: 'MOVE',\n    payload: args\n  };\n};\nvar moveByWindowScroll = function moveByWindowScroll(args) {\n  return {\n    type: 'MOVE_BY_WINDOW_SCROLL',\n    payload: args\n  };\n};\nvar updateViewportMaxScroll = function updateViewportMaxScroll(args) {\n  return {\n    type: 'UPDATE_VIEWPORT_MAX_SCROLL',\n    payload: args\n  };\n};\nvar moveUp = function moveUp() {\n  return {\n    type: 'MOVE_UP',\n    payload: null\n  };\n};\nvar moveDown = function moveDown() {\n  return {\n    type: 'MOVE_DOWN',\n    payload: null\n  };\n};\nvar moveRight = function moveRight() {\n  return {\n    type: 'MOVE_RIGHT',\n    payload: null\n  };\n};\nvar moveLeft = function moveLeft() {\n  return {\n    type: 'MOVE_LEFT',\n    payload: null\n  };\n};\nvar flush = function flush() {\n  return {\n    type: 'FLUSH',\n    payload: null\n  };\n};\nvar animateDrop = function animateDrop(args) {\n  return {\n    type: 'DROP_ANIMATE',\n    payload: args\n  };\n};\nvar completeDrop = function completeDrop(args) {\n  return {\n    type: 'DROP_COMPLETE',\n    payload: args\n  };\n};\nvar drop = function drop(args) {\n  return {\n    type: 'DROP',\n    payload: args\n  };\n};\nvar dropPending = function dropPending(args) {\n  return {\n    type: 'DROP_PENDING',\n    payload: args\n  };\n};\nvar dropAnimationFinished = function dropAnimationFinished() {\n  return {\n    type: 'DROP_ANIMATION_FINISHED',\n    payload: null\n  };\n};\n\nfunction checkIndexes(insideDestination) {\n  if (insideDestination.length <= 1) {\n    return;\n  }\n\n  var indexes = insideDestination.map(function (d) {\n    return d.descriptor.index;\n  });\n  var errors = {};\n\n  for (var i = 1; i < indexes.length; i++) {\n    var current = indexes[i];\n    var previous = indexes[i - 1];\n\n    if (current !== previous + 1) {\n      errors[current] = true;\n    }\n  }\n\n  if (!Object.keys(errors).length) {\n    return;\n  }\n\n  var formatted = indexes.map(function (index) {\n    var hasError = Boolean(errors[index]);\n    return hasError ? \"[\\uD83D\\uDD25\" + index + \"]\" : \"\" + index;\n  }).join(', ');\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    Detected non-consecutive <Draggable /> indexes.\\n\\n    (This can cause unexpected bugs)\\n\\n    \" + formatted + \"\\n  \") : void 0;\n}\n\nfunction validateDimensions(critical, dimensions) {\n  if (process.env.NODE_ENV !== 'production') {\n    var insideDestination = getDraggablesInsideDroppable(critical.droppable.id, dimensions.draggables);\n    checkIndexes(insideDestination);\n  }\n}\n\nvar lift$1 = (function (marshal) {\n  return function (_ref) {\n    var getState = _ref.getState,\n        dispatch = _ref.dispatch;\n    return function (next) {\n      return function (action) {\n        if (action.type !== 'LIFT') {\n          next(action);\n          return;\n        }\n\n        var _action$payload = action.payload,\n            id = _action$payload.id,\n            clientSelection = _action$payload.clientSelection,\n            movementMode = _action$payload.movementMode;\n        var initial = getState();\n\n        if (initial.phase === 'DROP_ANIMATING') {\n          dispatch(completeDrop({\n            completed: initial.completed\n          }));\n        }\n\n        !(getState().phase === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Unexpected phase to start a drag') : invariant(false) : void 0;\n        dispatch(flush());\n        dispatch(beforeInitialCapture({\n          draggableId: id,\n          movementMode: movementMode\n        }));\n        var scrollOptions = {\n          shouldPublishImmediately: movementMode === 'SNAP'\n        };\n        var request = {\n          draggableId: id,\n          scrollOptions: scrollOptions\n        };\n\n        var _marshal$startPublish = marshal.startPublishing(request),\n            critical = _marshal$startPublish.critical,\n            dimensions = _marshal$startPublish.dimensions,\n            viewport = _marshal$startPublish.viewport;\n\n        validateDimensions(critical, dimensions);\n        dispatch(initialPublish({\n          critical: critical,\n          dimensions: dimensions,\n          clientSelection: clientSelection,\n          movementMode: movementMode,\n          viewport: viewport\n        }));\n      };\n    };\n  };\n});\n\nvar style = (function (marshal) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'INITIAL_PUBLISH') {\n          marshal.dragging();\n        }\n\n        if (action.type === 'DROP_ANIMATE') {\n          marshal.dropping(action.payload.completed.result.reason);\n        }\n\n        if (action.type === 'FLUSH' || action.type === 'DROP_COMPLETE') {\n          marshal.resting();\n        }\n\n        next(action);\n      };\n    };\n  };\n});\n\nvar curves = {\n  outOfTheWay: 'cubic-bezier(0.2, 0, 0, 1)',\n  drop: 'cubic-bezier(.2,1,.1,1)'\n};\nvar combine = {\n  opacity: {\n    drop: 0,\n    combining: 0.7\n  },\n  scale: {\n    drop: 0.75\n  }\n};\nvar timings = {\n  outOfTheWay: 0.2,\n  minDropTime: 0.33,\n  maxDropTime: 0.55\n};\nvar outOfTheWayTiming = timings.outOfTheWay + \"s \" + curves.outOfTheWay;\nvar transitions = {\n  fluid: \"opacity \" + outOfTheWayTiming,\n  snap: \"transform \" + outOfTheWayTiming + \", opacity \" + outOfTheWayTiming,\n  drop: function drop(duration) {\n    var timing = duration + \"s \" + curves.drop;\n    return \"transform \" + timing + \", opacity \" + timing;\n  },\n  outOfTheWay: \"transform \" + outOfTheWayTiming,\n  placeholder: \"height \" + outOfTheWayTiming + \", width \" + outOfTheWayTiming + \", margin \" + outOfTheWayTiming\n};\n\nvar moveTo = function moveTo(offset) {\n  return isEqual(offset, origin) ? null : \"translate(\" + offset.x + \"px, \" + offset.y + \"px)\";\n};\n\nvar transforms = {\n  moveTo: moveTo,\n  drop: function drop(offset, isCombining) {\n    var translate = moveTo(offset);\n\n    if (!translate) {\n      return null;\n    }\n\n    if (!isCombining) {\n      return translate;\n    }\n\n    return translate + \" scale(\" + combine.scale.drop + \")\";\n  }\n};\n\nvar minDropTime = timings.minDropTime,\n    maxDropTime = timings.maxDropTime;\nvar dropTimeRange = maxDropTime - minDropTime;\nvar maxDropTimeAtDistance = 1500;\nvar cancelDropModifier = 0.6;\nvar getDropDuration = (function (_ref) {\n  var current = _ref.current,\n      destination = _ref.destination,\n      reason = _ref.reason;\n  var distance$1 = distance(current, destination);\n\n  if (distance$1 <= 0) {\n    return minDropTime;\n  }\n\n  if (distance$1 >= maxDropTimeAtDistance) {\n    return maxDropTime;\n  }\n\n  var percentage = distance$1 / maxDropTimeAtDistance;\n  var duration = minDropTime + dropTimeRange * percentage;\n  var withDuration = reason === 'CANCEL' ? duration * cancelDropModifier : duration;\n  return Number(withDuration.toFixed(2));\n});\n\nvar getNewHomeClientOffset = (function (_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      dimensions = _ref.dimensions,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var draggables = dimensions.draggables,\n      droppables = dimensions.droppables;\n  var droppableId = whatIsDraggedOver(impact);\n  var destination = droppableId ? droppables[droppableId] : null;\n  var home = droppables[draggable.descriptor.droppableId];\n  var newClientCenter = getClientBorderBoxCenter({\n    impact: impact,\n    draggable: draggable,\n    draggables: draggables,\n    afterCritical: afterCritical,\n    droppable: destination || home,\n    viewport: viewport\n  });\n  var offset = subtract(newClientCenter, draggable.client.borderBox.center);\n  return offset;\n});\n\nvar getDropImpact = (function (_ref) {\n  var draggables = _ref.draggables,\n      reason = _ref.reason,\n      lastImpact = _ref.lastImpact,\n      home = _ref.home,\n      viewport = _ref.viewport,\n      onLiftImpact = _ref.onLiftImpact;\n\n  if (!lastImpact.at || reason !== 'DROP') {\n    var recomputedHomeImpact = recompute({\n      draggables: draggables,\n      impact: onLiftImpact,\n      destination: home,\n      viewport: viewport,\n      forceShouldAnimate: true\n    });\n    return {\n      impact: recomputedHomeImpact,\n      didDropInsideDroppable: false\n    };\n  }\n\n  if (lastImpact.at.type === 'REORDER') {\n    return {\n      impact: lastImpact,\n      didDropInsideDroppable: true\n    };\n  }\n\n  var withoutMovement = _extends({}, lastImpact, {\n    displaced: emptyGroups\n  });\n\n  return {\n    impact: withoutMovement,\n    didDropInsideDroppable: true\n  };\n});\n\nvar drop$1 = (function (_ref) {\n  var getState = _ref.getState,\n      dispatch = _ref.dispatch;\n  return function (next) {\n    return function (action) {\n      if (action.type !== 'DROP') {\n        next(action);\n        return;\n      }\n\n      var state = getState();\n      var reason = action.payload.reason;\n\n      if (state.phase === 'COLLECTING') {\n        dispatch(dropPending({\n          reason: reason\n        }));\n        return;\n      }\n\n      if (state.phase === 'IDLE') {\n        return;\n      }\n\n      var isWaitingForDrop = state.phase === 'DROP_PENDING' && state.isWaiting;\n      !!isWaitingForDrop ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'A DROP action occurred while DROP_PENDING and still waiting') : invariant(false) : void 0;\n      !(state.phase === 'DRAGGING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot drop in phase: \" + state.phase) : invariant(false) : void 0;\n      var critical = state.critical;\n      var dimensions = state.dimensions;\n      var draggable = dimensions.draggables[state.critical.draggable.id];\n\n      var _getDropImpact = getDropImpact({\n        reason: reason,\n        lastImpact: state.impact,\n        afterCritical: state.afterCritical,\n        onLiftImpact: state.onLiftImpact,\n        home: state.dimensions.droppables[state.critical.droppable.id],\n        viewport: state.viewport,\n        draggables: state.dimensions.draggables\n      }),\n          impact = _getDropImpact.impact,\n          didDropInsideDroppable = _getDropImpact.didDropInsideDroppable;\n\n      var destination = didDropInsideDroppable ? tryGetDestination(impact) : null;\n      var combine = didDropInsideDroppable ? tryGetCombine(impact) : null;\n      var source = {\n        index: critical.draggable.index,\n        droppableId: critical.droppable.id\n      };\n      var result = {\n        draggableId: draggable.descriptor.id,\n        type: draggable.descriptor.type,\n        source: source,\n        reason: reason,\n        mode: state.movementMode,\n        destination: destination,\n        combine: combine\n      };\n      var newHomeClientOffset = getNewHomeClientOffset({\n        impact: impact,\n        draggable: draggable,\n        dimensions: dimensions,\n        viewport: state.viewport,\n        afterCritical: state.afterCritical\n      });\n      var completed = {\n        critical: state.critical,\n        afterCritical: state.afterCritical,\n        result: result,\n        impact: impact\n      };\n      var isAnimationRequired = !isEqual(state.current.client.offset, newHomeClientOffset) || Boolean(result.combine);\n\n      if (!isAnimationRequired) {\n        dispatch(completeDrop({\n          completed: completed\n        }));\n        return;\n      }\n\n      var dropDuration = getDropDuration({\n        current: state.current.client.offset,\n        destination: newHomeClientOffset,\n        reason: reason\n      });\n      var args = {\n        newHomeClientOffset: newHomeClientOffset,\n        dropDuration: dropDuration,\n        completed: completed\n      };\n      dispatch(animateDrop(args));\n    };\n  };\n});\n\nvar getWindowScroll = (function () {\n  return {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  };\n});\n\nfunction getWindowScrollBinding(update) {\n  return {\n    eventName: 'scroll',\n    options: {\n      passive: true,\n      capture: false\n    },\n    fn: function fn(event) {\n      if (event.target !== window && event.target !== window.document) {\n        return;\n      }\n\n      update();\n    }\n  };\n}\n\nfunction getScrollListener(_ref) {\n  var onWindowScroll = _ref.onWindowScroll;\n\n  function updateScroll() {\n    onWindowScroll(getWindowScroll());\n  }\n\n  var scheduled = rafSchd(updateScroll);\n  var binding = getWindowScrollBinding(scheduled);\n  var unbind = noop;\n\n  function isActive() {\n    return unbind !== noop;\n  }\n\n  function start() {\n    !!isActive() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start scroll listener when already active') : invariant(false) : void 0;\n    unbind = bindEvents(window, [binding]);\n  }\n\n  function stop() {\n    !isActive() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop scroll listener when not active') : invariant(false) : void 0;\n    scheduled.cancel();\n    unbind();\n    unbind = noop;\n  }\n\n  return {\n    start: start,\n    stop: stop,\n    isActive: isActive\n  };\n}\n\nvar shouldEnd = function shouldEnd(action) {\n  return action.type === 'DROP_COMPLETE' || action.type === 'DROP_ANIMATE' || action.type === 'FLUSH';\n};\n\nvar scrollListener = (function (store) {\n  var listener = getScrollListener({\n    onWindowScroll: function onWindowScroll(newScroll) {\n      store.dispatch(moveByWindowScroll({\n        newScroll: newScroll\n      }));\n    }\n  });\n  return function (next) {\n    return function (action) {\n      if (!listener.isActive() && action.type === 'INITIAL_PUBLISH') {\n        listener.start();\n      }\n\n      if (listener.isActive() && shouldEnd(action)) {\n        listener.stop();\n      }\n\n      next(action);\n    };\n  };\n});\n\nvar getExpiringAnnounce = (function (announce) {\n  var wasCalled = false;\n  var isExpired = false;\n  var timeoutId = setTimeout(function () {\n    isExpired = true;\n  });\n\n  var result = function result(message) {\n    if (wasCalled) {\n      process.env.NODE_ENV !== \"production\" ? warning('Announcement already made. Not making a second announcement') : void 0;\n      return;\n    }\n\n    if (isExpired) {\n      process.env.NODE_ENV !== \"production\" ? warning(\"\\n        Announcements cannot be made asynchronously.\\n        Default message has already been announced.\\n      \") : void 0;\n      return;\n    }\n\n    wasCalled = true;\n    announce(message);\n    clearTimeout(timeoutId);\n  };\n\n  result.wasCalled = function () {\n    return wasCalled;\n  };\n\n  return result;\n});\n\nvar getAsyncMarshal = (function () {\n  var entries = [];\n\n  var execute = function execute(timerId) {\n    var index = findIndex(entries, function (item) {\n      return item.timerId === timerId;\n    });\n    !(index !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find timer') : invariant(false) : void 0;\n\n    var _entries$splice = entries.splice(index, 1),\n        entry = _entries$splice[0];\n\n    entry.callback();\n  };\n\n  var add = function add(fn) {\n    var timerId = setTimeout(function () {\n      return execute(timerId);\n    });\n    var entry = {\n      timerId: timerId,\n      callback: fn\n    };\n    entries.push(entry);\n  };\n\n  var flush = function flush() {\n    if (!entries.length) {\n      return;\n    }\n\n    var shallow = [].concat(entries);\n    entries.length = 0;\n    shallow.forEach(function (entry) {\n      clearTimeout(entry.timerId);\n      entry.callback();\n    });\n  };\n\n  return {\n    add: add,\n    flush: flush\n  };\n});\n\nvar areLocationsEqual = function areLocationsEqual(first, second) {\n  if (first == null && second == null) {\n    return true;\n  }\n\n  if (first == null || second == null) {\n    return false;\n  }\n\n  return first.droppableId === second.droppableId && first.index === second.index;\n};\nvar isCombineEqual = function isCombineEqual(first, second) {\n  if (first == null && second == null) {\n    return true;\n  }\n\n  if (first == null || second == null) {\n    return false;\n  }\n\n  return first.draggableId === second.draggableId && first.droppableId === second.droppableId;\n};\nvar isCriticalEqual = function isCriticalEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n\n  var isDraggableEqual = first.draggable.id === second.draggable.id && first.draggable.droppableId === second.draggable.droppableId && first.draggable.type === second.draggable.type && first.draggable.index === second.draggable.index;\n  var isDroppableEqual = first.droppable.id === second.droppable.id && first.droppable.type === second.droppable.type;\n  return isDraggableEqual && isDroppableEqual;\n};\n\nvar withTimings = function withTimings(key, fn) {\n  start();\n  fn();\n  finish();\n};\n\nvar getDragStart = function getDragStart(critical, mode) {\n  return {\n    draggableId: critical.draggable.id,\n    type: critical.droppable.type,\n    source: {\n      droppableId: critical.droppable.id,\n      index: critical.draggable.index\n    },\n    mode: mode\n  };\n};\n\nvar execute = function execute(responder, data, announce, getDefaultMessage) {\n  if (!responder) {\n    announce(getDefaultMessage(data));\n    return;\n  }\n\n  var willExpire = getExpiringAnnounce(announce);\n  var provided = {\n    announce: willExpire\n  };\n  responder(data, provided);\n\n  if (!willExpire.wasCalled()) {\n    announce(getDefaultMessage(data));\n  }\n};\n\nvar getPublisher = (function (getResponders, announce) {\n  var asyncMarshal = getAsyncMarshal();\n  var dragging = null;\n\n  var beforeCapture = function beforeCapture(draggableId, mode) {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeCapture as a drag start has already been published') : invariant(false) : void 0;\n    withTimings('onBeforeCapture', function () {\n      var fn = getResponders().onBeforeCapture;\n\n      if (fn) {\n        var before = {\n          draggableId: draggableId,\n          mode: mode\n        };\n        fn(before);\n      }\n    });\n  };\n\n  var beforeStart = function beforeStart(critical, mode) {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeDragStart as a drag start has already been published') : invariant(false) : void 0;\n    withTimings('onBeforeDragStart', function () {\n      var fn = getResponders().onBeforeDragStart;\n\n      if (fn) {\n        fn(getDragStart(critical, mode));\n      }\n    });\n  };\n\n  var start = function start(critical, mode) {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeDragStart as a drag start has already been published') : invariant(false) : void 0;\n    var data = getDragStart(critical, mode);\n    dragging = {\n      mode: mode,\n      lastCritical: critical,\n      lastLocation: data.source,\n      lastCombine: null\n    };\n    asyncMarshal.add(function () {\n      withTimings('onDragStart', function () {\n        return execute(getResponders().onDragStart, data, announce, preset.onDragStart);\n      });\n    });\n  };\n\n  var update = function update(critical, impact) {\n    var location = tryGetDestination(impact);\n    var combine = tryGetCombine(impact);\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onDragMove when onDragStart has not been called') : invariant(false) : void 0;\n    var hasCriticalChanged = !isCriticalEqual(critical, dragging.lastCritical);\n\n    if (hasCriticalChanged) {\n      dragging.lastCritical = critical;\n    }\n\n    var hasLocationChanged = !areLocationsEqual(dragging.lastLocation, location);\n\n    if (hasLocationChanged) {\n      dragging.lastLocation = location;\n    }\n\n    var hasGroupingChanged = !isCombineEqual(dragging.lastCombine, combine);\n\n    if (hasGroupingChanged) {\n      dragging.lastCombine = combine;\n    }\n\n    if (!hasCriticalChanged && !hasLocationChanged && !hasGroupingChanged) {\n      return;\n    }\n\n    var data = _extends({}, getDragStart(critical, dragging.mode), {\n      combine: combine,\n      destination: location\n    });\n\n    asyncMarshal.add(function () {\n      withTimings('onDragUpdate', function () {\n        return execute(getResponders().onDragUpdate, data, announce, preset.onDragUpdate);\n      });\n    });\n  };\n\n  var flush = function flush() {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only flush responders while dragging') : invariant(false) : void 0;\n    asyncMarshal.flush();\n  };\n\n  var drop = function drop(result) {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onDragEnd when there is no matching onDragStart') : invariant(false) : void 0;\n    dragging = null;\n    withTimings('onDragEnd', function () {\n      return execute(getResponders().onDragEnd, result, announce, preset.onDragEnd);\n    });\n  };\n\n  var abort = function abort() {\n    if (!dragging) {\n      return;\n    }\n\n    var result = _extends({}, getDragStart(dragging.lastCritical, dragging.mode), {\n      combine: null,\n      destination: null,\n      reason: 'CANCEL'\n    });\n\n    drop(result);\n  };\n\n  return {\n    beforeCapture: beforeCapture,\n    beforeStart: beforeStart,\n    start: start,\n    update: update,\n    flush: flush,\n    drop: drop,\n    abort: abort\n  };\n});\n\nvar responders = (function (getResponders, announce) {\n  var publisher = getPublisher(getResponders, announce);\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'BEFORE_INITIAL_CAPTURE') {\n          publisher.beforeCapture(action.payload.draggableId, action.payload.movementMode);\n          return;\n        }\n\n        if (action.type === 'INITIAL_PUBLISH') {\n          var critical = action.payload.critical;\n          publisher.beforeStart(critical, action.payload.movementMode);\n          next(action);\n          publisher.start(critical, action.payload.movementMode);\n          return;\n        }\n\n        if (action.type === 'DROP_COMPLETE') {\n          var result = action.payload.completed.result;\n          publisher.flush();\n          next(action);\n          publisher.drop(result);\n          return;\n        }\n\n        next(action);\n\n        if (action.type === 'FLUSH') {\n          publisher.abort();\n          return;\n        }\n\n        var state = store.getState();\n\n        if (state.phase === 'DRAGGING') {\n          publisher.update(state.critical, state.impact);\n        }\n      };\n    };\n  };\n});\n\nvar dropAnimationFinish = (function (store) {\n  return function (next) {\n    return function (action) {\n      if (action.type !== 'DROP_ANIMATION_FINISHED') {\n        next(action);\n        return;\n      }\n\n      var state = store.getState();\n      !(state.phase === 'DROP_ANIMATING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot finish a drop animating when no drop is occurring') : invariant(false) : void 0;\n      store.dispatch(completeDrop({\n        completed: state.completed\n      }));\n    };\n  };\n});\n\nvar dropAnimationFlushOnScroll = (function (store) {\n  var unbind = null;\n  var frameId = null;\n\n  function clear() {\n    if (frameId) {\n      cancelAnimationFrame(frameId);\n      frameId = null;\n    }\n\n    if (unbind) {\n      unbind();\n      unbind = null;\n    }\n  }\n\n  return function (next) {\n    return function (action) {\n      if (action.type === 'FLUSH' || action.type === 'DROP_COMPLETE' || action.type === 'DROP_ANIMATION_FINISHED') {\n        clear();\n      }\n\n      next(action);\n\n      if (action.type !== 'DROP_ANIMATE') {\n        return;\n      }\n\n      var binding = {\n        eventName: 'scroll',\n        options: {\n          capture: true,\n          passive: false,\n          once: true\n        },\n        fn: function flushDropAnimation() {\n          var state = store.getState();\n\n          if (state.phase === 'DROP_ANIMATING') {\n            store.dispatch(dropAnimationFinished());\n          }\n        }\n      };\n      frameId = requestAnimationFrame(function () {\n        frameId = null;\n        unbind = bindEvents(window, [binding]);\n      });\n    };\n  };\n});\n\nvar dimensionMarshalStopper = (function (marshal) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'DROP_COMPLETE' || action.type === 'FLUSH' || action.type === 'DROP_ANIMATE') {\n          marshal.stopPublishing();\n        }\n\n        next(action);\n      };\n    };\n  };\n});\n\nvar focus = (function (marshal) {\n  var isWatching = false;\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'INITIAL_PUBLISH') {\n          isWatching = true;\n          marshal.tryRecordFocus(action.payload.critical.draggable.id);\n          next(action);\n          marshal.tryRestoreFocusRecorded();\n          return;\n        }\n\n        next(action);\n\n        if (!isWatching) {\n          return;\n        }\n\n        if (action.type === 'FLUSH') {\n          isWatching = false;\n          marshal.tryRestoreFocusRecorded();\n          return;\n        }\n\n        if (action.type === 'DROP_COMPLETE') {\n          isWatching = false;\n          var result = action.payload.completed.result;\n\n          if (result.combine) {\n            marshal.tryShiftRecord(result.draggableId, result.combine.draggableId);\n          }\n\n          marshal.tryRestoreFocusRecorded();\n        }\n      };\n    };\n  };\n});\n\nvar shouldStop = function shouldStop(action) {\n  return action.type === 'DROP_COMPLETE' || action.type === 'DROP_ANIMATE' || action.type === 'FLUSH';\n};\n\nvar autoScroll = (function (autoScroller) {\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        if (shouldStop(action)) {\n          autoScroller.stop();\n          next(action);\n          return;\n        }\n\n        if (action.type === 'INITIAL_PUBLISH') {\n          next(action);\n          var state = store.getState();\n          !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected phase to be DRAGGING after INITIAL_PUBLISH') : invariant(false) : void 0;\n          autoScroller.start(state);\n          return;\n        }\n\n        next(action);\n        autoScroller.scroll(store.getState());\n      };\n    };\n  };\n});\n\nvar pendingDrop = (function (store) {\n  return function (next) {\n    return function (action) {\n      next(action);\n\n      if (action.type !== 'PUBLISH_WHILE_DRAGGING') {\n        return;\n      }\n\n      var postActionState = store.getState();\n\n      if (postActionState.phase !== 'DROP_PENDING') {\n        return;\n      }\n\n      if (postActionState.isWaiting) {\n        return;\n      }\n\n      store.dispatch(drop({\n        reason: postActionState.reason\n      }));\n    };\n  };\n});\n\nvar composeEnhancers = process.env.NODE_ENV !== 'production' && typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n  name: 'react-beautiful-dnd'\n}) : compose;\nvar createStore = (function (_ref) {\n  var dimensionMarshal = _ref.dimensionMarshal,\n      focusMarshal = _ref.focusMarshal,\n      styleMarshal = _ref.styleMarshal,\n      getResponders = _ref.getResponders,\n      announce = _ref.announce,\n      autoScroller = _ref.autoScroller;\n  return createStore$1(reducer, composeEnhancers(applyMiddleware(style(styleMarshal), dimensionMarshalStopper(dimensionMarshal), lift$1(dimensionMarshal), drop$1, dropAnimationFinish, dropAnimationFlushOnScroll, pendingDrop, autoScroll(autoScroller), scrollListener, focus(focusMarshal), responders(getResponders, announce))));\n});\n\nvar clean$1 = function clean() {\n  return {\n    additions: {},\n    removals: {},\n    modified: {}\n  };\n};\nfunction createPublisher(_ref) {\n  var registry = _ref.registry,\n      callbacks = _ref.callbacks;\n  var staging = clean$1();\n  var frameId = null;\n\n  var collect = function collect() {\n    if (frameId) {\n      return;\n    }\n\n    callbacks.collectionStarting();\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      start();\n      var _staging = staging,\n          additions = _staging.additions,\n          removals = _staging.removals,\n          modified = _staging.modified;\n      var added = Object.keys(additions).map(function (id) {\n        return registry.draggable.getById(id).getDimension(origin);\n      }).sort(function (a, b) {\n        return a.descriptor.index - b.descriptor.index;\n      });\n      var updated = Object.keys(modified).map(function (id) {\n        var entry = registry.droppable.getById(id);\n        var scroll = entry.callbacks.getScrollWhileDragging();\n        return {\n          droppableId: id,\n          scroll: scroll\n        };\n      });\n      var result = {\n        additions: added,\n        removals: Object.keys(removals),\n        modified: updated\n      };\n      staging = clean$1();\n      finish();\n      callbacks.publish(result);\n    });\n  };\n\n  var add = function add(entry) {\n    var id = entry.descriptor.id;\n    staging.additions[id] = entry;\n    staging.modified[entry.descriptor.droppableId] = true;\n\n    if (staging.removals[id]) {\n      delete staging.removals[id];\n    }\n\n    collect();\n  };\n\n  var remove = function remove(entry) {\n    var descriptor = entry.descriptor;\n    staging.removals[descriptor.id] = true;\n    staging.modified[descriptor.droppableId] = true;\n\n    if (staging.additions[descriptor.id]) {\n      delete staging.additions[descriptor.id];\n    }\n\n    collect();\n  };\n\n  var stop = function stop() {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n    staging = clean$1();\n  };\n\n  return {\n    add: add,\n    remove: remove,\n    stop: stop\n  };\n}\n\nvar getMaxScroll = (function (_ref) {\n  var scrollHeight = _ref.scrollHeight,\n      scrollWidth = _ref.scrollWidth,\n      height = _ref.height,\n      width = _ref.width;\n  var maxScroll = subtract({\n    x: scrollWidth,\n    y: scrollHeight\n  }, {\n    x: width,\n    y: height\n  });\n  var adjustedMaxScroll = {\n    x: Math.max(0, maxScroll.x),\n    y: Math.max(0, maxScroll.y)\n  };\n  return adjustedMaxScroll;\n});\n\nvar getDocumentElement = (function () {\n  var doc = document.documentElement;\n  !doc ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find document.documentElement') : invariant(false) : void 0;\n  return doc;\n});\n\nvar getMaxWindowScroll = (function () {\n  var doc = getDocumentElement();\n  var maxScroll = getMaxScroll({\n    scrollHeight: doc.scrollHeight,\n    scrollWidth: doc.scrollWidth,\n    width: doc.clientWidth,\n    height: doc.clientHeight\n  });\n  return maxScroll;\n});\n\nvar getViewport = (function () {\n  var scroll = getWindowScroll();\n  var maxScroll = getMaxWindowScroll();\n  var top = scroll.y;\n  var left = scroll.x;\n  var doc = getDocumentElement();\n  var width = doc.clientWidth;\n  var height = doc.clientHeight;\n  var right = left + width;\n  var bottom = top + height;\n  var frame = getRect({\n    top: top,\n    left: left,\n    right: right,\n    bottom: bottom\n  });\n  var viewport = {\n    frame: frame,\n    scroll: {\n      initial: scroll,\n      current: scroll,\n      max: maxScroll,\n      diff: {\n        value: origin,\n        displacement: origin\n      }\n    }\n  };\n  return viewport;\n});\n\nvar getInitialPublish = (function (_ref) {\n  var critical = _ref.critical,\n      scrollOptions = _ref.scrollOptions,\n      registry = _ref.registry;\n  start();\n  var viewport = getViewport();\n  var windowScroll = viewport.scroll.current;\n  var home = critical.droppable;\n  var droppables = registry.droppable.getAllByType(home.type).map(function (entry) {\n    return entry.callbacks.getDimensionAndWatchScroll(windowScroll, scrollOptions);\n  });\n  var draggables = registry.draggable.getAllByType(critical.draggable.type).map(function (entry) {\n    return entry.getDimension(windowScroll);\n  });\n  var dimensions = {\n    draggables: toDraggableMap(draggables),\n    droppables: toDroppableMap(droppables)\n  };\n  finish();\n  var result = {\n    dimensions: dimensions,\n    critical: critical,\n    viewport: viewport\n  };\n  return result;\n});\n\nfunction shouldPublishUpdate(registry, dragging, entry) {\n  if (entry.descriptor.id === dragging.id) {\n    return false;\n  }\n\n  if (entry.descriptor.type !== dragging.type) {\n    return false;\n  }\n\n  var home = registry.droppable.getById(entry.descriptor.droppableId);\n\n  if (home.descriptor.mode !== 'virtual') {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      You are attempting to add or remove a Draggable [id: \" + entry.descriptor.id + \"]\\n      while a drag is occurring. This is only supported for virtual lists.\\n\\n      See https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/patterns/virtual-lists.md\\n    \") : void 0;\n    return false;\n  }\n\n  return true;\n}\n\nvar createDimensionMarshal = (function (registry, callbacks) {\n  var collection = null;\n  var publisher = createPublisher({\n    callbacks: {\n      publish: callbacks.publishWhileDragging,\n      collectionStarting: callbacks.collectionStarting\n    },\n    registry: registry\n  });\n\n  var updateDroppableIsEnabled = function updateDroppableIsEnabled(id, isEnabled) {\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot update is enabled flag of Droppable \" + id + \" as it is not registered\") : invariant(false) : void 0;\n\n    if (!collection) {\n      return;\n    }\n\n    callbacks.updateDroppableIsEnabled({\n      id: id,\n      isEnabled: isEnabled\n    });\n  };\n\n  var updateDroppableIsCombineEnabled = function updateDroppableIsCombineEnabled(id, isCombineEnabled) {\n    if (!collection) {\n      return;\n    }\n\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot update isCombineEnabled flag of Droppable \" + id + \" as it is not registered\") : invariant(false) : void 0;\n    callbacks.updateDroppableIsCombineEnabled({\n      id: id,\n      isCombineEnabled: isCombineEnabled\n    });\n  };\n\n  var updateDroppableScroll = function updateDroppableScroll(id, newScroll) {\n    if (!collection) {\n      return;\n    }\n\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot update the scroll on Droppable \" + id + \" as it is not registered\") : invariant(false) : void 0;\n    callbacks.updateDroppableScroll({\n      id: id,\n      newScroll: newScroll\n    });\n  };\n\n  var scrollDroppable = function scrollDroppable(id, change) {\n    if (!collection) {\n      return;\n    }\n\n    registry.droppable.getById(id).callbacks.scroll(change);\n  };\n\n  var stopPublishing = function stopPublishing() {\n    if (!collection) {\n      return;\n    }\n\n    publisher.stop();\n    var home = collection.critical.droppable;\n    registry.droppable.getAllByType(home.type).forEach(function (entry) {\n      return entry.callbacks.dragStopped();\n    });\n    collection.unsubscribe();\n    collection = null;\n  };\n\n  var subscriber = function subscriber(event) {\n    !collection ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Should only be subscribed when a collection is occurring') : invariant(false) : void 0;\n    var dragging = collection.critical.draggable;\n\n    if (event.type === 'ADDITION') {\n      if (shouldPublishUpdate(registry, dragging, event.value)) {\n        publisher.add(event.value);\n      }\n    }\n\n    if (event.type === 'REMOVAL') {\n      if (shouldPublishUpdate(registry, dragging, event.value)) {\n        publisher.remove(event.value);\n      }\n    }\n  };\n\n  var startPublishing = function startPublishing(request) {\n    !!collection ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start capturing critical dimensions as there is already a collection') : invariant(false) : void 0;\n    var entry = registry.draggable.getById(request.draggableId);\n    var home = registry.droppable.getById(entry.descriptor.droppableId);\n    var critical = {\n      draggable: entry.descriptor,\n      droppable: home.descriptor\n    };\n    var unsubscribe = registry.subscribe(subscriber);\n    collection = {\n      critical: critical,\n      unsubscribe: unsubscribe\n    };\n    return getInitialPublish({\n      critical: critical,\n      registry: registry,\n      scrollOptions: request.scrollOptions\n    });\n  };\n\n  var marshal = {\n    updateDroppableIsEnabled: updateDroppableIsEnabled,\n    updateDroppableIsCombineEnabled: updateDroppableIsCombineEnabled,\n    scrollDroppable: scrollDroppable,\n    updateDroppableScroll: updateDroppableScroll,\n    startPublishing: startPublishing,\n    stopPublishing: stopPublishing\n  };\n  return marshal;\n});\n\nvar canStartDrag = (function (state, id) {\n  if (state.phase === 'IDLE') {\n    return true;\n  }\n\n  if (state.phase !== 'DROP_ANIMATING') {\n    return false;\n  }\n\n  if (state.completed.result.draggableId === id) {\n    return false;\n  }\n\n  return state.completed.result.reason === 'DROP';\n});\n\nvar scrollWindow = (function (change) {\n  window.scrollBy(change.x, change.y);\n});\n\nvar getScrollableDroppables = memoizeOne(function (droppables) {\n  return toDroppableList(droppables).filter(function (droppable) {\n    if (!droppable.isEnabled) {\n      return false;\n    }\n\n    if (!droppable.frame) {\n      return false;\n    }\n\n    return true;\n  });\n});\n\nvar getScrollableDroppableOver = function getScrollableDroppableOver(target, droppables) {\n  var maybe = find(getScrollableDroppables(droppables), function (droppable) {\n    !droppable.frame ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Invalid result') : invariant(false) : void 0;\n    return isPositionInFrame(droppable.frame.pageMarginBox)(target);\n  });\n  return maybe;\n};\n\nvar getBestScrollableDroppable = (function (_ref) {\n  var center = _ref.center,\n      destination = _ref.destination,\n      droppables = _ref.droppables;\n\n  if (destination) {\n    var _dimension = droppables[destination];\n\n    if (!_dimension.frame) {\n      return null;\n    }\n\n    return _dimension;\n  }\n\n  var dimension = getScrollableDroppableOver(center, droppables);\n  return dimension;\n});\n\nvar config = {\n  startFromPercentage: 0.25,\n  maxScrollAtPercentage: 0.05,\n  maxPixelScroll: 28,\n  ease: function ease(percentage) {\n    return Math.pow(percentage, 2);\n  },\n  durationDampening: {\n    stopDampeningAt: 1200,\n    accelerateAt: 360\n  }\n};\n\nvar getDistanceThresholds = (function (container, axis) {\n  var startScrollingFrom = container[axis.size] * config.startFromPercentage;\n  var maxScrollValueAt = container[axis.size] * config.maxScrollAtPercentage;\n  var thresholds = {\n    startScrollingFrom: startScrollingFrom,\n    maxScrollValueAt: maxScrollValueAt\n  };\n  return thresholds;\n});\n\nvar getPercentage = (function (_ref) {\n  var startOfRange = _ref.startOfRange,\n      endOfRange = _ref.endOfRange,\n      current = _ref.current;\n  var range = endOfRange - startOfRange;\n\n  if (range === 0) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Detected distance range of 0 in the fluid auto scroller\\n      This is unexpected and would cause a divide by 0 issue.\\n      Not allowing an auto scroll\\n    \") : void 0;\n    return 0;\n  }\n\n  var currentInRange = current - startOfRange;\n  var percentage = currentInRange / range;\n  return percentage;\n});\n\nvar minScroll = 1;\n\nvar getValueFromDistance = (function (distanceToEdge, thresholds) {\n  if (distanceToEdge > thresholds.startScrollingFrom) {\n    return 0;\n  }\n\n  if (distanceToEdge <= thresholds.maxScrollValueAt) {\n    return config.maxPixelScroll;\n  }\n\n  if (distanceToEdge === thresholds.startScrollingFrom) {\n    return minScroll;\n  }\n\n  var percentageFromMaxScrollValueAt = getPercentage({\n    startOfRange: thresholds.maxScrollValueAt,\n    endOfRange: thresholds.startScrollingFrom,\n    current: distanceToEdge\n  });\n  var percentageFromStartScrollingFrom = 1 - percentageFromMaxScrollValueAt;\n  var scroll = config.maxPixelScroll * config.ease(percentageFromStartScrollingFrom);\n  return Math.ceil(scroll);\n});\n\nvar accelerateAt = config.durationDampening.accelerateAt;\nvar stopAt = config.durationDampening.stopDampeningAt;\nvar dampenValueByTime = (function (proposedScroll, dragStartTime) {\n  var startOfRange = dragStartTime;\n  var endOfRange = stopAt;\n  var now = Date.now();\n  var runTime = now - startOfRange;\n\n  if (runTime >= stopAt) {\n    return proposedScroll;\n  }\n\n  if (runTime < accelerateAt) {\n    return minScroll;\n  }\n\n  var betweenAccelerateAtAndStopAtPercentage = getPercentage({\n    startOfRange: accelerateAt,\n    endOfRange: endOfRange,\n    current: runTime\n  });\n  var scroll = proposedScroll * config.ease(betweenAccelerateAtAndStopAtPercentage);\n  return Math.ceil(scroll);\n});\n\nvar getValue = (function (_ref) {\n  var distanceToEdge = _ref.distanceToEdge,\n      thresholds = _ref.thresholds,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var scroll = getValueFromDistance(distanceToEdge, thresholds);\n\n  if (scroll === 0) {\n    return 0;\n  }\n\n  if (!shouldUseTimeDampening) {\n    return scroll;\n  }\n\n  return Math.max(dampenValueByTime(scroll, dragStartTime), minScroll);\n});\n\nvar getScrollOnAxis = (function (_ref) {\n  var container = _ref.container,\n      distanceToEdges = _ref.distanceToEdges,\n      dragStartTime = _ref.dragStartTime,\n      axis = _ref.axis,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var thresholds = getDistanceThresholds(container, axis);\n  var isCloserToEnd = distanceToEdges[axis.end] < distanceToEdges[axis.start];\n\n  if (isCloserToEnd) {\n    return getValue({\n      distanceToEdge: distanceToEdges[axis.end],\n      thresholds: thresholds,\n      dragStartTime: dragStartTime,\n      shouldUseTimeDampening: shouldUseTimeDampening\n    });\n  }\n\n  return -1 * getValue({\n    distanceToEdge: distanceToEdges[axis.start],\n    thresholds: thresholds,\n    dragStartTime: dragStartTime,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n});\n\nvar adjustForSizeLimits = (function (_ref) {\n  var container = _ref.container,\n      subject = _ref.subject,\n      proposedScroll = _ref.proposedScroll;\n  var isTooBigVertically = subject.height > container.height;\n  var isTooBigHorizontally = subject.width > container.width;\n\n  if (!isTooBigHorizontally && !isTooBigVertically) {\n    return proposedScroll;\n  }\n\n  if (isTooBigHorizontally && isTooBigVertically) {\n    return null;\n  }\n\n  return {\n    x: isTooBigHorizontally ? 0 : proposedScroll.x,\n    y: isTooBigVertically ? 0 : proposedScroll.y\n  };\n});\n\nvar clean$2 = apply(function (value) {\n  return value === 0 ? 0 : value;\n});\nvar getScroll = (function (_ref) {\n  var dragStartTime = _ref.dragStartTime,\n      container = _ref.container,\n      subject = _ref.subject,\n      center = _ref.center,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var distanceToEdges = {\n    top: center.y - container.top,\n    right: container.right - center.x,\n    bottom: container.bottom - center.y,\n    left: center.x - container.left\n  };\n  var y = getScrollOnAxis({\n    container: container,\n    distanceToEdges: distanceToEdges,\n    dragStartTime: dragStartTime,\n    axis: vertical,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  var x = getScrollOnAxis({\n    container: container,\n    distanceToEdges: distanceToEdges,\n    dragStartTime: dragStartTime,\n    axis: horizontal,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  var required = clean$2({\n    x: x,\n    y: y\n  });\n\n  if (isEqual(required, origin)) {\n    return null;\n  }\n\n  var limited = adjustForSizeLimits({\n    container: container,\n    subject: subject,\n    proposedScroll: required\n  });\n\n  if (!limited) {\n    return null;\n  }\n\n  return isEqual(limited, origin) ? null : limited;\n});\n\nvar smallestSigned = apply(function (value) {\n  if (value === 0) {\n    return 0;\n  }\n\n  return value > 0 ? 1 : -1;\n});\nvar getOverlap = function () {\n  var getRemainder = function getRemainder(target, max) {\n    if (target < 0) {\n      return target;\n    }\n\n    if (target > max) {\n      return target - max;\n    }\n\n    return 0;\n  };\n\n  return function (_ref) {\n    var current = _ref.current,\n        max = _ref.max,\n        change = _ref.change;\n    var targetScroll = add(current, change);\n    var overlap = {\n      x: getRemainder(targetScroll.x, max.x),\n      y: getRemainder(targetScroll.y, max.y)\n    };\n\n    if (isEqual(overlap, origin)) {\n      return null;\n    }\n\n    return overlap;\n  };\n}();\nvar canPartiallyScroll = function canPartiallyScroll(_ref2) {\n  var rawMax = _ref2.max,\n      current = _ref2.current,\n      change = _ref2.change;\n  var max = {\n    x: Math.max(current.x, rawMax.x),\n    y: Math.max(current.y, rawMax.y)\n  };\n  var smallestChange = smallestSigned(change);\n  var overlap = getOverlap({\n    max: max,\n    current: current,\n    change: smallestChange\n  });\n\n  if (!overlap) {\n    return true;\n  }\n\n  if (smallestChange.x !== 0 && overlap.x === 0) {\n    return true;\n  }\n\n  if (smallestChange.y !== 0 && overlap.y === 0) {\n    return true;\n  }\n\n  return false;\n};\nvar canScrollWindow = function canScrollWindow(viewport, change) {\n  return canPartiallyScroll({\n    current: viewport.scroll.current,\n    max: viewport.scroll.max,\n    change: change\n  });\n};\nvar getWindowOverlap = function getWindowOverlap(viewport, change) {\n  if (!canScrollWindow(viewport, change)) {\n    return null;\n  }\n\n  var max = viewport.scroll.max;\n  var current = viewport.scroll.current;\n  return getOverlap({\n    current: current,\n    max: max,\n    change: change\n  });\n};\nvar canScrollDroppable = function canScrollDroppable(droppable, change) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return false;\n  }\n\n  return canPartiallyScroll({\n    current: frame.scroll.current,\n    max: frame.scroll.max,\n    change: change\n  });\n};\nvar getDroppableOverlap = function getDroppableOverlap(droppable, change) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return null;\n  }\n\n  if (!canScrollDroppable(droppable, change)) {\n    return null;\n  }\n\n  return getOverlap({\n    current: frame.scroll.current,\n    max: frame.scroll.max,\n    change: change\n  });\n};\n\nvar getWindowScrollChange = (function (_ref) {\n  var viewport = _ref.viewport,\n      subject = _ref.subject,\n      center = _ref.center,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var scroll = getScroll({\n    dragStartTime: dragStartTime,\n    container: viewport.frame,\n    subject: subject,\n    center: center,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  return scroll && canScrollWindow(viewport, scroll) ? scroll : null;\n});\n\nvar getDroppableScrollChange = (function (_ref) {\n  var droppable = _ref.droppable,\n      subject = _ref.subject,\n      center = _ref.center,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return null;\n  }\n\n  var scroll = getScroll({\n    dragStartTime: dragStartTime,\n    container: frame.pageMarginBox,\n    subject: subject,\n    center: center,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  return scroll && canScrollDroppable(droppable, scroll) ? scroll : null;\n});\n\nvar scroll$1 = (function (_ref) {\n  var state = _ref.state,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening,\n      scrollWindow = _ref.scrollWindow,\n      scrollDroppable = _ref.scrollDroppable;\n  var center = state.current.page.borderBoxCenter;\n  var draggable = state.dimensions.draggables[state.critical.draggable.id];\n  var subject = draggable.page.marginBox;\n\n  if (state.isWindowScrollAllowed) {\n    var viewport = state.viewport;\n\n    var _change = getWindowScrollChange({\n      dragStartTime: dragStartTime,\n      viewport: viewport,\n      subject: subject,\n      center: center,\n      shouldUseTimeDampening: shouldUseTimeDampening\n    });\n\n    if (_change) {\n      scrollWindow(_change);\n      return;\n    }\n  }\n\n  var droppable = getBestScrollableDroppable({\n    center: center,\n    destination: whatIsDraggedOver(state.impact),\n    droppables: state.dimensions.droppables\n  });\n\n  if (!droppable) {\n    return;\n  }\n\n  var change = getDroppableScrollChange({\n    dragStartTime: dragStartTime,\n    droppable: droppable,\n    subject: subject,\n    center: center,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n\n  if (change) {\n    scrollDroppable(droppable.descriptor.id, change);\n  }\n});\n\nvar createFluidScroller = (function (_ref) {\n  var scrollWindow = _ref.scrollWindow,\n      scrollDroppable = _ref.scrollDroppable;\n  var scheduleWindowScroll = rafSchd(scrollWindow);\n  var scheduleDroppableScroll = rafSchd(scrollDroppable);\n  var dragging = null;\n\n  var tryScroll = function tryScroll(state) {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fluid scroll if not dragging') : invariant(false) : void 0;\n    var _dragging = dragging,\n        shouldUseTimeDampening = _dragging.shouldUseTimeDampening,\n        dragStartTime = _dragging.dragStartTime;\n    scroll$1({\n      state: state,\n      scrollWindow: scheduleWindowScroll,\n      scrollDroppable: scheduleDroppableScroll,\n      dragStartTime: dragStartTime,\n      shouldUseTimeDampening: shouldUseTimeDampening\n    });\n  };\n\n  var start$1 = function start$1(state) {\n    start();\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start auto scrolling when already started') : invariant(false) : void 0;\n    var dragStartTime = Date.now();\n    var wasScrollNeeded = false;\n\n    var fakeScrollCallback = function fakeScrollCallback() {\n      wasScrollNeeded = true;\n    };\n\n    scroll$1({\n      state: state,\n      dragStartTime: 0,\n      shouldUseTimeDampening: false,\n      scrollWindow: fakeScrollCallback,\n      scrollDroppable: fakeScrollCallback\n    });\n    dragging = {\n      dragStartTime: dragStartTime,\n      shouldUseTimeDampening: wasScrollNeeded\n    };\n    finish();\n\n    if (wasScrollNeeded) {\n      tryScroll(state);\n    }\n  };\n\n  var stop = function stop() {\n    if (!dragging) {\n      return;\n    }\n\n    scheduleWindowScroll.cancel();\n    scheduleDroppableScroll.cancel();\n    dragging = null;\n  };\n\n  return {\n    start: start$1,\n    stop: stop,\n    scroll: tryScroll\n  };\n});\n\nvar createJumpScroller = (function (_ref) {\n  var move = _ref.move,\n      scrollDroppable = _ref.scrollDroppable,\n      scrollWindow = _ref.scrollWindow;\n\n  var moveByOffset = function moveByOffset(state, offset) {\n    var client = add(state.current.client.selection, offset);\n    move({\n      client: client\n    });\n  };\n\n  var scrollDroppableAsMuchAsItCan = function scrollDroppableAsMuchAsItCan(droppable, change) {\n    if (!canScrollDroppable(droppable, change)) {\n      return change;\n    }\n\n    var overlap = getDroppableOverlap(droppable, change);\n\n    if (!overlap) {\n      scrollDroppable(droppable.descriptor.id, change);\n      return null;\n    }\n\n    var whatTheDroppableCanScroll = subtract(change, overlap);\n    scrollDroppable(droppable.descriptor.id, whatTheDroppableCanScroll);\n    var remainder = subtract(change, whatTheDroppableCanScroll);\n    return remainder;\n  };\n\n  var scrollWindowAsMuchAsItCan = function scrollWindowAsMuchAsItCan(isWindowScrollAllowed, viewport, change) {\n    if (!isWindowScrollAllowed) {\n      return change;\n    }\n\n    if (!canScrollWindow(viewport, change)) {\n      return change;\n    }\n\n    var overlap = getWindowOverlap(viewport, change);\n\n    if (!overlap) {\n      scrollWindow(change);\n      return null;\n    }\n\n    var whatTheWindowCanScroll = subtract(change, overlap);\n    scrollWindow(whatTheWindowCanScroll);\n    var remainder = subtract(change, whatTheWindowCanScroll);\n    return remainder;\n  };\n\n  var jumpScroller = function jumpScroller(state) {\n    var request = state.scrollJumpRequest;\n\n    if (!request) {\n      return;\n    }\n\n    var destination = whatIsDraggedOver(state.impact);\n    !destination ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot perform a jump scroll when there is no destination') : invariant(false) : void 0;\n    var droppableRemainder = scrollDroppableAsMuchAsItCan(state.dimensions.droppables[destination], request);\n\n    if (!droppableRemainder) {\n      return;\n    }\n\n    var viewport = state.viewport;\n    var windowRemainder = scrollWindowAsMuchAsItCan(state.isWindowScrollAllowed, viewport, droppableRemainder);\n\n    if (!windowRemainder) {\n      return;\n    }\n\n    moveByOffset(state, windowRemainder);\n  };\n\n  return jumpScroller;\n});\n\nvar createAutoScroller = (function (_ref) {\n  var scrollDroppable = _ref.scrollDroppable,\n      scrollWindow = _ref.scrollWindow,\n      move = _ref.move;\n  var fluidScroller = createFluidScroller({\n    scrollWindow: scrollWindow,\n    scrollDroppable: scrollDroppable\n  });\n  var jumpScroll = createJumpScroller({\n    move: move,\n    scrollWindow: scrollWindow,\n    scrollDroppable: scrollDroppable\n  });\n\n  var scroll = function scroll(state) {\n    if (state.phase !== 'DRAGGING') {\n      return;\n    }\n\n    if (state.movementMode === 'FLUID') {\n      fluidScroller.scroll(state);\n      return;\n    }\n\n    if (!state.scrollJumpRequest) {\n      return;\n    }\n\n    jumpScroll(state);\n  };\n\n  var scroller = {\n    scroll: scroll,\n    start: fluidScroller.start,\n    stop: fluidScroller.stop\n  };\n  return scroller;\n});\n\nvar prefix$1 = 'data-rbd';\nvar dragHandle = function () {\n  var base = prefix$1 + \"-drag-handle\";\n  return {\n    base: base,\n    draggableId: base + \"-draggable-id\",\n    contextId: base + \"-context-id\"\n  };\n}();\nvar draggable = function () {\n  var base = prefix$1 + \"-draggable\";\n  return {\n    base: base,\n    contextId: base + \"-context-id\",\n    id: base + \"-id\"\n  };\n}();\nvar droppable = function () {\n  var base = prefix$1 + \"-droppable\";\n  return {\n    base: base,\n    contextId: base + \"-context-id\",\n    id: base + \"-id\"\n  };\n}();\nvar scrollContainer = {\n  contextId: prefix$1 + \"-scroll-container-context-id\"\n};\n\nvar makeGetSelector = function makeGetSelector(context) {\n  return function (attribute) {\n    return \"[\" + attribute + \"=\\\"\" + context + \"\\\"]\";\n  };\n};\n\nvar getStyles = function getStyles(rules, property) {\n  return rules.map(function (rule) {\n    var value = rule.styles[property];\n\n    if (!value) {\n      return '';\n    }\n\n    return rule.selector + \" { \" + value + \" }\";\n  }).join(' ');\n};\n\nvar noPointerEvents = 'pointer-events: none;';\nvar getStyles$1 = (function (contextId) {\n  var getSelector = makeGetSelector(contextId);\n\n  var dragHandle$1 = function () {\n    var grabCursor = \"\\n      cursor: -webkit-grab;\\n      cursor: grab;\\n    \";\n    return {\n      selector: getSelector(dragHandle.contextId),\n      styles: {\n        always: \"\\n          -webkit-touch-callout: none;\\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\\n          touch-action: manipulation;\\n        \",\n        resting: grabCursor,\n        dragging: noPointerEvents,\n        dropAnimating: grabCursor\n      }\n    };\n  }();\n\n  var draggable$1 = function () {\n    var transition = \"\\n      transition: \" + transitions.outOfTheWay + \";\\n    \";\n    return {\n      selector: getSelector(draggable.contextId),\n      styles: {\n        dragging: transition,\n        dropAnimating: transition,\n        userCancel: transition\n      }\n    };\n  }();\n\n  var droppable$1 = {\n    selector: getSelector(droppable.contextId),\n    styles: {\n      always: \"overflow-anchor: none;\"\n    }\n  };\n  var body = {\n    selector: 'body',\n    styles: {\n      dragging: \"\\n        cursor: grabbing;\\n        cursor: -webkit-grabbing;\\n        user-select: none;\\n        -webkit-user-select: none;\\n        -moz-user-select: none;\\n        -ms-user-select: none;\\n        overflow-anchor: none;\\n      \"\n    }\n  };\n  var rules = [draggable$1, dragHandle$1, droppable$1, body];\n  return {\n    always: getStyles(rules, 'always'),\n    resting: getStyles(rules, 'resting'),\n    dragging: getStyles(rules, 'dragging'),\n    dropAnimating: getStyles(rules, 'dropAnimating'),\n    userCancel: getStyles(rules, 'userCancel')\n  };\n});\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\nvar getHead = function getHead() {\n  var head = document.querySelector('head');\n  !head ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find the head to append a style to') : invariant(false) : void 0;\n  return head;\n};\n\nvar createStyleEl = function createStyleEl(nonce) {\n  var el = document.createElement('style');\n\n  if (nonce) {\n    el.setAttribute('nonce', nonce);\n  }\n\n  el.type = 'text/css';\n  return el;\n};\n\nfunction useStyleMarshal(contextId, nonce) {\n  var styles = useMemo(function () {\n    return getStyles$1(contextId);\n  }, [contextId]);\n  var alwaysRef = useRef(null);\n  var dynamicRef = useRef(null);\n  var setDynamicStyle = useCallback(memoizeOne(function (proposed) {\n    var el = dynamicRef.current;\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot set dynamic style element if it is not set') : invariant(false) : void 0;\n    el.textContent = proposed;\n  }), []);\n  var setAlwaysStyle = useCallback(function (proposed) {\n    var el = alwaysRef.current;\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot set dynamic style element if it is not set') : invariant(false) : void 0;\n    el.textContent = proposed;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    !(!alwaysRef.current && !dynamicRef.current) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'style elements already mounted') : invariant(false) : void 0;\n    var always = createStyleEl(nonce);\n    var dynamic = createStyleEl(nonce);\n    alwaysRef.current = always;\n    dynamicRef.current = dynamic;\n    always.setAttribute(prefix$1 + \"-always\", contextId);\n    dynamic.setAttribute(prefix$1 + \"-dynamic\", contextId);\n    getHead().appendChild(always);\n    getHead().appendChild(dynamic);\n    setAlwaysStyle(styles.always);\n    setDynamicStyle(styles.resting);\n    return function () {\n      var remove = function remove(ref) {\n        var current = ref.current;\n        !current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot unmount ref as it is not set') : invariant(false) : void 0;\n        getHead().removeChild(current);\n        ref.current = null;\n      };\n\n      remove(alwaysRef);\n      remove(dynamicRef);\n    };\n  }, [nonce, setAlwaysStyle, setDynamicStyle, styles.always, styles.resting, contextId]);\n  var dragging = useCallback(function () {\n    return setDynamicStyle(styles.dragging);\n  }, [setDynamicStyle, styles.dragging]);\n  var dropping = useCallback(function (reason) {\n    if (reason === 'DROP') {\n      setDynamicStyle(styles.dropAnimating);\n      return;\n    }\n\n    setDynamicStyle(styles.userCancel);\n  }, [setDynamicStyle, styles.dropAnimating, styles.userCancel]);\n  var resting = useCallback(function () {\n    if (!dynamicRef.current) {\n      return;\n    }\n\n    setDynamicStyle(styles.resting);\n  }, [setDynamicStyle, styles.resting]);\n  var marshal = useMemo(function () {\n    return {\n      dragging: dragging,\n      dropping: dropping,\n      resting: resting\n    };\n  }, [dragging, dropping, resting]);\n  return marshal;\n}\n\nvar getWindowFromEl = (function (el) {\n  return el && el.ownerDocument ? el.ownerDocument.defaultView : window;\n});\n\nfunction isHtmlElement(el) {\n  return el instanceof getWindowFromEl(el).HTMLElement;\n}\n\nfunction findDragHandle(contextId, draggableId) {\n  var selector = \"[\" + dragHandle.contextId + \"=\\\"\" + contextId + \"\\\"]\";\n  var possible = toArray(document.querySelectorAll(selector));\n\n  if (!possible.length) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find any drag handles in the context \\\"\" + contextId + \"\\\"\") : void 0;\n    return null;\n  }\n\n  var handle = find(possible, function (el) {\n    return el.getAttribute(dragHandle.draggableId) === draggableId;\n  });\n\n  if (!handle) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find drag handle with id \\\"\" + draggableId + \"\\\" as no handle with a matching id was found\") : void 0;\n    return null;\n  }\n\n  if (!isHtmlElement(handle)) {\n    process.env.NODE_ENV !== \"production\" ? warning('drag handle needs to be a HTMLElement') : void 0;\n    return null;\n  }\n\n  return handle;\n}\n\nfunction useFocusMarshal(contextId) {\n  var entriesRef = useRef({});\n  var recordRef = useRef(null);\n  var restoreFocusFrameRef = useRef(null);\n  var isMountedRef = useRef(false);\n  var register = useCallback(function register(id, focus) {\n    var entry = {\n      id: id,\n      focus: focus\n    };\n    entriesRef.current[id] = entry;\n    return function unregister() {\n      var entries = entriesRef.current;\n      var current = entries[id];\n\n      if (current !== entry) {\n        delete entries[id];\n      }\n    };\n  }, []);\n  var tryGiveFocus = useCallback(function tryGiveFocus(tryGiveFocusTo) {\n    var handle = findDragHandle(contextId, tryGiveFocusTo);\n\n    if (handle && handle !== document.activeElement) {\n      handle.focus();\n    }\n  }, [contextId]);\n  var tryShiftRecord = useCallback(function tryShiftRecord(previous, redirectTo) {\n    if (recordRef.current === previous) {\n      recordRef.current = redirectTo;\n    }\n  }, []);\n  var tryRestoreFocusRecorded = useCallback(function tryRestoreFocusRecorded() {\n    if (restoreFocusFrameRef.current) {\n      return;\n    }\n\n    if (!isMountedRef.current) {\n      return;\n    }\n\n    restoreFocusFrameRef.current = requestAnimationFrame(function () {\n      restoreFocusFrameRef.current = null;\n      var record = recordRef.current;\n\n      if (record) {\n        tryGiveFocus(record);\n      }\n    });\n  }, [tryGiveFocus]);\n  var tryRecordFocus = useCallback(function tryRecordFocus(id) {\n    recordRef.current = null;\n    var focused = document.activeElement;\n\n    if (!focused) {\n      return;\n    }\n\n    if (focused.getAttribute(dragHandle.draggableId) !== id) {\n      return;\n    }\n\n    recordRef.current = id;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    isMountedRef.current = true;\n    return function clearFrameOnUnmount() {\n      isMountedRef.current = false;\n      var frameId = restoreFocusFrameRef.current;\n\n      if (frameId) {\n        cancelAnimationFrame(frameId);\n      }\n    };\n  }, []);\n  var marshal = useMemo(function () {\n    return {\n      register: register,\n      tryRecordFocus: tryRecordFocus,\n      tryRestoreFocusRecorded: tryRestoreFocusRecorded,\n      tryShiftRecord: tryShiftRecord\n    };\n  }, [register, tryRecordFocus, tryRestoreFocusRecorded, tryShiftRecord]);\n  return marshal;\n}\n\nfunction createRegistry() {\n  var entries = {\n    draggables: {},\n    droppables: {}\n  };\n  var subscribers = [];\n\n  function subscribe(cb) {\n    subscribers.push(cb);\n    return function unsubscribe() {\n      var index = subscribers.indexOf(cb);\n\n      if (index === -1) {\n        return;\n      }\n\n      subscribers.splice(index, 1);\n    };\n  }\n\n  function notify(event) {\n    if (subscribers.length) {\n      subscribers.forEach(function (cb) {\n        return cb(event);\n      });\n    }\n  }\n\n  function findDraggableById(id) {\n    return entries.draggables[id] || null;\n  }\n\n  function getDraggableById(id) {\n    var entry = findDraggableById(id);\n    !entry ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find draggable entry with id [\" + id + \"]\") : invariant(false) : void 0;\n    return entry;\n  }\n\n  var draggableAPI = {\n    register: function register(entry) {\n      entries.draggables[entry.descriptor.id] = entry;\n      notify({\n        type: 'ADDITION',\n        value: entry\n      });\n    },\n    update: function update(entry, last) {\n      var current = entries.draggables[last.descriptor.id];\n\n      if (!current) {\n        return;\n      }\n\n      if (current.uniqueId !== entry.uniqueId) {\n        return;\n      }\n\n      delete entries.draggables[last.descriptor.id];\n      entries.draggables[entry.descriptor.id] = entry;\n    },\n    unregister: function unregister(entry) {\n      var draggableId = entry.descriptor.id;\n      var current = findDraggableById(draggableId);\n\n      if (!current) {\n        return;\n      }\n\n      if (entry.uniqueId !== current.uniqueId) {\n        return;\n      }\n\n      delete entries.draggables[draggableId];\n      notify({\n        type: 'REMOVAL',\n        value: entry\n      });\n    },\n    getById: getDraggableById,\n    findById: findDraggableById,\n    exists: function exists(id) {\n      return Boolean(findDraggableById(id));\n    },\n    getAllByType: function getAllByType(type) {\n      return values(entries.draggables).filter(function (entry) {\n        return entry.descriptor.type === type;\n      });\n    }\n  };\n\n  function findDroppableById(id) {\n    return entries.droppables[id] || null;\n  }\n\n  function getDroppableById(id) {\n    var entry = findDroppableById(id);\n    !entry ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find droppable entry with id [\" + id + \"]\") : invariant(false) : void 0;\n    return entry;\n  }\n\n  var droppableAPI = {\n    register: function register(entry) {\n      entries.droppables[entry.descriptor.id] = entry;\n    },\n    unregister: function unregister(entry) {\n      var current = findDroppableById(entry.descriptor.id);\n\n      if (!current) {\n        return;\n      }\n\n      if (entry.uniqueId !== current.uniqueId) {\n        return;\n      }\n\n      delete entries.droppables[entry.descriptor.id];\n    },\n    getById: getDroppableById,\n    findById: findDroppableById,\n    exists: function exists(id) {\n      return Boolean(findDroppableById(id));\n    },\n    getAllByType: function getAllByType(type) {\n      return values(entries.droppables).filter(function (entry) {\n        return entry.descriptor.type === type;\n      });\n    }\n  };\n\n  function clean() {\n    entries.draggables = {};\n    entries.droppables = {};\n    subscribers.length = 0;\n  }\n\n  return {\n    draggable: draggableAPI,\n    droppable: droppableAPI,\n    subscribe: subscribe,\n    clean: clean\n  };\n}\n\nfunction useRegistry() {\n  var registry = useMemo(createRegistry, []);\n  useEffect(function () {\n    return function unmount() {\n      requestAnimationFrame(registry.clean);\n    };\n  }, [registry]);\n  return registry;\n}\n\nvar StoreContext = React.createContext(null);\n\nvar getBodyElement = (function () {\n  var body = document.body;\n  !body ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find document.body') : invariant(false) : void 0;\n  return body;\n});\n\nvar visuallyHidden = {\n  position: 'absolute',\n  width: '1px',\n  height: '1px',\n  margin: '-1px',\n  border: '0',\n  padding: '0',\n  overflow: 'hidden',\n  clip: 'rect(0 0 0 0)',\n  'clip-path': 'inset(100%)'\n};\n\nvar getId = function getId(contextId) {\n  return \"rbd-announcement-\" + contextId;\n};\nfunction useAnnouncer(contextId) {\n  var id = useMemo(function () {\n    return getId(contextId);\n  }, [contextId]);\n  var ref = useRef(null);\n  useEffect(function setup() {\n    var el = document.createElement('div');\n    ref.current = el;\n    el.id = id;\n    el.setAttribute('aria-live', 'assertive');\n    el.setAttribute('aria-atomic', 'true');\n\n    _extends(el.style, visuallyHidden);\n\n    getBodyElement().appendChild(el);\n    return function cleanup() {\n      setTimeout(function remove() {\n        var body = getBodyElement();\n\n        if (body.contains(el)) {\n          body.removeChild(el);\n        }\n\n        if (el === ref.current) {\n          ref.current = null;\n        }\n      });\n    };\n  }, [id]);\n  var announce = useCallback(function (message) {\n    var el = ref.current;\n\n    if (el) {\n      el.textContent = message;\n      return;\n    }\n\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      A screen reader message was trying to be announced but it was unable to do so.\\n      This can occur if you unmount your <DragDropContext /> in your onDragEnd.\\n      Consider calling provided.announce() before the unmount so that the instruction will\\n      not be lost for users relying on a screen reader.\\n\\n      Message not passed to screen reader:\\n\\n      \\\"\" + message + \"\\\"\\n    \") : void 0;\n  }, []);\n  return announce;\n}\n\nvar count = 0;\nvar defaults = {\n  separator: '::'\n};\nfunction reset() {\n  count = 0;\n}\nfunction useUniqueId(prefix, options) {\n  if (options === void 0) {\n    options = defaults;\n  }\n\n  return useMemo(function () {\n    return \"\" + prefix + options.separator + count++;\n  }, [options.separator, prefix]);\n}\n\nfunction getElementId(_ref) {\n  var contextId = _ref.contextId,\n      uniqueId = _ref.uniqueId;\n  return \"rbd-hidden-text-\" + contextId + \"-\" + uniqueId;\n}\nfunction useHiddenTextElement(_ref2) {\n  var contextId = _ref2.contextId,\n      text = _ref2.text;\n  var uniqueId = useUniqueId('hidden-text', {\n    separator: '-'\n  });\n  var id = useMemo(function () {\n    return getElementId({\n      contextId: contextId,\n      uniqueId: uniqueId\n    });\n  }, [uniqueId, contextId]);\n  useEffect(function mount() {\n    var el = document.createElement('div');\n    el.id = id;\n    el.textContent = text;\n    el.style.display = 'none';\n    getBodyElement().appendChild(el);\n    return function unmount() {\n      var body = getBodyElement();\n\n      if (body.contains(el)) {\n        body.removeChild(el);\n      }\n    };\n  }, [id, text]);\n  return id;\n}\n\nvar AppContext = React.createContext(null);\n\nvar peerDependencies = {\n\treact: \"^16.8.5 || ^17.0.0 || ^18.0.0\",\n\t\"react-dom\": \"^16.8.5 || ^17.0.0 || ^18.0.0\"\n};\n\nvar semver = /(\\d+)\\.(\\d+)\\.(\\d+)/;\n\nvar getVersion = function getVersion(value) {\n  var result = semver.exec(value);\n  !(result != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Unable to parse React version \" + value) : invariant(false) : void 0;\n  var major = Number(result[1]);\n  var minor = Number(result[2]);\n  var patch = Number(result[3]);\n  return {\n    major: major,\n    minor: minor,\n    patch: patch,\n    raw: value\n  };\n};\n\nvar isSatisfied = function isSatisfied(expected, actual) {\n  if (actual.major > expected.major) {\n    return true;\n  }\n\n  if (actual.major < expected.major) {\n    return false;\n  }\n\n  if (actual.minor > expected.minor) {\n    return true;\n  }\n\n  if (actual.minor < expected.minor) {\n    return false;\n  }\n\n  return actual.patch >= expected.patch;\n};\n\nvar checkReactVersion = (function (peerDepValue, actualValue) {\n  var peerDep = getVersion(peerDepValue);\n  var actual = getVersion(actualValue);\n\n  if (isSatisfied(peerDep, actual)) {\n    return;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    React version: [\" + actual.raw + \"]\\n    does not satisfy expected peer dependency version: [\" + peerDep.raw + \"]\\n\\n    This can result in run time bugs, and even fatal crashes\\n  \") : void 0;\n});\n\nvar suffix = \"\\n  We expect a html5 doctype: <!doctype html>\\n  This is to ensure consistent browser layout and measurement\\n\\n  More information: https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/guides/doctype.md\\n\";\nvar checkDoctype = (function (doc) {\n  var doctype = doc.doctype;\n\n  if (!doctype) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      No <!doctype html> found.\\n\\n      \" + suffix + \"\\n    \") : void 0;\n    return;\n  }\n\n  if (doctype.name.toLowerCase() !== 'html') {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Unexpected <!doctype> found: (\" + doctype.name + \")\\n\\n      \" + suffix + \"\\n    \") : void 0;\n  }\n\n  if (doctype.publicId !== '') {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Unexpected <!doctype> publicId found: (\" + doctype.publicId + \")\\n      A html5 doctype does not have a publicId\\n\\n      \" + suffix + \"\\n    \") : void 0;\n  }\n});\n\nfunction useDev(useHook) {\n  if (process.env.NODE_ENV !== 'production') {\n    useHook();\n  }\n}\n\nfunction useDevSetupWarning(fn, inputs) {\n  useDev(function () {\n    useEffect(function () {\n      try {\n        fn();\n      } catch (e) {\n        error(\"\\n          A setup problem was encountered.\\n\\n          > \" + e.message + \"\\n        \");\n      }\n    }, inputs);\n  });\n}\n\nfunction useStartupValidation() {\n  useDevSetupWarning(function () {\n    checkReactVersion(peerDependencies.react, React.version);\n    checkDoctype(document);\n  }, []);\n}\n\nfunction usePrevious(current) {\n  var ref = useRef(current);\n  useEffect(function () {\n    ref.current = current;\n  });\n  return ref;\n}\n\nfunction create() {\n  var lock = null;\n\n  function isClaimed() {\n    return Boolean(lock);\n  }\n\n  function isActive(value) {\n    return value === lock;\n  }\n\n  function claim(abandon) {\n    !!lock ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot claim lock as it is already claimed') : invariant(false) : void 0;\n    var newLock = {\n      abandon: abandon\n    };\n    lock = newLock;\n    return newLock;\n  }\n\n  function release() {\n    !lock ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot release lock when there is no lock') : invariant(false) : void 0;\n    lock = null;\n  }\n\n  function tryAbandon() {\n    if (lock) {\n      lock.abandon();\n      release();\n    }\n  }\n\n  return {\n    isClaimed: isClaimed,\n    isActive: isActive,\n    claim: claim,\n    release: release,\n    tryAbandon: tryAbandon\n  };\n}\n\nvar tab = 9;\nvar enter = 13;\nvar escape = 27;\nvar space = 32;\nvar pageUp = 33;\nvar pageDown = 34;\nvar end = 35;\nvar home = 36;\nvar arrowLeft = 37;\nvar arrowUp = 38;\nvar arrowRight = 39;\nvar arrowDown = 40;\n\nvar _preventedKeys;\nvar preventedKeys = (_preventedKeys = {}, _preventedKeys[enter] = true, _preventedKeys[tab] = true, _preventedKeys);\nvar preventStandardKeyEvents = (function (event) {\n  if (preventedKeys[event.keyCode]) {\n    event.preventDefault();\n  }\n});\n\nvar supportedEventName = function () {\n  var base = 'visibilitychange';\n\n  if (typeof document === 'undefined') {\n    return base;\n  }\n\n  var candidates = [base, \"ms\" + base, \"webkit\" + base, \"moz\" + base, \"o\" + base];\n  var supported = find(candidates, function (eventName) {\n    return \"on\" + eventName in document;\n  });\n  return supported || base;\n}();\n\nvar primaryButton = 0;\nvar sloppyClickThreshold = 5;\n\nfunction isSloppyClickThresholdExceeded(original, current) {\n  return Math.abs(current.x - original.x) >= sloppyClickThreshold || Math.abs(current.y - original.y) >= sloppyClickThreshold;\n}\n\nvar idle$1 = {\n  type: 'IDLE'\n};\n\nfunction getCaptureBindings(_ref) {\n  var cancel = _ref.cancel,\n      completed = _ref.completed,\n      getPhase = _ref.getPhase,\n      setPhase = _ref.setPhase;\n  return [{\n    eventName: 'mousemove',\n    fn: function fn(event) {\n      var button = event.button,\n          clientX = event.clientX,\n          clientY = event.clientY;\n\n      if (button !== primaryButton) {\n        return;\n      }\n\n      var point = {\n        x: clientX,\n        y: clientY\n      };\n      var phase = getPhase();\n\n      if (phase.type === 'DRAGGING') {\n        event.preventDefault();\n        phase.actions.move(point);\n        return;\n      }\n\n      !(phase.type === 'PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot be IDLE') : invariant(false) : void 0;\n      var pending = phase.point;\n\n      if (!isSloppyClickThresholdExceeded(pending, point)) {\n        return;\n      }\n\n      event.preventDefault();\n      var actions = phase.actions.fluidLift(point);\n      setPhase({\n        type: 'DRAGGING',\n        actions: actions\n      });\n    }\n  }, {\n    eventName: 'mouseup',\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n      phase.actions.drop({\n        shouldBlockNextClick: true\n      });\n      completed();\n    }\n  }, {\n    eventName: 'mousedown',\n    fn: function fn(event) {\n      if (getPhase().type === 'DRAGGING') {\n        event.preventDefault();\n      }\n\n      cancel();\n    }\n  }, {\n    eventName: 'keydown',\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type === 'PENDING') {\n        cancel();\n        return;\n      }\n\n      if (event.keyCode === escape) {\n        event.preventDefault();\n        cancel();\n        return;\n      }\n\n      preventStandardKeyEvents(event);\n    }\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'scroll',\n    options: {\n      passive: true,\n      capture: false\n    },\n    fn: function fn() {\n      if (getPhase().type === 'PENDING') {\n        cancel();\n      }\n    }\n  }, {\n    eventName: 'webkitmouseforcedown',\n    fn: function fn(event) {\n      var phase = getPhase();\n      !(phase.type !== 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Unexpected phase') : invariant(false) : void 0;\n\n      if (phase.actions.shouldRespectForcePress()) {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction useMouseSensor(api) {\n  var phaseRef = useRef(idle$1);\n  var unbindEventsRef = useRef(noop);\n  var startCaptureBinding = useMemo(function () {\n    return {\n      eventName: 'mousedown',\n      fn: function onMouseDown(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        if (event.button !== primaryButton) {\n          return;\n        }\n\n        if (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey) {\n          return;\n        }\n\n        var draggableId = api.findClosestDraggableId(event);\n\n        if (!draggableId) {\n          return;\n        }\n\n        var actions = api.tryGetLock(draggableId, stop, {\n          sourceEvent: event\n        });\n\n        if (!actions) {\n          return;\n        }\n\n        event.preventDefault();\n        var point = {\n          x: event.clientX,\n          y: event.clientY\n        };\n        unbindEventsRef.current();\n        startPendingDrag(actions, point);\n      }\n    };\n  }, [api]);\n  var preventForcePressBinding = useMemo(function () {\n    return {\n      eventName: 'webkitmouseforcewillbegin',\n      fn: function fn(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        var id = api.findClosestDraggableId(event);\n\n        if (!id) {\n          return;\n        }\n\n        var options = api.findOptionsForDraggable(id);\n\n        if (!options) {\n          return;\n        }\n\n        if (options.shouldRespectForcePress) {\n          return;\n        }\n\n        if (!api.canGetLock(id)) {\n          return;\n        }\n\n        event.preventDefault();\n      }\n    };\n  }, [api]);\n  var listenForCapture = useCallback(function listenForCapture() {\n    var options = {\n      passive: false,\n      capture: true\n    };\n    unbindEventsRef.current = bindEvents(window, [preventForcePressBinding, startCaptureBinding], options);\n  }, [preventForcePressBinding, startCaptureBinding]);\n  var stop = useCallback(function () {\n    var current = phaseRef.current;\n\n    if (current.type === 'IDLE') {\n      return;\n    }\n\n    phaseRef.current = idle$1;\n    unbindEventsRef.current();\n    listenForCapture();\n  }, [listenForCapture]);\n  var cancel = useCallback(function () {\n    var phase = phaseRef.current;\n    stop();\n\n    if (phase.type === 'DRAGGING') {\n      phase.actions.cancel({\n        shouldBlockNextClick: true\n      });\n    }\n\n    if (phase.type === 'PENDING') {\n      phase.actions.abort();\n    }\n  }, [stop]);\n  var bindCapturingEvents = useCallback(function bindCapturingEvents() {\n    var options = {\n      capture: true,\n      passive: false\n    };\n    var bindings = getCaptureBindings({\n      cancel: cancel,\n      completed: stop,\n      getPhase: function getPhase() {\n        return phaseRef.current;\n      },\n      setPhase: function setPhase(phase) {\n        phaseRef.current = phase;\n      }\n    });\n    unbindEventsRef.current = bindEvents(window, bindings, options);\n  }, [cancel, stop]);\n  var startPendingDrag = useCallback(function startPendingDrag(actions, point) {\n    !(phaseRef.current.type === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected to move from IDLE to PENDING drag') : invariant(false) : void 0;\n    phaseRef.current = {\n      type: 'PENDING',\n      point: point,\n      actions: actions\n    };\n    bindCapturingEvents();\n  }, [bindCapturingEvents]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n    };\n  }, [listenForCapture]);\n}\n\nvar _scrollJumpKeys;\n\nfunction noop$1() {}\n\nvar scrollJumpKeys = (_scrollJumpKeys = {}, _scrollJumpKeys[pageDown] = true, _scrollJumpKeys[pageUp] = true, _scrollJumpKeys[home] = true, _scrollJumpKeys[end] = true, _scrollJumpKeys);\n\nfunction getDraggingBindings(actions, stop) {\n  function cancel() {\n    stop();\n    actions.cancel();\n  }\n\n  function drop() {\n    stop();\n    actions.drop();\n  }\n\n  return [{\n    eventName: 'keydown',\n    fn: function fn(event) {\n      if (event.keyCode === escape) {\n        event.preventDefault();\n        cancel();\n        return;\n      }\n\n      if (event.keyCode === space) {\n        event.preventDefault();\n        drop();\n        return;\n      }\n\n      if (event.keyCode === arrowDown) {\n        event.preventDefault();\n        actions.moveDown();\n        return;\n      }\n\n      if (event.keyCode === arrowUp) {\n        event.preventDefault();\n        actions.moveUp();\n        return;\n      }\n\n      if (event.keyCode === arrowRight) {\n        event.preventDefault();\n        actions.moveRight();\n        return;\n      }\n\n      if (event.keyCode === arrowLeft) {\n        event.preventDefault();\n        actions.moveLeft();\n        return;\n      }\n\n      if (scrollJumpKeys[event.keyCode]) {\n        event.preventDefault();\n        return;\n      }\n\n      preventStandardKeyEvents(event);\n    }\n  }, {\n    eventName: 'mousedown',\n    fn: cancel\n  }, {\n    eventName: 'mouseup',\n    fn: cancel\n  }, {\n    eventName: 'click',\n    fn: cancel\n  }, {\n    eventName: 'touchstart',\n    fn: cancel\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'wheel',\n    fn: cancel,\n    options: {\n      passive: true\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction useKeyboardSensor(api) {\n  var unbindEventsRef = useRef(noop$1);\n  var startCaptureBinding = useMemo(function () {\n    return {\n      eventName: 'keydown',\n      fn: function onKeyDown(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        if (event.keyCode !== space) {\n          return;\n        }\n\n        var draggableId = api.findClosestDraggableId(event);\n\n        if (!draggableId) {\n          return;\n        }\n\n        var preDrag = api.tryGetLock(draggableId, stop, {\n          sourceEvent: event\n        });\n\n        if (!preDrag) {\n          return;\n        }\n\n        event.preventDefault();\n        var isCapturing = true;\n        var actions = preDrag.snapLift();\n        unbindEventsRef.current();\n\n        function stop() {\n          !isCapturing ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop capturing a keyboard drag when not capturing') : invariant(false) : void 0;\n          isCapturing = false;\n          unbindEventsRef.current();\n          listenForCapture();\n        }\n\n        unbindEventsRef.current = bindEvents(window, getDraggingBindings(actions, stop), {\n          capture: true,\n          passive: false\n        });\n      }\n    };\n  }, [api]);\n  var listenForCapture = useCallback(function tryStartCapture() {\n    var options = {\n      passive: false,\n      capture: true\n    };\n    unbindEventsRef.current = bindEvents(window, [startCaptureBinding], options);\n  }, [startCaptureBinding]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n    };\n  }, [listenForCapture]);\n}\n\nvar idle$2 = {\n  type: 'IDLE'\n};\nvar timeForLongPress = 120;\nvar forcePressThreshold = 0.15;\n\nfunction getWindowBindings(_ref) {\n  var cancel = _ref.cancel,\n      getPhase = _ref.getPhase;\n  return [{\n    eventName: 'orientationchange',\n    fn: cancel\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'contextmenu',\n    fn: function fn(event) {\n      event.preventDefault();\n    }\n  }, {\n    eventName: 'keydown',\n    fn: function fn(event) {\n      if (getPhase().type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      if (event.keyCode === escape) {\n        event.preventDefault();\n      }\n\n      cancel();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction getHandleBindings(_ref2) {\n  var cancel = _ref2.cancel,\n      completed = _ref2.completed,\n      getPhase = _ref2.getPhase;\n  return [{\n    eventName: 'touchmove',\n    options: {\n      capture: false\n    },\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      phase.hasMoved = true;\n      var _event$touches$ = event.touches[0],\n          clientX = _event$touches$.clientX,\n          clientY = _event$touches$.clientY;\n      var point = {\n        x: clientX,\n        y: clientY\n      };\n      event.preventDefault();\n      phase.actions.move(point);\n    }\n  }, {\n    eventName: 'touchend',\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n      phase.actions.drop({\n        shouldBlockNextClick: true\n      });\n      completed();\n    }\n  }, {\n    eventName: 'touchcancel',\n    fn: function fn(event) {\n      if (getPhase().type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n      cancel();\n    }\n  }, {\n    eventName: 'touchforcechange',\n    fn: function fn(event) {\n      var phase = getPhase();\n      !(phase.type !== 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n      var touch = event.touches[0];\n\n      if (!touch) {\n        return;\n      }\n\n      var isForcePress = touch.force >= forcePressThreshold;\n\n      if (!isForcePress) {\n        return;\n      }\n\n      var shouldRespect = phase.actions.shouldRespectForcePress();\n\n      if (phase.type === 'PENDING') {\n        if (shouldRespect) {\n          cancel();\n        }\n\n        return;\n      }\n\n      if (shouldRespect) {\n        if (phase.hasMoved) {\n          event.preventDefault();\n          return;\n        }\n\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction useTouchSensor(api) {\n  var phaseRef = useRef(idle$2);\n  var unbindEventsRef = useRef(noop);\n  var getPhase = useCallback(function getPhase() {\n    return phaseRef.current;\n  }, []);\n  var setPhase = useCallback(function setPhase(phase) {\n    phaseRef.current = phase;\n  }, []);\n  var startCaptureBinding = useMemo(function () {\n    return {\n      eventName: 'touchstart',\n      fn: function onTouchStart(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        var draggableId = api.findClosestDraggableId(event);\n\n        if (!draggableId) {\n          return;\n        }\n\n        var actions = api.tryGetLock(draggableId, stop, {\n          sourceEvent: event\n        });\n\n        if (!actions) {\n          return;\n        }\n\n        var touch = event.touches[0];\n        var clientX = touch.clientX,\n            clientY = touch.clientY;\n        var point = {\n          x: clientX,\n          y: clientY\n        };\n        unbindEventsRef.current();\n        startPendingDrag(actions, point);\n      }\n    };\n  }, [api]);\n  var listenForCapture = useCallback(function listenForCapture() {\n    var options = {\n      capture: true,\n      passive: false\n    };\n    unbindEventsRef.current = bindEvents(window, [startCaptureBinding], options);\n  }, [startCaptureBinding]);\n  var stop = useCallback(function () {\n    var current = phaseRef.current;\n\n    if (current.type === 'IDLE') {\n      return;\n    }\n\n    if (current.type === 'PENDING') {\n      clearTimeout(current.longPressTimerId);\n    }\n\n    setPhase(idle$2);\n    unbindEventsRef.current();\n    listenForCapture();\n  }, [listenForCapture, setPhase]);\n  var cancel = useCallback(function () {\n    var phase = phaseRef.current;\n    stop();\n\n    if (phase.type === 'DRAGGING') {\n      phase.actions.cancel({\n        shouldBlockNextClick: true\n      });\n    }\n\n    if (phase.type === 'PENDING') {\n      phase.actions.abort();\n    }\n  }, [stop]);\n  var bindCapturingEvents = useCallback(function bindCapturingEvents() {\n    var options = {\n      capture: true,\n      passive: false\n    };\n    var args = {\n      cancel: cancel,\n      completed: stop,\n      getPhase: getPhase\n    };\n    var unbindTarget = bindEvents(window, getHandleBindings(args), options);\n    var unbindWindow = bindEvents(window, getWindowBindings(args), options);\n\n    unbindEventsRef.current = function unbindAll() {\n      unbindTarget();\n      unbindWindow();\n    };\n  }, [cancel, getPhase, stop]);\n  var startDragging = useCallback(function startDragging() {\n    var phase = getPhase();\n    !(phase.type === 'PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot start dragging from phase \" + phase.type) : invariant(false) : void 0;\n    var actions = phase.actions.fluidLift(phase.point);\n    setPhase({\n      type: 'DRAGGING',\n      actions: actions,\n      hasMoved: false\n    });\n  }, [getPhase, setPhase]);\n  var startPendingDrag = useCallback(function startPendingDrag(actions, point) {\n    !(getPhase().type === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected to move from IDLE to PENDING drag') : invariant(false) : void 0;\n    var longPressTimerId = setTimeout(startDragging, timeForLongPress);\n    setPhase({\n      type: 'PENDING',\n      point: point,\n      actions: actions,\n      longPressTimerId: longPressTimerId\n    });\n    bindCapturingEvents();\n  }, [bindCapturingEvents, getPhase, setPhase, startDragging]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n      var phase = getPhase();\n\n      if (phase.type === 'PENDING') {\n        clearTimeout(phase.longPressTimerId);\n        setPhase(idle$2);\n      }\n    };\n  }, [getPhase, listenForCapture, setPhase]);\n  useIsomorphicLayoutEffect(function webkitHack() {\n    var unbind = bindEvents(window, [{\n      eventName: 'touchmove',\n      fn: function fn() {},\n      options: {\n        capture: false,\n        passive: false\n      }\n    }]);\n    return unbind;\n  }, []);\n}\n\nfunction useValidateSensorHooks(sensorHooks) {\n  useDev(function () {\n    var previousRef = usePrevious(sensorHooks);\n    useDevSetupWarning(function () {\n      !(previousRef.current.length === sensorHooks.length) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot change the amount of sensor hooks after mounting') : invariant(false) : void 0;\n    });\n  });\n}\n\nvar interactiveTagNames = {\n  input: true,\n  button: true,\n  textarea: true,\n  select: true,\n  option: true,\n  optgroup: true,\n  video: true,\n  audio: true\n};\n\nfunction isAnInteractiveElement(parent, current) {\n  if (current == null) {\n    return false;\n  }\n\n  var hasAnInteractiveTag = Boolean(interactiveTagNames[current.tagName.toLowerCase()]);\n\n  if (hasAnInteractiveTag) {\n    return true;\n  }\n\n  var attribute = current.getAttribute('contenteditable');\n\n  if (attribute === 'true' || attribute === '') {\n    return true;\n  }\n\n  if (current === parent) {\n    return false;\n  }\n\n  return isAnInteractiveElement(parent, current.parentElement);\n}\n\nfunction isEventInInteractiveElement(draggable, event) {\n  var target = event.target;\n\n  if (!isHtmlElement(target)) {\n    return false;\n  }\n\n  return isAnInteractiveElement(draggable, target);\n}\n\nvar getBorderBoxCenterPosition = (function (el) {\n  return getRect(el.getBoundingClientRect()).center;\n});\n\nfunction isElement(el) {\n  return el instanceof getWindowFromEl(el).Element;\n}\n\nvar supportedMatchesName = function () {\n  var base = 'matches';\n\n  if (typeof document === 'undefined') {\n    return base;\n  }\n\n  var candidates = [base, 'msMatchesSelector', 'webkitMatchesSelector'];\n  var value = find(candidates, function (name) {\n    return name in Element.prototype;\n  });\n  return value || base;\n}();\n\nfunction closestPonyfill(el, selector) {\n  if (el == null) {\n    return null;\n  }\n\n  if (el[supportedMatchesName](selector)) {\n    return el;\n  }\n\n  return closestPonyfill(el.parentElement, selector);\n}\n\nfunction closest$1(el, selector) {\n  if (el.closest) {\n    return el.closest(selector);\n  }\n\n  return closestPonyfill(el, selector);\n}\n\nfunction getSelector(contextId) {\n  return \"[\" + dragHandle.contextId + \"=\\\"\" + contextId + \"\\\"]\";\n}\n\nfunction findClosestDragHandleFromEvent(contextId, event) {\n  var target = event.target;\n\n  if (!isElement(target)) {\n    process.env.NODE_ENV !== \"production\" ? warning('event.target must be a Element') : void 0;\n    return null;\n  }\n\n  var selector = getSelector(contextId);\n  var handle = closest$1(target, selector);\n\n  if (!handle) {\n    return null;\n  }\n\n  if (!isHtmlElement(handle)) {\n    process.env.NODE_ENV !== \"production\" ? warning('drag handle must be a HTMLElement') : void 0;\n    return null;\n  }\n\n  return handle;\n}\n\nfunction tryGetClosestDraggableIdFromEvent(contextId, event) {\n  var handle = findClosestDragHandleFromEvent(contextId, event);\n\n  if (!handle) {\n    return null;\n  }\n\n  return handle.getAttribute(dragHandle.draggableId);\n}\n\nfunction findDraggable(contextId, draggableId) {\n  var selector = \"[\" + draggable.contextId + \"=\\\"\" + contextId + \"\\\"]\";\n  var possible = toArray(document.querySelectorAll(selector));\n  var draggable$1 = find(possible, function (el) {\n    return el.getAttribute(draggable.id) === draggableId;\n  });\n\n  if (!draggable$1) {\n    return null;\n  }\n\n  if (!isHtmlElement(draggable$1)) {\n    process.env.NODE_ENV !== \"production\" ? warning('Draggable element is not a HTMLElement') : void 0;\n    return null;\n  }\n\n  return draggable$1;\n}\n\nfunction preventDefault(event) {\n  event.preventDefault();\n}\n\nfunction _isActive(_ref) {\n  var expected = _ref.expected,\n      phase = _ref.phase,\n      isLockActive = _ref.isLockActive,\n      shouldWarn = _ref.shouldWarn;\n\n  if (!isLockActive()) {\n    if (shouldWarn) {\n      process.env.NODE_ENV !== \"production\" ? warning(\"\\n        Cannot perform action.\\n        The sensor no longer has an action lock.\\n\\n        Tips:\\n\\n        - Throw away your action handlers when forceStop() is called\\n        - Check actions.isActive() if you really need to\\n      \") : void 0;\n    }\n\n    return false;\n  }\n\n  if (expected !== phase) {\n    if (shouldWarn) {\n      process.env.NODE_ENV !== \"production\" ? warning(\"\\n        Cannot perform action.\\n        The actions you used belong to an outdated phase\\n\\n        Current phase: \" + expected + \"\\n        You called an action from outdated phase: \" + phase + \"\\n\\n        Tips:\\n\\n        - Do not use preDragActions actions after calling preDragActions.lift()\\n      \") : void 0;\n    }\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction canStart(_ref2) {\n  var lockAPI = _ref2.lockAPI,\n      store = _ref2.store,\n      registry = _ref2.registry,\n      draggableId = _ref2.draggableId;\n\n  if (lockAPI.isClaimed()) {\n    return false;\n  }\n\n  var entry = registry.draggable.findById(draggableId);\n\n  if (!entry) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find draggable with id: \" + draggableId) : void 0;\n    return false;\n  }\n\n  if (!entry.options.isEnabled) {\n    return false;\n  }\n\n  if (!canStartDrag(store.getState(), draggableId)) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction tryStart(_ref3) {\n  var lockAPI = _ref3.lockAPI,\n      contextId = _ref3.contextId,\n      store = _ref3.store,\n      registry = _ref3.registry,\n      draggableId = _ref3.draggableId,\n      forceSensorStop = _ref3.forceSensorStop,\n      sourceEvent = _ref3.sourceEvent;\n  var shouldStart = canStart({\n    lockAPI: lockAPI,\n    store: store,\n    registry: registry,\n    draggableId: draggableId\n  });\n\n  if (!shouldStart) {\n    return null;\n  }\n\n  var entry = registry.draggable.getById(draggableId);\n  var el = findDraggable(contextId, entry.descriptor.id);\n\n  if (!el) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find draggable element with id: \" + draggableId) : void 0;\n    return null;\n  }\n\n  if (sourceEvent && !entry.options.canDragInteractiveElements && isEventInInteractiveElement(el, sourceEvent)) {\n    return null;\n  }\n\n  var lock = lockAPI.claim(forceSensorStop || noop);\n  var phase = 'PRE_DRAG';\n\n  function getShouldRespectForcePress() {\n    return entry.options.shouldRespectForcePress;\n  }\n\n  function isLockActive() {\n    return lockAPI.isActive(lock);\n  }\n\n  function tryDispatch(expected, getAction) {\n    if (_isActive({\n      expected: expected,\n      phase: phase,\n      isLockActive: isLockActive,\n      shouldWarn: true\n    })) {\n      store.dispatch(getAction());\n    }\n  }\n\n  var tryDispatchWhenDragging = tryDispatch.bind(null, 'DRAGGING');\n\n  function lift$1(args) {\n    function completed() {\n      lockAPI.release();\n      phase = 'COMPLETED';\n    }\n\n    if (phase !== 'PRE_DRAG') {\n      completed();\n      !(phase === 'PRE_DRAG') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot lift in phase \" + phase) : invariant(false) : void 0;\n    }\n\n    store.dispatch(lift(args.liftActionArgs));\n    phase = 'DRAGGING';\n\n    function finish(reason, options) {\n      if (options === void 0) {\n        options = {\n          shouldBlockNextClick: false\n        };\n      }\n\n      args.cleanup();\n\n      if (options.shouldBlockNextClick) {\n        var unbind = bindEvents(window, [{\n          eventName: 'click',\n          fn: preventDefault,\n          options: {\n            once: true,\n            passive: false,\n            capture: true\n          }\n        }]);\n        setTimeout(unbind);\n      }\n\n      completed();\n      store.dispatch(drop({\n        reason: reason\n      }));\n    }\n\n    return _extends({\n      isActive: function isActive() {\n        return _isActive({\n          expected: 'DRAGGING',\n          phase: phase,\n          isLockActive: isLockActive,\n          shouldWarn: false\n        });\n      },\n      shouldRespectForcePress: getShouldRespectForcePress,\n      drop: function drop(options) {\n        return finish('DROP', options);\n      },\n      cancel: function cancel(options) {\n        return finish('CANCEL', options);\n      }\n    }, args.actions);\n  }\n\n  function fluidLift(clientSelection) {\n    var move$1 = rafSchd(function (client) {\n      tryDispatchWhenDragging(function () {\n        return move({\n          client: client\n        });\n      });\n    });\n    var api = lift$1({\n      liftActionArgs: {\n        id: draggableId,\n        clientSelection: clientSelection,\n        movementMode: 'FLUID'\n      },\n      cleanup: function cleanup() {\n        return move$1.cancel();\n      },\n      actions: {\n        move: move$1\n      }\n    });\n    return _extends({}, api, {\n      move: move$1\n    });\n  }\n\n  function snapLift() {\n    var actions = {\n      moveUp: function moveUp$1() {\n        return tryDispatchWhenDragging(moveUp);\n      },\n      moveRight: function moveRight$1() {\n        return tryDispatchWhenDragging(moveRight);\n      },\n      moveDown: function moveDown$1() {\n        return tryDispatchWhenDragging(moveDown);\n      },\n      moveLeft: function moveLeft$1() {\n        return tryDispatchWhenDragging(moveLeft);\n      }\n    };\n    return lift$1({\n      liftActionArgs: {\n        id: draggableId,\n        clientSelection: getBorderBoxCenterPosition(el),\n        movementMode: 'SNAP'\n      },\n      cleanup: noop,\n      actions: actions\n    });\n  }\n\n  function abortPreDrag() {\n    var shouldRelease = _isActive({\n      expected: 'PRE_DRAG',\n      phase: phase,\n      isLockActive: isLockActive,\n      shouldWarn: true\n    });\n\n    if (shouldRelease) {\n      lockAPI.release();\n    }\n  }\n\n  var preDrag = {\n    isActive: function isActive() {\n      return _isActive({\n        expected: 'PRE_DRAG',\n        phase: phase,\n        isLockActive: isLockActive,\n        shouldWarn: false\n      });\n    },\n    shouldRespectForcePress: getShouldRespectForcePress,\n    fluidLift: fluidLift,\n    snapLift: snapLift,\n    abort: abortPreDrag\n  };\n  return preDrag;\n}\n\nvar defaultSensors = [useMouseSensor, useKeyboardSensor, useTouchSensor];\nfunction useSensorMarshal(_ref4) {\n  var contextId = _ref4.contextId,\n      store = _ref4.store,\n      registry = _ref4.registry,\n      customSensors = _ref4.customSensors,\n      enableDefaultSensors = _ref4.enableDefaultSensors;\n  var useSensors = [].concat(enableDefaultSensors ? defaultSensors : [], customSensors || []);\n  var lockAPI = useState(function () {\n    return create();\n  })[0];\n  var tryAbandonLock = useCallback(function tryAbandonLock(previous, current) {\n    if (previous.isDragging && !current.isDragging) {\n      lockAPI.tryAbandon();\n    }\n  }, [lockAPI]);\n  useIsomorphicLayoutEffect(function listenToStore() {\n    var previous = store.getState();\n    var unsubscribe = store.subscribe(function () {\n      var current = store.getState();\n      tryAbandonLock(previous, current);\n      previous = current;\n    });\n    return unsubscribe;\n  }, [lockAPI, store, tryAbandonLock]);\n  useIsomorphicLayoutEffect(function () {\n    return lockAPI.tryAbandon;\n  }, [lockAPI.tryAbandon]);\n  var canGetLock = useCallback(function (draggableId) {\n    return canStart({\n      lockAPI: lockAPI,\n      registry: registry,\n      store: store,\n      draggableId: draggableId\n    });\n  }, [lockAPI, registry, store]);\n  var tryGetLock = useCallback(function (draggableId, forceStop, options) {\n    return tryStart({\n      lockAPI: lockAPI,\n      registry: registry,\n      contextId: contextId,\n      store: store,\n      draggableId: draggableId,\n      forceSensorStop: forceStop,\n      sourceEvent: options && options.sourceEvent ? options.sourceEvent : null\n    });\n  }, [contextId, lockAPI, registry, store]);\n  var findClosestDraggableId = useCallback(function (event) {\n    return tryGetClosestDraggableIdFromEvent(contextId, event);\n  }, [contextId]);\n  var findOptionsForDraggable = useCallback(function (id) {\n    var entry = registry.draggable.findById(id);\n    return entry ? entry.options : null;\n  }, [registry.draggable]);\n  var tryReleaseLock = useCallback(function tryReleaseLock() {\n    if (!lockAPI.isClaimed()) {\n      return;\n    }\n\n    lockAPI.tryAbandon();\n\n    if (store.getState().phase !== 'IDLE') {\n      store.dispatch(flush());\n    }\n  }, [lockAPI, store]);\n  var isLockClaimed = useCallback(lockAPI.isClaimed, [lockAPI]);\n  var api = useMemo(function () {\n    return {\n      canGetLock: canGetLock,\n      tryGetLock: tryGetLock,\n      findClosestDraggableId: findClosestDraggableId,\n      findOptionsForDraggable: findOptionsForDraggable,\n      tryReleaseLock: tryReleaseLock,\n      isLockClaimed: isLockClaimed\n    };\n  }, [canGetLock, tryGetLock, findClosestDraggableId, findOptionsForDraggable, tryReleaseLock, isLockClaimed]);\n  useValidateSensorHooks(useSensors);\n\n  for (var i = 0; i < useSensors.length; i++) {\n    useSensors[i](api);\n  }\n}\n\nvar createResponders = function createResponders(props) {\n  return {\n    onBeforeCapture: props.onBeforeCapture,\n    onBeforeDragStart: props.onBeforeDragStart,\n    onDragStart: props.onDragStart,\n    onDragEnd: props.onDragEnd,\n    onDragUpdate: props.onDragUpdate\n  };\n};\n\nfunction getStore(lazyRef) {\n  !lazyRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find store from lazy ref') : invariant(false) : void 0;\n  return lazyRef.current;\n}\n\nfunction App(props) {\n  var contextId = props.contextId,\n      setCallbacks = props.setCallbacks,\n      sensors = props.sensors,\n      nonce = props.nonce,\n      dragHandleUsageInstructions = props.dragHandleUsageInstructions;\n  var lazyStoreRef = useRef(null);\n  useStartupValidation();\n  var lastPropsRef = usePrevious(props);\n  var getResponders = useCallback(function () {\n    return createResponders(lastPropsRef.current);\n  }, [lastPropsRef]);\n  var announce = useAnnouncer(contextId);\n  var dragHandleUsageInstructionsId = useHiddenTextElement({\n    contextId: contextId,\n    text: dragHandleUsageInstructions\n  });\n  var styleMarshal = useStyleMarshal(contextId, nonce);\n  var lazyDispatch = useCallback(function (action) {\n    getStore(lazyStoreRef).dispatch(action);\n  }, []);\n  var marshalCallbacks = useMemo(function () {\n    return bindActionCreators({\n      publishWhileDragging: publishWhileDragging,\n      updateDroppableScroll: updateDroppableScroll,\n      updateDroppableIsEnabled: updateDroppableIsEnabled,\n      updateDroppableIsCombineEnabled: updateDroppableIsCombineEnabled,\n      collectionStarting: collectionStarting\n    }, lazyDispatch);\n  }, [lazyDispatch]);\n  var registry = useRegistry();\n  var dimensionMarshal = useMemo(function () {\n    return createDimensionMarshal(registry, marshalCallbacks);\n  }, [registry, marshalCallbacks]);\n  var autoScroller = useMemo(function () {\n    return createAutoScroller(_extends({\n      scrollWindow: scrollWindow,\n      scrollDroppable: dimensionMarshal.scrollDroppable\n    }, bindActionCreators({\n      move: move\n    }, lazyDispatch)));\n  }, [dimensionMarshal.scrollDroppable, lazyDispatch]);\n  var focusMarshal = useFocusMarshal(contextId);\n  var store = useMemo(function () {\n    return createStore({\n      announce: announce,\n      autoScroller: autoScroller,\n      dimensionMarshal: dimensionMarshal,\n      focusMarshal: focusMarshal,\n      getResponders: getResponders,\n      styleMarshal: styleMarshal\n    });\n  }, [announce, autoScroller, dimensionMarshal, focusMarshal, getResponders, styleMarshal]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (lazyStoreRef.current && lazyStoreRef.current !== store) {\n      process.env.NODE_ENV !== \"production\" ? warning('unexpected store change') : void 0;\n    }\n  }\n\n  lazyStoreRef.current = store;\n  var tryResetStore = useCallback(function () {\n    var current = getStore(lazyStoreRef);\n    var state = current.getState();\n\n    if (state.phase !== 'IDLE') {\n      current.dispatch(flush());\n    }\n  }, []);\n  var isDragging = useCallback(function () {\n    var state = getStore(lazyStoreRef).getState();\n    return state.isDragging || state.phase === 'DROP_ANIMATING';\n  }, []);\n  var appCallbacks = useMemo(function () {\n    return {\n      isDragging: isDragging,\n      tryAbort: tryResetStore\n    };\n  }, [isDragging, tryResetStore]);\n  setCallbacks(appCallbacks);\n  var getCanLift = useCallback(function (id) {\n    return canStartDrag(getStore(lazyStoreRef).getState(), id);\n  }, []);\n  var getIsMovementAllowed = useCallback(function () {\n    return isMovementAllowed(getStore(lazyStoreRef).getState());\n  }, []);\n  var appContext = useMemo(function () {\n    return {\n      marshal: dimensionMarshal,\n      focus: focusMarshal,\n      contextId: contextId,\n      canLift: getCanLift,\n      isMovementAllowed: getIsMovementAllowed,\n      dragHandleUsageInstructionsId: dragHandleUsageInstructionsId,\n      registry: registry\n    };\n  }, [contextId, dimensionMarshal, dragHandleUsageInstructionsId, focusMarshal, getCanLift, getIsMovementAllowed, registry]);\n  useSensorMarshal({\n    contextId: contextId,\n    store: store,\n    registry: registry,\n    customSensors: sensors,\n    enableDefaultSensors: props.enableDefaultSensors !== false\n  });\n  useEffect(function () {\n    return tryResetStore;\n  }, [tryResetStore]);\n  return React.createElement(AppContext.Provider, {\n    value: appContext\n  }, React.createElement(Provider, {\n    context: StoreContext,\n    store: store\n  }, props.children));\n}\n\nvar count$1 = 0;\nfunction reset$1() {\n  count$1 = 0;\n}\nfunction useInstanceCount() {\n  return useMemo(function () {\n    return \"\" + count$1++;\n  }, []);\n}\n\nfunction resetServerContext() {\n  reset$1();\n  reset();\n}\nfunction DragDropContext(props) {\n  var contextId = useInstanceCount();\n  var dragHandleUsageInstructions = props.dragHandleUsageInstructions || preset.dragHandleUsageInstructions;\n  return React.createElement(ErrorBoundary, null, function (setCallbacks) {\n    return React.createElement(App, {\n      nonce: props.nonce,\n      contextId: contextId,\n      setCallbacks: setCallbacks,\n      dragHandleUsageInstructions: dragHandleUsageInstructions,\n      enableDefaultSensors: props.enableDefaultSensors,\n      sensors: props.sensors,\n      onBeforeCapture: props.onBeforeCapture,\n      onBeforeDragStart: props.onBeforeDragStart,\n      onDragStart: props.onDragStart,\n      onDragUpdate: props.onDragUpdate,\n      onDragEnd: props.onDragEnd\n    }, props.children);\n  });\n}\n\nvar isEqual$1 = function isEqual(base) {\n  return function (value) {\n    return base === value;\n  };\n};\n\nvar isScroll = isEqual$1('scroll');\nvar isAuto = isEqual$1('auto');\nvar isVisible$1 = isEqual$1('visible');\n\nvar isEither = function isEither(overflow, fn) {\n  return fn(overflow.overflowX) || fn(overflow.overflowY);\n};\n\nvar isBoth = function isBoth(overflow, fn) {\n  return fn(overflow.overflowX) && fn(overflow.overflowY);\n};\n\nvar isElementScrollable = function isElementScrollable(el) {\n  var style = window.getComputedStyle(el);\n  var overflow = {\n    overflowX: style.overflowX,\n    overflowY: style.overflowY\n  };\n  return isEither(overflow, isScroll) || isEither(overflow, isAuto);\n};\n\nvar isBodyScrollable = function isBodyScrollable() {\n  if (process.env.NODE_ENV === 'production') {\n    return false;\n  }\n\n  var body = getBodyElement();\n  var html = document.documentElement;\n  !html ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n\n  if (!isElementScrollable(body)) {\n    return false;\n  }\n\n  var htmlStyle = window.getComputedStyle(html);\n  var htmlOverflow = {\n    overflowX: htmlStyle.overflowX,\n    overflowY: htmlStyle.overflowY\n  };\n\n  if (isBoth(htmlOverflow, isVisible$1)) {\n    return false;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    We have detected that your <body> element might be a scroll container.\\n    We have found no reliable way of detecting whether the <body> element is a scroll container.\\n    Under most circumstances a <body> scroll bar will be on the <html> element (document.documentElement)\\n\\n    Because we cannot determine if the <body> is a scroll container, and generally it is not one,\\n    we will be treating the <body> as *not* a scroll container\\n\\n    More information: https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/guides/how-we-detect-scroll-containers.md\\n  \") : void 0;\n  return false;\n};\n\nvar getClosestScrollable = function getClosestScrollable(el) {\n  if (el == null) {\n    return null;\n  }\n\n  if (el === document.body) {\n    return isBodyScrollable() ? el : null;\n  }\n\n  if (el === document.documentElement) {\n    return null;\n  }\n\n  if (!isElementScrollable(el)) {\n    return getClosestScrollable(el.parentElement);\n  }\n\n  return el;\n};\n\nvar checkForNestedScrollContainers = (function (scrollable) {\n  if (!scrollable) {\n    return;\n  }\n\n  var anotherScrollParent = getClosestScrollable(scrollable.parentElement);\n\n  if (!anotherScrollParent) {\n    return;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    Droppable: unsupported nested scroll container detected.\\n    A Droppable can only have one scroll parent (which can be itself)\\n    Nested scroll containers are currently not supported.\\n\\n    We hope to support nested scroll containers soon: https://github.com/atlassian/react-beautiful-dnd/issues/131\\n  \") : void 0;\n});\n\nvar getScroll$1 = (function (el) {\n  return {\n    x: el.scrollLeft,\n    y: el.scrollTop\n  };\n});\n\nvar getIsFixed = function getIsFixed(el) {\n  if (!el) {\n    return false;\n  }\n\n  var style = window.getComputedStyle(el);\n\n  if (style.position === 'fixed') {\n    return true;\n  }\n\n  return getIsFixed(el.parentElement);\n};\n\nvar getEnv = (function (start) {\n  var closestScrollable = getClosestScrollable(start);\n  var isFixedOnPage = getIsFixed(start);\n  return {\n    closestScrollable: closestScrollable,\n    isFixedOnPage: isFixedOnPage\n  };\n});\n\nvar getDroppableDimension = (function (_ref) {\n  var descriptor = _ref.descriptor,\n      isEnabled = _ref.isEnabled,\n      isCombineEnabled = _ref.isCombineEnabled,\n      isFixedOnPage = _ref.isFixedOnPage,\n      direction = _ref.direction,\n      client = _ref.client,\n      page = _ref.page,\n      closest = _ref.closest;\n\n  var frame = function () {\n    if (!closest) {\n      return null;\n    }\n\n    var scrollSize = closest.scrollSize,\n        frameClient = closest.client;\n    var maxScroll = getMaxScroll({\n      scrollHeight: scrollSize.scrollHeight,\n      scrollWidth: scrollSize.scrollWidth,\n      height: frameClient.paddingBox.height,\n      width: frameClient.paddingBox.width\n    });\n    return {\n      pageMarginBox: closest.page.marginBox,\n      frameClient: frameClient,\n      scrollSize: scrollSize,\n      shouldClipSubject: closest.shouldClipSubject,\n      scroll: {\n        initial: closest.scroll,\n        current: closest.scroll,\n        max: maxScroll,\n        diff: {\n          value: origin,\n          displacement: origin\n        }\n      }\n    };\n  }();\n\n  var axis = direction === 'vertical' ? vertical : horizontal;\n  var subject = getSubject({\n    page: page,\n    withPlaceholder: null,\n    axis: axis,\n    frame: frame\n  });\n  var dimension = {\n    descriptor: descriptor,\n    isCombineEnabled: isCombineEnabled,\n    isFixedOnPage: isFixedOnPage,\n    axis: axis,\n    isEnabled: isEnabled,\n    client: client,\n    page: page,\n    frame: frame,\n    subject: subject\n  };\n  return dimension;\n});\n\nvar getClient = function getClient(targetRef, closestScrollable) {\n  var base = getBox(targetRef);\n\n  if (!closestScrollable) {\n    return base;\n  }\n\n  if (targetRef !== closestScrollable) {\n    return base;\n  }\n\n  var top = base.paddingBox.top - closestScrollable.scrollTop;\n  var left = base.paddingBox.left - closestScrollable.scrollLeft;\n  var bottom = top + closestScrollable.scrollHeight;\n  var right = left + closestScrollable.scrollWidth;\n  var paddingBox = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left\n  };\n  var borderBox = expand(paddingBox, base.border);\n  var client = createBox({\n    borderBox: borderBox,\n    margin: base.margin,\n    border: base.border,\n    padding: base.padding\n  });\n  return client;\n};\n\nvar getDimension = (function (_ref) {\n  var ref = _ref.ref,\n      descriptor = _ref.descriptor,\n      env = _ref.env,\n      windowScroll = _ref.windowScroll,\n      direction = _ref.direction,\n      isDropDisabled = _ref.isDropDisabled,\n      isCombineEnabled = _ref.isCombineEnabled,\n      shouldClipSubject = _ref.shouldClipSubject;\n  var closestScrollable = env.closestScrollable;\n  var client = getClient(ref, closestScrollable);\n  var page = withScroll(client, windowScroll);\n\n  var closest = function () {\n    if (!closestScrollable) {\n      return null;\n    }\n\n    var frameClient = getBox(closestScrollable);\n    var scrollSize = {\n      scrollHeight: closestScrollable.scrollHeight,\n      scrollWidth: closestScrollable.scrollWidth\n    };\n    return {\n      client: frameClient,\n      page: withScroll(frameClient, windowScroll),\n      scroll: getScroll$1(closestScrollable),\n      scrollSize: scrollSize,\n      shouldClipSubject: shouldClipSubject\n    };\n  }();\n\n  var dimension = getDroppableDimension({\n    descriptor: descriptor,\n    isEnabled: !isDropDisabled,\n    isCombineEnabled: isCombineEnabled,\n    isFixedOnPage: env.isFixedOnPage,\n    direction: direction,\n    client: client,\n    page: page,\n    closest: closest\n  });\n  return dimension;\n});\n\nvar immediate = {\n  passive: false\n};\nvar delayed = {\n  passive: true\n};\nvar getListenerOptions = (function (options) {\n  return options.shouldPublishImmediately ? immediate : delayed;\n});\n\nfunction useRequiredContext(Context) {\n  var result = useContext(Context);\n  !result ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find required context') : invariant(false) : void 0;\n  return result;\n}\n\nvar getClosestScrollableFromDrag = function getClosestScrollableFromDrag(dragging) {\n  return dragging && dragging.env.closestScrollable || null;\n};\n\nfunction useDroppablePublisher(args) {\n  var whileDraggingRef = useRef(null);\n  var appContext = useRequiredContext(AppContext);\n  var uniqueId = useUniqueId('droppable');\n  var registry = appContext.registry,\n      marshal = appContext.marshal;\n  var previousRef = usePrevious(args);\n  var descriptor = useMemo(function () {\n    return {\n      id: args.droppableId,\n      type: args.type,\n      mode: args.mode\n    };\n  }, [args.droppableId, args.mode, args.type]);\n  var publishedDescriptorRef = useRef(descriptor);\n  var memoizedUpdateScroll = useMemo(function () {\n    return memoizeOne(function (x, y) {\n      !whileDraggingRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only update scroll when dragging') : invariant(false) : void 0;\n      var scroll = {\n        x: x,\n        y: y\n      };\n      marshal.updateDroppableScroll(descriptor.id, scroll);\n    });\n  }, [descriptor.id, marshal]);\n  var getClosestScroll = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n\n    if (!dragging || !dragging.env.closestScrollable) {\n      return origin;\n    }\n\n    return getScroll$1(dragging.env.closestScrollable);\n  }, []);\n  var updateScroll = useCallback(function () {\n    var scroll = getClosestScroll();\n    memoizedUpdateScroll(scroll.x, scroll.y);\n  }, [getClosestScroll, memoizedUpdateScroll]);\n  var scheduleScrollUpdate = useMemo(function () {\n    return rafSchd(updateScroll);\n  }, [updateScroll]);\n  var onClosestScroll = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n    var closest = getClosestScrollableFromDrag(dragging);\n    !(dragging && closest) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find scroll options while scrolling') : invariant(false) : void 0;\n    var options = dragging.scrollOptions;\n\n    if (options.shouldPublishImmediately) {\n      updateScroll();\n      return;\n    }\n\n    scheduleScrollUpdate();\n  }, [scheduleScrollUpdate, updateScroll]);\n  var getDimensionAndWatchScroll = useCallback(function (windowScroll, options) {\n    !!whileDraggingRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot collect a droppable while a drag is occurring') : invariant(false) : void 0;\n    var previous = previousRef.current;\n    var ref = previous.getDroppableRef();\n    !ref ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot collect without a droppable ref') : invariant(false) : void 0;\n    var env = getEnv(ref);\n    var dragging = {\n      ref: ref,\n      descriptor: descriptor,\n      env: env,\n      scrollOptions: options\n    };\n    whileDraggingRef.current = dragging;\n    var dimension = getDimension({\n      ref: ref,\n      descriptor: descriptor,\n      env: env,\n      windowScroll: windowScroll,\n      direction: previous.direction,\n      isDropDisabled: previous.isDropDisabled,\n      isCombineEnabled: previous.isCombineEnabled,\n      shouldClipSubject: !previous.ignoreContainerClipping\n    });\n    var scrollable = env.closestScrollable;\n\n    if (scrollable) {\n      scrollable.setAttribute(scrollContainer.contextId, appContext.contextId);\n      scrollable.addEventListener('scroll', onClosestScroll, getListenerOptions(dragging.scrollOptions));\n\n      if (process.env.NODE_ENV !== 'production') {\n        checkForNestedScrollContainers(scrollable);\n      }\n    }\n\n    return dimension;\n  }, [appContext.contextId, descriptor, onClosestScroll, previousRef]);\n  var getScrollWhileDragging = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n    var closest = getClosestScrollableFromDrag(dragging);\n    !(dragging && closest) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only recollect Droppable client for Droppables that have a scroll container') : invariant(false) : void 0;\n    return getScroll$1(closest);\n  }, []);\n  var dragStopped = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop drag when no active drag') : invariant(false) : void 0;\n    var closest = getClosestScrollableFromDrag(dragging);\n    whileDraggingRef.current = null;\n\n    if (!closest) {\n      return;\n    }\n\n    scheduleScrollUpdate.cancel();\n    closest.removeAttribute(scrollContainer.contextId);\n    closest.removeEventListener('scroll', onClosestScroll, getListenerOptions(dragging.scrollOptions));\n  }, [onClosestScroll, scheduleScrollUpdate]);\n  var scroll = useCallback(function (change) {\n    var dragging = whileDraggingRef.current;\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot scroll when there is no drag') : invariant(false) : void 0;\n    var closest = getClosestScrollableFromDrag(dragging);\n    !closest ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot scroll a droppable with no closest scrollable') : invariant(false) : void 0;\n    closest.scrollTop += change.y;\n    closest.scrollLeft += change.x;\n  }, []);\n  var callbacks = useMemo(function () {\n    return {\n      getDimensionAndWatchScroll: getDimensionAndWatchScroll,\n      getScrollWhileDragging: getScrollWhileDragging,\n      dragStopped: dragStopped,\n      scroll: scroll\n    };\n  }, [dragStopped, getDimensionAndWatchScroll, getScrollWhileDragging, scroll]);\n  var entry = useMemo(function () {\n    return {\n      uniqueId: uniqueId,\n      descriptor: descriptor,\n      callbacks: callbacks\n    };\n  }, [callbacks, descriptor, uniqueId]);\n  useIsomorphicLayoutEffect(function () {\n    publishedDescriptorRef.current = entry.descriptor;\n    registry.droppable.register(entry);\n    return function () {\n      if (whileDraggingRef.current) {\n        process.env.NODE_ENV !== \"production\" ? warning('Unsupported: changing the droppableId or type of a Droppable during a drag') : void 0;\n        dragStopped();\n      }\n\n      registry.droppable.unregister(entry);\n    };\n  }, [callbacks, descriptor, dragStopped, entry, marshal, registry.droppable]);\n  useIsomorphicLayoutEffect(function () {\n    if (!whileDraggingRef.current) {\n      return;\n    }\n\n    marshal.updateDroppableIsEnabled(publishedDescriptorRef.current.id, !args.isDropDisabled);\n  }, [args.isDropDisabled, marshal]);\n  useIsomorphicLayoutEffect(function () {\n    if (!whileDraggingRef.current) {\n      return;\n    }\n\n    marshal.updateDroppableIsCombineEnabled(publishedDescriptorRef.current.id, args.isCombineEnabled);\n  }, [args.isCombineEnabled, marshal]);\n}\n\nfunction noop$2() {}\n\nvar empty = {\n  width: 0,\n  height: 0,\n  margin: noSpacing\n};\n\nvar getSize = function getSize(_ref) {\n  var isAnimatingOpenOnMount = _ref.isAnimatingOpenOnMount,\n      placeholder = _ref.placeholder,\n      animate = _ref.animate;\n\n  if (isAnimatingOpenOnMount) {\n    return empty;\n  }\n\n  if (animate === 'close') {\n    return empty;\n  }\n\n  return {\n    height: placeholder.client.borderBox.height,\n    width: placeholder.client.borderBox.width,\n    margin: placeholder.client.margin\n  };\n};\n\nvar getStyle = function getStyle(_ref2) {\n  var isAnimatingOpenOnMount = _ref2.isAnimatingOpenOnMount,\n      placeholder = _ref2.placeholder,\n      animate = _ref2.animate;\n  var size = getSize({\n    isAnimatingOpenOnMount: isAnimatingOpenOnMount,\n    placeholder: placeholder,\n    animate: animate\n  });\n  return {\n    display: placeholder.display,\n    boxSizing: 'border-box',\n    width: size.width,\n    height: size.height,\n    marginTop: size.margin.top,\n    marginRight: size.margin.right,\n    marginBottom: size.margin.bottom,\n    marginLeft: size.margin.left,\n    flexShrink: '0',\n    flexGrow: '0',\n    pointerEvents: 'none',\n    transition: animate !== 'none' ? transitions.placeholder : null\n  };\n};\n\nfunction Placeholder(props) {\n  var animateOpenTimerRef = useRef(null);\n  var tryClearAnimateOpenTimer = useCallback(function () {\n    if (!animateOpenTimerRef.current) {\n      return;\n    }\n\n    clearTimeout(animateOpenTimerRef.current);\n    animateOpenTimerRef.current = null;\n  }, []);\n  var animate = props.animate,\n      onTransitionEnd = props.onTransitionEnd,\n      onClose = props.onClose,\n      contextId = props.contextId;\n\n  var _useState = useState(props.animate === 'open'),\n      isAnimatingOpenOnMount = _useState[0],\n      setIsAnimatingOpenOnMount = _useState[1];\n\n  useEffect(function () {\n    if (!isAnimatingOpenOnMount) {\n      return noop$2;\n    }\n\n    if (animate !== 'open') {\n      tryClearAnimateOpenTimer();\n      setIsAnimatingOpenOnMount(false);\n      return noop$2;\n    }\n\n    if (animateOpenTimerRef.current) {\n      return noop$2;\n    }\n\n    animateOpenTimerRef.current = setTimeout(function () {\n      animateOpenTimerRef.current = null;\n      setIsAnimatingOpenOnMount(false);\n    });\n    return tryClearAnimateOpenTimer;\n  }, [animate, isAnimatingOpenOnMount, tryClearAnimateOpenTimer]);\n  var onSizeChangeEnd = useCallback(function (event) {\n    if (event.propertyName !== 'height') {\n      return;\n    }\n\n    onTransitionEnd();\n\n    if (animate === 'close') {\n      onClose();\n    }\n  }, [animate, onClose, onTransitionEnd]);\n  var style = getStyle({\n    isAnimatingOpenOnMount: isAnimatingOpenOnMount,\n    animate: props.animate,\n    placeholder: props.placeholder\n  });\n  return React.createElement(props.placeholder.tagName, {\n    style: style,\n    'data-rbd-placeholder-context-id': contextId,\n    onTransitionEnd: onSizeChangeEnd,\n    ref: props.innerRef\n  });\n}\n\nvar Placeholder$1 = React.memo(Placeholder);\n\nvar DroppableContext = React.createContext(null);\n\nfunction checkIsValidInnerRef(el) {\n  !(el && isHtmlElement(el)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"\\n    provided.innerRef has not been provided with a HTMLElement.\\n\\n    You can find a guide on using the innerRef callback functions at:\\n    https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/guides/using-inner-ref.md\\n  \") : invariant(false) : void 0;\n}\n\nfunction isBoolean(value) {\n  return typeof value === 'boolean';\n}\n\nfunction runChecks(args, checks) {\n  checks.forEach(function (check) {\n    return check(args);\n  });\n}\n\nvar shared = [function required(_ref) {\n  var props = _ref.props;\n  !props.droppableId ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'A Droppable requires a droppableId prop') : invariant(false) : void 0;\n  !(typeof props.droppableId === 'string') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"A Droppable requires a [string] droppableId. Provided: [\" + typeof props.droppableId + \"]\") : invariant(false) : void 0;\n}, function _boolean(_ref2) {\n  var props = _ref2.props;\n  !isBoolean(props.isDropDisabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'isDropDisabled must be a boolean') : invariant(false) : void 0;\n  !isBoolean(props.isCombineEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'isCombineEnabled must be a boolean') : invariant(false) : void 0;\n  !isBoolean(props.ignoreContainerClipping) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'ignoreContainerClipping must be a boolean') : invariant(false) : void 0;\n}, function ref(_ref3) {\n  var getDroppableRef = _ref3.getDroppableRef;\n  checkIsValidInnerRef(getDroppableRef());\n}];\nvar standard = [function placeholder(_ref4) {\n  var props = _ref4.props,\n      getPlaceholderRef = _ref4.getPlaceholderRef;\n\n  if (!props.placeholder) {\n    return;\n  }\n\n  var ref = getPlaceholderRef();\n\n  if (ref) {\n    return;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Droppable setup issue [droppableId: \\\"\" + props.droppableId + \"\\\"]:\\n      DroppableProvided > placeholder could not be found.\\n\\n      Please be sure to add the {provided.placeholder} React Node as a child of your Droppable.\\n      More information: https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/api/droppable.md\\n    \") : void 0;\n}];\nvar virtual = [function hasClone(_ref5) {\n  var props = _ref5.props;\n  !props.renderClone ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Must provide a clone render function (renderClone) for virtual lists') : invariant(false) : void 0;\n}, function hasNoPlaceholder(_ref6) {\n  var getPlaceholderRef = _ref6.getPlaceholderRef;\n  !!getPlaceholderRef() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected virtual list to not have a placeholder') : invariant(false) : void 0;\n}];\nfunction useValidation(args) {\n  useDevSetupWarning(function () {\n    runChecks(args, shared);\n\n    if (args.props.mode === 'standard') {\n      runChecks(args, standard);\n    }\n\n    if (args.props.mode === 'virtual') {\n      runChecks(args, virtual);\n    }\n  });\n}\n\nvar AnimateInOut = function (_React$PureComponent) {\n  _inheritsLoose(AnimateInOut, _React$PureComponent);\n\n  function AnimateInOut() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n    _this.state = {\n      isVisible: Boolean(_this.props.on),\n      data: _this.props.on,\n      animate: _this.props.shouldAnimate && _this.props.on ? 'open' : 'none'\n    };\n\n    _this.onClose = function () {\n      if (_this.state.animate !== 'close') {\n        return;\n      }\n\n      _this.setState({\n        isVisible: false\n      });\n    };\n\n    return _this;\n  }\n\n  AnimateInOut.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n    if (!props.shouldAnimate) {\n      return {\n        isVisible: Boolean(props.on),\n        data: props.on,\n        animate: 'none'\n      };\n    }\n\n    if (props.on) {\n      return {\n        isVisible: true,\n        data: props.on,\n        animate: 'open'\n      };\n    }\n\n    if (state.isVisible) {\n      return {\n        isVisible: true,\n        data: state.data,\n        animate: 'close'\n      };\n    }\n\n    return {\n      isVisible: false,\n      animate: 'close',\n      data: null\n    };\n  };\n\n  var _proto = AnimateInOut.prototype;\n\n  _proto.render = function render() {\n    if (!this.state.isVisible) {\n      return null;\n    }\n\n    var provided = {\n      onClose: this.onClose,\n      data: this.state.data,\n      animate: this.state.animate\n    };\n    return this.props.children(provided);\n  };\n\n  return AnimateInOut;\n}(React.PureComponent);\n\nvar zIndexOptions = {\n  dragging: 5000,\n  dropAnimating: 4500\n};\n\nvar getDraggingTransition = function getDraggingTransition(shouldAnimateDragMovement, dropping) {\n  if (dropping) {\n    return transitions.drop(dropping.duration);\n  }\n\n  if (shouldAnimateDragMovement) {\n    return transitions.snap;\n  }\n\n  return transitions.fluid;\n};\n\nvar getDraggingOpacity = function getDraggingOpacity(isCombining, isDropAnimating) {\n  if (!isCombining) {\n    return null;\n  }\n\n  return isDropAnimating ? combine.opacity.drop : combine.opacity.combining;\n};\n\nvar getShouldDraggingAnimate = function getShouldDraggingAnimate(dragging) {\n  if (dragging.forceShouldAnimate != null) {\n    return dragging.forceShouldAnimate;\n  }\n\n  return dragging.mode === 'SNAP';\n};\n\nfunction getDraggingStyle(dragging) {\n  var dimension = dragging.dimension;\n  var box = dimension.client;\n  var offset = dragging.offset,\n      combineWith = dragging.combineWith,\n      dropping = dragging.dropping;\n  var isCombining = Boolean(combineWith);\n  var shouldAnimate = getShouldDraggingAnimate(dragging);\n  var isDropAnimating = Boolean(dropping);\n  var transform = isDropAnimating ? transforms.drop(offset, isCombining) : transforms.moveTo(offset);\n  var style = {\n    position: 'fixed',\n    top: box.marginBox.top,\n    left: box.marginBox.left,\n    boxSizing: 'border-box',\n    width: box.borderBox.width,\n    height: box.borderBox.height,\n    transition: getDraggingTransition(shouldAnimate, dropping),\n    transform: transform,\n    opacity: getDraggingOpacity(isCombining, isDropAnimating),\n    zIndex: isDropAnimating ? zIndexOptions.dropAnimating : zIndexOptions.dragging,\n    pointerEvents: 'none'\n  };\n  return style;\n}\n\nfunction getSecondaryStyle(secondary) {\n  return {\n    transform: transforms.moveTo(secondary.offset),\n    transition: secondary.shouldAnimateDisplacement ? null : 'none'\n  };\n}\n\nfunction getStyle$1(mapped) {\n  return mapped.type === 'DRAGGING' ? getDraggingStyle(mapped) : getSecondaryStyle(mapped);\n}\n\nfunction getDimension$1(descriptor, el, windowScroll) {\n  if (windowScroll === void 0) {\n    windowScroll = origin;\n  }\n\n  var computedStyles = window.getComputedStyle(el);\n  var borderBox = el.getBoundingClientRect();\n  var client = calculateBox(borderBox, computedStyles);\n  var page = withScroll(client, windowScroll);\n  var placeholder = {\n    client: client,\n    tagName: el.tagName.toLowerCase(),\n    display: computedStyles.display\n  };\n  var displaceBy = {\n    x: client.marginBox.width,\n    y: client.marginBox.height\n  };\n  var dimension = {\n    descriptor: descriptor,\n    placeholder: placeholder,\n    displaceBy: displaceBy,\n    client: client,\n    page: page\n  };\n  return dimension;\n}\n\nfunction useDraggablePublisher(args) {\n  var uniqueId = useUniqueId('draggable');\n  var descriptor = args.descriptor,\n      registry = args.registry,\n      getDraggableRef = args.getDraggableRef,\n      canDragInteractiveElements = args.canDragInteractiveElements,\n      shouldRespectForcePress = args.shouldRespectForcePress,\n      isEnabled = args.isEnabled;\n  var options = useMemo(function () {\n    return {\n      canDragInteractiveElements: canDragInteractiveElements,\n      shouldRespectForcePress: shouldRespectForcePress,\n      isEnabled: isEnabled\n    };\n  }, [canDragInteractiveElements, isEnabled, shouldRespectForcePress]);\n  var getDimension = useCallback(function (windowScroll) {\n    var el = getDraggableRef();\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot get dimension when no ref is set') : invariant(false) : void 0;\n    return getDimension$1(descriptor, el, windowScroll);\n  }, [descriptor, getDraggableRef]);\n  var entry = useMemo(function () {\n    return {\n      uniqueId: uniqueId,\n      descriptor: descriptor,\n      options: options,\n      getDimension: getDimension\n    };\n  }, [descriptor, getDimension, options, uniqueId]);\n  var publishedRef = useRef(entry);\n  var isFirstPublishRef = useRef(true);\n  useIsomorphicLayoutEffect(function () {\n    registry.draggable.register(publishedRef.current);\n    return function () {\n      return registry.draggable.unregister(publishedRef.current);\n    };\n  }, [registry.draggable]);\n  useIsomorphicLayoutEffect(function () {\n    if (isFirstPublishRef.current) {\n      isFirstPublishRef.current = false;\n      return;\n    }\n\n    var last = publishedRef.current;\n    publishedRef.current = entry;\n    registry.draggable.update(entry, last);\n  }, [entry, registry.draggable]);\n}\n\nfunction useValidation$1(props, contextId, getRef) {\n  useDevSetupWarning(function () {\n    function prefix(id) {\n      return \"Draggable[id: \" + id + \"]: \";\n    }\n\n    var id = props.draggableId;\n    !id ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Draggable requires a draggableId') : invariant(false) : void 0;\n    !(typeof id === 'string') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Draggable requires a [string] draggableId.\\n      Provided: [type: \" + typeof id + \"] (value: \" + id + \")\") : invariant(false) : void 0;\n    !isInteger(props.index) ? process.env.NODE_ENV !== \"production\" ? invariant(false, prefix(id) + \" requires an integer index prop\") : invariant(false) : void 0;\n\n    if (props.mapped.type === 'DRAGGING') {\n      return;\n    }\n\n    checkIsValidInnerRef(getRef());\n\n    if (props.isEnabled) {\n      !findDragHandle(contextId, id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, prefix(id) + \" Unable to find drag handle\") : invariant(false) : void 0;\n    }\n  });\n}\nfunction useClonePropValidation(isClone) {\n  useDev(function () {\n    var initialRef = useRef(isClone);\n    useDevSetupWarning(function () {\n      !(isClone === initialRef.current) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Draggable isClone prop value changed during component life') : invariant(false) : void 0;\n    }, [isClone]);\n  });\n}\n\nfunction preventHtml5Dnd(event) {\n  event.preventDefault();\n}\n\nfunction Draggable(props) {\n  var ref = useRef(null);\n  var setRef = useCallback(function (el) {\n    ref.current = el;\n  }, []);\n  var getRef = useCallback(function () {\n    return ref.current;\n  }, []);\n\n  var _useRequiredContext = useRequiredContext(AppContext),\n      contextId = _useRequiredContext.contextId,\n      dragHandleUsageInstructionsId = _useRequiredContext.dragHandleUsageInstructionsId,\n      registry = _useRequiredContext.registry;\n\n  var _useRequiredContext2 = useRequiredContext(DroppableContext),\n      type = _useRequiredContext2.type,\n      droppableId = _useRequiredContext2.droppableId;\n\n  var descriptor = useMemo(function () {\n    return {\n      id: props.draggableId,\n      index: props.index,\n      type: type,\n      droppableId: droppableId\n    };\n  }, [props.draggableId, props.index, type, droppableId]);\n  var children = props.children,\n      draggableId = props.draggableId,\n      isEnabled = props.isEnabled,\n      shouldRespectForcePress = props.shouldRespectForcePress,\n      canDragInteractiveElements = props.canDragInteractiveElements,\n      isClone = props.isClone,\n      mapped = props.mapped,\n      dropAnimationFinishedAction = props.dropAnimationFinished;\n  useValidation$1(props, contextId, getRef);\n  useClonePropValidation(isClone);\n\n  if (!isClone) {\n    var forPublisher = useMemo(function () {\n      return {\n        descriptor: descriptor,\n        registry: registry,\n        getDraggableRef: getRef,\n        canDragInteractiveElements: canDragInteractiveElements,\n        shouldRespectForcePress: shouldRespectForcePress,\n        isEnabled: isEnabled\n      };\n    }, [descriptor, registry, getRef, canDragInteractiveElements, shouldRespectForcePress, isEnabled]);\n    useDraggablePublisher(forPublisher);\n  }\n\n  var dragHandleProps = useMemo(function () {\n    return isEnabled ? {\n      tabIndex: 0,\n      role: 'button',\n      'aria-describedby': dragHandleUsageInstructionsId,\n      'data-rbd-drag-handle-draggable-id': draggableId,\n      'data-rbd-drag-handle-context-id': contextId,\n      draggable: false,\n      onDragStart: preventHtml5Dnd\n    } : null;\n  }, [contextId, dragHandleUsageInstructionsId, draggableId, isEnabled]);\n  var onMoveEnd = useCallback(function (event) {\n    if (mapped.type !== 'DRAGGING') {\n      return;\n    }\n\n    if (!mapped.dropping) {\n      return;\n    }\n\n    if (event.propertyName !== 'transform') {\n      return;\n    }\n\n    dropAnimationFinishedAction();\n  }, [dropAnimationFinishedAction, mapped]);\n  var provided = useMemo(function () {\n    var style = getStyle$1(mapped);\n    var onTransitionEnd = mapped.type === 'DRAGGING' && mapped.dropping ? onMoveEnd : null;\n    var result = {\n      innerRef: setRef,\n      draggableProps: {\n        'data-rbd-draggable-context-id': contextId,\n        'data-rbd-draggable-id': draggableId,\n        style: style,\n        onTransitionEnd: onTransitionEnd\n      },\n      dragHandleProps: dragHandleProps\n    };\n    return result;\n  }, [contextId, dragHandleProps, draggableId, mapped, onMoveEnd, setRef]);\n  var rubric = useMemo(function () {\n    return {\n      draggableId: descriptor.id,\n      type: descriptor.type,\n      source: {\n        index: descriptor.index,\n        droppableId: descriptor.droppableId\n      }\n    };\n  }, [descriptor.droppableId, descriptor.id, descriptor.index, descriptor.type]);\n  return children(provided, mapped.snapshot, rubric);\n}\n\nvar isStrictEqual = (function (a, b) {\n  return a === b;\n});\n\nvar whatIsDraggedOverFromResult = (function (result) {\n  var combine = result.combine,\n      destination = result.destination;\n\n  if (destination) {\n    return destination.droppableId;\n  }\n\n  if (combine) {\n    return combine.droppableId;\n  }\n\n  return null;\n});\n\nvar getCombineWithFromResult = function getCombineWithFromResult(result) {\n  return result.combine ? result.combine.draggableId : null;\n};\n\nvar getCombineWithFromImpact = function getCombineWithFromImpact(impact) {\n  return impact.at && impact.at.type === 'COMBINE' ? impact.at.combine.draggableId : null;\n};\n\nfunction getDraggableSelector() {\n  var memoizedOffset = memoizeOne(function (x, y) {\n    return {\n      x: x,\n      y: y\n    };\n  });\n  var getMemoizedSnapshot = memoizeOne(function (mode, isClone, draggingOver, combineWith, dropping) {\n    return {\n      isDragging: true,\n      isClone: isClone,\n      isDropAnimating: Boolean(dropping),\n      dropAnimation: dropping,\n      mode: mode,\n      draggingOver: draggingOver,\n      combineWith: combineWith,\n      combineTargetFor: null\n    };\n  });\n  var getMemoizedProps = memoizeOne(function (offset, mode, dimension, isClone, draggingOver, combineWith, forceShouldAnimate) {\n    return {\n      mapped: {\n        type: 'DRAGGING',\n        dropping: null,\n        draggingOver: draggingOver,\n        combineWith: combineWith,\n        mode: mode,\n        offset: offset,\n        dimension: dimension,\n        forceShouldAnimate: forceShouldAnimate,\n        snapshot: getMemoizedSnapshot(mode, isClone, draggingOver, combineWith, null)\n      }\n    };\n  });\n\n  var selector = function selector(state, ownProps) {\n    if (state.isDragging) {\n      if (state.critical.draggable.id !== ownProps.draggableId) {\n        return null;\n      }\n\n      var offset = state.current.client.offset;\n      var dimension = state.dimensions.draggables[ownProps.draggableId];\n      var draggingOver = whatIsDraggedOver(state.impact);\n      var combineWith = getCombineWithFromImpact(state.impact);\n      var forceShouldAnimate = state.forceShouldAnimate;\n      return getMemoizedProps(memoizedOffset(offset.x, offset.y), state.movementMode, dimension, ownProps.isClone, draggingOver, combineWith, forceShouldAnimate);\n    }\n\n    if (state.phase === 'DROP_ANIMATING') {\n      var completed = state.completed;\n\n      if (completed.result.draggableId !== ownProps.draggableId) {\n        return null;\n      }\n\n      var isClone = ownProps.isClone;\n      var _dimension = state.dimensions.draggables[ownProps.draggableId];\n      var result = completed.result;\n      var mode = result.mode;\n\n      var _draggingOver = whatIsDraggedOverFromResult(result);\n\n      var _combineWith = getCombineWithFromResult(result);\n\n      var duration = state.dropDuration;\n      var dropping = {\n        duration: duration,\n        curve: curves.drop,\n        moveTo: state.newHomeClientOffset,\n        opacity: _combineWith ? combine.opacity.drop : null,\n        scale: _combineWith ? combine.scale.drop : null\n      };\n      return {\n        mapped: {\n          type: 'DRAGGING',\n          offset: state.newHomeClientOffset,\n          dimension: _dimension,\n          dropping: dropping,\n          draggingOver: _draggingOver,\n          combineWith: _combineWith,\n          mode: mode,\n          forceShouldAnimate: null,\n          snapshot: getMemoizedSnapshot(mode, isClone, _draggingOver, _combineWith, dropping)\n        }\n      };\n    }\n\n    return null;\n  };\n\n  return selector;\n}\n\nfunction getSecondarySnapshot(combineTargetFor) {\n  return {\n    isDragging: false,\n    isDropAnimating: false,\n    isClone: false,\n    dropAnimation: null,\n    mode: null,\n    draggingOver: null,\n    combineTargetFor: combineTargetFor,\n    combineWith: null\n  };\n}\n\nvar atRest = {\n  mapped: {\n    type: 'SECONDARY',\n    offset: origin,\n    combineTargetFor: null,\n    shouldAnimateDisplacement: true,\n    snapshot: getSecondarySnapshot(null)\n  }\n};\n\nfunction getSecondarySelector() {\n  var memoizedOffset = memoizeOne(function (x, y) {\n    return {\n      x: x,\n      y: y\n    };\n  });\n  var getMemoizedSnapshot = memoizeOne(getSecondarySnapshot);\n  var getMemoizedProps = memoizeOne(function (offset, combineTargetFor, shouldAnimateDisplacement) {\n    if (combineTargetFor === void 0) {\n      combineTargetFor = null;\n    }\n\n    return {\n      mapped: {\n        type: 'SECONDARY',\n        offset: offset,\n        combineTargetFor: combineTargetFor,\n        shouldAnimateDisplacement: shouldAnimateDisplacement,\n        snapshot: getMemoizedSnapshot(combineTargetFor)\n      }\n    };\n  });\n\n  var getFallback = function getFallback(combineTargetFor) {\n    return combineTargetFor ? getMemoizedProps(origin, combineTargetFor, true) : null;\n  };\n\n  var getProps = function getProps(ownId, draggingId, impact, afterCritical) {\n    var visualDisplacement = impact.displaced.visible[ownId];\n    var isAfterCriticalInVirtualList = Boolean(afterCritical.inVirtualList && afterCritical.effected[ownId]);\n    var combine = tryGetCombine(impact);\n    var combineTargetFor = combine && combine.draggableId === ownId ? draggingId : null;\n\n    if (!visualDisplacement) {\n      if (!isAfterCriticalInVirtualList) {\n        return getFallback(combineTargetFor);\n      }\n\n      if (impact.displaced.invisible[ownId]) {\n        return null;\n      }\n\n      var change = negate(afterCritical.displacedBy.point);\n\n      var _offset = memoizedOffset(change.x, change.y);\n\n      return getMemoizedProps(_offset, combineTargetFor, true);\n    }\n\n    if (isAfterCriticalInVirtualList) {\n      return getFallback(combineTargetFor);\n    }\n\n    var displaceBy = impact.displacedBy.point;\n    var offset = memoizedOffset(displaceBy.x, displaceBy.y);\n    return getMemoizedProps(offset, combineTargetFor, visualDisplacement.shouldAnimate);\n  };\n\n  var selector = function selector(state, ownProps) {\n    if (state.isDragging) {\n      if (state.critical.draggable.id === ownProps.draggableId) {\n        return null;\n      }\n\n      return getProps(ownProps.draggableId, state.critical.draggable.id, state.impact, state.afterCritical);\n    }\n\n    if (state.phase === 'DROP_ANIMATING') {\n      var completed = state.completed;\n\n      if (completed.result.draggableId === ownProps.draggableId) {\n        return null;\n      }\n\n      return getProps(ownProps.draggableId, completed.result.draggableId, completed.impact, completed.afterCritical);\n    }\n\n    return null;\n  };\n\n  return selector;\n}\n\nvar makeMapStateToProps = function makeMapStateToProps() {\n  var draggingSelector = getDraggableSelector();\n  var secondarySelector = getSecondarySelector();\n\n  var selector = function selector(state, ownProps) {\n    return draggingSelector(state, ownProps) || secondarySelector(state, ownProps) || atRest;\n  };\n\n  return selector;\n};\nvar mapDispatchToProps = {\n  dropAnimationFinished: dropAnimationFinished\n};\nvar ConnectedDraggable = connect(makeMapStateToProps, mapDispatchToProps, null, {\n  context: StoreContext,\n  pure: true,\n  areStatePropsEqual: isStrictEqual\n})(Draggable);\n\nfunction PrivateDraggable(props) {\n  var droppableContext = useRequiredContext(DroppableContext);\n  var isUsingCloneFor = droppableContext.isUsingCloneFor;\n\n  if (isUsingCloneFor === props.draggableId && !props.isClone) {\n    return null;\n  }\n\n  return React.createElement(ConnectedDraggable, props);\n}\nfunction PublicDraggable(props) {\n  var isEnabled = typeof props.isDragDisabled === 'boolean' ? !props.isDragDisabled : true;\n  var canDragInteractiveElements = Boolean(props.disableInteractiveElementBlocking);\n  var shouldRespectForcePress = Boolean(props.shouldRespectForcePress);\n  return React.createElement(PrivateDraggable, _extends({}, props, {\n    isClone: false,\n    isEnabled: isEnabled,\n    canDragInteractiveElements: canDragInteractiveElements,\n    shouldRespectForcePress: shouldRespectForcePress\n  }));\n}\n\nfunction Droppable(props) {\n  var appContext = useContext(AppContext);\n  !appContext ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find app context') : invariant(false) : void 0;\n  var contextId = appContext.contextId,\n      isMovementAllowed = appContext.isMovementAllowed;\n  var droppableRef = useRef(null);\n  var placeholderRef = useRef(null);\n  var children = props.children,\n      droppableId = props.droppableId,\n      type = props.type,\n      mode = props.mode,\n      direction = props.direction,\n      ignoreContainerClipping = props.ignoreContainerClipping,\n      isDropDisabled = props.isDropDisabled,\n      isCombineEnabled = props.isCombineEnabled,\n      snapshot = props.snapshot,\n      useClone = props.useClone,\n      updateViewportMaxScroll = props.updateViewportMaxScroll,\n      getContainerForClone = props.getContainerForClone;\n  var getDroppableRef = useCallback(function () {\n    return droppableRef.current;\n  }, []);\n  var setDroppableRef = useCallback(function (value) {\n    droppableRef.current = value;\n  }, []);\n  var getPlaceholderRef = useCallback(function () {\n    return placeholderRef.current;\n  }, []);\n  var setPlaceholderRef = useCallback(function (value) {\n    placeholderRef.current = value;\n  }, []);\n  useValidation({\n    props: props,\n    getDroppableRef: getDroppableRef,\n    getPlaceholderRef: getPlaceholderRef\n  });\n  var onPlaceholderTransitionEnd = useCallback(function () {\n    if (isMovementAllowed()) {\n      updateViewportMaxScroll({\n        maxScroll: getMaxWindowScroll()\n      });\n    }\n  }, [isMovementAllowed, updateViewportMaxScroll]);\n  useDroppablePublisher({\n    droppableId: droppableId,\n    type: type,\n    mode: mode,\n    direction: direction,\n    isDropDisabled: isDropDisabled,\n    isCombineEnabled: isCombineEnabled,\n    ignoreContainerClipping: ignoreContainerClipping,\n    getDroppableRef: getDroppableRef\n  });\n  var placeholder = React.createElement(AnimateInOut, {\n    on: props.placeholder,\n    shouldAnimate: props.shouldAnimatePlaceholder\n  }, function (_ref) {\n    var onClose = _ref.onClose,\n        data = _ref.data,\n        animate = _ref.animate;\n    return React.createElement(Placeholder$1, {\n      placeholder: data,\n      onClose: onClose,\n      innerRef: setPlaceholderRef,\n      animate: animate,\n      contextId: contextId,\n      onTransitionEnd: onPlaceholderTransitionEnd\n    });\n  });\n  var provided = useMemo(function () {\n    return {\n      innerRef: setDroppableRef,\n      placeholder: placeholder,\n      droppableProps: {\n        'data-rbd-droppable-id': droppableId,\n        'data-rbd-droppable-context-id': contextId\n      }\n    };\n  }, [contextId, droppableId, placeholder, setDroppableRef]);\n  var isUsingCloneFor = useClone ? useClone.dragging.draggableId : null;\n  var droppableContext = useMemo(function () {\n    return {\n      droppableId: droppableId,\n      type: type,\n      isUsingCloneFor: isUsingCloneFor\n    };\n  }, [droppableId, isUsingCloneFor, type]);\n\n  function getClone() {\n    if (!useClone) {\n      return null;\n    }\n\n    var dragging = useClone.dragging,\n        render = useClone.render;\n    var node = React.createElement(PrivateDraggable, {\n      draggableId: dragging.draggableId,\n      index: dragging.source.index,\n      isClone: true,\n      isEnabled: true,\n      shouldRespectForcePress: false,\n      canDragInteractiveElements: true\n    }, function (draggableProvided, draggableSnapshot) {\n      return render(draggableProvided, draggableSnapshot, dragging);\n    });\n    return ReactDOM.createPortal(node, getContainerForClone());\n  }\n\n  return React.createElement(DroppableContext.Provider, {\n    value: droppableContext\n  }, children(provided, snapshot), getClone());\n}\n\nvar isMatchingType = function isMatchingType(type, critical) {\n  return type === critical.droppable.type;\n};\n\nvar getDraggable = function getDraggable(critical, dimensions) {\n  return dimensions.draggables[critical.draggable.id];\n};\n\nvar makeMapStateToProps$1 = function makeMapStateToProps() {\n  var idleWithAnimation = {\n    placeholder: null,\n    shouldAnimatePlaceholder: true,\n    snapshot: {\n      isDraggingOver: false,\n      draggingOverWith: null,\n      draggingFromThisWith: null,\n      isUsingPlaceholder: false\n    },\n    useClone: null\n  };\n\n  var idleWithoutAnimation = _extends({}, idleWithAnimation, {\n    shouldAnimatePlaceholder: false\n  });\n\n  var getDraggableRubric = memoizeOne(function (descriptor) {\n    return {\n      draggableId: descriptor.id,\n      type: descriptor.type,\n      source: {\n        index: descriptor.index,\n        droppableId: descriptor.droppableId\n      }\n    };\n  });\n  var getMapProps = memoizeOne(function (id, isEnabled, isDraggingOverForConsumer, isDraggingOverForImpact, dragging, renderClone) {\n    var draggableId = dragging.descriptor.id;\n    var isHome = dragging.descriptor.droppableId === id;\n\n    if (isHome) {\n      var useClone = renderClone ? {\n        render: renderClone,\n        dragging: getDraggableRubric(dragging.descriptor)\n      } : null;\n      var _snapshot = {\n        isDraggingOver: isDraggingOverForConsumer,\n        draggingOverWith: isDraggingOverForConsumer ? draggableId : null,\n        draggingFromThisWith: draggableId,\n        isUsingPlaceholder: true\n      };\n      return {\n        placeholder: dragging.placeholder,\n        shouldAnimatePlaceholder: false,\n        snapshot: _snapshot,\n        useClone: useClone\n      };\n    }\n\n    if (!isEnabled) {\n      return idleWithoutAnimation;\n    }\n\n    if (!isDraggingOverForImpact) {\n      return idleWithAnimation;\n    }\n\n    var snapshot = {\n      isDraggingOver: isDraggingOverForConsumer,\n      draggingOverWith: draggableId,\n      draggingFromThisWith: null,\n      isUsingPlaceholder: true\n    };\n    return {\n      placeholder: dragging.placeholder,\n      shouldAnimatePlaceholder: true,\n      snapshot: snapshot,\n      useClone: null\n    };\n  });\n\n  var selector = function selector(state, ownProps) {\n    var id = ownProps.droppableId;\n    var type = ownProps.type;\n    var isEnabled = !ownProps.isDropDisabled;\n    var renderClone = ownProps.renderClone;\n\n    if (state.isDragging) {\n      var critical = state.critical;\n\n      if (!isMatchingType(type, critical)) {\n        return idleWithoutAnimation;\n      }\n\n      var dragging = getDraggable(critical, state.dimensions);\n      var isDraggingOver = whatIsDraggedOver(state.impact) === id;\n      return getMapProps(id, isEnabled, isDraggingOver, isDraggingOver, dragging, renderClone);\n    }\n\n    if (state.phase === 'DROP_ANIMATING') {\n      var completed = state.completed;\n\n      if (!isMatchingType(type, completed.critical)) {\n        return idleWithoutAnimation;\n      }\n\n      var _dragging = getDraggable(completed.critical, state.dimensions);\n\n      return getMapProps(id, isEnabled, whatIsDraggedOverFromResult(completed.result) === id, whatIsDraggedOver(completed.impact) === id, _dragging, renderClone);\n    }\n\n    if (state.phase === 'IDLE' && state.completed && !state.shouldFlush) {\n      var _completed = state.completed;\n\n      if (!isMatchingType(type, _completed.critical)) {\n        return idleWithoutAnimation;\n      }\n\n      var wasOver = whatIsDraggedOver(_completed.impact) === id;\n      var wasCombining = Boolean(_completed.impact.at && _completed.impact.at.type === 'COMBINE');\n      var isHome = _completed.critical.droppable.id === id;\n\n      if (wasOver) {\n        return wasCombining ? idleWithAnimation : idleWithoutAnimation;\n      }\n\n      if (isHome) {\n        return idleWithAnimation;\n      }\n\n      return idleWithoutAnimation;\n    }\n\n    return idleWithoutAnimation;\n  };\n\n  return selector;\n};\nvar mapDispatchToProps$1 = {\n  updateViewportMaxScroll: updateViewportMaxScroll\n};\n\nfunction getBody() {\n  !document.body ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'document.body is not ready') : invariant(false) : void 0;\n  return document.body;\n}\n\nvar defaultProps = {\n  mode: 'standard',\n  type: 'DEFAULT',\n  direction: 'vertical',\n  isDropDisabled: false,\n  isCombineEnabled: false,\n  ignoreContainerClipping: false,\n  renderClone: null,\n  getContainerForClone: getBody\n};\nvar ConnectedDroppable = connect(makeMapStateToProps$1, mapDispatchToProps$1, null, {\n  context: StoreContext,\n  pure: true,\n  areStatePropsEqual: isStrictEqual\n})(Droppable);\nConnectedDroppable.defaultProps = defaultProps;\n\nexport { DragDropContext, PublicDraggable as Draggable, ConnectedDroppable as Droppable, resetServerContext, useKeyboardSensor, useMouseSensor, useTouchSensor };\n","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}","import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}","import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport getComputedStyle from \"./dom-utils/getComputedStyle.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport validateModifiers from \"./utils/validateModifiers.js\";\nimport uniqueBy from \"./utils/uniqueBy.js\";\nimport getBasePlacement from \"./utils/getBasePlacement.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nimport { auto } from \"./enums.js\";\nvar INVALID_ELEMENT_ERROR = 'Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.';\nvar INFINITE_LOOP_ERROR = 'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        }); // Validate the provided modifiers so that the consumer will get warned\n        // if one of the modifiers is invalid for any reason\n\n        if (process.env.NODE_ENV !== \"production\") {\n          var modifiers = uniqueBy([].concat(orderedModifiers, state.options.modifiers), function (_ref) {\n            var name = _ref.name;\n            return name;\n          });\n          validateModifiers(modifiers);\n\n          if (getBasePlacement(state.options.placement) === auto) {\n            var flipModifier = state.orderedModifiers.find(function (_ref2) {\n              var name = _ref2.name;\n              return name === 'flip';\n            });\n\n            if (!flipModifier) {\n              console.error(['Popper: \"auto\" placements require the \"flip\" modifier be', 'present and enabled to work.'].join(' '));\n            }\n          }\n\n          var _getComputedStyle = getComputedStyle(popper),\n              marginTop = _getComputedStyle.marginTop,\n              marginRight = _getComputedStyle.marginRight,\n              marginBottom = _getComputedStyle.marginBottom,\n              marginLeft = _getComputedStyle.marginLeft; // We no longer take into account `margins` on the popper, and it can\n          // cause bugs with positioning, so we'll warn the consumer\n\n\n          if ([marginTop, marginRight, marginBottom, marginLeft].some(function (margin) {\n            return parseFloat(margin);\n          })) {\n            console.warn(['Popper: CSS \"margin\" styles cannot be used to apply padding', 'between the popper and its reference element or boundary.', 'To replicate margin, use the `offset` modifier, as well as', 'the `padding` option in the `preventOverflow` and `flip`', 'modifiers.'].join(' '));\n          }\n        }\n\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n        var __debug_loops__ = 0;\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (process.env.NODE_ENV !== \"production\") {\n            __debug_loops__ += 1;\n\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref3) {\n        var name = _ref3.name,\n            _ref3$options = _ref3.options,\n            options = _ref3$options === void 0 ? {} : _ref3$options,\n            effect = _ref3.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  var win = window;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var transitionProperty = getComputedStyle(state.elements.popper).transitionProperty || '';\n\n    if (adaptive && ['transform', 'top', 'right', 'bottom', 'left'].some(function (property) {\n      return transitionProperty.indexOf(property) >= 0;\n    })) {\n      console.warn(['Popper: Detected CSS transitions on at least one of the following', 'CSS properties: \"transform\", \"top\", \"right\", \"bottom\", \"left\".', '\\n\\n', 'Disable the \"computeStyles\" modifier\\'s `adaptive` option to allow', 'for smooth transitions, or remove these properties from the CSS', 'transition declaration on the popper element if only transitioning', 'opacity or background-color for example.', '\\n\\n', 'We recommend using the popper element as a wrapper around an inner', 'element that can have any CSS property transitioned for animations.'].join(' '));\n    }\n  }\n\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases – research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: The `allowedAutoPlacements` option did not allow any', 'placements. Ensure the `placement` option matches the variation', 'of the allowed placements.', 'For example, \"auto\" cannot be used to allow \"bottom-start\".', 'Use \"auto-start\" instead.'].join(' '));\n    }\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isHTMLElement(arrowElement)) {\n      console.error(['Popper: \"arrow\" element must be an HTMLElement (not an SVGElement).', 'To use an SVG arrow, wrap it in an HTMLElement that will be used as', 'the arrow.'].join(' '));\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: \"arrow\" modifier\\'s `element` must be a child of the popper', 'element.'].join(' '));\n    }\n\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","import * as React from 'react';\n\n/**\n * Takes an argument and if it's an array, returns the first item in the array,\n * otherwise returns the argument. Used for Preact compatibility.\n */\nexport var unwrapArray = function unwrapArray(arg) {\n  return Array.isArray(arg) ? arg[0] : arg;\n};\n/**\n * Takes a maybe-undefined function and arbitrary args and invokes the function\n * only if it is defined.\n */\n\nexport var safeInvoke = function safeInvoke(fn) {\n  if (typeof fn === 'function') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return fn.apply(void 0, args);\n  }\n};\n/**\n * Sets a ref using either a ref callback or a ref object\n */\n\nexport var setRef = function setRef(ref, node) {\n  // if its a function call it\n  if (typeof ref === 'function') {\n    return safeInvoke(ref, node);\n  } // otherwise we should treat it as a ref object\n  else if (ref != null) {\n      ref.current = node;\n    }\n};\n/**\n * Simple ponyfill for Object.fromEntries\n */\n\nexport var fromEntries = function fromEntries(entries) {\n  return entries.reduce(function (acc, _ref) {\n    var key = _ref[0],\n        value = _ref[1];\n    acc[key] = value;\n    return acc;\n  }, {});\n};\n/**\n * Small wrapper around `useLayoutEffect` to get rid of the warning on SSR envs\n */\n\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' && window.document && window.document.createElement ? React.useLayoutEffect : React.useEffect;","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { createPopper as defaultCreatePopper } from '@popperjs/core';\nimport isEqual from 'react-fast-compare';\nimport { fromEntries, useIsomorphicLayoutEffect } from './utils';\nvar EMPTY_MODIFIERS = [];\nexport var usePopper = function usePopper(referenceElement, popperElement, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var prevOptions = React.useRef(null);\n  var optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n\n  var _React$useState = React.useState({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0'\n      },\n      arrow: {\n        position: 'absolute'\n      }\n    },\n    attributes: {}\n  }),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var updateStateModifier = React.useMemo(function () {\n    return {\n      name: 'updateState',\n      enabled: true,\n      phase: 'write',\n      fn: function fn(_ref) {\n        var state = _ref.state;\n        var elements = Object.keys(state.elements);\n        ReactDOM.flushSync(function () {\n          setState({\n            styles: fromEntries(elements.map(function (element) {\n              return [element, state.styles[element] || {}];\n            })),\n            attributes: fromEntries(elements.map(function (element) {\n              return [element, state.attributes[element]];\n            }))\n          });\n        });\n      },\n      requires: ['computeStyles']\n    };\n  }, []);\n  var popperOptions = React.useMemo(function () {\n    var newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [].concat(optionsWithDefaults.modifiers, [updateStateModifier, {\n        name: 'applyStyles',\n        enabled: false\n      }])\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    } else {\n      prevOptions.current = newOptions;\n      return newOptions;\n    }\n  }, [optionsWithDefaults.onFirstUpdate, optionsWithDefaults.placement, optionsWithDefaults.strategy, optionsWithDefaults.modifiers, updateStateModifier]);\n  var popperInstanceRef = React.useRef();\n  useIsomorphicLayoutEffect(function () {\n    if (popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n  useIsomorphicLayoutEffect(function () {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    var createPopper = options.createPopper || defaultCreatePopper;\n    var popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n    popperInstanceRef.current = popperInstance;\n    return function () {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n  return {\n    state: popperInstanceRef.current ? popperInstanceRef.current.state : null,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n};","import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { usePopper } from 'react-popper';\n\nfunction useGetLatest(val) {\n  var ref = React.useRef(val);\n  ref.current = val;\n  return React.useCallback(function () {\n    return ref.current;\n  }, []);\n}\n\nvar noop = function noop() {// do nothing\n};\n\nfunction useControlledState(_ref) {\n  var initial = _ref.initial,\n      value = _ref.value,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? noop : _ref$onChange;\n\n  if (initial === undefined && value === undefined) {\n    throw new TypeError('Either \"value\" or \"initial\" variable must be set. Now both are undefined');\n  }\n\n  var _React$useState = React.useState(initial),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var getLatest = useGetLatest(state);\n  var set = React.useCallback(function (updater) {\n    var state = getLatest();\n    var updatedState = typeof updater === 'function' ? updater(state) : updater;\n    if (typeof updatedState.persist === 'function') updatedState.persist();\n    setState(updatedState);\n    if (typeof onChange === 'function') onChange(updatedState);\n  }, [getLatest, onChange]);\n  var isControlled = value !== undefined;\n  return [isControlled ? value : state, isControlled ? onChange : set];\n}\nfunction generateBoundingClientRect(x, y) {\n  if (x === void 0) {\n    x = 0;\n  }\n\n  if (y === void 0) {\n    y = 0;\n  }\n\n  return function () {\n    return {\n      width: 0,\n      height: 0,\n      top: y,\n      right: x,\n      bottom: y,\n      left: x,\n      x: 0,\n      y: 0,\n      toJSON: function toJSON() {\n        return null;\n      }\n    };\n  };\n}\n\nvar _excluded = [\"styles\", \"attributes\"];\nvar virtualElement = {\n  getBoundingClientRect: generateBoundingClientRect()\n};\nvar defaultConfig = {\n  closeOnOutsideClick: true,\n  closeOnTriggerHidden: false,\n  defaultVisible: false,\n  delayHide: 0,\n  delayShow: 0,\n  followCursor: false,\n  interactive: false,\n  mutationObserverOptions: {\n    attributes: true,\n    childList: true,\n    subtree: true\n  },\n  offset: [0, 6],\n  trigger: 'hover'\n};\nfunction usePopperTooltip(config, popperOptions) {\n  var _popperProps$state, _popperProps$state$mo, _popperProps$state$mo2;\n\n  if (config === void 0) {\n    config = {};\n  }\n\n  if (popperOptions === void 0) {\n    popperOptions = {};\n  }\n\n  // Merging options with default options.\n  // Keys with undefined values are replaced with the default ones if any.\n  // Keys with other values pass through.\n  var finalConfig = Object.keys(defaultConfig).reduce(function (config, key) {\n    var _extends2;\n\n    return _extends({}, config, (_extends2 = {}, _extends2[key] = config[key] !== undefined ? config[key] : defaultConfig[key], _extends2));\n  }, config);\n  var defaultModifiers = React.useMemo(function () {\n    return [{\n      name: 'offset',\n      options: {\n        offset: finalConfig.offset\n      }\n    }];\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  Array.isArray(finalConfig.offset) ? finalConfig.offset : []);\n\n  var finalPopperOptions = _extends({}, popperOptions, {\n    placement: popperOptions.placement || finalConfig.placement,\n    modifiers: popperOptions.modifiers || defaultModifiers\n  });\n\n  var _React$useState = React.useState(null),\n      triggerRef = _React$useState[0],\n      setTriggerRef = _React$useState[1];\n\n  var _React$useState2 = React.useState(null),\n      tooltipRef = _React$useState2[0],\n      setTooltipRef = _React$useState2[1];\n\n  var _useControlledState = useControlledState({\n    initial: finalConfig.defaultVisible,\n    value: finalConfig.visible,\n    onChange: finalConfig.onVisibleChange\n  }),\n      visible = _useControlledState[0],\n      setVisible = _useControlledState[1];\n\n  var timer = React.useRef();\n  React.useEffect(function () {\n    return function () {\n      return clearTimeout(timer.current);\n    };\n  }, []);\n\n  var _usePopper = usePopper(finalConfig.followCursor ? virtualElement : triggerRef, tooltipRef, finalPopperOptions),\n      styles = _usePopper.styles,\n      attributes = _usePopper.attributes,\n      popperProps = _objectWithoutPropertiesLoose(_usePopper, _excluded);\n\n  var update = popperProps.update;\n  var getLatest = useGetLatest({\n    visible: visible,\n    triggerRef: triggerRef,\n    tooltipRef: tooltipRef,\n    finalConfig: finalConfig\n  });\n  var isTriggeredBy = React.useCallback(function (trigger) {\n    return Array.isArray(finalConfig.trigger) ? finalConfig.trigger.includes(trigger) : finalConfig.trigger === trigger;\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  Array.isArray(finalConfig.trigger) ? finalConfig.trigger : [finalConfig.trigger]);\n  var hideTooltip = React.useCallback(function () {\n    clearTimeout(timer.current);\n    timer.current = window.setTimeout(function () {\n      return setVisible(false);\n    }, finalConfig.delayHide);\n  }, [finalConfig.delayHide, setVisible]);\n  var showTooltip = React.useCallback(function () {\n    clearTimeout(timer.current);\n    timer.current = window.setTimeout(function () {\n      return setVisible(true);\n    }, finalConfig.delayShow);\n  }, [finalConfig.delayShow, setVisible]);\n  var toggleTooltip = React.useCallback(function () {\n    if (getLatest().visible) {\n      hideTooltip();\n    } else {\n      showTooltip();\n    }\n  }, [getLatest, hideTooltip, showTooltip]); // Handle click outside\n\n  React.useEffect(function () {\n    if (!getLatest().finalConfig.closeOnOutsideClick) return;\n\n    var handleClickOutside = function handleClickOutside(event) {\n      var _event$composedPath;\n\n      var _getLatest = getLatest(),\n          tooltipRef = _getLatest.tooltipRef,\n          triggerRef = _getLatest.triggerRef;\n\n      var target = (event.composedPath == null ? void 0 : (_event$composedPath = event.composedPath()) == null ? void 0 : _event$composedPath[0]) || event.target;\n\n      if (target instanceof Node) {\n        if (tooltipRef != null && triggerRef != null && !tooltipRef.contains(target) && !triggerRef.contains(target)) {\n          hideTooltip();\n        }\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return function () {\n      return document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [getLatest, hideTooltip]); // Trigger: click\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('click')) return;\n    triggerRef.addEventListener('click', toggleTooltip);\n    return function () {\n      return triggerRef.removeEventListener('click', toggleTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, toggleTooltip]); // Trigger: double-click\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('double-click')) return;\n    triggerRef.addEventListener('dblclick', toggleTooltip);\n    return function () {\n      return triggerRef.removeEventListener('dblclick', toggleTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, toggleTooltip]); // Trigger: right-click\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('right-click')) return;\n\n    var preventDefaultAndToggle = function preventDefaultAndToggle(event) {\n      // Don't show the context menu\n      event.preventDefault();\n      toggleTooltip();\n    };\n\n    triggerRef.addEventListener('contextmenu', preventDefaultAndToggle);\n    return function () {\n      return triggerRef.removeEventListener('contextmenu', preventDefaultAndToggle);\n    };\n  }, [triggerRef, isTriggeredBy, toggleTooltip]); // Trigger: focus\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('focus')) return;\n    triggerRef.addEventListener('focus', showTooltip);\n    triggerRef.addEventListener('blur', hideTooltip);\n    return function () {\n      triggerRef.removeEventListener('focus', showTooltip);\n      triggerRef.removeEventListener('blur', hideTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, showTooltip, hideTooltip]); // Trigger: hover on trigger\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('hover')) return;\n    triggerRef.addEventListener('mouseenter', showTooltip);\n    triggerRef.addEventListener('mouseleave', hideTooltip);\n    return function () {\n      triggerRef.removeEventListener('mouseenter', showTooltip);\n      triggerRef.removeEventListener('mouseleave', hideTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, showTooltip, hideTooltip]); // Trigger: hover on tooltip, keep it open if hovered\n\n  React.useEffect(function () {\n    if (tooltipRef == null || !isTriggeredBy('hover') || !getLatest().finalConfig.interactive) return;\n    tooltipRef.addEventListener('mouseenter', showTooltip);\n    tooltipRef.addEventListener('mouseleave', hideTooltip);\n    return function () {\n      tooltipRef.removeEventListener('mouseenter', showTooltip);\n      tooltipRef.removeEventListener('mouseleave', hideTooltip);\n    };\n  }, [tooltipRef, isTriggeredBy, showTooltip, hideTooltip, getLatest]); // Handle closing tooltip if trigger hidden\n\n  var isReferenceHidden = popperProps == null ? void 0 : (_popperProps$state = popperProps.state) == null ? void 0 : (_popperProps$state$mo = _popperProps$state.modifiersData) == null ? void 0 : (_popperProps$state$mo2 = _popperProps$state$mo.hide) == null ? void 0 : _popperProps$state$mo2.isReferenceHidden;\n  React.useEffect(function () {\n    if (finalConfig.closeOnTriggerHidden && isReferenceHidden) hideTooltip();\n  }, [finalConfig.closeOnTriggerHidden, hideTooltip, isReferenceHidden]); // Handle follow cursor\n\n  React.useEffect(function () {\n    if (!finalConfig.followCursor || triggerRef == null) return;\n\n    function setMousePosition(_ref) {\n      var clientX = _ref.clientX,\n          clientY = _ref.clientY;\n      virtualElement.getBoundingClientRect = generateBoundingClientRect(clientX, clientY);\n      update == null ? void 0 : update();\n    }\n\n    triggerRef.addEventListener('mousemove', setMousePosition);\n    return function () {\n      return triggerRef.removeEventListener('mousemove', setMousePosition);\n    };\n  }, [finalConfig.followCursor, triggerRef, update]); // Handle tooltip DOM mutation changes (aka mutation observer)\n\n  React.useEffect(function () {\n    if (tooltipRef == null || update == null || finalConfig.mutationObserverOptions == null) return;\n    var observer = new MutationObserver(update);\n    observer.observe(tooltipRef, finalConfig.mutationObserverOptions);\n    return function () {\n      return observer.disconnect();\n    };\n  }, [finalConfig.mutationObserverOptions, tooltipRef, update]); // Tooltip props getter\n\n  var getTooltipProps = function getTooltipProps(args) {\n    if (args === void 0) {\n      args = {};\n    }\n\n    return _extends({}, args, {\n      style: _extends({}, args.style, styles.popper)\n    }, attributes.popper, {\n      'data-popper-interactive': finalConfig.interactive\n    });\n  }; // Arrow props getter\n\n\n  var getArrowProps = function getArrowProps(args) {\n    if (args === void 0) {\n      args = {};\n    }\n\n    return _extends({}, args, attributes.arrow, {\n      style: _extends({}, args.style, styles.arrow),\n      'data-popper-arrow': true\n    });\n  };\n\n  return _extends({\n    getArrowProps: getArrowProps,\n    getTooltipProps: getTooltipProps,\n    setTooltipRef: setTooltipRef,\n    setTriggerRef: setTriggerRef,\n    tooltipRef: tooltipRef,\n    triggerRef: triggerRef,\n    visible: visible\n  }, popperProps);\n}\n\nexport { usePopperTooltip };\n//# sourceMappingURL=react-popper-tooltip.js.map\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { usePopperTooltip } from 'react-popper-tooltip';\n\nimport { GrafanaTheme2, renderMarkdown } from '@grafana/data';\nimport { Button, Portal, useStyles2 } from '@grafana/ui';\n\nimport { FlexItem } from '../../components/QueryEditor';\n\nimport { QueryBuilderOperation, QueryBuilderOperationDef } from './types';\n\nexport interface Props {\n  operation: QueryBuilderOperation;\n  def: QueryBuilderOperationDef;\n}\n\nexport const OperationInfoButton = React.memo<Props>(({ def, operation }) => {\n  const styles = useStyles2(getStyles);\n  const [show, setShow] = useState(false);\n  const { getTooltipProps, setTooltipRef, setTriggerRef, visible } = usePopperTooltip({\n    placement: 'top',\n    visible: show,\n    offset: [0, 16],\n    onVisibleChange: setShow,\n    interactive: true,\n    trigger: ['click'],\n  });\n\n  return (\n    <>\n      <Button\n        title=\"Click to show description\"\n        ref={setTriggerRef}\n        icon=\"info-circle\"\n        size=\"sm\"\n        variant=\"secondary\"\n        fill=\"text\"\n      />\n      {visible && (\n        <Portal>\n          <div ref={setTooltipRef} {...getTooltipProps()} className={styles.docBox}>\n            <div className={styles.docBoxHeader}>\n              <span>{def.renderer(operation, def, '<expr>')}</span>\n              <FlexItem grow={1} />\n              <Button\n                icon=\"times\"\n                onClick={() => setShow(false)}\n                fill=\"text\"\n                variant=\"secondary\"\n                title=\"Remove operation\"\n              />\n            </div>\n            <div\n              className={styles.docBoxBody}\n              dangerouslySetInnerHTML={{ __html: getOperationDocs(def, operation) }}\n            ></div>\n          </div>\n        </Portal>\n      )}\n    </>\n  );\n});\n\nOperationInfoButton.displayName = 'OperationDocs';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    docBox: css({\n      overflow: 'hidden',\n      background: theme.colors.background.primary,\n      border: `1px solid ${theme.colors.border.strong}`,\n      boxShadow: theme.shadows.z3,\n      maxWidth: '600px',\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.borderRadius(),\n      zIndex: theme.zIndex.tooltip,\n    }),\n    docBoxHeader: css({\n      fontSize: theme.typography.h5.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace,\n      paddingBottom: theme.spacing(1),\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    docBoxBody: css({\n      // The markdown paragraph has a marginBottom this removes it\n      marginBottom: theme.spacing(-1),\n      color: theme.colors.text.secondary,\n    }),\n    signature: css({\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace,\n    }),\n    dropdown: css({\n      opacity: 0,\n      color: theme.colors.text.secondary,\n    }),\n  };\n};\nfunction getOperationDocs(def: QueryBuilderOperationDef, op: QueryBuilderOperation): string {\n  return renderMarkdown(def.explainHandler ? def.explainHandler(op, def) : def.documentation ?? 'no docs');\n}\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Button, Select, useStyles2 } from '@grafana/ui';\n\nimport { FlexItem } from '../../components/QueryEditor';\n\nimport { OperationInfoButton } from './OperationInfoButton';\nimport { VisualQueryModeller, QueryBuilderOperation, QueryBuilderOperationDef } from './types';\n\nexport interface Props {\n  operation: QueryBuilderOperation;\n  def: QueryBuilderOperationDef;\n  index: number;\n  queryModeller: VisualQueryModeller;\n  dragHandleProps: any;\n  onChange: (index: number, update: QueryBuilderOperation) => void;\n  onRemove: (index: number) => void;\n}\n\ninterface State {\n  isOpen?: boolean;\n  alternatives?: Array<SelectableValue<QueryBuilderOperationDef>>;\n}\n\nexport const OperationHeader = React.memo<Props>(\n  ({ operation, def, index, onChange, onRemove, queryModeller, dragHandleProps }) => {\n    const styles = useStyles2(getStyles);\n    const [state, setState] = useState<State>({});\n\n    const onToggleSwitcher = () => {\n      if (state.isOpen) {\n        setState({ ...state, isOpen: false });\n      } else {\n        const alternatives = queryModeller\n          .getAlternativeOperations(def.alternativesKey!)\n          .map((alt) => ({ label: alt.name, value: alt }));\n        setState({ isOpen: true, alternatives });\n      }\n    };\n\n    return (\n      <div className={styles.header}>\n        {!state.isOpen && (\n          <>\n            <div {...dragHandleProps}>{def.name ?? def.id}</div>\n            <FlexItem grow={1} />\n            <div className={`${styles.operationHeaderButtons} operation-header-show-on-hover`}>\n              <Button\n                icon=\"angle-down\"\n                size=\"sm\"\n                onClick={onToggleSwitcher}\n                fill=\"text\"\n                variant=\"secondary\"\n                title=\"Click to view alternative operations\"\n              />\n              <OperationInfoButton def={def} operation={operation} />\n              <Button\n                icon=\"times\"\n                size=\"sm\"\n                onClick={() => onRemove(index)}\n                fill=\"text\"\n                variant=\"secondary\"\n                title=\"Remove operation\"\n              />\n            </div>\n          </>\n        )}\n        {state.isOpen && (\n          <div className={styles.selectWrapper}>\n            <Select\n              autoFocus\n              openMenuOnFocus\n              placeholder=\"Replace with\"\n              options={state.alternatives}\n              isOpen={true}\n              onCloseMenu={onToggleSwitcher}\n              onChange={(value) => {\n                if (value.value) {\n                  // Operation should exist if it is selectable\n                  const newDef = queryModeller.getOperationDef(value.value.id)!;\n\n                  // copy default params, and override with all current params\n                  const newParams = [...newDef.defaultParams];\n                  for (let i = 0; i < Math.min(operation.params.length, newParams.length); i++) {\n                    if (newDef.params[i].type === def.params[i].type) {\n                      newParams[i] = operation.params[i];\n                    }\n                  }\n\n                  const changedOp = { ...operation, params: newParams, id: value.value.id };\n                  onChange(index, def.changeTypeHandler ? def.changeTypeHandler(changedOp, newDef) : changedOp);\n                }\n              }}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nOperationHeader.displayName = 'OperationHeader';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    header: css({\n      borderBottom: `1px solid ${theme.colors.border.medium}`,\n      padding: theme.spacing(0.5, 0.5, 0.5, 1),\n      display: 'flex',\n      alignItems: 'center',\n      '&:hover .operation-header-show-on-hover': css({\n        opacity: 1,\n      }),\n    }),\n    operationHeaderButtons: css({\n      opacity: 0,\n      transition: theme.transitions.create(['opacity'], {\n        duration: theme.transitions.duration.short,\n      }),\n    }),\n    selectWrapper: css({\n      paddingRight: theme.spacing(2),\n    }),\n  };\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-11-03: extends interface Props\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useEffect, HTMLProps, ReactNode } from 'react';\n\nimport { Input, measureText } from \"@grafana/ui\";\n\nexport interface Props extends Omit<HTMLProps<HTMLInputElement>, 'prefix' | 'size'> {\n  /** Sets the width to a multiple of 8px. Should only be used with inline forms. Setting width of the container is preferred in other cases.*/\n  width?: number;\n  /** Show an invalid state around the input */\n  invalid?: boolean;\n  /** Show an icon as a prefix in the input */\n  prefix?: ReactNode;\n  /** Show an icon as a suffix in the input */\n  suffix?: ReactNode;\n  /** Show a loading indicator as a suffix in the input */\n  loading?: boolean;\n  /** Add a component as an addon before the input  */\n  addonBefore?: ReactNode;\n  /** Add a component as an addon after the input */\n  addonAfter?: ReactNode;\n  /** Sets the min-width to a multiple of 8px. Default value is 10*/\n  minWidth?: number;\n  /** Sets the max-width to a multiple of 8px.*/\n  maxWidth?: number;\n  /** onChange function that will be run on onBlur and onKeyPress with enter*/\n  onCommitChange?: (event: React.FormEvent<HTMLInputElement>) => void;\n}\n\nexport const AutoSizeInput = React.forwardRef<HTMLInputElement, Props>((props, ref) => {\n  const { defaultValue = '', minWidth = 10, maxWidth, onCommitChange, onKeyDown, onBlur, ...restProps } = props;\n  const [value, setValue] = React.useState(defaultValue);\n  const [inputWidth, setInputWidth] = React.useState(minWidth);\n\n  useEffect(() => {\n    setInputWidth(getWidthFor(value.toString(), minWidth, maxWidth));\n  }, [value, maxWidth, minWidth]);\n\n  return (\n    <Input\n      {...restProps}\n      ref={ref}\n      value={value.toString()}\n      onChange={(event) => {\n        setValue(event.currentTarget.value);\n      }}\n      width={inputWidth}\n      onBlur={(event) => {\n        if (onBlur) {\n          onBlur(event);\n        } else if (onCommitChange) {\n          onCommitChange(event);\n        }\n      }}\n      onKeyDown={(event) => {\n        if (onKeyDown) {\n          onKeyDown(event);\n        } else if (event.key === 'Enter' && onCommitChange) {\n          onCommitChange(event);\n        }\n      }}\n      data-testid={'autosize-input'}\n    />\n  );\n});\n\nfunction getWidthFor(value: string, minWidth: number, maxWidth: number | undefined): number {\n  if (!value) {\n    return minWidth;\n  }\n\n  const extraSpace = 3;\n  const realWidth = measureText(value.toString(), 14).width / 8 + extraSpace;\n\n  if (minWidth && realWidth < minWidth) {\n    return minWidth;\n  }\n\n  if (maxWidth && realWidth > maxWidth) {\n    return realWidth;\n  }\n\n  return realWidth;\n}\n\nAutoSizeInput.displayName = 'AutoSizeInput';\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React, { ComponentType } from 'react';\n\nimport { GrafanaTheme2, SelectableValue, toOption } from '@grafana/data';\nimport { Button, Checkbox, Select, useStyles2 } from '@grafana/ui';\n\nimport { Stack } from '../../components/QueryEditor';\nimport { AutoSizeInput } from \"../../components/QueryEditor/AutoSizeInput\";\n\nimport { getOperationParamId } from './operationUtils';\nimport { QueryBuilderOperationParamDef, QueryBuilderOperationParamEditorProps } from './types';\n\nexport function getOperationParamEditor(\n  paramDef: QueryBuilderOperationParamDef\n): ComponentType<QueryBuilderOperationParamEditorProps> {\n  if (paramDef.editor) {\n    return paramDef.editor;\n  }\n\n  if (paramDef.options) {\n    return SelectInputParamEditor;\n  }\n\n  switch (paramDef.type) {\n    case 'boolean':\n      return BoolInputParamEditor;\n    case 'number':\n    case 'string':\n    default:\n      return SimpleInputParamEditor;\n  }\n}\n\nfunction SimpleInputParamEditor(props: QueryBuilderOperationParamEditorProps) {\n  return (\n    <AutoSizeInput\n      id={getOperationParamId(props.operationIndex, props.index)}\n      defaultValue={props.value?.toString()}\n      minWidth={props.paramDef.minWidth}\n      placeholder={props.paramDef.placeholder}\n      title={props.paramDef.description}\n      onCommitChange={(evt) => {\n        props.onChange(props.index, evt.currentTarget.value);\n        if (props.paramDef.runQueryOnEnter && evt.type === 'keydown') {\n          props.onRunQuery();\n        }\n      }}\n    />\n  );\n}\n\nfunction BoolInputParamEditor(props: QueryBuilderOperationParamEditorProps) {\n  return (\n    <Checkbox\n      id={getOperationParamId(props.operationIndex, props.index)}\n      value={props.value as boolean}\n      onChange={(evt) => props.onChange(props.index, evt.currentTarget.checked)}\n    />\n  );\n}\n\nfunction SelectInputParamEditor({\n  paramDef,\n  value,\n  index,\n  operationIndex,\n  onChange,\n}: QueryBuilderOperationParamEditorProps) {\n  const styles = useStyles2(getStyles);\n  let selectOptions = paramDef.options as Array<SelectableValue<any>>;\n\n  if (!selectOptions[0]?.label) {\n    selectOptions = paramDef.options!.map((option) => ({\n      label: option.toString(),\n      value: option as string,\n    }));\n  }\n\n  let valueOption = selectOptions.find((x) => x.value === value) ?? toOption(value as string);\n\n  // If we have optional options param and don't have value, we want to render button with which we add optional options.\n  // This makes it easier to understand what needs to be selected and what is optional.\n  if (!value && paramDef.optional) {\n    return (\n      <div className={styles.optionalParam}>\n        <Button\n          size=\"sm\"\n          variant=\"secondary\"\n          title={`Add ${paramDef.name}`}\n          icon=\"plus\"\n          onClick={() => onChange(index, selectOptions[0].value)}\n        >\n          {paramDef.name}\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <Stack gap={0.5} direction=\"row\" alignItems=\"center\" wrap={false}>\n      <Select\n        id={getOperationParamId(operationIndex, index)}\n        value={valueOption}\n        options={selectOptions}\n        placeholder={paramDef.placeholder}\n        allowCustomValue={true}\n        onChange={(value) => onChange(index, value.value!)}\n      />\n      {paramDef.optional && (\n        <Button\n          data-testid={`operations.${index}.remove-param`}\n          size=\"sm\"\n          fill=\"text\"\n          icon=\"times\"\n          variant=\"secondary\"\n          title={`Remove ${paramDef.name}`}\n          onClick={() => onChange(index, '')}\n        />\n      )}\n    </Stack>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    optionalParam: css({\n      marginTop: theme.spacing(1),\n    }),\n  };\n};\n","import { QueryBuilderOperation, QueryBuilderOperationDef } from '../types';\n\nfunction callParamChangedThenOnChange(\n  def: QueryBuilderOperationDef,\n  operation: QueryBuilderOperation,\n  operationIndex: number,\n  paramIndex: number,\n  onChange: (index: number, update: QueryBuilderOperation) => void\n) {\n  if (def.paramChangedHandler) {\n    onChange(operationIndex, def.paramChangedHandler(paramIndex, operation, def));\n  } else {\n    onChange(operationIndex, operation);\n  }\n}\n\nexport default callParamChangedThenOnChange;\n","import React from 'react';\n\nimport { Button } from '@grafana/ui';\n\nimport { QueryBuilderOperationParamDef } from '../types';\n\nimport { OperationEditorStyles } from './OperationEditor';\n\nfunction renderAddRestParamButton(\n  paramsDef: QueryBuilderOperationParamDef[],\n  onAddRestParam: () => void,\n  operationIndex: number,\n  paramIndex: number,\n  styles: OperationEditorStyles\n) {\n  const title = paramsDef.map(p => p.name).join(' & ');\n  return (\n    <div\n      className={styles.restParam}\n      key={`${paramIndex}-2`}\n    >\n      <Button\n        size=\"sm\"\n        icon=\"plus\"\n        title={`Add ${title}`}\n        variant=\"secondary\"\n        onClick={onAddRestParam}\n        data-testid={`operations.${operationIndex}.add-rest-param`}\n      >\n        {title}\n      </Button>\n    </div>\n  );\n}\n\nexport default renderAddRestParamButton;\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nexport default (theme: GrafanaTheme2) => ({\n  card: css({\n    background: theme.colors.background.primary,\n    border: `1px solid ${theme.colors.border.medium}`,\n    display: 'flex',\n    flexDirection: 'column',\n    cursor: 'grab',\n    borderRadius: theme.shape.borderRadius(1),\n    marginBottom: theme.spacing(1),\n    position: 'relative',\n    transition: 'all 0.5s ease-in 0s',\n  }),\n  cardHighlight: css({\n    boxShadow: `0px 0px 4px 0px ${theme.colors.primary.border}`,\n    border: `1px solid ${theme.colors.primary.border}`,\n  }),\n  infoIcon: css({\n    marginLeft: theme.spacing(0.5),\n    color: theme.colors.text.secondary,\n    ':hover': {\n      color: theme.colors.text.primary,\n    },\n  }),\n  body: css({\n    margin: theme.spacing(1, 1, 1, 1),\n    display: 'grid',\n    gap: theme.spacing(0.5),\n  }),\n  paramRow: css({\n    label: 'paramRow',\n    display: 'table-row',\n    verticalAlign: 'middle',\n  }),\n  paramName: css({\n    display: 'table-cell',\n    padding: theme.spacing(0, 1, 0, 0),\n    fontSize: theme.typography.bodySmall.fontSize,\n    fontWeight: theme.typography.fontWeightMedium,\n    verticalAlign: 'middle',\n    height: '32px',\n  }),\n  paramValue: css({\n    label: 'paramValue',\n    display: 'table-cell',\n    verticalAlign: 'middle',\n  }),\n  restParam: css({\n    padding: theme.spacing(0, 1, 1, 1),\n  }),\n  arrow: css({\n    position: 'absolute',\n    top: '0',\n    right: '-18px',\n    display: 'flex',\n  }),\n  arrowLine: css({\n    height: '2px',\n    width: '8px',\n    backgroundColor: theme.colors.border.strong,\n    position: 'relative',\n    top: '14px',\n  }),\n  arrowArrow: css({\n    width: 0,\n    height: 0,\n    borderTop: '5px solid transparent',\n    borderBottom: '5px solid transparent',\n    borderLeft: `7px solid ${theme.colors.border.strong}`,\n    position: 'relative',\n    top: '10px',\n  }),\n});\n","import { useEffect, useState } from 'react';\n\n/**\n * When flash is switched on makes sure it is switched of right away, so we just flash the highlight and then fade\n * out.\n * @param flash\n */\n\nfunction useFlash(flash?: boolean) {\n  const [keepFlash, setKeepFlash] = useState(true);\n  useEffect(() => {\n    let t: any;\n    if (flash) {\n      t = setTimeout(() => {\n        setKeepFlash(false);\n      }, 1000);\n    } else {\n      setKeepFlash(true);\n    }\n\n    return () => clearTimeout(t);\n  }, [flash]);\n\n  return keepFlash && flash;\n}\n\nexport default useFlash;\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { cx } from '@emotion/css';\nimport React from 'react';\nimport { Draggable } from 'react-beautiful-dnd';\n\nimport { DataSourceApi } from '@grafana/data';\nimport { Button, Icon, Tooltip, useStyles2 } from '@grafana/ui';\n\nimport { Stack } from '../../../components/QueryEditor';\nimport { OperationHeader } from '../OperationHeader';\nimport { getOperationParamEditor } from '../OperationParamEditor';\nimport { getOperationParamId } from '../operationUtils';\nimport {\n  QueryBuilderOperation,\n  QueryBuilderOperationParamValue,\n  VisualQueryModeller,\n} from '../types';\n\nimport callParamChangedThenOnChange from './callParamChangedThenOnChange';\nimport renderAddRestParamButton from './renderAddRestParamButton';\nimport getStyles from './style';\nimport useFlash from './useFlash';\nexport type OperationEditorStyles = ReturnType<typeof getStyles>;\n\nexport interface Props {\n  operation: QueryBuilderOperation;\n  index: number;\n  query: any;\n  datasource: DataSourceApi;\n  queryModeller: VisualQueryModeller;\n  onChange: (index: number, update: QueryBuilderOperation) => void;\n  onRemove: (index: number) => void;\n  onRunQuery: () => void;\n  flash?: boolean;\n  highlight?: boolean;\n}\n\nexport function OperationEditor({\n  operation,\n  index,\n  onRemove,\n  onChange,\n  onRunQuery,\n  queryModeller,\n  query,\n  datasource,\n  flash,\n  highlight,\n}: Props) {\n  const styles = useStyles2(getStyles);\n  const def = queryModeller.getOperationDef(operation.id);\n  const shouldFlash = useFlash(flash);\n\n  if (!def) {\n    return <span>Operation {operation.id} not found</span>;\n  }\n\n  const onParamValueChanged = (paramIdx: number, value: QueryBuilderOperationParamValue) => {\n    const update: QueryBuilderOperation = { ...operation, params: [...operation.params] };\n    update.params[paramIdx] = value;\n    callParamChangedThenOnChange(def, update, index, paramIdx, onChange);\n  };\n\n  const onAddRestParam = () => {\n    const restParamsToAdd = def.params.filter(param => param.restParam).map(() => '');\n\n    const update: QueryBuilderOperation = {\n      ...operation,\n      params: [...operation.params, ...restParamsToAdd]\n    };\n    callParamChangedThenOnChange(def, update, index, operation.params.length, onChange);\n  };\n\n  const onRemoveRestParam = (paramIdx: number) => {\n    const update: QueryBuilderOperation = {\n      ...operation,\n      params: [...operation.params.slice(0, paramIdx), ...operation.params.slice(paramIdx + 1)],\n    };\n    callParamChangedThenOnChange(def, update, index, paramIdx, onChange);\n  };\n\n  const operationElements: React.ReactNode[] = [];\n\n  for (let paramIndex = 0; paramIndex < operation.params.length; paramIndex++) {\n    const restParamsCount = def.params.filter(param => param.restParam).length;\n    const totalParamsCount = def.params.length;\n\n    let paramDefIndex;\n    if (paramIndex < totalParamsCount - restParamsCount) {\n      paramDefIndex = paramIndex;\n    } else {\n      paramDefIndex = totalParamsCount - restParamsCount + (paramIndex - (totalParamsCount - restParamsCount)) % restParamsCount;\n    }\n\n    const paramDef = def.params[paramDefIndex];\n    const Editor = getOperationParamEditor(paramDef);\n\n    operationElements.push(\n      <div\n        className={styles.paramRow}\n        key={`${paramIndex}-1`}\n      >\n        {!paramDef.hideName && (\n          <div className={styles.paramName}>\n            <label htmlFor={getOperationParamId(index, paramIndex)}>{paramDef.name}</label>\n            {paramDef.description && (\n              <Tooltip\n                placement=\"top\"\n                content={paramDef.description}\n                theme=\"info\"\n              >\n                <Icon\n                  name=\"info-circle\"\n                  size=\"sm\"\n                  className={styles.infoIcon}\n                />\n              </Tooltip>\n            )}\n          </div>\n        )}\n        <div className={styles.paramValue}>\n          <Stack\n            gap={0.5}\n            direction=\"row\"\n            alignItems=\"center\"\n            wrap={false}\n          >\n            {/* @ts-ignore */}\n            <Editor\n              index={paramIndex}\n              paramDef={paramDef}\n              value={operation.params[paramIndex]}\n              operation={operation}\n              operationIndex={index}\n              onChange={onParamValueChanged}\n              onRunQuery={onRunQuery}\n              query={query}\n              datasource={datasource}\n            />\n            {paramDef.restParam && (operation.params.length > def.params.length || paramDef.optional) && (\n              <Button\n                data-testid={`operations.${index}.remove-rest-param`}\n                size=\"sm\"\n                fill=\"text\"\n                icon=\"times\"\n                variant=\"secondary\"\n                title={`Remove ${paramDef.name}`}\n                onClick={() => onRemoveRestParam(paramIndex)}\n              />\n            )}\n          </Stack>\n        </div>\n      </div>\n    );\n  }\n\n  // Handle adding button for rest params\n  let restParam: React.ReactNode | undefined;\n  if (def.params.length > 0) {\n    const params = def.params.filter(p => p.restParam);\n    if (params.length) {\n      restParam = renderAddRestParamButton(params, onAddRestParam, index, operation.params.length, styles);\n    }\n  }\n\n  return (\n    <Draggable\n      draggableId={`operation-${index}`}\n      index={index}\n    >\n      {(provided) => (\n        <div\n          className={cx(styles.card, (shouldFlash || highlight) && styles.cardHighlight)}\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          data-testid={`operations.${index}.wrapper`}\n        >\n          <OperationHeader\n            operation={operation}\n            dragHandleProps={provided.dragHandleProps}\n            def={def}\n            index={index}\n            onChange={onChange}\n            onRemove={onRemove}\n            queryModeller={queryModeller}\n          />\n          <div className={styles.body}>{operationElements}</div>\n          {restParam}\n          {index < query.operations.length - 1 && (\n            <div className={styles.arrow}>\n              <div className={styles.arrowLine} />\n              <div className={styles.arrowArrow} />\n            </div>\n          )}\n        </div>\n      )}\n    </Draggable>\n  );\n}\n\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { DragDropContext, Droppable, DropResult } from 'react-beautiful-dnd';\nimport { useMountedState, usePrevious } from 'react-use';\n\nimport { DataSourceApi, GrafanaTheme2 } from '@grafana/data';\nimport { Button, Cascader, CascaderOption, useStyles2 } from '@grafana/ui';\n\nimport { Stack } from '../../components/QueryEditor';\n\nimport { OperationEditor } from './OperationEditor/OperationEditor';\nimport { QueryBuilderOperation, QueryWithOperations, VisualQueryModeller } from './types';\n\nexport interface Props<T extends QueryWithOperations> {\n  query: T;\n  datasource: DataSourceApi;\n  onChange: (query: T) => void;\n  onRunQuery: () => void;\n  queryModeller: VisualQueryModeller;\n  explainMode?: boolean;\n  highlightedOp?: QueryBuilderOperation;\n}\n\nexport function OperationList<T extends QueryWithOperations>({\n  query,\n  datasource,\n  queryModeller,\n  onChange,\n  onRunQuery,\n  highlightedOp,\n}: Props<T>) {\n  const styles = useStyles2(getStyles);\n  const { operations } = query;\n\n  const opsToHighlight = useOperationsHighlight(operations);\n\n  const [cascaderOpen, setCascaderOpen] = useState(false);\n\n  const onOperationChange = (index: number, update: QueryBuilderOperation) => {\n    const updatedList = [...operations];\n    updatedList.splice(index, 1, update);\n    onChange({ ...query, operations: updatedList });\n  };\n\n  const onRemove = (index: number) => {\n    const updatedList = [...operations.slice(0, index), ...operations.slice(index + 1)];\n    onChange({ ...query, operations: updatedList });\n  };\n\n  const addOptions: CascaderOption[] = queryModeller.getCategories().map((category) => {\n    return {\n      value: category,\n      label: category,\n      items: queryModeller.getOperationsForCategory(category).map((operation) => ({\n        value: operation.id,\n        label: operation.name,\n        isLeaf: true,\n      })),\n    };\n  });\n\n  const onAddOperation = (value: string) => {\n    const operationDef = queryModeller.getOperationDef(value);\n    if (!operationDef) {\n      return;\n    }\n    onChange(operationDef.addOperationHandler(operationDef, query, queryModeller));\n    setCascaderOpen(false);\n  };\n\n  const onDragEnd = (result: DropResult) => {\n    if (!result.destination) {\n      return;\n    }\n\n    const updatedList = [...operations];\n    const element = updatedList[result.source.index];\n    updatedList.splice(result.source.index, 1);\n    updatedList.splice(result.destination.index, 0, element);\n    onChange({ ...query, operations: updatedList });\n  };\n\n  const onCascaderBlur = () => {\n    setCascaderOpen(false);\n  };\n\n  return (\n    <Stack\n      gap={1}\n      direction=\"column\"\n    >\n      <Stack gap={1}>\n        {operations.length > 0 && (\n          <DragDropContext onDragEnd={onDragEnd}>\n            <Droppable\n              droppableId=\"sortable-field-mappings\"\n              direction=\"horizontal\"\n            >\n              {(provided) => (\n                <div\n                  className={styles.operationList}\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                >\n                  {operations.map((op, index) => {\n                    return (\n                      <OperationEditor\n                        key={op.id + JSON.stringify(op.params) + index}\n                        queryModeller={queryModeller}\n                        index={index}\n                        operation={op}\n                        query={query}\n                        datasource={datasource}\n                        onChange={onOperationChange}\n                        onRemove={onRemove}\n                        onRunQuery={onRunQuery}\n                        flash={opsToHighlight[index]}\n                        highlight={highlightedOp === op}\n                      />\n                    );\n                  })}\n                  {provided.placeholder}\n                </div>\n              )}\n            </Droppable>\n          </DragDropContext>\n        )}\n        <div className={styles.addButton}>\n          {cascaderOpen ? (\n            <Cascader\n              options={addOptions}\n              onSelect={onAddOperation}\n              onBlur={onCascaderBlur}\n              autoFocus={true}\n              alwaysOpen={true}\n              hideActiveLevelLabel={true}\n              placeholder={'Search'}\n            />\n          ) : (\n            <Button\n              icon={'plus'}\n              variant={'secondary'}\n              onClick={() => setCascaderOpen(true)}\n              title={'Add operation'}\n            >\n              Operations\n            </Button>\n          )}\n        </div>\n      </Stack>\n    </Stack>\n  );\n}\n\n/**\n * Returns indexes of operations that should be highlighted. We check the diff of operations added but at the same time\n * we want to highlight operations only after the initial render, so we check for mounted state and calculate the diff\n * only after.\n * @param operations\n */\nfunction useOperationsHighlight(operations: QueryBuilderOperation[]) {\n  const isMounted = useMountedState();\n  const prevOperations = usePrevious(operations);\n\n  if (!isMounted()) {\n    return operations.map(() => false);\n  }\n\n  if (!prevOperations) {\n    return operations.map(() => true);\n  }\n\n  let newOps: boolean[] = [];\n\n  if (prevOperations.length - 1 === operations.length && operations.every((op) => prevOperations.includes(op))) {\n    // In case we remove one op and does not change any ops then don't highlight anything.\n    return operations.map(() => false);\n  }\n  if (prevOperations.length + 1 === operations.length && prevOperations.every((op) => operations.includes(op))) {\n    // If we add a single op just find it and highlight just that.\n    const newOp = operations.find((op) => !prevOperations.includes(op));\n    newOps = operations.map((op) => {\n      return op === newOp;\n    });\n  } else {\n    // Default diff of all ops.\n    newOps = operations.map((op, index) => {\n      return !isSameOp(op.id, prevOperations[index]?.id);\n    });\n  }\n  return newOps;\n}\n\nfunction isSameOp(op1?: string, op2?: string) {\n  return op1 === op2 || `__${op1}_by` === op2 || op1 === `__${op2}_by`;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    heading: css({\n      label: 'heading',\n      fontSize: 12,\n      fontWeight: theme.typography.fontWeightMedium,\n      marginBottom: 0,\n    }),\n    operationList: css({\n      label: 'operationList',\n      display: 'flex',\n      flexWrap: 'wrap',\n      gap: theme.spacing(2),\n    }),\n    addButton: css({\n      label: 'addButton',\n      width: 126,\n      paddingBottom: theme.spacing(1),\n    }),\n  };\n};\n","import { useCallback, useEffect, useRef } from 'react';\nexport default function useMountedState() {\n    var mountedRef = useRef(false);\n    var get = useCallback(function () { return mountedRef.current; }, []);\n    useEffect(function () {\n        mountedRef.current = true;\n        return function () {\n            mountedRef.current = false;\n        };\n    }, []);\n    return get;\n}\n","import { useEffect, useRef } from 'react';\nexport default function usePrevious(state) {\n    var ref = useRef();\n    useEffect(function () {\n        ref.current = state;\n    });\n    return ref.current;\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css, cx } from '@emotion/css';\nimport Prism, { Grammar } from 'prismjs';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useTheme2 } from '@grafana/ui';\n\nexport interface Props {\n  query: string;\n  lang: {\n    grammar: Grammar;\n    name: string;\n  };\n}\nexport function RawQuery({ query, lang }: Props) {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  const highlighted = Prism.highlight(query, lang.grammar, lang.name);\n\n  return (\n    <div\n      className={cx(styles.editorField, 'prism-syntax-highlight')}\n      aria-label=\"selector\"\n      dangerouslySetInnerHTML={{ __html: highlighted }}\n    />\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    editorField: css({\n      fontFamily: theme.typography.fontFamilyMonospace,\n      fontSize: theme.typography.bodySmall.fontSize,\n    }),\n  };\n};\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { Grammar } from 'prismjs';\nimport React from 'react';\n\nimport { OperationExplainedBox } from './OperationExplainedBox';\nimport { RawQuery } from './RawQuery';\nimport { QueryBuilderOperation, QueryWithOperations, VisualQueryModeller } from './types';\n\nexport interface Props<T extends QueryWithOperations> {\n  query: T;\n  queryModeller: VisualQueryModeller;\n  explainMode?: boolean;\n  stepNumber: number;\n  lang: {\n    grammar: Grammar;\n    name: string;\n  };\n  onMouseEnter?: (op: QueryBuilderOperation, index: number) => void;\n  onMouseLeave?: (op: QueryBuilderOperation, index: number) => void;\n}\n\nexport function OperationListExplained<T extends QueryWithOperations>({\n  query,\n  queryModeller,\n  stepNumber,\n  lang,\n  onMouseEnter,\n  onMouseLeave,\n}: Props<T>) {\n  return (\n    <>\n      {query.operations.map((op, index) => {\n        const def = queryModeller.getOperationDef(op.id);\n        if (!def) {\n          return `Operation ${op.id} not found`;\n        }\n        const title = def.renderer(op, def, '<expr>');\n        const body = def.explainHandler ? def.explainHandler(op, def) : def.documentation ?? 'no docs';\n\n        return (\n          <div\n            key={index}\n            onMouseEnter={() => onMouseEnter?.(op, index)}\n            onMouseLeave={() => onMouseLeave?.(op, index)}\n          >\n            <OperationExplainedBox\n              stepNumber={index + stepNumber}\n              title={<RawQuery query={title} lang={lang} />}\n              markdown={body}\n            />\n          </div>\n        );\n      })}\n    </>\n  );\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { Stack } from \"../../components/QueryEditor\";\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nexport function OperationsEditorRow({ children }: Props) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.root}>\n      <Stack gap={1}>{children}</Stack>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    root: css({\n      padding: theme.spacing(1, 1, 0, 1),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.borderRadius(1),\n    }),\n  };\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React, { useState, useEffect } from 'react';\n\nimport { GrafanaTheme2, PanelData, QueryHint } from '@grafana/data';\nimport { Button, Tooltip, useStyles2 } from '@grafana/ui';\n\nimport { PrometheusDatasource } from '../../datasource';\n\nimport { LokiAndPromQueryModellerBase, PromLokiVisualQuery } from './LokiAndPromQueryModellerBase';\n\nexport interface Props<T extends PromLokiVisualQuery> {\n  query: T;\n  datasource: PrometheusDatasource;\n  queryModeller: LokiAndPromQueryModellerBase;\n  buildVisualQueryFromString: (expr: string) => { query: T };\n  onChange: (update: T) => void;\n  data?: PanelData;\n}\n\nexport const QueryBuilderHints = <T extends PromLokiVisualQuery>({\n  datasource,\n  query: visualQuery,\n  onChange,\n  data,\n  queryModeller,\n  buildVisualQueryFromString,\n}: Props<T>) => {\n  const [hints, setHints] = useState<QueryHint[]>([]);\n  const styles = useStyles2(getStyles);\n\n  useEffect(() => {\n    const query = { expr: queryModeller.renderQuery(visualQuery), refId: '' };\n    // For now show only actionable hints\n    const hints = datasource.getQueryHints(query, data?.series || []).filter((hint) => hint.fix?.action);\n    setHints(hints);\n  }, [datasource, visualQuery, data, queryModeller]);\n\n  return (\n    <>\n      {hints.length > 0 && (\n        <div className={styles.container}>\n          {hints.map((hint) => {\n            return (\n              <Tooltip content={`${hint.label} ${hint.fix?.label}`} key={hint.type}>\n                <Button\n                  onClick={() => {\n                    if (hint?.fix?.action) {\n                      const query = { expr: queryModeller.renderQuery(visualQuery), refId: '' };\n                      const newQuery = datasource.modifyQuery(query, hint.fix.action);\n                      const newVisualQuery = buildVisualQueryFromString(newQuery.expr);\n                      return onChange(newVisualQuery.query);\n                    }\n                  }}\n                  fill=\"outline\"\n                  size=\"sm\"\n                  className={styles.hint}\n                >\n                  {'hint: ' + hint.fix?.action?.type.toLowerCase().replace('_', ' ') + '()'}\n                </Button>\n              </Tooltip>\n            );\n          })}\n        </div>\n      )}\n    </>\n  );\n};\n\nQueryBuilderHints.displayName = 'QueryBuilderHints';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    container: css`\n      display: flex;\n      align-items: start;\n    `,\n    hint: css`\n      margin-right: ${theme.spacing(1)};\n    `,\n  };\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React, { useCallback, useState } from 'react';\nimport Highlighter from 'react-highlight-words';\n\nimport { SelectableValue, toOption, GrafanaTheme2 } from '@grafana/data';\nimport { Select, FormatOptionLabelMeta, useStyles2, InlineField, InlineFieldRow } from '@grafana/ui';\n\nimport { EditorField, EditorFieldGroup } from '../../components/QueryEditor';\nimport { escapeMetricNameSpecialCharacters } from \"../../language_utils\";\nimport { PromVisualQuery } from '../types';\n\n// We are matching words split with space\nconst splitSeparator = ' ';\n\nexport interface Props {\n  query: PromVisualQuery;\n  onChange: (query: PromVisualQuery) => void;\n  onGetMetrics: () => Promise<SelectableValue[]>;\n  variableEditor?: boolean;\n}\n\nexport function MetricSelect({ query, onChange, onGetMetrics, variableEditor }: Props) {\n  const styles = useStyles2(getStyles);\n  const [state, setState] = useState<{\n    metrics?: Array<SelectableValue<any>>;\n    isLoading?: boolean;\n  }>({});\n\n  const customFilterOption = useCallback((option: SelectableValue<any>, searchQuery: string) => {\n    const label = option.label ?? option.value;\n    if (!label) {\n      return false;\n    }\n\n    // custom value is not a string label but a react node\n    if (!label.toLowerCase) {\n      return true;\n    }\n\n    const searchWords = searchQuery.split(splitSeparator);\n    return searchWords.reduce((acc, cur) => acc && label.toLowerCase().includes(cur.toLowerCase()), true);\n  }, []);\n\n  const formatOptionLabel = useCallback(\n    (option: SelectableValue<any>, meta: FormatOptionLabelMeta<any>) => {\n      // For newly created custom value we don't want to add highlight\n      if (option['__isNew__']) {\n        return option.label;\n      }\n\n      return (\n        <Highlighter\n          searchWords={meta.inputValue.split(splitSeparator)}\n          textToHighlight={option.label ?? ''}\n          highlightClassName={styles.highlight}\n        />\n      );\n    },\n    [styles.highlight]\n  );\n\n  const handleOpenMenu = async () => {\n    setState({ isLoading: true });\n    const metrics = await onGetMetrics();\n    setState({ metrics, isLoading: undefined });\n  }\n\n  const handleChange = ({ value }: SelectableValue) => {\n    if (value) {\n      onChange({ ...query, metric: escapeMetricNameSpecialCharacters(value) });\n    }\n  }\n\n  const metricSelect = () => (\n    <Select\n      inputId=\"vm-metric-select\"\n      className={styles.select}\n      value={query.metric ? toOption(query.metric) : undefined}\n      placeholder=\"Select metric\"\n      allowCustomValue\n      formatOptionLabel={formatOptionLabel}\n      filterOption={customFilterOption}\n      onOpenMenu={handleOpenMenu}\n      isLoading={state.isLoading}\n      options={state.metrics}\n      onChange={handleChange}\n    />\n  )\n\n  return (\n    variableEditor ? (\n      <InlineFieldRow>\n        <InlineField\n          label=\"Metric\"\n          labelWidth={20}\n          tooltip={<div>Optional: returns a list of label values for the label name in the specified metric.</div>}\n        >\n          {metricSelect()}\n        </InlineField>\n      </InlineFieldRow>\n    ) : (\n      <EditorFieldGroup>\n        <EditorField label=\"Metric\">\n          {metricSelect()}\n        </EditorField>\n      </EditorFieldGroup>\n    )\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  select: css`\n    min-width: 125px;\n  `,\n  highlight: css`\n    label: select__match-highlight;\n    background: inherit;\n    padding: inherit;\n    color: ${theme.colors.warning.contrastText};\n    background-color: ${theme.colors.warning.main};\n  `,\n});\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2, toOption } from '@grafana/data';\nimport { IconButton, Select, useStyles2 } from '@grafana/ui';\n\nimport { EditorRows, FlexItem } from '../../components/QueryEditor';\nimport { AutoSizeInput } from \"../../components/QueryEditor/AutoSizeInput\";\nimport { PrometheusDatasource } from '../../datasource';\nimport { binaryScalarDefs } from '../binaryScalarOperations';\nimport { PromVisualQueryBinary } from '../types';\n\nimport { PromQueryBuilder } from './PromQueryBuilder';\n\nexport interface Props {\n  nestedQuery: PromVisualQueryBinary;\n  datasource: PrometheusDatasource;\n  index: number;\n  onChange: (index: number, update: PromVisualQueryBinary) => void;\n  onRemove: (index: number) => void;\n  onRunQuery: () => void;\n  showExplain: boolean;\n}\n\nexport const NestedQuery = React.memo<Props>((props) => {\n  const { nestedQuery, index, datasource, onChange, onRemove, onRunQuery, showExplain } = props;\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.card}>\n      <div className={styles.header}>\n        <div className={styles.name}>Operator</div>\n        <Select\n          width=\"auto\"\n          options={operators}\n          value={toOption(nestedQuery.operator)}\n          onChange={(value) => {\n            onChange(index, {\n              ...nestedQuery,\n              operator: value.value!,\n            });\n          }}\n        />\n        <div className={styles.name}>Vector matches</div>\n        <div className={styles.vectorMatchWrapper}>\n          <Select<PromVisualQueryBinary['vectorMatchesType']>\n            width=\"auto\"\n            value={nestedQuery.vectorMatchesType || 'on'}\n            allowCustomValue\n            options={[\n              { value: 'on', label: 'on' },\n              { value: 'ignoring', label: 'ignoring' },\n            ]}\n            onChange={(val) => {\n              onChange(index, {\n                ...nestedQuery,\n                vectorMatchesType: val.value,\n              });\n            }}\n          />\n          <AutoSizeInput\n            className={styles.vectorMatchInput}\n            minWidth={20}\n            defaultValue={nestedQuery.vectorMatches}\n            onCommitChange={(evt) => {\n              onChange(index, {\n                ...nestedQuery,\n                vectorMatches: evt.currentTarget.value,\n                vectorMatchesType: nestedQuery.vectorMatchesType || 'on',\n              });\n            }}\n          />\n        </div>\n        <FlexItem grow={1} />\n        <IconButton aria-label=\"\" name=\"times\" size=\"sm\" onClick={() => onRemove(index)} />\n      </div>\n      <div className={styles.body}>\n        <EditorRows>\n          <PromQueryBuilder\n            showExplain={showExplain}\n            query={nestedQuery.query}\n            datasource={datasource}\n            onRunQuery={onRunQuery}\n            onChange={(update) => {\n              onChange(index, { ...nestedQuery, query: update });\n            }}\n          />\n        </EditorRows>\n      </div>\n    </div>\n  );\n});\n\nconst operators = binaryScalarDefs.map((def) => ({ label: def.sign, value: def.sign }));\n\nNestedQuery.displayName = 'NestedQuery';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    card: css({\n      label: 'card',\n      display: 'flex',\n      flexDirection: 'column',\n      gap: theme.spacing(0.5),\n    }),\n    header: css({\n      label: 'header',\n      padding: theme.spacing(0.5, 0.5, 0.5, 1),\n      gap: theme.spacing(1),\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    name: css({\n      label: 'name',\n      whiteSpace: 'nowrap',\n    }),\n    body: css({\n      label: 'body',\n      paddingLeft: theme.spacing(2),\n    }),\n    vectorMatchInput: css({\n      label: 'vectorMatchInput',\n      marginLeft: -1,\n    }),\n    vectorMatchWrapper: css({\n      label: 'vectorMatchWrapper',\n      display: 'flex',\n    }),\n  };\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react';\n\nimport { Stack } from '../../components/QueryEditor';\nimport { PrometheusDatasource } from '../../datasource';\nimport { PromVisualQuery, PromVisualQueryBinary } from '../types';\n\nimport { NestedQuery } from './NestedQuery';\n\nexport interface Props {\n  query: PromVisualQuery;\n  datasource: PrometheusDatasource;\n  onChange: (query: PromVisualQuery) => void;\n  onRunQuery: () => void;\n  showExplain: boolean;\n}\n\nexport function NestedQueryList(props: Props) {\n  const { query, datasource, onChange, onRunQuery, showExplain } = props;\n  const nestedQueries = query.binaryQueries ?? [];\n\n  const onNestedQueryUpdate = (index: number, update: PromVisualQueryBinary) => {\n    const updatedList = [...nestedQueries];\n    updatedList.splice(index, 1, update);\n    onChange({ ...query, binaryQueries: updatedList });\n  };\n\n  const onRemove = (index: number) => {\n    const updatedList = [...nestedQueries.slice(0, index), ...nestedQueries.slice(index + 1)];\n    onChange({ ...query, binaryQueries: updatedList });\n  };\n\n  return (\n    <Stack direction=\"column\" gap={1}>\n      {nestedQueries.map((nestedQuery, index) => (\n        <NestedQuery\n          key={index.toString()}\n          nestedQuery={nestedQuery}\n          index={index}\n          onChange={onNestedQueryUpdate}\n          datasource={datasource}\n          onRemove={onRemove}\n          onRunQuery={onRunQuery}\n          showExplain={showExplain}\n        />\n      ))}\n    </Stack>\n  );\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react';\n\nimport { Stack } from '../../components/QueryEditor';\nimport metricsqlGrammar from '../../metricsql';\nimport { promQueryModeller } from '../PromQueryModeller';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { OperationExplainedBox } from '../shared/OperationExplainedBox';\nimport { OperationListExplained } from '../shared/OperationListExplained';\nimport { RawQuery } from '../shared/RawQuery';\nimport { PromVisualQuery } from '../types';\n\nexport const EXPLAIN_LABEL_FILTER_CONTENT = 'Fetch all series matching metric name and label filters.';\n\nexport interface Props {\n  query: string;\n}\n\nexport const PromQueryBuilderExplained = React.memo<Props>(({ query }) => {\n  const visQuery = buildVisualQueryFromString(query || '').query;\n  const lang = { grammar: metricsqlGrammar, name: 'promql' };\n\n  return (\n    <Stack gap={0.5} direction=\"column\">\n      <OperationExplainedBox\n        stepNumber={1}\n        title={<RawQuery query={`${visQuery.metric} ${promQueryModeller.renderLabels(visQuery.labels)}`} lang={lang} />}\n      >\n        {EXPLAIN_LABEL_FILTER_CONTENT}\n      </OperationExplainedBox>\n      <OperationListExplained<PromVisualQuery>\n        stepNumber={2}\n        queryModeller={promQueryModeller}\n        query={visQuery}\n        lang={lang}\n      />\n    </Stack>\n  );\n});\n\nPromQueryBuilderExplained.displayName = 'PromQueryBuilderExplained';\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useCallback, useState } from \"react\";\n\nimport { DataSourceApi, PanelData, SelectableValue } from \"@grafana/data\";\n\nimport { EditorRow } from \"../../components/QueryEditor\";\nimport { PrometheusDatasource } from \"../../datasource\";\nimport { getMetadataString } from \"../../language_provider\";\nimport metricsqlGrammar from \"../../metricsql\";\nimport { promQueryModeller } from \"../PromQueryModeller\";\nimport { buildVisualQueryFromString } from \"../parsing\";\nimport { LabelFilters } from \"../shared/LabelFilters\";\nimport { OperationExplainedBox } from \"../shared/OperationExplainedBox\";\nimport { OperationList } from \"../shared/OperationList\";\nimport { OperationListExplained } from \"../shared/OperationListExplained\";\nimport { OperationsEditorRow } from \"../shared/OperationsEditorRow\";\nimport { QueryBuilderHints } from \"../shared/QueryBuilderHints\";\nimport { RawQuery } from \"../shared/RawQuery\";\nimport { QueryBuilderLabelFilter, QueryBuilderOperation } from \"../shared/types\";\nimport { PromVisualQuery } from \"../types\";\n\nimport { MetricSelect } from \"./MetricSelect\";\nimport { NestedQueryList } from \"./NestedQueryList\";\nimport { EXPLAIN_LABEL_FILTER_CONTENT } from \"./PromQueryBuilderExplained\";\n\nexport interface Props {\n  query: PromVisualQuery;\n  datasource: PrometheusDatasource;\n  onChange: (update: PromVisualQuery) => void;\n  onRunQuery: () => void;\n  data?: PanelData;\n  showExplain: boolean;\n}\n\nexport const PromQueryBuilder = React.memo<Props>((props) => {\n  const { datasource, query, onChange, onRunQuery, data, showExplain } = props;\n  const [highlightedOp, setHighlightedOp] = useState<QueryBuilderOperation | undefined>();\n  const onChangeLabels = (labels: QueryBuilderLabelFilter[]) => {\n    onChange({ ...query, labels });\n  };\n\n  /**\n   * Map metric metadata to SelectableValue for Select component and also adds defined template variables to the list.\n   */\n  const withTemplateVariableOptions = useCallback(\n    async (optionsPromise: Promise<Array<{ value: string; description?: string }>>): Promise<SelectableValue[]> => {\n      const variables = datasource.getVariables();\n      const options = await optionsPromise;\n      return [\n        ...variables.map((value) => ({ label: value, value })),\n        ...options.map((option) => ({ label: option.value, value: option.value, title: option.description })),\n      ];\n    },\n    [datasource]\n  );\n\n  const onGetLabelNames = async (forLabel: Partial<QueryBuilderLabelFilter>): Promise<Array<{ value: string }>> => {\n    // If no metric we need to use a different method\n    if (!query.metric) {\n      // Todo add caching but inside language provider!\n      await datasource.languageProvider.fetchLabels();\n      return datasource.languageProvider.getLabelKeys().map((k) => ({ value: k }));\n    }\n\n    const labelsToConsider = query.labels.filter((x) => x !== forLabel);\n    labelsToConsider.push({ label: \"__name__\", op: \"=\", value: query.metric });\n    const expr = promQueryModeller.renderLabels(labelsToConsider);\n    const labelsIndex = await datasource.languageProvider.fetchSeriesLabels(expr);\n\n    // filter out already used labels\n    return Object.keys(labelsIndex)\n      .filter((labelName) => !labelsToConsider.find((filter) => filter.label === labelName))\n      .map((k) => ({ value: k }));\n  };\n\n  const onGetLabelValues = async (forLabel: Partial<QueryBuilderLabelFilter>) => {\n    if (!forLabel.label) {\n      return [];\n    }\n\n    // If no metric we need to use a different method\n    if (!query.metric) {\n      return (await datasource.languageProvider.getLabelValues(forLabel.label)).map((v) => ({ value: v }));\n    }\n\n    const labelsToConsider = query.labels.filter((x) => x !== forLabel);\n    labelsToConsider.push({ label: \"__name__\", op: \"=\", value: query.metric });\n    const expr = promQueryModeller.renderLabels(labelsToConsider);\n    const result = await datasource.languageProvider.fetchSeriesLabels(expr);\n    const forLabelInterpolated = datasource.interpolateString(forLabel.label);\n    return result[forLabelInterpolated].map((v) => ({ value: v })) ?? [];\n  };\n\n  const onGetMetrics = useCallback(() => {\n    return withTemplateVariableOptions(getMetrics(datasource, query));\n  }, [datasource, query, withTemplateVariableOptions]);\n\n  const lang = { grammar: metricsqlGrammar, name: \"promql\" };\n\n  return (\n    <>\n      <EditorRow>\n        <MetricSelect\n          query={query}\n          onChange={onChange}\n          onGetMetrics={onGetMetrics}\n        />\n        <LabelFilters\n          labelsFilters={query.labels}\n          onChange={onChangeLabels}\n          onGetLabelNames={(forLabel: Partial<QueryBuilderLabelFilter>) =>\n            withTemplateVariableOptions(onGetLabelNames(forLabel))\n          }\n          onGetLabelValues={(forLabel: Partial<QueryBuilderLabelFilter>) =>\n            withTemplateVariableOptions(onGetLabelValues(forLabel))\n          }\n        />\n      </EditorRow>\n      {showExplain && (\n        <OperationExplainedBox\n          stepNumber={1}\n          title={<RawQuery\n            query={`${query.metric} ${promQueryModeller.renderLabels(query.labels)}`}\n            lang={lang}\n          />}\n        >\n          {EXPLAIN_LABEL_FILTER_CONTENT}\n        </OperationExplainedBox>\n      )}\n      <OperationsEditorRow>\n        <OperationList<PromVisualQuery>\n          queryModeller={promQueryModeller}\n          datasource={datasource as DataSourceApi}\n          query={query}\n          onChange={onChange}\n          onRunQuery={onRunQuery}\n          highlightedOp={highlightedOp}\n        />\n        <QueryBuilderHints<PromVisualQuery>\n          datasource={datasource}\n          query={query}\n          onChange={onChange}\n          data={data}\n          queryModeller={promQueryModeller}\n          buildVisualQueryFromString={buildVisualQueryFromString}\n        />\n      </OperationsEditorRow>\n      {showExplain && (\n        <OperationListExplained<PromVisualQuery>\n          lang={lang}\n          query={query}\n          stepNumber={2}\n          queryModeller={promQueryModeller}\n          onMouseEnter={(op) => setHighlightedOp(op)}\n          onMouseLeave={() => setHighlightedOp(undefined)}\n        />\n      )}\n      {query.binaryQueries && query.binaryQueries.length > 0 && (\n        <NestedQueryList\n          query={query}\n          datasource={datasource}\n          onChange={onChange}\n          onRunQuery={onRunQuery}\n          showExplain={showExplain}\n        />\n      )}\n    </>\n  );\n});\n\n/**\n * Returns list of metrics, either all or filtered by query param. It also adds description string to each metric if it\n * exists.\n * @param datasource\n * @param query\n */\nexport async function getMetrics(\n  datasource: PrometheusDatasource,\n  query: PromVisualQuery\n): Promise<Array<{ value: string; description?: string }>> {\n  // Makes sure we loaded the metadata for metrics. Usually this is done in the start() method of the provider but we\n  // don't use it with the visual builder and there is no need to run all the start() setup anyway.\n  if (!datasource.languageProvider.metricsMetadata) {\n    await datasource.languageProvider.loadMetricsMetadata();\n  }\n\n  // Error handling for when metrics metadata returns as undefined\n  if (!datasource.languageProvider.metricsMetadata) {\n    datasource.languageProvider.metricsMetadata = {};\n  }\n\n  let metrics;\n  if (query.labels.length > 0) {\n    const expr = promQueryModeller.renderLabels(query.labels);\n    metrics = (await datasource.languageProvider.getSeries(expr, true))[\"__name__\"] ?? [];\n  } else {\n    metrics = (await datasource.languageProvider.getLabelValues(\"__name__\")) ?? [];\n  }\n\n  return metrics.map((m) => ({\n    value: m,\n    description: getMetadataString(m, datasource.languageProvider.metricsMetadata!),\n  }));\n}\n\nPromQueryBuilder.displayName = \"PromQueryBuilder\";\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: add condition for display QueryPreview\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport React, { useEffect, useReducer } from 'react';\n\nimport { PanelData } from '@grafana/data';\n\nimport { PrometheusDatasource } from '../../datasource';\nimport { PromQuery } from '../../types';\nimport { promQueryModeller } from '../PromQueryModeller';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { PromVisualQuery } from '../types';\n\nimport { PromQueryBuilder } from './PromQueryBuilder';\n\nexport interface Props {\n  query: PromQuery;\n  datasource: PrometheusDatasource;\n  onChange: (update: PromQuery) => void;\n  onRunQuery: () => void;\n  data?: PanelData;\n  showExplain: boolean;\n}\n\nexport interface State {\n  visQuery?: PromVisualQuery;\n  expr: string;\n}\n\n/**\n * This component is here just to contain the translation logic between string query and the visual query builder model.\n */\nexport function PromQueryBuilderContainer(props: Props) {\n  const { query, onChange, onRunQuery, datasource, data, showExplain } = props;\n  const [state, dispatch] = useReducer(stateSlice.reducer, { expr: query.expr });\n\n  // Only rebuild visual query if expr changes from outside\n  useEffect(() => {\n    dispatch(exprChanged(query.expr));\n  }, [query.expr]);\n\n  const onVisQueryChange = (visQuery: PromVisualQuery) => {\n    const expr = promQueryModeller.renderQuery(visQuery);\n    dispatch(visualQueryChange({ visQuery, expr }));\n    onChange({ ...props.query, expr: expr });\n  };\n\n  if (!state.visQuery) {\n    return null;\n  }\n\n  return (\n    <>\n      <PromQueryBuilder\n        query={state.visQuery}\n        datasource={datasource}\n        onChange={onVisQueryChange}\n        onRunQuery={onRunQuery}\n        data={data}\n        showExplain={showExplain}\n      />\n    </>\n  );\n}\n\nconst stateSlice = createSlice({\n  name: 'prom-builder-container',\n  initialState: { expr: '' } as State,\n  reducers: {\n    visualQueryChange: (state, action: PayloadAction<{ visQuery: PromVisualQuery; expr: string }>) => {\n      state.expr = action.payload.expr;\n      state.visQuery = action.payload.visQuery;\n    },\n    exprChanged: (state, action: PayloadAction<string>) => {\n      if (!state.visQuery || state.expr !== action.payload) {\n        state.expr = action.payload;\n        const parseResult = buildVisualQueryFromString(action.payload);\n        state.visQuery = parseResult.query;\n      }\n    },\n  },\n});\n\nconst { visualQueryChange, exprChanged } = stateSlice.actions;\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-14: cleanup Exemplars\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css, cx } from '@emotion/css';\nimport React, { memo } from 'react';\n\nimport { InlineFormLabel, RadioButtonGroup } from '@grafana/ui';\n\nimport { PrometheusDatasource } from '../datasource';\nimport { PromQuery } from '../types';\n\nexport interface PromExploreExtraFieldProps {\n  query: PromQuery;\n  onChange: (value: PromQuery) => void;\n  onRunQuery: () => void;\n  datasource: PrometheusDatasource;\n}\n\nexport const PromExploreExtraField: React.FC<PromExploreExtraFieldProps> = memo(\n  ({ query, onChange, onRunQuery }) => {\n    const rangeOptions = getQueryTypeOptions(true);\n\n    function onChangeQueryStep(interval: string) {\n      onChange({ ...query, interval });\n    }\n\n    function onStepChange(e: React.SyntheticEvent<HTMLInputElement>) {\n      if (e.currentTarget.value !== query.interval) {\n        onChangeQueryStep(e.currentTarget.value);\n      }\n    }\n\n    function onReturnKeyDown(e: React.KeyboardEvent<HTMLInputElement>) {\n      if (e.key === 'Enter' && e.shiftKey) {\n        onRunQuery();\n      }\n    }\n\n    const onQueryTypeChange = getQueryTypeChangeHandler(query, onChange);\n\n    return (\n      <div aria-label=\"Prometheus extra field\" className=\"gf-form-inline\" data-testid={testIds.extraFieldEditor}>\n        {/*Query type field*/}\n        <div\n          data-testid={testIds.queryTypeField}\n          className={cx(\n            'gf-form explore-input-margin',\n            css`\n              flex-wrap: nowrap;\n            `\n          )}\n          aria-label=\"Query type field\"\n        >\n          <InlineFormLabel width=\"auto\">Query type</InlineFormLabel>\n\n          <RadioButtonGroup\n            options={rangeOptions}\n            value={query.range && query.instant ? 'both' : query.instant ? 'instant' : 'range'}\n            onChange={onQueryTypeChange}\n          />\n        </div>\n        {/*Step field*/}\n        <div\n          data-testid={testIds.stepField}\n          className={cx(\n            'gf-form',\n            css`\n              flex-wrap: nowrap;\n            `\n          )}\n          aria-label=\"Step field\"\n        >\n          <InlineFormLabel\n            width={6}\n            tooltip={\n              'Time units and built-in variables can be used here, for example: $__interval, $__rate_interval, 5s, 1m, 3h, 1d, 1y (Default if no unit is specified: s)'\n            }\n          >\n            Min step\n          </InlineFormLabel>\n          <input\n            type={'text'}\n            className=\"gf-form-input width-4\"\n            placeholder={'auto'}\n            onChange={onStepChange}\n            onKeyDown={onReturnKeyDown}\n            value={query.interval ?? ''}\n          />\n        </div>\n      </div>\n    );\n  }\n);\n\nPromExploreExtraField.displayName = 'PromExploreExtraField';\n\nexport function getQueryTypeOptions(includeBoth: boolean) {\n  const rangeOptions = [\n    { value: 'range', label: 'Range', description: 'Run query over a range of time' },\n    {\n      value: 'instant',\n      label: 'Instant',\n      description: 'Run query against a single point in time. For this query, the \"To\" time is used',\n    },\n  ];\n\n  if (includeBoth) {\n    rangeOptions.push({ value: 'both', label: 'Both', description: 'Run an Instant query and a Range query' });\n  }\n\n  return rangeOptions;\n}\n\nexport function getQueryTypeChangeHandler(query: PromQuery, onChange: (update: PromQuery) => void) {\n  return (queryType: string) => {\n    if (queryType === 'instant') {\n      onChange({ ...query, instant: true, range: false, exemplar: false });\n    } else if (queryType === 'range') {\n      onChange({ ...query, instant: false, range: true });\n    } else {\n      onChange({ ...query, instant: true, range: true });\n    }\n  };\n}\n\nexport const testIds = {\n  extraFieldEditor: 'prom-editor-extra-field',\n  stepField: 'prom-editor-extra-field-step',\n  queryTypeField: 'prom-editor-extra-field-query-type',\n};\n","import { useReducer } from 'react';\nvar toggleReducer = function (state, nextValue) {\n    return typeof nextValue === 'boolean' ? nextValue : !state;\n};\nvar useToggle = function (initialValue) {\n    return useReducer(toggleReducer, initialValue);\n};\nexport default useToggle;\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React from 'react';\nimport { useToggle } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Icon, useStyles2 } from '@grafana/ui';\n\nimport { Stack }  from '../../components/QueryEditor';\n\nexport interface Props {\n  title: string;\n  collapsedInfo: string[];\n  children: React.ReactNode;\n}\n\nexport function QueryOptionGroup({ title, children, collapsedInfo }: Props) {\n  const [isOpen, toggleOpen] = useToggle(false);\n  const styles = useStyles2(getStyles);\n\n  return (\n    <Stack gap={0} direction=\"column\">\n      <div className={styles.header} onClick={toggleOpen} title=\"Click to edit options\">\n        <div className={styles.toggle}>\n          <Icon name={isOpen ? 'angle-down' : 'angle-right'} />\n        </div>\n        <h6 className={styles.title}>{title}</h6>\n        {!isOpen && (\n          <div className={styles.description}>\n            {collapsedInfo.map((x, i) => (\n              <span key={i}>{x}</span>\n            ))}\n          </div>\n        )}\n      </div>\n      {isOpen && <div className={styles.body}>{children}</div>}\n    </Stack>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    switchLabel: css({\n      color: theme.colors.text.secondary,\n      cursor: 'pointer',\n      fontSize: theme.typography.bodySmall.fontSize,\n      '&:hover': {\n        color: theme.colors.text.primary,\n      },\n    }),\n    header: css({\n      display: 'flex',\n      cursor: 'pointer',\n      alignItems: 'baseline',\n      color: theme.colors.text.primary,\n      '&:hover': {\n        background: theme.colors.emphasize(theme.colors.background.primary, 0.03),\n      },\n    }),\n    title: css({\n      flexGrow: 1,\n      overflow: 'hidden',\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      margin: 0,\n    }),\n    description: css({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize,\n      paddingLeft: theme.spacing(2),\n      gap: theme.spacing(2),\n      display: 'flex',\n    }),\n    body: css({\n      display: 'flex',\n      paddingTop: theme.spacing(2),\n      gap: theme.spacing(2),\n      flexWrap: 'wrap',\n    }),\n    toggle: css({\n      color: theme.colors.text.secondary,\n      marginRight: `${theme.spacing(1)}`,\n    }),\n  };\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useRef } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Select } from '@grafana/ui';\n\nimport { EditorField } from '../../components/QueryEditor';\nimport { AutoSizeInput } from \"../../components/QueryEditor/AutoSizeInput\";\nimport { LegendFormatMode } from '../../types';\n\nexport interface Props {\n  legendFormat: string | undefined;\n  onChange: (legendFormat: string) => void;\n  onRunQuery: () => void;\n}\n\nconst legendModeOptions = [\n  {\n    label: 'Auto',\n    value: LegendFormatMode.Auto,\n    description: 'Only includes unique labels',\n  },\n  { label: 'Verbose', value: LegendFormatMode.Verbose, description: 'All label names and values' },\n  { label: 'Custom', value: LegendFormatMode.Custom, description: 'Provide a naming template' },\n];\n\n/**\n * Tests for this component are on the parent level (PromQueryBuilderOptions).\n */\nexport const PromQueryLegendEditor = React.memo<Props>(({ legendFormat, onChange, onRunQuery }) => {\n  const mode = getLegendMode(legendFormat);\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  const onLegendFormatChanged = (evt: React.FormEvent<HTMLInputElement>) => {\n    let newFormat = evt.currentTarget.value;\n    if (newFormat.length === 0) {\n      newFormat = LegendFormatMode.Auto;\n    }\n\n    if (newFormat !== legendFormat) {\n      onChange(newFormat);\n      onRunQuery();\n    }\n  };\n\n  const onLegendModeChanged = (value: SelectableValue<LegendFormatMode>) => {\n    switch (value.value!) {\n      case LegendFormatMode.Auto:\n        onChange(LegendFormatMode.Auto);\n        break;\n      case LegendFormatMode.Custom:\n        onChange('{{label_name}}');\n        setTimeout(() => {\n          inputRef.current?.focus();\n          inputRef.current?.setSelectionRange(2, 12, 'forward');\n        }, 10);\n        break;\n      case LegendFormatMode.Verbose:\n        onChange('');\n        break;\n    }\n    onRunQuery();\n  };\n\n  return (\n    <EditorField\n      label=\"Legend\"\n      tooltip=\"Series name override or template. Ex. {{hostname}} will be replaced with label value for hostname.\"\n    >\n      <>\n        {mode === LegendFormatMode.Custom && (\n          <AutoSizeInput\n            id=\"legendFormat\"\n            minWidth={22}\n            placeholder=\"auto\"\n            defaultValue={legendFormat}\n            onCommitChange={onLegendFormatChanged}\n            ref={inputRef}\n          />\n        )}\n        {mode !== LegendFormatMode.Custom && (\n          <Select\n            inputId=\"legend.mode\"\n            isSearchable={false}\n            placeholder=\"Select legend mode\"\n            options={legendModeOptions}\n            width={22}\n            onChange={onLegendModeChanged}\n            value={legendModeOptions.find((x) => x.value === mode)}\n          />\n        )}\n      </>\n    </EditorField>\n  );\n});\n\nPromQueryLegendEditor.displayName = 'PromQueryLegendEditor';\n\nfunction getLegendMode(legendFormat: string | undefined) {\n  // This special value means the new smart minimal series naming\n  if (legendFormat === LegendFormatMode.Auto) {\n    return LegendFormatMode.Auto;\n  }\n\n  // Missing or empty legend format is the old verbose behavior\n  if (legendFormat == null || legendFormat === '') {\n    return LegendFormatMode.Verbose;\n  }\n\n  return LegendFormatMode.Custom;\n}\n\nexport function getLegendModeLabel(legendFormat: string | undefined) {\n  const mode = getLegendMode(legendFormat);\n  if (mode !== LegendFormatMode.Custom) {\n    return legendModeOptions.find((x) => x.value === mode)?.label;\n  }\n  return legendFormat;\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react';\n\nimport { CoreApp, SelectableValue } from '@grafana/data';\nimport { RadioButtonGroup, Select } from '@grafana/ui';\n\nimport { getQueryTypeChangeHandler, getQueryTypeOptions } from '../../components/PromExploreExtraField';\nimport { EditorField, EditorRow } from '../../components/QueryEditor';\nimport { AutoSizeInput } from \"../../components/QueryEditor/AutoSizeInput\";\nimport { FORMAT_OPTIONS, INTERVAL_FACTOR_OPTIONS } from \"../../consts\";\nimport { PromQuery } from '../../types';\nimport { QueryOptionGroup } from '../shared/QueryOptionGroup';\n\nimport { getLegendModeLabel, PromQueryLegendEditor } from './PromQueryLegendEditor';\n\nexport interface Props {\n  query: PromQuery;\n  app?: CoreApp;\n  onChange: (update: PromQuery) => void;\n  onRunQuery: () => void;\n}\n\nexport const PromQueryBuilderOptions = React.memo<Props>(({ query, app, onChange, onRunQuery }) => {\n  const onChangeFormat = (value: SelectableValue<string>) => {\n    onChange({ ...query, format: value.value });\n    onRunQuery();\n  };\n\n  const onChangeStep = (evt: React.FormEvent<HTMLInputElement>) => {\n    onChange({ ...query, interval: evt.currentTarget.value });\n    onRunQuery();\n  };\n\n  const queryTypeOptions = getQueryTypeOptions(app === CoreApp.Explore || app === CoreApp.PanelEditor);\n  const onQueryTypeChange = getQueryTypeChangeHandler(query, onChange);\n\n  const onIntervalFactorChange = (value: SelectableValue<number>) => {\n    onChange({ ...query, intervalFactor: value.value });\n    onRunQuery();\n  };\n\n  const formatOption = FORMAT_OPTIONS.find((option) => option.value === query.format) || FORMAT_OPTIONS[0];\n  const queryTypeValue = getQueryTypeValue(query, queryTypeOptions.map(o => o.value));\n  const queryType = queryTypeOptions.find((x) => x.value === queryTypeValue) || queryTypeOptions[0];\n\n  return (\n    <EditorRow>\n      <QueryOptionGroup\n        title=\"Options\"\n        collapsedInfo={getCollapsedInfo(query, formatOption.label!, queryType.label)}\n      >\n        <PromQueryLegendEditor\n          legendFormat={query.legendFormat}\n          onChange={(legendFormat) => onChange({ ...query, legendFormat })}\n          onRunQuery={onRunQuery}\n        />\n        <EditorField\n          label=\"Min step\"\n          tooltip={\n            <>\n              An additional lower limit for the step parameter of the Prometheus query and for the{' '}\n              <code>$__interval</code> and <code>$__rate_interval</code> variables.\n            </>\n          }\n        >\n          <AutoSizeInput\n            type=\"text\"\n            aria-label=\"Set lower limit for the step parameter\"\n            placeholder={'auto'}\n            minWidth={10}\n            onCommitChange={onChangeStep}\n            defaultValue={query.interval}\n          />\n        </EditorField>\n        <EditorField label=\"Format\">\n          <Select value={formatOption} allowCustomValue onChange={onChangeFormat} options={FORMAT_OPTIONS} />\n        </EditorField>\n        <EditorField label=\"Type\">\n          <RadioButtonGroup options={queryTypeOptions} value={queryTypeValue} onChange={onQueryTypeChange} />\n        </EditorField>\n        {query.intervalFactor && query.intervalFactor > 1 && (\n          <EditorField label=\"Resolution\">\n            <Select\n              aria-label=\"Select resolution\"\n              isSearchable={false}\n              options={INTERVAL_FACTOR_OPTIONS}\n              onChange={onIntervalFactorChange}\n              value={INTERVAL_FACTOR_OPTIONS.find((option) => option.value === query.intervalFactor)}\n            />\n          </EditorField>\n        )}\n      </QueryOptionGroup>\n    </EditorRow>\n  );\n});\n\nfunction getQueryTypeValue(query: PromQuery, options: string[]) {\n  if (query.range && query.instant && options.includes('both')) {\n    return 'both'\n  } else if (!query.range && query.instant && options.includes('instant')) {\n    return 'instant'\n  } else if (options.includes('range')) {\n    return 'range'\n  }\n  return options[0]\n}\n\nfunction getCollapsedInfo(query: PromQuery, formatOption: string, queryType: string): string[] {\n  const items: string[] = [];\n\n  items.push(`Legend: ${getLegendModeLabel(query.legendFormat)}`);\n  items.push(`Format: ${formatOption}`);\n  items.push(`Step: ${query.interval ?? 'auto'}`);\n  items.push(`Type: ${queryType}`);\n  return items;\n}\n\nPromQueryBuilderOptions.displayName = 'PromQueryBuilderOptions';\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-13: optimizations imports\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { PureComponent } from 'react';\n\nimport store from '../store';\n\nexport interface Props<T> {\n  storageKey: string;\n  defaultValue: T;\n  children: (value: T, onSaveToStore: (value: T) => void, onDeleteFromStore: () => void) => React.ReactNode;\n}\n\ninterface State<T> {\n  value: T;\n}\n\nexport class LocalStorageValueProvider<T> extends PureComponent<Props<T>, State<T>> {\n  constructor(props: Props<T>) {\n    super(props);\n\n    const { storageKey, defaultValue } = props;\n\n    this.state = {\n      value: store.getObject(storageKey, defaultValue),\n    };\n  }\n\n  onSaveToStore = (value: T) => {\n    const { storageKey } = this.props;\n    try {\n      store.setObject(storageKey, value);\n    } catch (error) {\n      console.error(error);\n    }\n    this.setState({ value });\n  };\n\n  onDeleteFromStore = () => {\n    const { storageKey, defaultValue } = this.props;\n    try {\n      store.delete(storageKey);\n    } catch (error) {\n      console.log(error);\n    }\n    this.setState({ value: defaultValue });\n  };\n\n  render() {\n    const { children } = this.props;\n    const { value } = this.state;\n\n    return <>{children(value, this.onSaveToStore, this.onDeleteFromStore)}</>;\n  }\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport memoizeOne from 'memoize-one';\nimport { createElement, PureComponent } from 'react';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\n// Animation frame based implementation of setTimeout.\n// Inspired by Joe Lambert, https://gist.github.com/joelambert/1002116#file-requesttimeout-js\nvar hasNativePerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';\nvar now = hasNativePerformanceNow ? function () {\n  return performance.now();\n} : function () {\n  return Date.now();\n};\nfunction cancelTimeout(timeoutID) {\n  cancelAnimationFrame(timeoutID.id);\n}\nfunction requestTimeout(callback, delay) {\n  var start = now();\n\n  function tick() {\n    if (now() - start >= delay) {\n      callback.call(null);\n    } else {\n      timeoutID.id = requestAnimationFrame(tick);\n    }\n  }\n\n  var timeoutID = {\n    id: requestAnimationFrame(tick)\n  };\n  return timeoutID;\n}\n\nvar size = -1; // This utility copied from \"dom-helpers\" package.\n\nfunction getScrollbarSize(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (size === -1 || recalculate) {\n    var div = document.createElement('div');\n    var style = div.style;\n    style.width = '50px';\n    style.height = '50px';\n    style.overflow = 'scroll';\n    document.body.appendChild(div);\n    size = div.offsetWidth - div.clientWidth;\n    document.body.removeChild(div);\n  }\n\n  return size;\n}\nvar cachedRTLResult = null; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).\n// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.\n// The safest way to check this is to intentionally set a negative offset,\n// and then verify that the subsequent \"scroll\" event matches the negative offset.\n// If it does not match, then we can assume a non-standard RTL scroll implementation.\n\nfunction getRTLOffsetType(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (cachedRTLResult === null || recalculate) {\n    var outerDiv = document.createElement('div');\n    var outerStyle = outerDiv.style;\n    outerStyle.width = '50px';\n    outerStyle.height = '50px';\n    outerStyle.overflow = 'scroll';\n    outerStyle.direction = 'rtl';\n    var innerDiv = document.createElement('div');\n    var innerStyle = innerDiv.style;\n    innerStyle.width = '100px';\n    innerStyle.height = '100px';\n    outerDiv.appendChild(innerDiv);\n    document.body.appendChild(outerDiv);\n\n    if (outerDiv.scrollLeft > 0) {\n      cachedRTLResult = 'positive-descending';\n    } else {\n      outerDiv.scrollLeft = 1;\n\n      if (outerDiv.scrollLeft === 0) {\n        cachedRTLResult = 'negative';\n      } else {\n        cachedRTLResult = 'positive-ascending';\n      }\n    }\n\n    document.body.removeChild(outerDiv);\n    return cachedRTLResult;\n  }\n\n  return cachedRTLResult;\n}\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL = 150;\n\nvar defaultItemKey = function defaultItemKey(_ref) {\n  var columnIndex = _ref.columnIndex,\n      data = _ref.data,\n      rowIndex = _ref.rowIndex;\n  return rowIndex + \":\" + columnIndex;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsOverscanCount = null;\nvar devWarningsOverscanRowsColumnsCount = null;\nvar devWarningsTagName = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsOverscanCount = /*#__PURE__*/new WeakSet();\n    devWarningsOverscanRowsColumnsCount = /*#__PURE__*/new WeakSet();\n    devWarningsTagName = /*#__PURE__*/new WeakSet();\n  }\n}\n\nfunction createGridComponent(_ref2) {\n  var _class;\n\n  var getColumnOffset = _ref2.getColumnOffset,\n      getColumnStartIndexForOffset = _ref2.getColumnStartIndexForOffset,\n      getColumnStopIndexForStartIndex = _ref2.getColumnStopIndexForStartIndex,\n      getColumnWidth = _ref2.getColumnWidth,\n      getEstimatedTotalHeight = _ref2.getEstimatedTotalHeight,\n      getEstimatedTotalWidth = _ref2.getEstimatedTotalWidth,\n      getOffsetForColumnAndAlignment = _ref2.getOffsetForColumnAndAlignment,\n      getOffsetForRowAndAlignment = _ref2.getOffsetForRowAndAlignment,\n      getRowHeight = _ref2.getRowHeight,\n      getRowOffset = _ref2.getRowOffset,\n      getRowStartIndexForOffset = _ref2.getRowStartIndexForOffset,\n      getRowStopIndexForStartIndex = _ref2.getRowStopIndexForStartIndex,\n      initInstanceProps = _ref2.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref2.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref2.validateProps;\n  return _class = /*#__PURE__*/function (_PureComponent) {\n    _inheritsLoose(Grid, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function Grid(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_this));\n      _this._resetIsScrollingTimeoutId = null;\n      _this._outerRef = void 0;\n      _this.state = {\n        instance: _assertThisInitialized(_this),\n        isScrolling: false,\n        horizontalScrollDirection: 'forward',\n        scrollLeft: typeof _this.props.initialScrollLeft === 'number' ? _this.props.initialScrollLeft : 0,\n        scrollTop: typeof _this.props.initialScrollTop === 'number' ? _this.props.initialScrollTop : 0,\n        scrollUpdateWasRequested: false,\n        verticalScrollDirection: 'forward'\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanColumnStartIndex, overscanColumnStopIndex, overscanRowStartIndex, overscanRowStopIndex, visibleColumnStartIndex, visibleColumnStopIndex, visibleRowStartIndex, visibleRowStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanColumnStartIndex: overscanColumnStartIndex,\n          overscanColumnStopIndex: overscanColumnStopIndex,\n          overscanRowStartIndex: overscanRowStartIndex,\n          overscanRowStopIndex: overscanRowStopIndex,\n          visibleColumnStartIndex: visibleColumnStartIndex,\n          visibleColumnStopIndex: visibleColumnStopIndex,\n          visibleRowStartIndex: visibleRowStartIndex,\n          visibleRowStopIndex: visibleRowStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollLeft, scrollTop, horizontalScrollDirection, verticalScrollDirection, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          horizontalScrollDirection: horizontalScrollDirection,\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          verticalScrollDirection: verticalScrollDirection,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (rowIndex, columnIndex) {\n        var _this$props = _this.props,\n            columnWidth = _this$props.columnWidth,\n            direction = _this$props.direction,\n            rowHeight = _this$props.rowHeight;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && columnWidth, shouldResetStyleCacheOnItemSizeChange && direction, shouldResetStyleCacheOnItemSizeChange && rowHeight);\n\n        var key = rowIndex + \":\" + columnIndex;\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(key)) {\n          style = itemStyleCache[key];\n        } else {\n          var _offset = getColumnOffset(_this.props, columnIndex, _this._instanceProps);\n\n          var isRtl = direction === 'rtl';\n          itemStyleCache[key] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : _offset,\n            right: isRtl ? _offset : undefined,\n            top: getRowOffset(_this.props, rowIndex, _this._instanceProps),\n            height: getRowHeight(_this.props, rowIndex, _this._instanceProps),\n            width: getColumnWidth(_this.props, columnIndex, _this._instanceProps)\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScroll = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientHeight = _event$currentTarget.clientHeight,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollTop = _event$currentTarget.scrollTop,\n            scrollHeight = _event$currentTarget.scrollHeight,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n          // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n          // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n          // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n\n          var calculatedScrollLeft = scrollLeft;\n\n          if (direction === 'rtl') {\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                calculatedScrollLeft = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                calculatedScrollLeft = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          calculatedScrollLeft = Math.max(0, Math.min(calculatedScrollLeft, scrollWidth - clientWidth));\n          var calculatedScrollTop = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n            scrollLeft: calculatedScrollLeft,\n            scrollTop: calculatedScrollTop,\n            verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward',\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1);\n        });\n      };\n\n      return _this;\n    }\n\n    Grid.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = Grid.prototype;\n\n    _proto.scrollTo = function scrollTo(_ref3) {\n      var scrollLeft = _ref3.scrollLeft,\n          scrollTop = _ref3.scrollTop;\n\n      if (scrollLeft !== undefined) {\n        scrollLeft = Math.max(0, scrollLeft);\n      }\n\n      if (scrollTop !== undefined) {\n        scrollTop = Math.max(0, scrollTop);\n      }\n\n      this.setState(function (prevState) {\n        if (scrollLeft === undefined) {\n          scrollLeft = prevState.scrollLeft;\n        }\n\n        if (scrollTop === undefined) {\n          scrollTop = prevState.scrollTop;\n        }\n\n        if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n          return null;\n        }\n\n        return {\n          horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          scrollUpdateWasRequested: true,\n          verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward'\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(_ref4) {\n      var _ref4$align = _ref4.align,\n          align = _ref4$align === void 0 ? 'auto' : _ref4$align,\n          columnIndex = _ref4.columnIndex,\n          rowIndex = _ref4.rowIndex;\n      var _this$props2 = this.props,\n          columnCount = _this$props2.columnCount,\n          height = _this$props2.height,\n          rowCount = _this$props2.rowCount,\n          width = _this$props2.width;\n      var _this$state = this.state,\n          scrollLeft = _this$state.scrollLeft,\n          scrollTop = _this$state.scrollTop;\n      var scrollbarSize = getScrollbarSize();\n\n      if (columnIndex !== undefined) {\n        columnIndex = Math.max(0, Math.min(columnIndex, columnCount - 1));\n      }\n\n      if (rowIndex !== undefined) {\n        rowIndex = Math.max(0, Math.min(rowIndex, rowCount - 1));\n      }\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps); // The scrollbar size should be considered when scrolling an item into view,\n      // to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n\n      var horizontalScrollbarSize = estimatedTotalWidth > width ? scrollbarSize : 0;\n      var verticalScrollbarSize = estimatedTotalHeight > height ? scrollbarSize : 0;\n      this.scrollTo({\n        scrollLeft: columnIndex !== undefined ? getOffsetForColumnAndAlignment(this.props, columnIndex, align, scrollLeft, this._instanceProps, verticalScrollbarSize) : scrollLeft,\n        scrollTop: rowIndex !== undefined ? getOffsetForRowAndAlignment(this.props, rowIndex, align, scrollTop, this._instanceProps, horizontalScrollbarSize) : scrollTop\n      });\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props3 = this.props,\n          initialScrollLeft = _this$props3.initialScrollLeft,\n          initialScrollTop = _this$props3.initialScrollTop;\n\n      if (this._outerRef != null) {\n        var outerRef = this._outerRef;\n\n        if (typeof initialScrollLeft === 'number') {\n          outerRef.scrollLeft = initialScrollLeft;\n        }\n\n        if (typeof initialScrollTop === 'number') {\n          outerRef.scrollTop = initialScrollTop;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var direction = this.props.direction;\n      var _this$state2 = this.state,\n          scrollLeft = _this$state2.scrollLeft,\n          scrollTop = _this$state2.scrollTop,\n          scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n        // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n        // So we need to determine which browser behavior we're dealing with, and mimic it.\n        var outerRef = this._outerRef;\n\n        if (direction === 'rtl') {\n          switch (getRTLOffsetType()) {\n            case 'negative':\n              outerRef.scrollLeft = -scrollLeft;\n              break;\n\n            case 'positive-ascending':\n              outerRef.scrollLeft = scrollLeft;\n              break;\n\n            default:\n              var clientWidth = outerRef.clientWidth,\n                  scrollWidth = outerRef.scrollWidth;\n              outerRef.scrollLeft = scrollWidth - clientWidth - scrollLeft;\n              break;\n          }\n        } else {\n          outerRef.scrollLeft = Math.max(0, scrollLeft);\n        }\n\n        outerRef.scrollTop = Math.max(0, scrollTop);\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props4 = this.props,\n          children = _this$props4.children,\n          className = _this$props4.className,\n          columnCount = _this$props4.columnCount,\n          direction = _this$props4.direction,\n          height = _this$props4.height,\n          innerRef = _this$props4.innerRef,\n          innerElementType = _this$props4.innerElementType,\n          innerTagName = _this$props4.innerTagName,\n          itemData = _this$props4.itemData,\n          _this$props4$itemKey = _this$props4.itemKey,\n          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey : _this$props4$itemKey,\n          outerElementType = _this$props4.outerElementType,\n          outerTagName = _this$props4.outerTagName,\n          rowCount = _this$props4.rowCount,\n          style = _this$props4.style,\n          useIsScrolling = _this$props4.useIsScrolling,\n          width = _this$props4.width;\n      var isScrolling = this.state.isScrolling;\n\n      var _this$_getHorizontalR = this._getHorizontalRangeToRender(),\n          columnStartIndex = _this$_getHorizontalR[0],\n          columnStopIndex = _this$_getHorizontalR[1];\n\n      var _this$_getVerticalRan = this._getVerticalRangeToRender(),\n          rowStartIndex = _this$_getVerticalRan[0],\n          rowStopIndex = _this$_getVerticalRan[1];\n\n      var items = [];\n\n      if (columnCount > 0 && rowCount) {\n        for (var _rowIndex = rowStartIndex; _rowIndex <= rowStopIndex; _rowIndex++) {\n          for (var _columnIndex = columnStartIndex; _columnIndex <= columnStopIndex; _columnIndex++) {\n            items.push(createElement(children, {\n              columnIndex: _columnIndex,\n              data: itemData,\n              isScrolling: useIsScrolling ? isScrolling : undefined,\n              key: itemKey({\n                columnIndex: _columnIndex,\n                data: itemData,\n                rowIndex: _rowIndex\n              }),\n              rowIndex: _rowIndex,\n              style: this._getItemStyle(_rowIndex, _columnIndex)\n            }));\n          }\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: this._onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: estimatedTotalHeight,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: estimatedTotalWidth\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      var _this$props5 = this.props,\n          columnCount = _this$props5.columnCount,\n          onItemsRendered = _this$props5.onItemsRendered,\n          onScroll = _this$props5.onScroll,\n          rowCount = _this$props5.rowCount;\n\n      if (typeof onItemsRendered === 'function') {\n        if (columnCount > 0 && rowCount > 0) {\n          var _this$_getHorizontalR2 = this._getHorizontalRangeToRender(),\n              _overscanColumnStartIndex = _this$_getHorizontalR2[0],\n              _overscanColumnStopIndex = _this$_getHorizontalR2[1],\n              _visibleColumnStartIndex = _this$_getHorizontalR2[2],\n              _visibleColumnStopIndex = _this$_getHorizontalR2[3];\n\n          var _this$_getVerticalRan2 = this._getVerticalRangeToRender(),\n              _overscanRowStartIndex = _this$_getVerticalRan2[0],\n              _overscanRowStopIndex = _this$_getVerticalRan2[1],\n              _visibleRowStartIndex = _this$_getVerticalRan2[2],\n              _visibleRowStopIndex = _this$_getVerticalRan2[3];\n\n          this._callOnItemsRendered(_overscanColumnStartIndex, _overscanColumnStopIndex, _overscanRowStartIndex, _overscanRowStopIndex, _visibleColumnStartIndex, _visibleColumnStopIndex, _visibleRowStartIndex, _visibleRowStopIndex);\n        }\n      }\n\n      if (typeof onScroll === 'function') {\n        var _this$state3 = this.state,\n            _horizontalScrollDirection = _this$state3.horizontalScrollDirection,\n            _scrollLeft = _this$state3.scrollLeft,\n            _scrollTop = _this$state3.scrollTop,\n            _scrollUpdateWasRequested = _this$state3.scrollUpdateWasRequested,\n            _verticalScrollDirection = _this$state3.verticalScrollDirection;\n\n        this._callOnScroll(_scrollLeft, _scrollTop, _horizontalScrollDirection, _verticalScrollDirection, _scrollUpdateWasRequested);\n      }\n    } // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n    ;\n\n    _proto._getHorizontalRangeToRender = function _getHorizontalRangeToRender() {\n      var _this$props6 = this.props,\n          columnCount = _this$props6.columnCount,\n          overscanColumnCount = _this$props6.overscanColumnCount,\n          overscanColumnsCount = _this$props6.overscanColumnsCount,\n          overscanCount = _this$props6.overscanCount,\n          rowCount = _this$props6.rowCount;\n      var _this$state4 = this.state,\n          horizontalScrollDirection = _this$state4.horizontalScrollDirection,\n          isScrolling = _this$state4.isScrolling,\n          scrollLeft = _this$state4.scrollLeft;\n      var overscanCountResolved = overscanColumnCount || overscanColumnsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getColumnStartIndexForOffset(this.props, scrollLeft, this._instanceProps);\n      var stopIndex = getColumnStopIndexForStartIndex(this.props, startIndex, scrollLeft, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || horizontalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || horizontalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(columnCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    _proto._getVerticalRangeToRender = function _getVerticalRangeToRender() {\n      var _this$props7 = this.props,\n          columnCount = _this$props7.columnCount,\n          overscanCount = _this$props7.overscanCount,\n          overscanRowCount = _this$props7.overscanRowCount,\n          overscanRowsCount = _this$props7.overscanRowsCount,\n          rowCount = _this$props7.rowCount;\n      var _this$state5 = this.state,\n          isScrolling = _this$state5.isScrolling,\n          verticalScrollDirection = _this$state5.verticalScrollDirection,\n          scrollTop = _this$state5.scrollTop;\n      var overscanCountResolved = overscanRowCount || overscanRowsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getRowStartIndexForOffset(this.props, scrollTop, this._instanceProps);\n      var stopIndex = getRowStopIndexForStartIndex(this.props, startIndex, scrollTop, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || verticalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || verticalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(rowCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return Grid;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    useIsScrolling: false\n  }, _class;\n}\n\nvar validateSharedProps = function validateSharedProps(_ref5, _ref6) {\n  var children = _ref5.children,\n      direction = _ref5.direction,\n      height = _ref5.height,\n      innerTagName = _ref5.innerTagName,\n      outerTagName = _ref5.outerTagName,\n      overscanColumnsCount = _ref5.overscanColumnsCount,\n      overscanCount = _ref5.overscanCount,\n      overscanRowsCount = _ref5.overscanRowsCount,\n      width = _ref5.width;\n  var instance = _ref6.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof overscanCount === 'number') {\n      if (devWarningsOverscanCount && !devWarningsOverscanCount.has(instance)) {\n        devWarningsOverscanCount.add(instance);\n        console.warn('The overscanCount prop has been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (typeof overscanColumnsCount === 'number' || typeof overscanRowsCount === 'number') {\n      if (devWarningsOverscanRowsColumnsCount && !devWarningsOverscanRowsColumnsCount.has(instance)) {\n        devWarningsOverscanRowsColumnsCount.add(instance);\n        console.warn('The overscanColumnsCount and overscanRowsCount props have been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName && !devWarningsTagName.has(instance)) {\n        devWarningsTagName.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    switch (direction) {\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    if (typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Grids must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    }\n\n    if (typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Grids must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE = 50;\n\nvar getEstimatedTotalHeight = function getEstimatedTotalHeight(_ref, _ref2) {\n  var rowCount = _ref.rowCount;\n  var rowMetadataMap = _ref2.rowMetadataMap,\n      estimatedRowHeight = _ref2.estimatedRowHeight,\n      lastMeasuredRowIndex = _ref2.lastMeasuredRowIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredRowIndex >= rowCount) {\n    lastMeasuredRowIndex = rowCount - 1;\n  }\n\n  if (lastMeasuredRowIndex >= 0) {\n    var itemMetadata = rowMetadataMap[lastMeasuredRowIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = rowCount - lastMeasuredRowIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedRowHeight;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getEstimatedTotalWidth = function getEstimatedTotalWidth(_ref3, _ref4) {\n  var columnCount = _ref3.columnCount;\n  var columnMetadataMap = _ref4.columnMetadataMap,\n      estimatedColumnWidth = _ref4.estimatedColumnWidth,\n      lastMeasuredColumnIndex = _ref4.lastMeasuredColumnIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredColumnIndex >= columnCount) {\n    lastMeasuredColumnIndex = columnCount - 1;\n  }\n\n  if (lastMeasuredColumnIndex >= 0) {\n    var itemMetadata = columnMetadataMap[lastMeasuredColumnIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = columnCount - lastMeasuredColumnIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedColumnWidth;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getItemMetadata = function getItemMetadata(itemType, props, index, instanceProps) {\n  var itemMetadataMap, itemSize, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    itemSize = props.columnWidth;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    itemSize = props.rowHeight;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    if (itemType === 'column') {\n      instanceProps.lastMeasuredColumnIndex = index;\n    } else {\n      instanceProps.lastMeasuredRowIndex = index;\n    }\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem = function findNearestItem(itemType, props, instanceProps, offset) {\n  var itemMetadataMap, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch(itemType, props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch(itemType, props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch = function findNearestItemBinarySearch(itemType, props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata(itemType, props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch = function findNearestItemExponentialSearch(itemType, props, instanceProps, index, offset) {\n  var itemCount = itemType === 'column' ? props.columnCount : props.rowCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata(itemType, props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch(itemType, props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getOffsetForIndexAndAlignment = function getOffsetForIndexAndAlignment(itemType, props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n  var size = itemType === 'column' ? props.width : props.height;\n  var itemMetadata = getItemMetadata(itemType, props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n  // To ensure it reflects actual measurements instead of just estimates.\n\n  var estimatedTotalSize = itemType === 'column' ? getEstimatedTotalWidth(props, instanceProps) : getEstimatedTotalHeight(props, instanceProps);\n  var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n  var minOffset = Math.max(0, itemMetadata.offset - size + scrollbarSize + itemMetadata.size);\n\n  if (align === 'smart') {\n    if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n      align = 'auto';\n    } else {\n      align = 'center';\n    }\n  }\n\n  switch (align) {\n    case 'start':\n      return maxOffset;\n\n    case 'end':\n      return minOffset;\n\n    case 'center':\n      return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n    case 'auto':\n    default:\n      if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n        return scrollOffset;\n      } else if (minOffset > maxOffset) {\n        // Because we only take into account the scrollbar size when calculating minOffset\n        // this value can be larger than maxOffset when at the end of the list\n        return minOffset;\n      } else if (scrollOffset < minOffset) {\n        return minOffset;\n      } else {\n        return maxOffset;\n      }\n\n  }\n};\n\nvar VariableSizeGrid = /*#__PURE__*/createGridComponent({\n  getColumnOffset: function getColumnOffset(props, index, instanceProps) {\n    return getItemMetadata('column', props, index, instanceProps).offset;\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(props, scrollLeft, instanceProps) {\n    return findNearestItem('column', props, instanceProps, scrollLeft);\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(props, startIndex, scrollLeft, instanceProps) {\n    var columnCount = props.columnCount,\n        width = props.width;\n    var itemMetadata = getItemMetadata('column', props, startIndex, instanceProps);\n    var maxOffset = scrollLeft + width;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < columnCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('column', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  getColumnWidth: function getColumnWidth(props, index, instanceProps) {\n    return instanceProps.columnMetadataMap[index].size;\n  },\n  getEstimatedTotalHeight: getEstimatedTotalHeight,\n  getEstimatedTotalWidth: getEstimatedTotalWidth,\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('column', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('row', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getRowOffset: function getRowOffset(props, index, instanceProps) {\n    return getItemMetadata('row', props, index, instanceProps).offset;\n  },\n  getRowHeight: function getRowHeight(props, index, instanceProps) {\n    return instanceProps.rowMetadataMap[index].size;\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(props, scrollTop, instanceProps) {\n    return findNearestItem('row', props, instanceProps, scrollTop);\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(props, startIndex, scrollTop, instanceProps) {\n    var rowCount = props.rowCount,\n        height = props.height;\n    var itemMetadata = getItemMetadata('row', props, startIndex, instanceProps);\n    var maxOffset = scrollTop + height;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < rowCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('row', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref5 = props,\n        estimatedColumnWidth = _ref5.estimatedColumnWidth,\n        estimatedRowHeight = _ref5.estimatedRowHeight;\n    var instanceProps = {\n      columnMetadataMap: {},\n      estimatedColumnWidth: estimatedColumnWidth || DEFAULT_ESTIMATED_ITEM_SIZE,\n      estimatedRowHeight: estimatedRowHeight || DEFAULT_ESTIMATED_ITEM_SIZE,\n      lastMeasuredColumnIndex: -1,\n      lastMeasuredRowIndex: -1,\n      rowMetadataMap: {}\n    };\n\n    instance.resetAfterColumnIndex = function (columnIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        columnIndex: columnIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterRowIndex = function (rowIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        rowIndex: rowIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterIndices = function (_ref6) {\n      var columnIndex = _ref6.columnIndex,\n          rowIndex = _ref6.rowIndex,\n          _ref6$shouldForceUpda = _ref6.shouldForceUpdate,\n          shouldForceUpdate = _ref6$shouldForceUpda === void 0 ? true : _ref6$shouldForceUpda;\n\n      if (typeof columnIndex === 'number') {\n        instanceProps.lastMeasuredColumnIndex = Math.min(instanceProps.lastMeasuredColumnIndex, columnIndex - 1);\n      }\n\n      if (typeof rowIndex === 'number') {\n        instanceProps.lastMeasuredRowIndex = Math.min(instanceProps.lastMeasuredRowIndex, rowIndex - 1);\n      } // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref7) {\n    var columnWidth = _ref7.columnWidth,\n        rowHeight = _ref7.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'function') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      } else if (typeof rowHeight !== 'function') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL$1 = 150;\n\nvar defaultItemKey$1 = function defaultItemKey(index, data) {\n  return index;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsDirection = null;\nvar devWarningsTagName$1 = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsDirection = /*#__PURE__*/new WeakSet();\n    devWarningsTagName$1 = /*#__PURE__*/new WeakSet();\n  }\n}\n\nfunction createListComponent(_ref) {\n  var _class;\n\n  var getItemOffset = _ref.getItemOffset,\n      getEstimatedTotalSize = _ref.getEstimatedTotalSize,\n      getItemSize = _ref.getItemSize,\n      getOffsetForIndexAndAlignment = _ref.getOffsetForIndexAndAlignment,\n      getStartIndexForOffset = _ref.getStartIndexForOffset,\n      getStopIndexForStartIndex = _ref.getStopIndexForStartIndex,\n      initInstanceProps = _ref.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref.validateProps;\n  return _class = /*#__PURE__*/function (_PureComponent) {\n    _inheritsLoose(List, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function List(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_this));\n      _this._outerRef = void 0;\n      _this._resetIsScrollingTimeoutId = null;\n      _this.state = {\n        instance: _assertThisInitialized(_this),\n        isScrolling: false,\n        scrollDirection: 'forward',\n        scrollOffset: typeof _this.props.initialScrollOffset === 'number' ? _this.props.initialScrollOffset : 0,\n        scrollUpdateWasRequested: false\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanStartIndex, overscanStopIndex, visibleStartIndex, visibleStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanStartIndex: overscanStartIndex,\n          overscanStopIndex: overscanStopIndex,\n          visibleStartIndex: visibleStartIndex,\n          visibleStopIndex: visibleStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollDirection, scrollOffset, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          scrollDirection: scrollDirection,\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (index) {\n        var _this$props = _this.props,\n            direction = _this$props.direction,\n            itemSize = _this$props.itemSize,\n            layout = _this$props.layout;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && itemSize, shouldResetStyleCacheOnItemSizeChange && layout, shouldResetStyleCacheOnItemSizeChange && direction);\n\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(index)) {\n          style = itemStyleCache[index];\n        } else {\n          var _offset = getItemOffset(_this.props, index, _this._instanceProps);\n\n          var size = getItemSize(_this.props, index, _this._instanceProps); // TODO Deprecate direction \"horizontal\"\n\n          var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n          var isRtl = direction === 'rtl';\n          var offsetHorizontal = isHorizontal ? _offset : 0;\n          itemStyleCache[index] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : offsetHorizontal,\n            right: isRtl ? offsetHorizontal : undefined,\n            top: !isHorizontal ? _offset : 0,\n            height: !isHorizontal ? size : '100%',\n            width: isHorizontal ? size : '100%'\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScrollHorizontal = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollLeft) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction;\n          var scrollOffset = scrollLeft;\n\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n            // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                scrollOffset = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                scrollOffset = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          scrollOffset = Math.max(0, Math.min(scrollOffset, scrollWidth - clientWidth));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollLeft ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._onScrollVertical = function (event) {\n        var _event$currentTarget2 = event.currentTarget,\n            clientHeight = _event$currentTarget2.clientHeight,\n            scrollHeight = _event$currentTarget2.scrollHeight,\n            scrollTop = _event$currentTarget2.scrollTop;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          var scrollOffset = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL$1);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1, null);\n        });\n      };\n\n      return _this;\n    }\n\n    List.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps$1(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = List.prototype;\n\n    _proto.scrollTo = function scrollTo(scrollOffset) {\n      scrollOffset = Math.max(0, scrollOffset);\n      this.setState(function (prevState) {\n        if (prevState.scrollOffset === scrollOffset) {\n          return null;\n        }\n\n        return {\n          scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: true\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(index, align) {\n      if (align === void 0) {\n        align = 'auto';\n      }\n\n      var _this$props2 = this.props,\n          itemCount = _this$props2.itemCount,\n          layout = _this$props2.layout;\n      var scrollOffset = this.state.scrollOffset;\n      index = Math.max(0, Math.min(index, itemCount - 1)); // The scrollbar size should be considered when scrolling an item into view, to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n      // This is an edge case for lists; normally they only scroll in the dominant direction.\n\n      var scrollbarSize = 0;\n\n      if (this._outerRef) {\n        var outerRef = this._outerRef;\n\n        if (layout === 'vertical') {\n          scrollbarSize = outerRef.scrollWidth > outerRef.clientWidth ? getScrollbarSize() : 0;\n        } else {\n          scrollbarSize = outerRef.scrollHeight > outerRef.clientHeight ? getScrollbarSize() : 0;\n        }\n      }\n\n      this.scrollTo(getOffsetForIndexAndAlignment(this.props, index, align, scrollOffset, this._instanceProps, scrollbarSize));\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props3 = this.props,\n          direction = _this$props3.direction,\n          initialScrollOffset = _this$props3.initialScrollOffset,\n          layout = _this$props3.layout;\n\n      if (typeof initialScrollOffset === 'number' && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          outerRef.scrollLeft = initialScrollOffset;\n        } else {\n          outerRef.scrollTop = initialScrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var _this$props4 = this.props,\n          direction = _this$props4.direction,\n          layout = _this$props4.layout;\n      var _this$state = this.state,\n          scrollOffset = _this$state.scrollOffset,\n          scrollUpdateWasRequested = _this$state.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // So we need to determine which browser behavior we're dealing with, and mimic it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                outerRef.scrollLeft = -scrollOffset;\n                break;\n\n              case 'positive-ascending':\n                outerRef.scrollLeft = scrollOffset;\n                break;\n\n              default:\n                var clientWidth = outerRef.clientWidth,\n                    scrollWidth = outerRef.scrollWidth;\n                outerRef.scrollLeft = scrollWidth - clientWidth - scrollOffset;\n                break;\n            }\n          } else {\n            outerRef.scrollLeft = scrollOffset;\n          }\n        } else {\n          outerRef.scrollTop = scrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props5 = this.props,\n          children = _this$props5.children,\n          className = _this$props5.className,\n          direction = _this$props5.direction,\n          height = _this$props5.height,\n          innerRef = _this$props5.innerRef,\n          innerElementType = _this$props5.innerElementType,\n          innerTagName = _this$props5.innerTagName,\n          itemCount = _this$props5.itemCount,\n          itemData = _this$props5.itemData,\n          _this$props5$itemKey = _this$props5.itemKey,\n          itemKey = _this$props5$itemKey === void 0 ? defaultItemKey$1 : _this$props5$itemKey,\n          layout = _this$props5.layout,\n          outerElementType = _this$props5.outerElementType,\n          outerTagName = _this$props5.outerTagName,\n          style = _this$props5.style,\n          useIsScrolling = _this$props5.useIsScrolling,\n          width = _this$props5.width;\n      var isScrolling = this.state.isScrolling; // TODO Deprecate direction \"horizontal\"\n\n      var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n      var onScroll = isHorizontal ? this._onScrollHorizontal : this._onScrollVertical;\n\n      var _this$_getRangeToRend = this._getRangeToRender(),\n          startIndex = _this$_getRangeToRend[0],\n          stopIndex = _this$_getRangeToRend[1];\n\n      var items = [];\n\n      if (itemCount > 0) {\n        for (var _index = startIndex; _index <= stopIndex; _index++) {\n          items.push(createElement(children, {\n            data: itemData,\n            key: itemKey(_index, itemData),\n            index: _index,\n            isScrolling: useIsScrolling ? isScrolling : undefined,\n            style: this._getItemStyle(_index)\n          }));\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalSize = getEstimatedTotalSize(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: isHorizontal ? '100%' : estimatedTotalSize,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: isHorizontal ? estimatedTotalSize : '100%'\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      if (typeof this.props.onItemsRendered === 'function') {\n        var itemCount = this.props.itemCount;\n\n        if (itemCount > 0) {\n          var _this$_getRangeToRend2 = this._getRangeToRender(),\n              _overscanStartIndex = _this$_getRangeToRend2[0],\n              _overscanStopIndex = _this$_getRangeToRend2[1],\n              _visibleStartIndex = _this$_getRangeToRend2[2],\n              _visibleStopIndex = _this$_getRangeToRend2[3];\n\n          this._callOnItemsRendered(_overscanStartIndex, _overscanStopIndex, _visibleStartIndex, _visibleStopIndex);\n        }\n      }\n\n      if (typeof this.props.onScroll === 'function') {\n        var _this$state2 = this.state,\n            _scrollDirection = _this$state2.scrollDirection,\n            _scrollOffset = _this$state2.scrollOffset,\n            _scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n        this._callOnScroll(_scrollDirection, _scrollOffset, _scrollUpdateWasRequested);\n      }\n    } // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n    ;\n\n    _proto._getRangeToRender = function _getRangeToRender() {\n      var _this$props6 = this.props,\n          itemCount = _this$props6.itemCount,\n          overscanCount = _this$props6.overscanCount;\n      var _this$state3 = this.state,\n          isScrolling = _this$state3.isScrolling,\n          scrollDirection = _this$state3.scrollDirection,\n          scrollOffset = _this$state3.scrollOffset;\n\n      if (itemCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getStartIndexForOffset(this.props, scrollOffset, this._instanceProps);\n      var stopIndex = getStopIndexForStartIndex(this.props, startIndex, scrollOffset, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || scrollDirection === 'backward' ? Math.max(1, overscanCount) : 1;\n      var overscanForward = !isScrolling || scrollDirection === 'forward' ? Math.max(1, overscanCount) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(itemCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return List;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    layout: 'vertical',\n    overscanCount: 2,\n    useIsScrolling: false\n  }, _class;\n} // NOTE: I considered further wrapping individual items with a pure ListItem component.\n// This would avoid ever calling the render function for the same index more than once,\n// But it would also add the overhead of a lot of components/fibers.\n// I assume people already do this (render function returning a class component),\n// So my doing it would just unnecessarily double the wrappers.\n\nvar validateSharedProps$1 = function validateSharedProps(_ref2, _ref3) {\n  var children = _ref2.children,\n      direction = _ref2.direction,\n      height = _ref2.height,\n      layout = _ref2.layout,\n      innerTagName = _ref2.innerTagName,\n      outerTagName = _ref2.outerTagName,\n      width = _ref2.width;\n  var instance = _ref3.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName$1 && !devWarningsTagName$1.has(instance)) {\n        devWarningsTagName$1.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    } // TODO Deprecate direction \"horizontal\"\n\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n\n    switch (direction) {\n      case 'horizontal':\n      case 'vertical':\n        if (devWarningsDirection && !devWarningsDirection.has(instance)) {\n          devWarningsDirection.add(instance);\n          console.warn('The direction prop should be either \"ltr\" (default) or \"rtl\". ' + 'Please use the layout prop to specify \"vertical\" (default) or \"horizontal\" orientation.');\n        }\n\n        break;\n\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    switch (layout) {\n      case 'horizontal':\n      case 'vertical':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"layout\" prop has been specified. ' + 'Value should be either \"horizontal\" or \"vertical\". ' + (\"\\\"\" + layout + \"\\\" was specified.\"));\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    if (isHorizontal && typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Horizontal lists must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    } else if (!isHorizontal && typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Vertical lists must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE$1 = 50;\n\nvar getItemMetadata$1 = function getItemMetadata(props, index, instanceProps) {\n  var _ref = props,\n      itemSize = _ref.itemSize;\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    instanceProps.lastMeasuredIndex = index;\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem$1 = function findNearestItem(props, instanceProps, offset) {\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch$1(props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch$1(props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch$1 = function findNearestItemBinarySearch(props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata$1(props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch$1 = function findNearestItemExponentialSearch(props, instanceProps, index, offset) {\n  var itemCount = props.itemCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata$1(props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch$1(props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getEstimatedTotalSize = function getEstimatedTotalSize(_ref2, _ref3) {\n  var itemCount = _ref2.itemCount;\n  var itemMetadataMap = _ref3.itemMetadataMap,\n      estimatedItemSize = _ref3.estimatedItemSize,\n      lastMeasuredIndex = _ref3.lastMeasuredIndex;\n  var totalSizeOfMeasuredItems = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredIndex >= itemCount) {\n    lastMeasuredIndex = itemCount - 1;\n  }\n\n  if (lastMeasuredIndex >= 0) {\n    var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n    totalSizeOfMeasuredItems = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = itemCount - lastMeasuredIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedItemSize;\n  return totalSizeOfMeasuredItems + totalSizeOfUnmeasuredItems;\n};\n\nvar VariableSizeList = /*#__PURE__*/createListComponent({\n  getItemOffset: function getItemOffset(props, index, instanceProps) {\n    return getItemMetadata$1(props, index, instanceProps).offset;\n  },\n  getItemSize: function getItemSize(props, index, instanceProps) {\n    return instanceProps.itemMetadataMap[index].size;\n  },\n  getEstimatedTotalSize: getEstimatedTotalSize,\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    var direction = props.direction,\n        height = props.height,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n    // To ensure it reflects actual measurements instead of just estimates.\n\n    var estimatedTotalSize = getEstimatedTotalSize(props, instanceProps);\n    var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n    var minOffset = Math.max(0, itemMetadata.offset - size + itemMetadata.size + scrollbarSize);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(props, offset, instanceProps) {\n    return findNearestItem$1(props, instanceProps, offset);\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(props, startIndex, scrollOffset, instanceProps) {\n    var direction = props.direction,\n        height = props.height,\n        itemCount = props.itemCount,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, startIndex, instanceProps);\n    var maxOffset = scrollOffset + size;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < itemCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata$1(props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref4 = props,\n        estimatedItemSize = _ref4.estimatedItemSize;\n    var instanceProps = {\n      itemMetadataMap: {},\n      estimatedItemSize: estimatedItemSize || DEFAULT_ESTIMATED_ITEM_SIZE$1,\n      lastMeasuredIndex: -1\n    };\n\n    instance.resetAfterIndex = function (index, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instanceProps.lastMeasuredIndex = Math.min(instanceProps.lastMeasuredIndex, index - 1); // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref5) {\n    var itemSize = _ref5.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'function') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeGrid = /*#__PURE__*/createGridComponent({\n  getColumnOffset: function getColumnOffset(_ref, index) {\n    var columnWidth = _ref.columnWidth;\n    return index * columnWidth;\n  },\n  getColumnWidth: function getColumnWidth(_ref2, index) {\n    var columnWidth = _ref2.columnWidth;\n    return columnWidth;\n  },\n  getRowOffset: function getRowOffset(_ref3, index) {\n    var rowHeight = _ref3.rowHeight;\n    return index * rowHeight;\n  },\n  getRowHeight: function getRowHeight(_ref4, index) {\n    var rowHeight = _ref4.rowHeight;\n    return rowHeight;\n  },\n  getEstimatedTotalHeight: function getEstimatedTotalHeight(_ref5) {\n    var rowCount = _ref5.rowCount,\n        rowHeight = _ref5.rowHeight;\n    return rowHeight * rowCount;\n  },\n  getEstimatedTotalWidth: function getEstimatedTotalWidth(_ref6) {\n    var columnCount = _ref6.columnCount,\n        columnWidth = _ref6.columnWidth;\n    return columnWidth * columnCount;\n  },\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(_ref7, columnIndex, align, scrollLeft, instanceProps, scrollbarSize) {\n    var columnCount = _ref7.columnCount,\n        columnWidth = _ref7.columnWidth,\n        width = _ref7.width;\n    var lastColumnOffset = Math.max(0, columnCount * columnWidth - width);\n    var maxOffset = Math.min(lastColumnOffset, columnIndex * columnWidth);\n    var minOffset = Math.max(0, columnIndex * columnWidth - width + scrollbarSize + columnWidth);\n\n    if (align === 'smart') {\n      if (scrollLeft >= minOffset - width && scrollLeft <= maxOffset + width) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(width / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastColumnOffset + Math.floor(width / 2)) {\n          return lastColumnOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollLeft >= minOffset && scrollLeft <= maxOffset) {\n          return scrollLeft;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollLeft < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(_ref8, rowIndex, align, scrollTop, instanceProps, scrollbarSize) {\n    var rowHeight = _ref8.rowHeight,\n        height = _ref8.height,\n        rowCount = _ref8.rowCount;\n    var lastRowOffset = Math.max(0, rowCount * rowHeight - height);\n    var maxOffset = Math.min(lastRowOffset, rowIndex * rowHeight);\n    var minOffset = Math.max(0, rowIndex * rowHeight - height + scrollbarSize + rowHeight);\n\n    if (align === 'smart') {\n      if (scrollTop >= minOffset - height && scrollTop <= maxOffset + height) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(height / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastRowOffset + Math.floor(height / 2)) {\n          return lastRowOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollTop >= minOffset && scrollTop <= maxOffset) {\n          return scrollTop;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollTop < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(_ref9, scrollLeft) {\n    var columnWidth = _ref9.columnWidth,\n        columnCount = _ref9.columnCount;\n    return Math.max(0, Math.min(columnCount - 1, Math.floor(scrollLeft / columnWidth)));\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(_ref10, startIndex, scrollLeft) {\n    var columnWidth = _ref10.columnWidth,\n        columnCount = _ref10.columnCount,\n        width = _ref10.width;\n    var left = startIndex * columnWidth;\n    var numVisibleColumns = Math.ceil((width + scrollLeft - left) / columnWidth);\n    return Math.max(0, Math.min(columnCount - 1, startIndex + numVisibleColumns - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(_ref11, scrollTop) {\n    var rowHeight = _ref11.rowHeight,\n        rowCount = _ref11.rowCount;\n    return Math.max(0, Math.min(rowCount - 1, Math.floor(scrollTop / rowHeight)));\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(_ref12, startIndex, scrollTop) {\n    var rowHeight = _ref12.rowHeight,\n        rowCount = _ref12.rowCount,\n        height = _ref12.height;\n    var top = startIndex * rowHeight;\n    var numVisibleRows = Math.ceil((height + scrollTop - top) / rowHeight);\n    return Math.max(0, Math.min(rowCount - 1, startIndex + numVisibleRows - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref13) {\n    var columnWidth = _ref13.columnWidth,\n        rowHeight = _ref13.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'number') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      }\n\n      if (typeof rowHeight !== 'number') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeList = /*#__PURE__*/createListComponent({\n  getItemOffset: function getItemOffset(_ref, index) {\n    var itemSize = _ref.itemSize;\n    return index * itemSize;\n  },\n  getItemSize: function getItemSize(_ref2, index) {\n    var itemSize = _ref2.itemSize;\n    return itemSize;\n  },\n  getEstimatedTotalSize: function getEstimatedTotalSize(_ref3) {\n    var itemCount = _ref3.itemCount,\n        itemSize = _ref3.itemSize;\n    return itemSize * itemCount;\n  },\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(_ref4, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    var direction = _ref4.direction,\n        height = _ref4.height,\n        itemCount = _ref4.itemCount,\n        itemSize = _ref4.itemSize,\n        layout = _ref4.layout,\n        width = _ref4.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var lastItemOffset = Math.max(0, itemCount * itemSize - size);\n    var maxOffset = Math.min(lastItemOffset, index * itemSize);\n    var minOffset = Math.max(0, index * itemSize - size + itemSize + scrollbarSize);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        {\n          // \"Centered\" offset is usually the average of the min and max.\n          // But near the edges of the list, this doesn't hold true.\n          var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n          if (middleOffset < Math.ceil(size / 2)) {\n            return 0; // near the beginning\n          } else if (middleOffset > lastItemOffset + Math.floor(size / 2)) {\n            return lastItemOffset; // near the end\n          } else {\n            return middleOffset;\n          }\n        }\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(_ref5, offset) {\n    var itemCount = _ref5.itemCount,\n        itemSize = _ref5.itemSize;\n    return Math.max(0, Math.min(itemCount - 1, Math.floor(offset / itemSize)));\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(_ref6, startIndex, scrollOffset) {\n    var direction = _ref6.direction,\n        height = _ref6.height,\n        itemCount = _ref6.itemCount,\n        itemSize = _ref6.itemSize,\n        layout = _ref6.layout,\n        width = _ref6.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var offset = startIndex * itemSize;\n    var size = isHorizontal ? width : height;\n    var numVisibleItems = Math.ceil((size + scrollOffset - offset) / itemSize);\n    return Math.max(0, Math.min(itemCount - 1, startIndex + numVisibleItems - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref7) {\n    var itemSize = _ref7.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'number') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\n// Pulled from react-compat\n// https://github.com/developit/preact-compat/blob/7c5de00e7c85e2ffd011bf3af02899b63f699d3a/src/index.js#L349\nfunction shallowDiffers(prev, next) {\n  for (var attribute in prev) {\n    if (!(attribute in next)) {\n      return true;\n    }\n  }\n\n  for (var _attribute in next) {\n    if (prev[_attribute] !== next[_attribute]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar _excluded = [\"style\"],\n    _excluded2 = [\"style\"];\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-api.html#reactmemo\n\nfunction areEqual(prevProps, nextProps) {\n  var prevStyle = prevProps.style,\n      prevRest = _objectWithoutPropertiesLoose(prevProps, _excluded);\n\n  var nextStyle = nextProps.style,\n      nextRest = _objectWithoutPropertiesLoose(nextProps, _excluded2);\n\n  return !shallowDiffers(prevStyle, nextStyle) && !shallowDiffers(prevRest, nextRest);\n}\n\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-component.html#shouldcomponentupdate\n\nfunction shouldComponentUpdate(nextProps, nextState) {\n  return !areEqual(this.props, nextProps) || shallowDiffers(this.state, nextState);\n}\n\nexport { FixedSizeGrid, FixedSizeList, VariableSizeGrid, VariableSizeList, areEqual, shouldComponentUpdate };\n//# sourceMappingURL=index.esm.js.map\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-12-01: remove unused arguments\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css, cx } from '@emotion/css';\nimport React, { ChangeEvent } from 'react';\nimport { FixedSizeList } from 'react-window';\n\nimport { GrafanaTheme } from '@grafana/data';\nimport {\n  Button,\n  HorizontalGroup,\n  Input,\n  Label,\n  LoadingPlaceholder,\n  stylesFactory,\n  withTheme,\n  BrowserLabel as PromLabel,\n} from '@grafana/ui';\n\nimport PromQlLanguageProvider from '../language_provider';\nimport { escapeLabelValueInExactSelector, escapeLabelValueInRegexSelector } from '../language_utils';\n\n// Hard limit on labels to render\nconst EMPTY_SELECTOR = '{}';\nconst METRIC_LABEL = '__name__';\nconst LIST_ITEM_SIZE = 25;\n\nexport interface BrowserProps {\n  languageProvider: PromQlLanguageProvider;\n  onChange: (selector: string) => void;\n  theme: GrafanaTheme;\n  autoSelect?: number;\n  hide?: () => void;\n  lastUsedLabels: string[];\n  storeLastUsedLabels: (labels: string[]) => void;\n  deleteLastUsedLabels: () => void;\n}\n\ninterface BrowserState {\n  labels: SelectableLabel[];\n  labelSearchTerm: string;\n  metricSearchTerm: string;\n  status: string;\n  error: string;\n  validationStatus: string;\n  valueSearchTerm: string;\n}\n\ninterface FacettableValue {\n  name: string;\n  selected?: boolean;\n  details?: string;\n}\n\nexport interface SelectableLabel {\n  name: string;\n  selected?: boolean;\n  loading?: boolean;\n  values?: FacettableValue[];\n  hidden?: boolean;\n  facets?: number;\n}\n\nexport function buildSelector(labels: SelectableLabel[]): string {\n  let singleMetric = '';\n  const selectedLabels = [];\n  for (const label of labels) {\n    if ((label.name === METRIC_LABEL || label.selected) && label.values && label.values.length > 0) {\n      const selectedValues = label.values.filter((value) => value.selected).map((value) => value.name);\n      if (selectedValues.length > 1) {\n        selectedLabels.push(`${label.name}=~\"${selectedValues.map(escapeLabelValueInRegexSelector).join('|')}\"`);\n      } else if (selectedValues.length === 1) {\n        if (label.name === METRIC_LABEL) {\n          singleMetric = selectedValues[0];\n        } else {\n          selectedLabels.push(`${label.name}=\"${escapeLabelValueInExactSelector(selectedValues[0])}\"`);\n        }\n      }\n    }\n  }\n  return [singleMetric, '{', selectedLabels.join(','), '}'].join('');\n}\n\nexport function facetLabels(\n  labels: SelectableLabel[],\n  possibleLabels: Record<string, string[]>,\n  lastFacetted?: string\n): SelectableLabel[] {\n  return labels.map((label) => {\n    const possibleValues = possibleLabels[label.name];\n    if (possibleValues) {\n      let existingValues: FacettableValue[];\n      if (label.name === lastFacetted && label.values) {\n        // Facetting this label, show all values\n        existingValues = label.values;\n      } else {\n        // Keep selection in other facets\n        const selectedValues: Set<string> = new Set(\n          label.values?.filter((value) => value.selected).map((value) => value.name) || []\n        );\n        // Values for this label have not been requested yet, let's use the facetted ones as the initial values\n        existingValues = possibleValues.map((value) => ({ name: value, selected: selectedValues.has(value) }));\n      }\n      return {\n        ...label,\n        loading: false,\n        values: existingValues,\n        hidden: !possibleValues,\n        facets: existingValues.length,\n      };\n    }\n\n    // Label is facetted out, hide all values\n    return { ...label, loading: false, hidden: !possibleValues, values: undefined, facets: 0 };\n  });\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => ({\n  wrapper: css`\n    background-color: ${theme.colors.bg2};\n    padding: ${theme.spacing.sm};\n    width: 100%;\n  `,\n  list: css`\n    margin-top: ${theme.spacing.sm};\n    display: flex;\n    flex-wrap: wrap;\n    max-height: 200px;\n    overflow: auto;\n    align-content: flex-start;\n  `,\n  section: css`\n    & + & {\n      margin: ${theme.spacing.md} 0;\n    }\n    position: relative;\n  `,\n  selector: css`\n    font-family: ${theme.typography.fontFamily.monospace};\n    margin-bottom: ${theme.spacing.sm};\n  `,\n  status: css`\n    padding: ${theme.spacing.xs};\n    color: ${theme.colors.textSemiWeak};\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    /* using absolute positioning because flex interferes with ellipsis */\n    position: absolute;\n    width: 50%;\n    right: 0;\n    text-align: right;\n    transition: opacity 100ms linear;\n    opacity: 0;\n  `,\n  statusShowing: css`\n    opacity: 1;\n  `,\n  error: css`\n    color: ${theme.palette.brandDanger};\n  `,\n  valueList: css`\n    margin-right: ${theme.spacing.sm};\n    resize: horizontal;\n  `,\n  valueListWrapper: css`\n    border-left: 1px solid ${theme.colors.border2};\n    margin: ${theme.spacing.sm} 0;\n    padding: ${theme.spacing.sm} 0 ${theme.spacing.sm} ${theme.spacing.sm};\n  `,\n  valueListArea: css`\n    display: flex;\n    flex-wrap: wrap;\n    margin-top: ${theme.spacing.sm};\n  `,\n  valueTitle: css`\n    margin-left: -${theme.spacing.xs};\n    margin-bottom: ${theme.spacing.sm};\n  `,\n  validationStatus: css`\n    padding: ${theme.spacing.xs};\n    margin-bottom: ${theme.spacing.sm};\n    color: ${theme.colors.textStrong};\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  `,\n}));\n\n/**\n * TODO #33976: Remove duplicated code. The component is very similar to LokiLabelBrowser.tsx. Check if it's possible\n *              to create a single, generic component.\n */\nexport class UnthemedPrometheusMetricsBrowser extends React.Component<BrowserProps, BrowserState> {\n  valueListsRef = React.createRef<HTMLDivElement>();\n  state: BrowserState = {\n    labels: [] as SelectableLabel[],\n    labelSearchTerm: '',\n    metricSearchTerm: '',\n    status: 'Ready',\n    error: '',\n    validationStatus: '',\n    valueSearchTerm: '',\n  };\n\n  onChangeLabelSearch = (event: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ labelSearchTerm: event.target.value });\n  };\n\n  onChangeMetricSearch = (event: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ metricSearchTerm: event.target.value });\n  };\n\n  onChangeValueSearch = (event: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ valueSearchTerm: event.target.value });\n  };\n\n  onClickRunQuery = () => {\n    const selector = buildSelector(this.state.labels);\n    this.props.onChange(selector);\n  };\n\n  onClickRunRateQuery = () => {\n    const selector = buildSelector(this.state.labels);\n    const query = `rate(${selector}[$__interval])`;\n    this.props.onChange(query);\n  };\n\n  onClickClear = () => {\n    this.setState((state) => {\n      const labels: SelectableLabel[] = state.labels.map((label) => ({\n        ...label,\n        values: undefined,\n        selected: false,\n        loading: false,\n        hidden: false,\n        facets: undefined,\n      }));\n      return {\n        labels,\n        labelSearchTerm: '',\n        metricSearchTerm: '',\n        status: '',\n        error: '',\n        validationStatus: '',\n        valueSearchTerm: '',\n      };\n    });\n    this.props.deleteLastUsedLabels();\n    // Get metrics\n    this.fetchValues(METRIC_LABEL, EMPTY_SELECTOR);\n  };\n\n  onClickLabel = (name: string) => {\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label) {\n      return;\n    }\n    // Toggle selected state\n    const selected = !label.selected;\n    let nextValue: Partial<SelectableLabel> = { selected };\n    if (label.values && !selected) {\n      // Deselect all values if label was deselected\n      const values = label.values.map((value) => ({ ...value, selected: false }));\n      nextValue = { ...nextValue, facets: 0, values };\n    }\n    // Resetting search to prevent empty results\n    this.setState({ labelSearchTerm: '' });\n    this.updateLabelState(name, nextValue, '', () => this.doFacettingForLabel(name));\n  };\n\n  onClickValue = (name: string, value: string | undefined) => {\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label || !label.values) {\n      return;\n    }\n    // Resetting search to prevent empty results\n    this.setState({ labelSearchTerm: '' });\n    // Toggling value for selected label, leaving other values intact\n    const values = label.values.map((v) => ({ ...v, selected: v.name === value ? !v.selected : v.selected }));\n    this.updateLabelState(name, { values }, '', () => this.doFacetting(name));\n  };\n\n  onClickMetric = (name: string, value: string | undefined) => {\n    // Finding special metric label\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label || !label.values) {\n      return;\n    }\n    // Resetting search to prevent empty results\n    this.setState({ metricSearchTerm: '' });\n    // Toggling value for selected label, leaving other values intact\n    const values = label.values.map((v) => ({\n      ...v,\n      selected: v.name === value || v.selected ? !v.selected : v.selected,\n    }));\n    // Toggle selected state of special metrics label\n    const selected = values.some((v) => v.selected);\n    this.updateLabelState(name, { selected, values }, '', () => this.doFacetting(name));\n  };\n\n  onClickValidate = () => {\n    const selector = buildSelector(this.state.labels);\n    this.validateSelector(selector);\n  };\n\n  updateLabelState(name: string, updatedFields: Partial<SelectableLabel>, status = '', cb?: () => void) {\n    this.setState((state) => {\n      const labels: SelectableLabel[] = state.labels.map((label) => {\n        if (label.name === name) {\n          return { ...label, ...updatedFields };\n        }\n        return label;\n      });\n      // New status overrides errors\n      const error = status ? '' : state.error;\n      return { labels, status, error, validationStatus: '' };\n    }, cb);\n  }\n\n  componentDidMount() {\n    const { languageProvider, lastUsedLabels } = this.props;\n    if (languageProvider) {\n      const selectedLabels: string[] = lastUsedLabels;\n      languageProvider.start().then(() => {\n        let rawLabels: string[] = languageProvider.getLabelKeys();\n        // Get metrics\n        this.fetchValues(METRIC_LABEL, EMPTY_SELECTOR);\n        // Auto-select previously selected labels\n        const labels: SelectableLabel[] = rawLabels.map((label) => ({\n          name: label,\n          selected: selectedLabels.includes(label),\n          loading: false,\n        }));\n        // Pre-fetch values for selected labels\n        this.setState({ labels }, () => {\n          this.state.labels.forEach((label) => {\n            if (label.selected) {\n              this.fetchValues(label.name, EMPTY_SELECTOR);\n            }\n          });\n        });\n      });\n    }\n  }\n\n  doFacettingForLabel(name: string) {\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label) {\n      return;\n    }\n    const selectedLabels = this.state.labels.filter((label) => label.selected).map((label) => label.name);\n    this.props.storeLastUsedLabels(selectedLabels);\n    if (label.selected) {\n      // Refetch values for newly selected label...\n      if (!label.values) {\n        this.fetchValues(name, buildSelector(this.state.labels));\n      }\n    } else {\n      // Only need to facet when deselecting labels\n      this.doFacetting();\n    }\n  }\n\n  doFacetting = (lastFacetted?: string) => {\n    const selector = buildSelector(this.state.labels);\n    if (selector === EMPTY_SELECTOR) {\n      // Clear up facetting\n      const labels: SelectableLabel[] = this.state.labels.map((label) => {\n        return { ...label, facets: 0, values: undefined, hidden: false };\n      });\n      this.setState({ labels }, () => {\n        // Get fresh set of values\n        this.state.labels.forEach(\n          (label) => (label.selected || label.name === METRIC_LABEL) && this.fetchValues(label.name, selector)\n        );\n      });\n    } else {\n      // Do facetting\n      this.fetchSeries(selector, lastFacetted);\n    }\n  };\n\n  async fetchValues(name: string, selector: string) {\n    const { languageProvider } = this.props;\n    this.updateLabelState(name, { loading: true }, `Fetching values for ${name}`);\n    try {\n      let rawValues = await languageProvider.getLabelValues(name);\n      // If selector changed, clear loading state and discard result by returning early\n      if (selector !== buildSelector(this.state.labels)) {\n        this.updateLabelState(name, { loading: false });\n        return;\n      }\n      const values: FacettableValue[] = [];\n      const { metricsMetadata } = languageProvider;\n      for (const labelValue of rawValues) {\n        const value: FacettableValue = { name: labelValue };\n        // Adding type/help text to metrics\n        if (name === METRIC_LABEL && metricsMetadata) {\n          const meta = metricsMetadata[labelValue];\n          if (meta) {\n            value.details = `(${meta.type}) ${meta.help}`;\n          }\n        }\n        values.push(value);\n      }\n      this.updateLabelState(name, { values, loading: false });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async fetchSeries(selector: string, lastFacetted?: string) {\n    const { languageProvider } = this.props;\n    if (lastFacetted) {\n      this.updateLabelState(lastFacetted, { loading: true }, `Facetting labels for ${selector}`);\n    }\n    try {\n      const possibleLabels = await languageProvider.fetchSeriesLabels(selector, true);\n      // If selector changed, clear loading state and discard result by returning early\n      if (selector !== buildSelector(this.state.labels)) {\n        if (lastFacetted) {\n          this.updateLabelState(lastFacetted, { loading: false });\n        }\n        return;\n      }\n      if (Object.keys(possibleLabels).length === 0) {\n        this.setState({ error: `Empty results, no matching label for ${selector}` });\n        return;\n      }\n      const labels: SelectableLabel[] = facetLabels(this.state.labels, possibleLabels, lastFacetted);\n      this.setState({ labels, error: '' });\n      if (lastFacetted) {\n        this.updateLabelState(lastFacetted, { loading: false });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async validateSelector(selector: string) {\n    const { languageProvider } = this.props;\n    this.setState({ validationStatus: `Validating selector ${selector}`, error: '' });\n    const streams = await languageProvider.fetchSeries(selector);\n    this.setState({ validationStatus: `Selector is valid (${streams.length} series found)` });\n  }\n\n  render() {\n    const { theme } = this.props;\n    const { labels, labelSearchTerm, metricSearchTerm, status, error, validationStatus, valueSearchTerm } = this.state;\n    const styles = getStyles(theme);\n    if (labels.length === 0) {\n      return (\n        <div className={styles.wrapper}>\n          <LoadingPlaceholder text=\"Loading labels...\" />\n        </div>\n      );\n    }\n\n    // Filter metrics\n    let metrics = labels.find((label) => label.name === METRIC_LABEL);\n    if (metrics && metricSearchTerm) {\n      metrics = {\n        ...metrics,\n        values: metrics.values?.filter((value) => value.selected || value.name.includes(metricSearchTerm)),\n      };\n    }\n\n    // Filter labels\n    let nonMetricLabels = labels.filter((label) => !label.hidden && label.name !== METRIC_LABEL);\n    if (labelSearchTerm) {\n      nonMetricLabels = nonMetricLabels.filter((label) => label.selected || label.name.includes(labelSearchTerm));\n    }\n\n    // Filter non-metric label values\n    let selectedLabels = nonMetricLabels.filter((label) => label.selected && label.values);\n    if (valueSearchTerm) {\n      selectedLabels = selectedLabels.map((label) => ({\n        ...label,\n        values: label.values?.filter((value) => value.selected || value.name.includes(valueSearchTerm)),\n      }));\n    }\n    const selector = buildSelector(this.state.labels);\n    const empty = selector === EMPTY_SELECTOR;\n    const metricCount = metrics?.values?.length || 0;\n\n    return (\n      <div className={styles.wrapper}>\n        <HorizontalGroup align=\"flex-start\" spacing=\"lg\">\n          <div>\n            <div className={styles.section}>\n              <Label description=\"Once a metric is selected only possible labels are shown.\">1. Select a metric</Label>\n              <div>\n                <Input\n                  onChange={this.onChangeMetricSearch}\n                  aria-label=\"Filter expression for metric\"\n                  value={metricSearchTerm}\n                />\n              </div>\n              <div role=\"list\" className={styles.valueListWrapper}>\n                <FixedSizeList\n                  height={Math.min(450, metricCount * LIST_ITEM_SIZE)}\n                  itemCount={metricCount}\n                  itemSize={LIST_ITEM_SIZE}\n                  itemKey={(i) => (metrics!.values as FacettableValue[])[i].name}\n                  width={300}\n                  className={styles.valueList}\n                >\n                  {({ index, style }) => {\n                    const value = metrics?.values?.[index];\n                    if (!value) {\n                      return null;\n                    }\n                    return (\n                      <div style={style}>\n                        <PromLabel\n                          name={metrics!.name}\n                          value={value?.name}\n                          title={value.details}\n                          active={value?.selected}\n                          onClick={this.onClickMetric}\n                          searchTerm={metricSearchTerm}\n                        />\n                      </div>\n                    );\n                  }}\n                </FixedSizeList>\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <div className={styles.section}>\n              <Label description=\"Once label values are selected, only possible label combinations are shown.\">\n                2. Select labels to search in\n              </Label>\n              <div>\n                <Input\n                  onChange={this.onChangeLabelSearch}\n                  aria-label=\"Filter expression for label\"\n                  value={labelSearchTerm}\n                />\n              </div>\n              {/* Using fixed height here to prevent jumpy layout */}\n              <div className={styles.list} style={{ height: 120 }}>\n                {nonMetricLabels.map((label) => (\n                  <PromLabel\n                    key={label.name}\n                    name={label.name}\n                    loading={label.loading}\n                    active={label.selected}\n                    hidden={label.hidden}\n                    facets={label.facets}\n                    onClick={this.onClickLabel}\n                    searchTerm={labelSearchTerm}\n                  />\n                ))}\n              </div>\n            </div>\n            <div className={styles.section}>\n              <Label description=\"Use the search field to find values across selected labels.\">\n                3. Select (multiple) values for your labels\n              </Label>\n              <div>\n                <Input\n                  onChange={this.onChangeValueSearch}\n                  aria-label=\"Filter expression for label values\"\n                  value={valueSearchTerm}\n                />\n              </div>\n              <div className={styles.valueListArea} ref={this.valueListsRef}>\n                {selectedLabels.map((label) => (\n                  <div\n                    role=\"list\"\n                    key={label.name}\n                    aria-label={`Values for ${label.name}`}\n                    className={styles.valueListWrapper}\n                  >\n                    <div className={styles.valueTitle}>\n                      <PromLabel\n                        name={label.name}\n                        loading={label.loading}\n                        active={label.selected}\n                        hidden={label.hidden}\n                        //If no facets, we want to show number of all label values\n                        facets={label.facets || label.values?.length}\n                        onClick={this.onClickLabel}\n                      />\n                    </div>\n                    <FixedSizeList\n                      height={Math.min(200, LIST_ITEM_SIZE * (label.values?.length || 0))}\n                      itemCount={label.values?.length || 0}\n                      itemSize={28}\n                      itemKey={(i) => (label.values as FacettableValue[])[i].name}\n                      width={200}\n                      className={styles.valueList}\n                    >\n                      {({ index, style }) => {\n                        const value = label.values?.[index];\n                        if (!value) {\n                          return null;\n                        }\n                        return (\n                          <div style={style}>\n                            <PromLabel\n                              name={label.name}\n                              value={value?.name}\n                              active={value?.selected}\n                              onClick={this.onClickValue}\n                              searchTerm={valueSearchTerm}\n                            />\n                          </div>\n                        );\n                      }}\n                    </FixedSizeList>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </HorizontalGroup>\n\n        <div className={styles.section}>\n          <Label>4. Resulting selector</Label>\n          <div aria-label=\"selector\" className={styles.selector}>\n            {selector}\n          </div>\n          {validationStatus && <div className={styles.validationStatus}>{validationStatus}</div>}\n          <HorizontalGroup>\n            <Button aria-label=\"Use selector for query button\" disabled={empty} onClick={this.onClickRunQuery}>\n              Use query\n            </Button>\n            <Button\n              aria-label=\"Use selector as metrics button\"\n              variant=\"secondary\"\n              disabled={empty}\n              onClick={this.onClickRunRateQuery}\n            >\n              Use as rate query\n            </Button>\n            <Button\n              aria-label=\"Validate submit button\"\n              variant=\"secondary\"\n              disabled={empty}\n              onClick={this.onClickValidate}\n            >\n              Validate selector\n            </Button>\n            <Button aria-label=\"Selector clear button\" variant=\"secondary\" onClick={this.onClickClear}>\n              Clear\n            </Button>\n            <div className={cx(styles.status, (status || error) && styles.statusShowing)}>\n              <span className={error ? styles.error : ''}>{error || status}</span>\n            </div>\n          </HorizontalGroup>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const PrometheusMetricsBrowser = withTheme(UnthemedPrometheusMetricsBrowser);\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-11-23: change props for MonacoQueryFieldWrapper, optimizations imports\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { LanguageMap, languages as prismLanguages } from 'prismjs';\nimport React, { ReactNode } from 'react';\nimport { Plugin } from 'slate';\nimport { Editor } from 'slate-react';\n\nimport { isDataFrame, QueryEditorProps, QueryHint, TimeRange, toLegacyResponseData } from '@grafana/data';\nimport {\n  BracesPlugin,\n  Icon,\n  SlatePrism,\n} from '@grafana/ui';\n\nimport { PrometheusDatasource } from '../datasource';\nimport PromQlLanguageProvider from \"../language_provider\";\nimport { roundMsToMin } from '../language_utils';\nimport { PromOptions, PromQuery } from '../types';\nimport {\n  CancelablePromise,\n  isCancelablePromiseRejection,\n  makePromiseCancelable,\n} from '../utils/CancelablePromise';\n\nimport { LocalStorageValueProvider } from \"./LocalStorageValueProvider\";\nimport { PrometheusMetricsBrowser } from './PrometheusMetricsBrowser';\nimport { MonacoQueryFieldWrapper } from './monaco-query-field/MonacoQueryFieldWrapper';\n\nconst LAST_USED_LABELS_KEY = 'grafana.datasources.prometheus.browser.labels';\n\nfunction getChooserText(metricsLookupDisabled: boolean, hasSyntax: boolean, hasMetrics: boolean) {\n  if (metricsLookupDisabled) {\n    return '(Disabled)';\n  }\n\n  if (!hasSyntax) {\n    return 'Loading metrics...';\n  }\n\n  if (!hasMetrics) {\n    return '(No metrics found)';\n  }\n\n  return 'Metrics browser';\n}\n\ninterface PromQueryFieldProps extends QueryEditorProps<PrometheusDatasource, PromQuery, PromOptions> {\n  ExtraFieldElement?: ReactNode;\n  'data-testid'?: string;\n}\n\ninterface PromQueryFieldState {\n  labelBrowserVisible: boolean;\n  syntaxLoaded: boolean;\n  hint: QueryHint | null;\n  hasMetrics: boolean;\n}\n\nclass PromQueryField extends React.PureComponent<PromQueryFieldProps, PromQueryFieldState> {\n  // @ts-ignore\n  plugins: Array<Plugin<Editor>>;\n  declare languageProviderInitializationPromise: CancelablePromise<any>;\n\n  constructor(props: PromQueryFieldProps, context: React.Context<any>) {\n    super(props, context);\n\n    this.plugins = [\n      // @ts-ignore\n      BracesPlugin(),\n      // @ts-ignore\n      SlatePrism(\n        {\n          onlyIn: (node: any) => node.type === 'code_block',\n          getSyntax: () => 'promql',\n        },\n        { ...(prismLanguages as LanguageMap), promql: this.props.datasource.languageProvider.syntax }\n      ),\n    ];\n\n    this.state = {\n      labelBrowserVisible: false,\n      syntaxLoaded: false,\n      hint: null,\n      hasMetrics: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.datasource.languageProvider) {\n      this.refreshMetrics();\n    }\n    this.refreshHint();\n  }\n\n  componentWillUnmount() {\n    if (this.languageProviderInitializationPromise) {\n      this.languageProviderInitializationPromise.cancel();\n    }\n  }\n\n  componentDidUpdate(prevProps: PromQueryFieldProps) {\n    const {\n      data,\n      datasource: { languageProvider },\n      range,\n    } = this.props;\n\n    if (languageProvider !== prevProps.datasource.languageProvider) {\n      // We reset this only on DS change so we do not flesh loading state on every rangeChange which happens on every\n      // query run if using relative range.\n      this.setState({ syntaxLoaded: false });\n    }\n\n    const changedRangeToRefresh = this.rangeChangedToRefresh(range, prevProps.range);\n    // We want to refresh metrics when language provider changes and/or when range changes (we round up intervals to a minute)\n    if (languageProvider !== prevProps.datasource.languageProvider || changedRangeToRefresh) {\n      this.refreshMetrics();\n    }\n\n    if (data && prevProps.data && prevProps.data.series !== data.series) {\n      this.refreshHint();\n    }\n  }\n\n  refreshHint = () => {\n    const { datasource, query, data } = this.props;\n    const initHints = datasource.getInitHints();\n    const initHint = initHints.length > 0 ? initHints[0] : null;\n\n    if (!data || data.series.length === 0) {\n      this.setState({ hint: initHint });\n      return;\n    }\n\n    const result = isDataFrame(data.series[0]) ? data.series.map(toLegacyResponseData) : data.series;\n    const queryHints = datasource.getQueryHints(query, result);\n    let queryHint = queryHints.length > 0 ? queryHints[0] : null;\n\n    this.setState({ hint: queryHint ?? initHint });\n  };\n\n  refreshMetrics = async () => {\n    const {\n      datasource: { languageProvider },\n    } = this.props;\n\n    this.languageProviderInitializationPromise = makePromiseCancelable(languageProvider.start());\n\n    try {\n      const remainingTasks = await this.languageProviderInitializationPromise.promise;\n      await Promise.all(remainingTasks);\n      this.onUpdateLanguage(languageProvider);\n    } catch (err) {\n      if (isCancelablePromiseRejection(err) && err.isCanceled) {\n        // do nothing, promise was canceled\n      } else {\n        throw err;\n      }\n    }\n  };\n\n  rangeChangedToRefresh(range?: TimeRange, prevRange?: TimeRange): boolean {\n    if (range && prevRange) {\n      const sameMinuteFrom = roundMsToMin(range.from.valueOf()) === roundMsToMin(prevRange.from.valueOf());\n      const sameMinuteTo = roundMsToMin(range.to.valueOf()) === roundMsToMin(prevRange.to.valueOf());\n      // If both are same, don't need to refresh.\n      return !(sameMinuteFrom && sameMinuteTo);\n    }\n    return false;\n  }\n\n  /**\n   * TODO #33976: Remove this, add histogram group (query = `histogram_quantile(0.95, sum(rate(${metric}[5m])) by (le))`;)\n   */\n  onChangeLabelBrowser = (selector: string) => {\n    this.onChangeQuery(selector, true);\n    this.setState({ labelBrowserVisible: false });\n  };\n\n  onChangeQuery = (value: string, override?: boolean) => {\n    // Send text change to parent\n    const { query, onChange, onRunQuery } = this.props;\n    if (onChange) {\n      const nextQuery: PromQuery = { ...query, expr: value };\n      onChange(nextQuery);\n\n      if (override && onRunQuery) {\n        onRunQuery();\n      }\n    }\n  };\n\n  onClickChooserButton = () => {\n    this.setState((state) => ({ labelBrowserVisible: !state.labelBrowserVisible }));\n  };\n\n  onClickHintFix = () => {\n    const { datasource, query, onChange, onRunQuery } = this.props;\n    const { hint } = this.state;\n    if (hint?.fix?.action) {\n      onChange(datasource.modifyQuery(query, hint.fix.action));\n    }\n    onRunQuery();\n  };\n\n  onUpdateLanguage = (languageProvider: PromQlLanguageProvider) => {\n    const { metrics } = languageProvider;\n\n    if (!metrics) {\n      return;\n    }\n    this.setState({\n      syntaxLoaded: true,\n      hasMetrics: metrics.length > 0\n    })\n  };\n\n  render() {\n    const {\n      datasource,\n      query,\n      ExtraFieldElement,\n      history = [],\n    } = this.props;\n    const { labelBrowserVisible, syntaxLoaded, hint, hasMetrics } = this.state;\n    const chooserText = getChooserText(datasource.lookupsDisabled, syntaxLoaded, hasMetrics);\n    const buttonDisabled = !(syntaxLoaded && hasMetrics);\n\n    return (\n      <LocalStorageValueProvider<string[]> storageKey={LAST_USED_LABELS_KEY} defaultValue={[]}>\n        {(lastUsedLabels, onLastUsedLabelsSave, onLastUsedLabelsDelete) => {\n          return (\n            <>\n              <div\n                className=\"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1\"\n                data-testid={this.props['data-testid']}\n              >\n                <button\n                  className=\"gf-form-label query-keyword pointer\"\n                  onClick={this.onClickChooserButton}\n                  disabled={buttonDisabled}\n                  type=\"button\"\n                >\n                  {chooserText}\n                  <Icon name={labelBrowserVisible ? 'angle-down' : 'angle-right'} />\n                </button>\n\n                <div className=\"gf-form gf-form--grow flex-shrink-1 min-width-15\">\n                  <MonacoQueryFieldWrapper\n                    runQueryOnBlur={false}\n                    languageProvider={datasource.languageProvider}\n                    history={history}\n                    onChange={this.onChangeQuery}\n                    onRunQuery={this.props.onRunQuery}\n                    initialValue={query.expr ?? ''}\n                    placeholder=\"Enter a MetricsQL query…\"\n                  />\n                </div>\n              </div>\n              {labelBrowserVisible && (\n                <div className=\"gf-form\">\n                  <PrometheusMetricsBrowser\n                    languageProvider={datasource.languageProvider}\n                    onChange={this.onChangeLabelBrowser}\n                    lastUsedLabels={lastUsedLabels || []}\n                    storeLastUsedLabels={onLastUsedLabelsSave}\n                    deleteLastUsedLabels={onLastUsedLabelsDelete}\n                  />\n                </div>\n              )}\n\n              {ExtraFieldElement}\n              {hint ? (\n                <div className=\"query-row-break\">\n                  <div className=\"prom-query-field-info text-warning\">\n                    {hint.label}{' '}\n                    {hint.fix ? (\n                      <a className=\"text-link muted\" onClick={this.onClickHintFix}>\n                        {hint.fix.label}\n                      </a>\n                    ) : null}\n                  </div>\n                </div>\n              ) : null}\n            </>\n          );\n        }}\n      </LocalStorageValueProvider>\n    );\n  }\n}\n\nexport default PromQueryField;\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n// https://github.com/facebook/react/issues/5465\n\nexport interface CancelablePromise<T> {\n  promise: Promise<T>;\n  cancel: () => void;\n}\n\nexport interface CancelablePromiseRejection {\n  isCanceled: boolean;\n}\n\nexport function isCancelablePromiseRejection(promise: unknown): promise is CancelablePromiseRejection {\n  return typeof promise === 'object' && promise !== null && 'isCanceled' in promise;\n}\n\nexport const makePromiseCancelable = <T>(promise: Promise<T>): CancelablePromise<T> => {\n  let hasCanceled_ = false;\n\n  const wrappedPromise = new Promise<T>((resolve, reject) => {\n    const canceledPromiseRejection: CancelablePromiseRejection = { isCanceled: true };\n    promise.then((val) => (hasCanceled_ ? reject(canceledPromiseRejection) : resolve(val)));\n    promise.catch((error) => (hasCanceled_ ? reject(canceledPromiseRejection) : reject(error)));\n  });\n\n  return {\n    promise: wrappedPromise,\n    cancel() {\n      hasCanceled_ = true;\n    },\n  };\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css } from '@emotion/css';\nimport React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\nimport PromQueryField from '../../components/PromQueryField';\nimport { PromQueryEditorProps } from '../../components/types';\n\nimport { PromQueryBuilderExplained } from './PromQueryBuilderExplained';\n\ntype Props = PromQueryEditorProps & {\n  showExplain: boolean;\n};\n\nexport function PromQueryCodeEditor({ query, showExplain, ...props }: Props) {\n  const styles = useStyles2(getStyles);\n  return (\n    <div className={styles.wrapper}>\n      <PromQueryField\n        {...props}\n        query={query}\n        history={[]}\n        data-testid={'prom-editor'}\n      />\n\n      {showExplain && <PromQueryBuilderExplained query={query.expr} />}\n    </div>\n  );\n}\n\nconst getStyles = () => {\n  return {\n    // This wrapper styling can be removed after the old PromQueryEditor is removed.\n    // This is removing margin bottom on the old legacy inline form styles\n    wrapper: css`\n      .gf-form {\n        margin-bottom: 0;\n      }\n    `,\n  };\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to 'components/QueryEditor'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react';\n\nimport { EditorRow, EditorFieldGroup, EditorField } from '../../components/QueryEditor';\nimport { WithTemplate } from \"../../components/WithTemplateConfig/types\";\nimport { mergeTemplateWithQuery } from \"../../components/WithTemplateConfig/utils/getArrayFromTemplate\";\nimport metricsqlGrammar from '../../metricsql';\nimport { RawQuery } from '../shared/RawQuery';\n\nexport interface Props {\n  query: string;\n  withTemplate?: WithTemplate\n}\n\nexport function QueryPreview({ query, withTemplate }: Props) {\n  return (\n    <EditorRow>\n      <EditorFieldGroup>\n        <EditorField label=\"Raw query\">\n          <RawQuery\n            query={mergeTemplateWithQuery(query, withTemplate)}\n            lang={{ grammar: metricsqlGrammar, name: 'promql' }}\n          />\n        </EditorField>\n      </EditorFieldGroup>\n    </EditorRow>\n  );\n}\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from \"@grafana/data\";\n\nexport default (theme: GrafanaTheme2) => ({\n  wrapper: css({\n    paddingLeft: theme.spacing(2),\n    background: theme.colors.background.secondary,\n    borderRadius: theme.shape.borderRadius(),\n    border: `1px solid ${theme.colors.border.weak}`,\n    position: 'relative',\n    cursor: 'pointer',\n  }),\n  content: css`\n    display: grid;\n    gap: ${theme.spacing(1)};\n    padding: ${theme.spacing(2)};\n    border-radius: ${theme.shape.borderRadius()},\n  `,\n  topRow: css`\n    display: grid;\n    grid-template-columns: auto 1fr;\n    align-items: center;\n    justify-content: space-between;\n    gap: 2px;\n  `,\n  arrow: css`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  `,\n  progressWrapper: css`\n    position: relative;\n    display: grid;\n    align-items: center;  \n    width: calc(100% - 40px);\n    height: 16px;\n    background: ${theme.colors.background.secondary};\n    box-shadow: inset 0 0 0 1px ${theme.colors.border.weak};\n    border-radius: 4px;\n  `,\n  progressLine: css`\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    background: ${theme.colors.primary.main};\n    border-radius: 4px;\n    z-index: 1;\n  `,\n  progressNum: css`\n    position: absolute;\n    top: 0;\n    right: -40px;\n    color: ${theme.colors.text.secondary};\n    font-size: ${theme.typography.bodySmall.fontSize};\n    z-index: 2;\n  `,\n  message: css`\n    color: ${theme.colors.text.primary};\n    font-size: ${theme.typography.bodySmall.fontSize};\n  `,\n  duration: css`\n    color: ${theme.colors.text.secondary};\n    font-size: ${theme.typography.bodySmall.fontSize};\n  `,\n});\n","import React, { FC, useState } from \"react\"\n\nimport { IconButton, useStyles2 } from \"@grafana/ui\";\n\nimport Trace from \"../Trace\";\n\nimport getStyles from './style'\n\ninterface RecursiveProps {\n  trace: Trace;\n  totalMsec: number;\n}\n\ninterface OpenLevels {\n  [x: number]: boolean\n}\n\nconst NestedNav: FC<RecursiveProps> = ({ trace, totalMsec }) => {\n  const [openLevels, setOpenLevels] = useState({} as OpenLevels);\n  const styles = useStyles2(getStyles);\n\n  const handleListClick = (level: number) => () => {\n    setOpenLevels((prevState: OpenLevels) => {\n      return { ...prevState, [level]: !prevState[level] };\n    });\n  };\n  const hasChildren = trace.children && !!trace.children.length;\n  const progress = Math.round(trace.duration / totalMsec * 100);\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.content} onClick={handleListClick(trace.idValue)}>\n        <div className={styles.topRow}>\n          <div className={styles.arrow}>\n            {hasChildren && (\n              <IconButton aria-label=\"\" name={openLevels[trace.idValue] ? \"angle-up\" : \"angle-down\"}/>\n            )}\n          </div>\n          <div className={styles.progressWrapper}>\n            <div className={styles.progressLine} style={{ width: `${progress}%`, }}/>\n            <div className={styles.progressNum}>{`${progress}%`}</div>\n          </div>\n        </div>\n        <div className={styles.message}>{trace.message}</div>\n        <div className={styles.duration}>{`duration: ${trace.duration} ms`}</div>\n      </div>\n      {openLevels[trace.idValue] && hasChildren && trace.children.map((trace) => (\n        <NestedNav\n          key={trace.duration}\n          trace={trace}\n          totalMsec={totalMsec}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default NestedNav;\n","import { TracingData } from \"../../../types\";\n\nlet traceId = 0;\n\nexport default class Trace {\n  private tracing: TracingData;\n  private query: string;\n  private tracingChildren: Trace[];\n  private readonly originalTracing: TracingData;\n  private readonly id: number;\n  constructor(tracingData: TracingData, query: string) {\n    this.tracing = tracingData;\n    this.originalTracing = JSON.parse(JSON.stringify(tracingData));\n    this.query = query;\n    this.id = traceId++;\n    const children = tracingData.children || [];\n    this.tracingChildren = children.map((x: TracingData) => new Trace(x, query));\n  }\n\n  get queryValue(): string {\n    return this.query;\n  }\n  get idValue(): number {\n    return this.id;\n  }\n  get children(): Trace[] {\n    return this.tracingChildren;\n  }\n  get message(): string {\n    return this.tracing.message;\n  }\n  get duration(): number {\n    return this.tracing.duration_msec;\n  }\n  get JSON(): string {\n    return JSON.stringify(this.tracing, null, 2);\n  }\n  get originalJSON(): string {\n    return JSON.stringify(this.originalTracing, null, 2);\n  }\n  setTracing (tracingData: TracingData) {\n    this.tracing = tracingData;\n    const children = tracingData.children || [];\n    this.tracingChildren = children.map((x: TracingData) => new Trace(x, this.query));\n  }\n  setQuery (query: string) {\n    this.query = query;\n  }\n  resetTracing () {\n    this.tracing = this.originalTracing;\n  }\n}\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from \"@grafana/data\";\nexport default (theme: GrafanaTheme2) => ({\n  header: css({\n    display: 'grid',\n    gridTemplateColumns: \"1fr auto\",\n    alignItems: \"center\",\n    background: theme.colors.background.secondary,\n    borderRadius: theme.shape.borderRadius(),\n    marginTop: theme.spacing(2),\n    padding: `${theme.spacing(1)} ${theme.spacing(2)}`,\n  }),\n  json: css({\n    maxHeight: '50vh',\n    overflow: 'auto'\n  }),\n  error: css({\n    display: 'flex',\n    alignItems: 'center',\n    color: theme.colors.error.text,\n    gap: theme.spacing(1),\n  }),\n});\n","import React, { useEffect, useState } from 'react';\n\nimport { DataQueryRequest, DataQueryResponse, PanelData } from \"@grafana/data\";\nimport { Button, Icon, Modal, useStyles2 } from \"@grafana/ui\";\n\nimport { Stack } from \"../../../components/QueryEditor\";\nimport { PrometheusDatasource } from \"../../../datasource\";\nimport { PromQuery, TracingData } from \"../../../types\";\n\nimport NestedNav from \"./NestedNav/NestedNav\";\nimport Trace from \"./Trace\";\nimport getStyles from './style'\n\ninterface Props {\n  query: PromQuery;\n  datasource: PrometheusDatasource;\n  data?: PanelData;\n}\n\nexport const TraceView = React.memo<Props>(({ query, data, datasource }) => {\n  const [trace, setTrace] = useState<Trace | null>(null)\n  const [openModal, setOpenModal] = useState(false)\n  const [copied, setCopied] = useState(false)\n  const [copyError, setCopyError] = useState(\"\")\n  const styles = useStyles2(getStyles);\n\n  const handleOpenModal = () => {\n    setOpenModal(true)\n  }\n\n  const handleCloseModal = () => {\n    setOpenModal(false)\n  }\n\n  const handleCopyToClipboard = () => {\n    if (!trace || copied) {return}\n    try {\n      navigator.clipboard.writeText(trace.JSON)\n      setCopied(true)\n    } catch (e) {\n      console.error('Failed to copy: ', e);\n      if (e instanceof Error) {\n        setCopyError(e.message)\n      }\n    }\n  }\n\n  useEffect(() => {\n    let timeout: NodeJS.Timeout | null = null\n    if (copied) {\n      timeout = setTimeout(() => {\n        setCopied(false)\n      }, 2000)\n    }\n\n    return () => {\n      if (timeout) {\n        clearInterval(timeout)\n      }\n    }\n  }, [copied])\n\n  useEffect(() => {\n    const fetch = async () => {\n      if (!data?.request) {\n        setTrace(null)\n        return\n      }\n\n      const observable = datasource.query(data.request as DataQueryRequest<PromQuery>)\n      observable.subscribe((val: DataQueryResponse) => {\n        const index = val?.data?.findIndex((item) => item.refId === query.refId)\n        // @ts-ignore\n        const traceArray = val?.trace || []\n        const traceData = traceArray[index] as TracingData\n        if (traceData && index !== -1) {\n          setTrace(new Trace(traceData, query.expr))\n        } else {\n          setTrace(null)\n        }\n      })\n    }\n    fetch()\n  }, [data, datasource, query])\n\n  if (!trace) {\n    return null\n  }\n\n  return (\n    <Stack gap={0} direction=\"column\">\n      <div className={styles.header}>\n        <span>Trace for <b>{query.expr}</b></span>\n        <Button\n          variant=\"secondary\"\n          size=\"sm\"\n          onClick={handleOpenModal}\n        >\n          Show JSON\n        </Button>\n      </div>\n      <nav>\n        <NestedNav\n          trace={trace}\n          totalMsec={trace.duration}\n        />\n      </nav>\n      <Modal\n        title={`Trace for ${query.expr}`}\n        isOpen={openModal}\n        closeOnEscape={true}\n        onDismiss={handleCloseModal}\n      >\n        <div>\n          <pre className={styles.json}>\n            <code lang=\"json\">{trace.JSON}</code>\n          </pre>\n          <Modal.ButtonRow>\n            {copyError && (<div className={styles.error}>\n              <Icon name={\"exclamation-triangle\"} size=\"sm\"/>\n              <span>{copyError}</span>\n            </div>)}\n            <Button\n              variant={copied ? \"success\" : \"primary\"}\n              size=\"sm\"\n              onClick={handleCopyToClipboard}\n              icon={copied ? 'check' : 'copy'}\n            >\n              {copied ? 'Copied' : 'Copy JSON'}\n            </Button>\n          </Modal.ButtonRow>\n        </div>\n      </Modal>\n    </Stack>\n  );\n});\n\nTraceView.displayName = 'TraceView';\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { SyntheticEvent, useCallback, useEffect, useState } from 'react';\n\nimport { CoreApp, LoadingState } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { ConfirmModal, IconButton } from '@grafana/ui';\n\nimport PrettifyQuery from \"../../components/PrettifyQuery\";\nimport { EditorHeader, EditorRows, FlexItem, InlineSelect, Space } from '../../components/QueryEditor';\nimport VmuiLink from \"../../components/VmuiLink\";\nimport WithTemplateConfig from \"../../components/WithTemplateConfig\";\nimport { WithTemplate } from \"../../components/WithTemplateConfig/types\";\nimport { getArrayFromTemplate } from \"../../components/WithTemplateConfig/utils/getArrayFromTemplate\";\nimport { PromQueryEditorProps } from '../../components/types';\nimport PrometheusLanguageProvider from \"../../language_provider\";\nimport { PromQuery } from '../../types';\nimport { ExtendedDataQueryRequest } from \"../../types/datasource\";\nimport { promQueryModeller } from '../PromQueryModeller';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { QueryEditorModeToggle } from '../shared/QueryEditorModeToggle';\nimport { QueryHeaderSwitch } from '../shared/QueryHeaderSwitch';\nimport { promQueryEditorExplainKey, useFlag } from '../shared/hooks/useFlag';\nimport { QueryEditorMode } from '../shared/types';\nimport { changeEditorMode, getQueryWithDefaults } from '../state';\n\nimport { PromQueryBuilderContainer } from './PromQueryBuilderContainer';\nimport { PromQueryBuilderOptions } from './PromQueryBuilderOptions';\nimport { PromQueryCodeEditor } from './PromQueryCodeEditor';\nimport { QueryPreview } from \"./QueryPreview\";\nimport { TraceView } from \"./Trace\";\n\ntype Props = PromQueryEditorProps;\n\nexport const PromQueryEditorSelector = React.memo<Props>((props) => {\n\n  const { onChange, onRunQuery, data, app, datasource } = props;\n\n  const [parseModalOpen, setParseModalOpen] = useState(false);\n  const [trace, setTrace] = useState(false);\n  const [rawQuery, setRawQuery] = useState(false)\n  const { flag: explain, setFlag: setExplain } = useFlag(promQueryEditorExplainKey);\n\n  const dashboardUID: string = (data?.request as ExtendedDataQueryRequest<PromQuery>)?.dashboardUID || \"\"\n  const [templateByDashboard, setTemplateByDashboard] = useState<WithTemplate>()\n\n  const query = getQueryWithDefaults(props.query, app);\n  // This should be filled in from the defaults by now.\n  const editorMode = query.editorMode!;\n\n  const onEditorModeChange = useCallback(\n    (newMetricEditorMode: QueryEditorMode) => {\n      reportInteraction('user_grafana_prometheus_editor_mode_clicked', {\n        newEditor: newMetricEditorMode,\n        previousEditor: query.editorMode ?? '',\n        newQuery: !query.expr,\n        app: app ?? '',\n      });\n\n      if (newMetricEditorMode === QueryEditorMode.Builder) {\n        const result = buildVisualQueryFromString(query.expr || '');\n        // If there are errors, give user a chance to decide if they want to go to builder as that can lose some data.\n        if (result.errors.length) {\n          setParseModalOpen(true);\n          return;\n        }\n      }\n      changeEditorMode(query, newMetricEditorMode, onChange);\n    },\n    [onChange, query, app]\n  );\n\n  const onChangeInternal = (query: PromQuery) => {\n    onChange(query);\n  };\n\n  const onShowExplainChange = (e: SyntheticEvent<HTMLInputElement>) => {\n    setExplain(e.currentTarget.checked);\n  };\n\n  const onShowTracingChange = (e: SyntheticEvent<HTMLInputElement>) => {\n    setTrace(e.currentTarget.checked);\n    onChange({ ...query, trace: e.currentTarget.checked ? 1 : undefined });\n    onRunQuery();\n  };\n\n  const onShowRawChange = (e: SyntheticEvent<HTMLInputElement>) => {\n    setRawQuery(e.currentTarget.checked)\n  }\n\n  useEffect(() => {\n    const withTemplates = getArrayFromTemplate(templateByDashboard)\n    datasource.languageProvider = new PrometheusLanguageProvider(datasource, { withTemplates })\n    datasource.languageProvider.start()\n    if (app !== CoreApp.UnifiedAlerting){\n      onRunQuery();\n    }\n  }, [onRunQuery, datasource, templateByDashboard, app])\n\n  return (\n    <>\n      <ConfirmModal\n        isOpen={parseModalOpen}\n        title=\"Query parsing\"\n        body=\"There were errors while trying to parse the query. Continuing to visual builder may lose some parts of the query.\"\n        confirmText=\"Continue\"\n        onConfirm={() => {\n          changeEditorMode(query, QueryEditorMode.Builder, onChange);\n          setParseModalOpen(false);\n        }}\n        onDismiss={() => setParseModalOpen(false)}\n      />\n      <EditorHeader>\n        <InlineSelect\n          value={null}\n          placeholder=\"Query patterns\"\n          allowCustomValue\n          onChange={({ value }) => {\n            // TODO: Bit convoluted as we don't have access to visualQuery model here. Maybe would make sense to\n            //  move it inside the editor?\n            const result = buildVisualQueryFromString(query.expr || '');\n            result.query.operations = value?.operations!;\n            onChange({\n              ...query,\n              expr: promQueryModeller.renderQuery(result.query),\n            });\n          }}\n          options={promQueryModeller.getQueryPatterns().map((x) => ({ label: x.name, value: x }))}\n        />\n        <QueryHeaderSwitch label=\"Explain\" value={explain} onChange={onShowExplainChange}/>\n        <QueryHeaderSwitch label=\"Trace\" value={trace} onChange={onShowTracingChange}/>\n        <QueryHeaderSwitch label=\"Raw\" value={rawQuery} onChange={onShowRawChange}/>\n        <FlexItem grow={1}/>\n        <WithTemplateConfig\n          app={app}\n          template={templateByDashboard}\n          setTemplate={setTemplateByDashboard}\n          dashboardUID={dashboardUID}\n          datasource={datasource}\n        />\n        <PrettifyQuery query={query} datasource={datasource} onChange={onChange}/>\n        <VmuiLink query={query} datasource={datasource} panelData={data} dashboardUID={dashboardUID}/>\n        {app !== CoreApp.Explore && (\n          <IconButton\n            key=\"run\"\n            name={data?.state === LoadingState.Loading ? 'fa fa-spinner' : \"play\"}\n            tooltip=\"Run queries\"\n            onClick={onRunQuery}\n          />\n        )}\n        <QueryEditorModeToggle mode={editorMode} onChange={onEditorModeChange}/>\n      </EditorHeader>\n      <Space v={0.5}/>\n      <EditorRows>\n        {editorMode === QueryEditorMode.Code && (\n          <>\n            <PromQueryCodeEditor\n              {...props}\n              key={templateByDashboard?.expr}\n              query={query}\n              showExplain={explain}\n            />\n            {rawQuery && <QueryPreview query={query.expr} withTemplate={templateByDashboard}/>}\n          </>\n        )}\n        {editorMode === QueryEditorMode.Builder && (\n          <PromQueryBuilderContainer\n            query={query}\n            datasource={props.datasource}\n            onChange={onChangeInternal}\n            onRunQuery={props.onRunQuery}\n            data={data}\n            showExplain={explain}\n          />\n        )}\n        {trace && <TraceView query={query} datasource={datasource} data={data}/>}\n        <PromQueryBuilderOptions query={query} app={props.app} onChange={onChange} onRunQuery={onRunQuery}/>\n      </EditorRows>\n    </>\n  );\n});\n\nPromQueryEditorSelector.displayName = 'PromQueryEditorSelector';\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-13: optimization imports\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { useCallback, useState } from 'react';\n\nimport store from '../../../store';\n\nexport const promQueryEditorExplainKey = 'PrometheusQueryEditorExplainDefault';\nexport const promQueryEditorRawQueryKey = 'PrometheusQueryEditorRawQueryDefault';\nexport const lokiQueryEditorExplainKey = 'LokiQueryEditorExplainDefault';\nexport const lokiQueryEditorRawQueryKey = 'LokiQueryEditorRawQueryDefault';\n\nexport type QueryEditorFlags =\n  | typeof promQueryEditorExplainKey\n  | typeof promQueryEditorRawQueryKey\n  | typeof lokiQueryEditorExplainKey\n  | typeof lokiQueryEditorRawQueryKey;\n\nfunction getFlagValue(key: QueryEditorFlags, defaultValue = false): boolean {\n  const val = store.get(key);\n  return val === undefined ? defaultValue : Boolean(parseInt(val, 10));\n}\n\nfunction setFlagValue(key: QueryEditorFlags, value: boolean) {\n  store.set(key, value ? '1' : '0');\n}\n\ntype UseFlagHookReturnType = { flag: boolean; setFlag: (val: boolean) => void };\n\n/**\n *\n * Use and store value of explain/rawquery switch in local storage.\n * Needs to be a hook with local state to trigger re-renders.\n */\nexport function useFlag(key: QueryEditorFlags, defaultValue = false): UseFlagHookReturnType {\n  const [flag, updateFlag] = useState(getFlagValue(key, defaultValue));\n  const setter = useCallback(\n    (value: boolean) => {\n      setFlagValue(key, value);\n      updateFlag(value);\n    },\n    [key]\n  );\n\n  return { flag, setFlag: setter };\n}\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from 'react';\n\nimport PromQueryField from './PromQueryField';\nimport { PromQueryEditorProps } from './types';\n\nexport function PromQueryEditorForAlerting(props: PromQueryEditorProps) {\n  const { datasource, query, range, data, onChange, onRunQuery } = props;\n\n  return (\n    <PromQueryField\n      datasource={datasource}\n      query={query}\n      onRunQuery={onRunQuery}\n      onChange={onChange}\n      history={[]}\n      range={range}\n      data={data}\n      data-testid={testIds.editor}\n    />\n  );\n}\n\nexport const testIds = {\n  editor: 'prom-editor-cloud-alerting',\n};\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { memo } from 'react';\n\nimport { CoreApp } from '@grafana/data';\n\nimport { PromQueryEditorSelector } from '../querybuilder/components/PromQueryEditorSelector';\n\nimport { PromQueryEditorForAlerting } from './PromQueryEditorForAlerting';\nimport { PromQueryEditorProps } from './types';\n\nexport function PromQueryEditorByApp(props: PromQueryEditorProps) {\n  const { app } = props;\n\n  switch (app) {\n    case CoreApp.CloudAlerting:\n      return <PromQueryEditorForAlerting {...props} />;\n    default:\n      return <PromQueryEditorSelector {...props} />;\n  }\n}\n\nexport default memo(PromQueryEditorByApp);\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-12-01: remove 'None' from enum AzureCloud\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { SelectableValue } from '@grafana/data';\n\nexport enum AzureCloud {\n  Public = 'AzureCloud',\n  China = 'AzureChinaCloud',\n  USGovernment = 'AzureUSGovernment',\n  Germany = 'AzureGermanCloud',\n}\n\nexport const KnownAzureClouds = [\n  { value: AzureCloud.Public, label: 'Azure' },\n  { value: AzureCloud.China, label: 'Azure China' },\n  { value: AzureCloud.USGovernment, label: 'Azure US Government' },\n  { value: AzureCloud.Germany, label: 'Azure Germany' },\n] as SelectableValue[];\n\nexport type AzureAuthType = 'msi' | 'clientsecret';\n\nexport type ConcealedSecret = symbol;\n\ninterface AzureCredentialsBase {\n  authType: AzureAuthType;\n  defaultSubscriptionId?: string;\n}\n\nexport interface AzureManagedIdentityCredentials extends AzureCredentialsBase {\n  authType: 'msi';\n}\n\nexport interface AzureClientSecretCredentials extends AzureCredentialsBase {\n  authType: 'clientsecret';\n  azureCloud?: string;\n  tenantId?: string;\n  clientId?: string;\n  clientSecret?: string | ConcealedSecret;\n}\n\nexport type AzureCredentials = AzureManagedIdentityCredentials | AzureClientSecretCredentials;\n\nexport function isCredentialsComplete(credentials: AzureCredentials): boolean {\n  switch (credentials.authType) {\n    case 'msi':\n      return true;\n    case 'clientsecret':\n      return !!(credentials.azureCloud && credentials.tenantId && credentials.clientId && credentials.clientSecret);\n  }\n}\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { DataSourceSettings } from '@grafana/data';\nimport { config } from '@grafana/runtime';\n\nimport { AzureCloud, AzureCredentials, ConcealedSecret } from './AzureCredentials';\n\nconst concealed: ConcealedSecret = Symbol('Concealed client secret');\n\nfunction getDefaultAzureCloud(): string {\n  return config.azure.cloud || AzureCloud.Public;\n}\n\nfunction getSecret(options: DataSourceSettings<any, any>): undefined | string | ConcealedSecret {\n  if (options.secureJsonFields.azureClientSecret) {\n    // The secret is concealed on server\n    return concealed;\n  } else {\n    const secret = options.secureJsonData?.azureClientSecret;\n    return typeof secret === 'string' && secret.length > 0 ? secret : undefined;\n  }\n}\n\nexport function hasCredentials(options: DataSourceSettings<any, any>): boolean {\n  return !!options.jsonData.azureCredentials;\n}\n\nexport function getDefaultCredentials(): AzureCredentials {\n  if (config.azure.managedIdentityEnabled) {\n    return { authType: 'msi' };\n  } else {\n    return { authType: 'clientsecret', azureCloud: getDefaultAzureCloud() };\n  }\n}\n\nexport function getCredentials(options: DataSourceSettings<any, any>): AzureCredentials {\n  const credentials = options.jsonData.azureCredentials as AzureCredentials | undefined;\n\n  // If no credentials saved, then return empty credentials\n  // of type based on whether the managed identity enabled\n  if (!credentials) {\n    return getDefaultCredentials();\n  }\n\n  switch (credentials.authType) {\n    case 'msi':\n      if (config.azure.managedIdentityEnabled) {\n        return {\n          authType: 'msi',\n        };\n      } else {\n        // If authentication type is managed identity but managed identities were disabled in Grafana config,\n        // then we should fallback to an empty app registration (client secret) configuration\n        return {\n          authType: 'clientsecret',\n          azureCloud: getDefaultAzureCloud(),\n        };\n      }\n    case 'clientsecret':\n      return {\n        authType: 'clientsecret',\n        azureCloud: credentials.azureCloud || getDefaultAzureCloud(),\n        tenantId: credentials.tenantId,\n        clientId: credentials.clientId,\n        clientSecret: getSecret(options),\n      };\n  }\n}\n\nexport function updateCredentials(\n  options: DataSourceSettings<any, any>,\n  credentials: AzureCredentials\n): DataSourceSettings<any, any> {\n  switch (credentials.authType) {\n    case 'msi':\n      if (!config.azure.managedIdentityEnabled) {\n        throw new Error('Managed Identity authentication is not enabled in Grafana config.');\n      }\n\n      options = {\n        ...options,\n        jsonData: {\n          ...options.jsonData,\n          azureCredentials: {\n            authType: 'msi',\n          },\n        },\n      };\n\n      return options;\n\n    case 'clientsecret':\n      options = {\n        ...options,\n        jsonData: {\n          ...options.jsonData,\n          azureCredentials: {\n            authType: 'clientsecret',\n            azureCloud: credentials.azureCloud || getDefaultAzureCloud(),\n            tenantId: credentials.tenantId,\n            clientId: credentials.clientId,\n          },\n        },\n        secureJsonData: {\n          ...options.secureJsonData,\n          azureClientSecret:\n            typeof credentials.clientSecret === 'string' && credentials.clientSecret.length > 0\n              ? credentials.clientSecret\n              : undefined,\n        },\n        secureJsonFields: {\n          ...options.secureJsonFields,\n          azureClientSecret: typeof credentials.clientSecret === 'symbol',\n        },\n      };\n\n      return options;\n  }\n}\n\nexport function setDefaultCredentials(options: DataSourceSettings<any, any>): Partial<DataSourceSettings<any, any>> {\n  return {\n    jsonData: {\n      ...options.jsonData,\n      azureCredentials: getDefaultCredentials(),\n    },\n  };\n}\n\nexport function resetCredentials(options: DataSourceSettings<any, any>): Partial<DataSourceSettings<any, any>> {\n  return {\n    jsonData: {\n      ...options.jsonData,\n      azureAuth: undefined,\n      azureCredentials: undefined,\n      azureEndpointResourceId: undefined,\n    },\n  };\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { ChangeEvent, FunctionComponent, useEffect, useReducer, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Input, InlineFormLabel, Button, Select } from '@grafana/ui';\n\nimport { AzureAuthType, AzureCredentials, isCredentialsComplete } from './AzureCredentials';\n\nexport interface Props {\n  managedIdentityEnabled: boolean;\n  credentials: AzureCredentials;\n  azureCloudOptions?: SelectableValue[];\n  onCredentialsChange: (updatedCredentials: AzureCredentials) => void;\n  getSubscriptions?: () => Promise<SelectableValue[]>;\n  disabled?: boolean;\n}\n\nconst authTypeOptions: Array<SelectableValue<AzureAuthType>> = [\n  {\n    value: 'msi',\n    label: 'Managed Identity',\n  },\n  {\n    value: 'clientsecret',\n    label: 'App Registration',\n  },\n];\n\nexport const AzureCredentialsForm: FunctionComponent<Props> = (props: Props) => {\n  const { credentials, azureCloudOptions, onCredentialsChange, getSubscriptions, disabled } = props;\n  const hasRequiredFields = isCredentialsComplete(credentials);\n\n  const [subscriptions, setSubscriptions] = useState<Array<SelectableValue<string>>>([]);\n  const [loadSubscriptionsClicked, onLoadSubscriptions] = useReducer((val) => val + 1, 0);\n  useEffect(() => {\n    if (!getSubscriptions || !hasRequiredFields) {\n      updateSubscriptions([]);\n      return;\n    }\n    let canceled = false;\n    getSubscriptions().then((result) => {\n      if (!canceled) {\n        updateSubscriptions(result, loadSubscriptionsClicked);\n      }\n    });\n    return () => {\n      canceled = true;\n    };\n    // This effect is intended to be called only once initially and on Load Subscriptions click\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loadSubscriptionsClicked]);\n\n  const updateSubscriptions = (received: Array<SelectableValue<string>>, autoSelect = false) => {\n    setSubscriptions(received);\n    if (getSubscriptions) {\n      if (autoSelect && !credentials.defaultSubscriptionId && received.length > 0) {\n        // Selecting the default subscription if subscriptions received but no default subscription selected\n        onSubscriptionChange(received[0]);\n      } else if (credentials.defaultSubscriptionId) {\n        const found = received.find((opt) => opt.value === credentials.defaultSubscriptionId);\n        if (!found) {\n          // Unselecting the default subscription if it isn't found among the received subscriptions\n          onSubscriptionChange(undefined);\n        }\n      }\n    }\n  };\n\n  const onAuthTypeChange = (selected: SelectableValue<AzureAuthType>) => {\n    if (onCredentialsChange) {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        authType: selected.value || 'msi',\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onAzureCloudChange = (selected: SelectableValue<string>) => {\n    if (onCredentialsChange && credentials.authType === 'clientsecret') {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        azureCloud: selected.value,\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onTenantIdChange = (event: ChangeEvent<HTMLInputElement>) => {\n    if (onCredentialsChange && credentials.authType === 'clientsecret') {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        tenantId: event.target.value,\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onClientIdChange = (event: ChangeEvent<HTMLInputElement>) => {\n    if (onCredentialsChange && credentials.authType === 'clientsecret') {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        clientId: event.target.value,\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onClientSecretChange = (event: ChangeEvent<HTMLInputElement>) => {\n    if (onCredentialsChange && credentials.authType === 'clientsecret') {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        clientSecret: event.target.value,\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onClientSecretReset = () => {\n    if (onCredentialsChange && credentials.authType === 'clientsecret') {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        clientSecret: '',\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onSubscriptionChange = (selected: SelectableValue<string> | undefined) => {\n    if (onCredentialsChange) {\n      const updated: AzureCredentials = {\n        ...credentials,\n        defaultSubscriptionId: selected?.value,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  return (\n    <div className=\"gf-form-group\">\n      {props.managedIdentityEnabled && (\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form\">\n            <InlineFormLabel className=\"width-12\" tooltip=\"Choose the type of authentication to Azure services\">\n              Authentication\n            </InlineFormLabel>\n            <Select\n              className=\"width-15\"\n              value={authTypeOptions.find((opt) => opt.value === credentials.authType)}\n              options={authTypeOptions}\n              onChange={onAuthTypeChange}\n              isDisabled={disabled}\n            />\n          </div>\n        </div>\n      )}\n      {credentials.authType === 'clientsecret' && (\n        <>\n          {azureCloudOptions && (\n            <div className=\"gf-form-inline\">\n              <div className=\"gf-form\">\n                <InlineFormLabel className=\"width-12\" tooltip=\"Choose an Azure Cloud\">\n                  Azure Cloud\n                </InlineFormLabel>\n                <Select\n                  className=\"width-15\"\n                  value={azureCloudOptions.find((opt) => opt.value === credentials.azureCloud)}\n                  options={azureCloudOptions}\n                  onChange={onAzureCloudChange}\n                  isDisabled={disabled}\n                />\n              </div>\n            </div>\n          )}\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <InlineFormLabel className=\"width-12\">Directory (tenant) ID</InlineFormLabel>\n              <div className=\"width-15\">\n                <Input\n                  className=\"width-30\"\n                  placeholder=\"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\"\n                  value={credentials.tenantId || ''}\n                  onChange={onTenantIdChange}\n                  disabled={disabled}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <InlineFormLabel className=\"width-12\">Application (client) ID</InlineFormLabel>\n              <div className=\"width-15\">\n                <Input\n                  className=\"width-30\"\n                  placeholder=\"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\"\n                  value={credentials.clientId || ''}\n                  onChange={onClientIdChange}\n                  disabled={disabled}\n                />\n              </div>\n            </div>\n          </div>\n          {typeof credentials.clientSecret === 'symbol' ? (\n            <div className=\"gf-form-inline\">\n              <div className=\"gf-form\">\n                <InlineFormLabel htmlFor=\"azure-client-secret\" className=\"width-12\">\n                  Client Secret\n                </InlineFormLabel>\n                <Input id=\"azure-client-secret\" className=\"width-25\" placeholder=\"configured\" disabled={true} />\n              </div>\n              {!disabled && (\n                <div className=\"gf-form\">\n                  <div className=\"max-width-30 gf-form-inline\">\n                    <Button variant=\"secondary\" type=\"button\" onClick={onClientSecretReset}>\n                      reset\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"gf-form-inline\">\n              <div className=\"gf-form\">\n                <InlineFormLabel className=\"width-12\">Client Secret</InlineFormLabel>\n                <div className=\"width-15\">\n                  <Input\n                    className=\"width-30\"\n                    placeholder=\"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\"\n                    value={credentials.clientSecret || ''}\n                    onChange={onClientSecretChange}\n                    disabled={disabled}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      )}\n      {getSubscriptions && (\n        <>\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <InlineFormLabel className=\"width-12\">Default Subscription</InlineFormLabel>\n              <div className=\"width-25\">\n                <Select\n                  value={\n                    credentials.defaultSubscriptionId\n                      ? subscriptions.find((opt) => opt.value === credentials.defaultSubscriptionId)\n                      : undefined\n                  }\n                  options={subscriptions}\n                  onChange={onSubscriptionChange}\n                  isDisabled={disabled}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <div className=\"max-width-30 gf-form-inline\">\n                <Button\n                  variant=\"secondary\"\n                  size=\"sm\"\n                  type=\"button\"\n                  onClick={onLoadSubscriptions}\n                  disabled={!hasRequiredFields}\n                >\n                  Load Subscriptions\n                </Button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-11: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\nimport { cx } from '@emotion/css';\nimport React, { FormEvent, useMemo, useState } from 'react';\n\nimport { config } from '@grafana/runtime';\nimport { InlineField, InlineFieldRow, InlineSwitch, Input } from '@grafana/ui';\n\nimport { HttpSettingsBaseProps } from \"../components/types\";\n\nimport { KnownAzureClouds, AzureCredentials } from './AzureCredentials';\nimport { getCredentials, updateCredentials } from './AzureCredentialsConfig';\nimport { AzureCredentialsForm } from './AzureCredentialsForm';\n\nexport const AzureAuthSettings = (props: HttpSettingsBaseProps) => {\n  const { dataSourceConfig, onChange } = props;\n\n  const [overrideAudienceChecked, setOverrideAudienceChecked] = useState<boolean>(\n    !!dataSourceConfig.jsonData.azureEndpointResourceId\n  );\n\n  const credentials = useMemo(() => getCredentials(dataSourceConfig), [dataSourceConfig]);\n\n  const onCredentialsChange = (credentials: AzureCredentials): void => {\n    onChange(updateCredentials(dataSourceConfig, credentials));\n  };\n\n  const onOverrideAudienceChange = (ev: FormEvent<HTMLInputElement>): void => {\n    setOverrideAudienceChecked(ev.currentTarget.checked);\n    if (!ev.currentTarget.checked) {\n      onChange({\n        ...dataSourceConfig,\n        jsonData: { ...dataSourceConfig.jsonData, azureEndpointResourceId: undefined },\n      });\n    }\n  };\n\n  const onResourceIdChange = (ev: FormEvent<HTMLInputElement>): void => {\n    if (overrideAudienceChecked) {\n      onChange({\n        ...dataSourceConfig,\n        jsonData: { ...dataSourceConfig.jsonData, azureEndpointResourceId: ev.currentTarget.value },\n      });\n    }\n  };\n\n  const prometheusConfigOverhaulAuth = config.featureToggles.prometheusConfigOverhaulAuth;\n\n  const labelWidth = prometheusConfigOverhaulAuth ? 24 : 26;\n\n  return (\n    <>\n      <h6>Azure authentication</h6>\n      <AzureCredentialsForm\n        managedIdentityEnabled={config.azure.managedIdentityEnabled}\n        credentials={credentials}\n        azureCloudOptions={KnownAzureClouds}\n        onCredentialsChange={onCredentialsChange}\n        disabled={dataSourceConfig.readOnly}\n      />\n      <h6>Azure configuration</h6>\n      <div className=\"gf-form-group\">\n        <InlineFieldRow>\n          <InlineField labelWidth={labelWidth} label=\"Override AAD audience\" disabled={dataSourceConfig.readOnly}>\n            <InlineSwitch value={overrideAudienceChecked} onChange={onOverrideAudienceChange} />\n          </InlineField>\n        </InlineFieldRow>\n        {overrideAudienceChecked && (\n          <InlineFieldRow>\n            <InlineField labelWidth={labelWidth} label=\"Resource ID\" disabled={dataSourceConfig.readOnly}>\n              <Input\n                className={cx(prometheusConfigOverhaulAuth ? 'width-20' : 'width-30')}\n                value={dataSourceConfig.jsonData.azureEndpointResourceId || ''}\n                onChange={onResourceIdChange}\n              />\n            </InlineField>\n          </InlineFieldRow>\n        )}\n      </div>\n    </>\n  );\n};\n","import React from \"react\";\n\nconst tips = [\n  {\n    title: \"Datasource\",\n    url: \"https://github.com/VictoriaMetrics/grafana-datasource#victoriametrics-data-source-for-grafana\",\n  },\n  {\n    title: \"Cluster VM\",\n    url: \"https://docs.victoriametrics.com/Cluster-VictoriaMetrics.html#url-format\",\n  },\n  {\n    title: \"Grafana setup\",\n    url: \"https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#grafana-setup\",\n  },\n  {\n    title: \"MetricsQL\",\n    url: \"https://docs.victoriametrics.com/MetricsQL.html\",\n  },\n  {\n    title: \"VictoriaMetrics\",\n    url: \"https://victoriametrics.com/\",\n  }\n]\n\nexport const HelpfulLinks = () => (\n  <>\n    <h3 className=\"page-heading\">Helpful links</h3>\n    <div className=\"gf-form-group gf-form-inline markdown-html\">\n      {tips.map(t => (\n        <a key={t.url}  className=\"gf-form-label gf-form-label--dashlink\"\n           href={t.url}\n           target=\"_blank\"\n           rel=\"docs noreferrer\">\n          {t.title}\n        </a>\n      ))}\n    </div>\n  </>\n)\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-10: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { SyntheticEvent } from 'react';\n\nimport {\n  DataSourcePluginOptionsEditorProps,\n  onUpdateDatasourceJsonDataOptionChecked,\n  SelectableValue,\n} from '@grafana/data';\nimport {\n  Select,\n  InlineField,\n  InlineSwitch,\n  EventsWithValidation,\n  InlineFormLabel,\n  LegacyForms,\n  regexValidation,\n} from '@grafana/ui';\n\nimport { getDefaultVmuiUrl } from \"../components/VmuiLink\";\nimport { PromOptions } from '../types';\n\nconst { Input, FormField } = LegacyForms;\n\nconst httpOptions = [\n  { value: 'POST', label: 'POST' },\n  { value: 'GET', label: 'GET' },\n];\n\ntype Props = Pick<DataSourcePluginOptionsEditorProps<PromOptions>, 'options' | 'onOptionsChange'>;\n\nexport const PromSettings = (props: Props) => {\n  const { options, onOptionsChange } = props;\n\n  // We are explicitly adding httpMethod so it is correctly displayed in dropdown. This way, it is more predictable for users.\n\n  if (!options.jsonData.httpMethod) {\n    options.jsonData.httpMethod = 'POST';\n  }\n\n  return (\n    <>\n      <div className=\"gf-form-group\">\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form\">\n            <FormField\n              label=\"Scrape interval\"\n              labelWidth={13}\n              inputEl={\n                <Input\n                  className=\"width-7\"\n                  value={options.jsonData.timeInterval}\n                  spellCheck={false}\n                  placeholder=\"15s\"\n                  onChange={onChangeHandler('timeInterval', options, onOptionsChange)}\n                  validationEvents={promSettingsValidationEvents}\n                />\n              }\n              tooltip=\"Set this to the typical scrape and evaluation interval configured in Prometheus. Defaults to 15s.\"\n            />\n          </div>\n        </div>\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form\">\n            <FormField\n              label=\"Query timeout\"\n              labelWidth={13}\n              inputEl={\n                <Input\n                  className=\"width-7\"\n                  value={options.jsonData.queryTimeout}\n                  onChange={onChangeHandler('queryTimeout', options, onOptionsChange)}\n                  spellCheck={false}\n                  placeholder=\"60s\"\n                  validationEvents={promSettingsValidationEvents}\n                />\n              }\n              tooltip=\"Set the Prometheus query timeout.\"\n            />\n          </div>\n        </div>\n        <div className=\"gf-form\">\n          <InlineFormLabel\n            width={13}\n            tooltip=\"You can use either POST or GET HTTP method to query your Prometheus data source. POST is the recommended method as it allows bigger queries. Change this to GET if you have a Prometheus version older than 2.1 or if POST requests are restricted in your network.\"\n          >\n            HTTP Method\n          </InlineFormLabel>\n          <Select\n            aria-label=\"Select HTTP method\"\n            options={httpOptions}\n            value={httpOptions.find((o) => o.value === options.jsonData.httpMethod)}\n            onChange={onChangeHandler('httpMethod', options, onOptionsChange)}\n            width={14}\n          />\n        </div>\n      </div>\n      <h3 className=\"page-heading\">Misc</h3>\n      <div className=\"gf-form-group\">\n        <div className=\"gf-form\">\n          <InlineField\n            labelWidth={28}\n            label=\"Disable metrics lookup\"\n            tooltip=\"Checking this option will disable the metrics chooser and metric/label support in the query field's autocomplete. This helps if you have performance issues with bigger Prometheus instances.\"\n          >\n            <InlineSwitch\n              value={options.jsonData.disableMetricsLookup ?? false}\n              onChange={onUpdateDatasourceJsonDataOptionChecked(props, 'disableMetricsLookup')}\n            />\n          </InlineField>\n        </div>\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form max-width-30\">\n            <FormField\n              label=\"Custom query parameters\"\n              labelWidth={14}\n              tooltip=\"Add Custom parameters to all queries.\"\n              inputEl={\n                <Input\n                  className=\"width-25\"\n                  value={options.jsonData.customQueryParameters}\n                  onChange={onChangeHandler('customQueryParameters', options, onOptionsChange)}\n                  spellCheck={false}\n                  placeholder=\"Example: max_source_resolution=5m&timeout=10\"\n                />\n              }\n            />\n          </div>\n        </div>\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form max-width-30\">\n            <FormField\n              label=\"Link on vmui\"\n              labelWidth={14}\n              tooltip={<>The link you want to use when clicking the <code>Run in vmui</code> button</>}\n              inputEl={\n                <Input\n                  className=\"width-25\"\n                  value={options.jsonData.vmuiUrl}\n                  onChange={onChangeHandler('vmuiUrl', options, onOptionsChange)}\n                  spellCheck={false}\n                  placeholder={getDefaultVmuiUrl(options.url)}\n                />\n              }\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport const promSettingsValidationEvents = {\n  [EventsWithValidation.onBlur]: [\n    regexValidation(\n      /^$|^\\d+(ms|[Mwdhmsy])$/,\n      'Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s'\n    ),\n  ],\n};\n\nexport const getValueFromEventItem = (eventItem: SyntheticEvent<HTMLInputElement> | SelectableValue<string>) => {\n  if (!eventItem) {\n    return '';\n  }\n\n  if (eventItem.hasOwnProperty('currentTarget')) {\n    return eventItem.currentTarget.value;\n  }\n\n  return (eventItem as SelectableValue<string>).value;\n};\n\nconst onChangeHandler =\n  (key: keyof PromOptions, options: Props['options'], onOptionsChange: Props['onOptionsChange']) =>\n  (eventItem: SyntheticEvent<HTMLInputElement> | SelectableValue<string>) => {\n    onOptionsChange({\n      ...options,\n      jsonData: {\n        ...options.jsonData,\n        [key]: getValueFromEventItem(eventItem),\n      },\n    });\n  };\n","import React, { SyntheticEvent } from 'react';\n\nimport {\n  DataSourcePluginOptionsEditorProps,\n  SelectableValue,\n} from '@grafana/data';\nimport {\n  Button,\n  EventsWithValidation,\n  InlineField,\n  LegacyForms,\n  regexValidation\n} from '@grafana/ui';\n\nimport { LimitMetrics, PromOptions } from '../types';\n\nimport { getValueFromEventItem } from \"./PromSettings\";\n\nconst { Input } = LegacyForms;\n\nconst limitsSettingsValidationEvents = {\n  [EventsWithValidation.onBlur]: [\n    regexValidation(\n      /^$|^\\d+$/,\n      'Value is not valid, you can use number'\n    ),\n  ],\n};\n\nconst limitFields = [\n  {\n    label: \"Max series\",\n    tooltip: <><code>-search.maxSeries</code> limits the number of time series, which may be returned from <a href=\"https://prometheus.io/docs/prometheus/latest/querying/api/#finding-series-by-label-matchers\" target=\"_blank\" rel=\"noreferrer\">/api/v1/series</a>. This endpoint is used mostly by Grafana for auto-completion of metric names, label names and label values. Queries to this endpoint may take big amounts of CPU time and memory when the database contains big number of unique time series because of <a href=\"https://docs.victoriametrics.com/FAQ.html#what-is-high-churn-rate\" target=\"_blank\" rel=\"noreferrer\">high churn rate</a>. In this case it might be useful to set the <code>Max series</code> to quite low value in order limit CPU and memory usage of the datasource.</>,\n    placeholder: \"\",\n    key: \"maxSeries\" as keyof LimitMetrics\n  },\n  {\n    label: \"Max tag values\",\n    tooltip: <><code>-search.maxTagValues</code> limits the number of items, which may be returned from <a href=\"https://prometheus.io/docs/prometheus/latest/querying/api/#querying-label-values\" target=\"_blank\" rel=\"noreferrer\">/api/v1/label/.../values</a>. This endpoint is used mostly by Grafana for auto-completion of label values. Queries to this endpoint may take big amounts of CPU time and memory when the database contains big number of unique time series because of <a href=\"https://docs.victoriametrics.com/FAQ.html#what-is-high-churn-rate\" target=\"_blank\" rel=\"noreferrer\">high churn rate</a>. In this case, it might be useful to set the <code>Max tag values</code> to quite low value in order to limit CPU and memory usage of the datasource.</>,\n    placeholder: \"\",\n    key: \"maxTagValues\" as keyof LimitMetrics\n  },\n  {\n    label: \"Max tag keys\",\n    tooltip: <><code>-search.maxTagKeys</code> limits the number of items, which may be returned from <a href=\"https://prometheus.io/docs/prometheus/latest/querying/api/#getting-label-names\" target=\"_blank\" rel=\"noreferrer\">/api/v1/labels</a>. This endpoint is used mostly by Grafana for auto-completion of label names. Queries to this endpoint may take big amounts of CPU time and memory when the database contains big number of unique time series because of <a href=\"https://docs.victoriametrics.com/FAQ.html#what-is-high-churn-rate\" target=\"_blank\" rel=\"noreferrer\">high churn rate</a>. In this case it might be useful to set the <code>Max tag keys</code> to quite low value in order to limit CPU and memory usage of the datasource.</>,\n    placeholder: \"\",\n    key: \"maxTagKeys\" as keyof LimitMetrics\n  }\n]\n\ntype Props = Pick<DataSourcePluginOptionsEditorProps<PromOptions>, 'options' | 'onOptionsChange'>;\n\nexport const LimitsSettings = (props: Props) => {\n  const { options, onOptionsChange } = props;\n\n  return (\n    <>\n      <h3 className=\"page-heading\">Limits</h3>\n      <p className=\"text-help\">Leave the field blank or set the value to <code>0</code> to remove the limit</p>\n      <div className=\"gf-form-group\">\n        {limitFields.map((field) => (\n          <div className=\"gf-form\" key={field.key}>\n            <InlineField\n              label={field.label}\n              labelWidth={28}\n              tooltip={field.tooltip}\n              interactive={true}\n            >\n              <Input\n                className=\"width-6\"\n                value={`${options.jsonData?.limitMetrics?.[field.key] || ''}`}\n                onChange={onChangeHandler(field.key, options, onOptionsChange)}\n                spellCheck={false}\n                placeholder={field.placeholder}\n                validationEvents={limitsSettingsValidationEvents}\n              />\n            </InlineField>\n          </div>\n        ))}\n        <a\n          className=\"text-link\"\n          target=\"_blank\"\n          href={\"https://docs.victoriametrics.com/#prometheus-querying-api-enhancements\"}\n          rel=\"noreferrer\"\n        >\n          <Button\n            variant={'secondary'}\n            fill={\"text\"}\n            icon={\"book\"}\n            size={\"sm\"}\n          >\n            API Limits Docs\n          </Button>\n        </a>\n      </div>\n    </>\n  )\n};\n\nconst onChangeHandler =\n  (key: keyof LimitMetrics, options: Props['options'], onOptionsChange: Props['onOptionsChange']) =>\n    (eventItem: SyntheticEvent<HTMLInputElement> | SelectableValue<string>) => {\n      onOptionsChange({\n        ...options,\n        jsonData: {\n          ...options.jsonData,\n          limitMetrics: {\n            ...options.jsonData.limitMetrics,\n            [key]: getValueFromEventItem(eventItem),\n          }\n        },\n      });\n    };\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { operate } from '../util/lift';\nexport function catchError(selector) {\n    return operate(function (source, subscriber) {\n        var innerSub = null;\n        var syncUnsub = false;\n        var handledResult;\n        innerSub = source.subscribe(createOperatorSubscriber(subscriber, undefined, undefined, function (err) {\n            handledResult = innerFrom(selector(err, catchError(selector)(source)));\n            if (innerSub) {\n                innerSub.unsubscribe();\n                innerSub = null;\n                handledResult.subscribe(subscriber);\n            }\n            else {\n                syncUnsub = true;\n            }\n        }));\n        if (syncUnsub) {\n            innerSub.unsubscribe();\n            innerSub = null;\n            handledResult.subscribe(subscriber);\n        }\n    });\n}\n//# sourceMappingURL=catchError.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","import React from 'react';\n\nimport { AnnotationQuery } from '@grafana/data';\nimport { AutoSizeInput, LegacyForms } from '@grafana/ui';\n\nconst { Input } = LegacyForms;\nimport { PromQueryCodeEditor } from '../../querybuilder/components/PromQueryCodeEditor';\nimport { PromQuery } from '../../types';\nimport { EditorField, EditorRows, EditorRow, Space, EditorSwitch } from \"../QueryEditor\";\nimport { PromQueryEditorProps } from '../types';\n\ntype Props = PromQueryEditorProps & {\n  annotation?: AnnotationQuery<PromQuery>;\n  onAnnotationChange?: (annotation: AnnotationQuery<PromQuery>) => void;\n};\n\nexport function AnnotationQueryEditor(props: Props) {\n  // This is because of problematic typing. See AnnotationQueryEditorProps in grafana-data/annotations.ts.\n  const annotation = props.annotation!;\n  const onAnnotationChange = props.onAnnotationChange!;\n  const query = { expr: annotation.expr, refId: annotation.name, interval: annotation.step };\n\n  const handlerChangeAnnotation = (value: string, key: string) => {\n    onAnnotationChange({\n      ...annotation,\n      [key]: value,\n    });\n  }\n\n  return (\n    <>\n      <EditorRows>\n        <PromQueryCodeEditor\n          {...props}\n          query={query}\n          showExplain={false}\n          onChange={(query) => handlerChangeAnnotation(query.expr, 'expr')}\n        />\n      </EditorRows>\n      <Space v={0.5} />\n      <EditorRow>\n        <EditorField\n          label=\"Min step\"\n          tooltip={\n            <>\n              An additional lower limit for the step parameter of the Prometheus query and for the{' '}\n              <code>$__interval</code> and <code>$__rate_interval</code> variables.\n            </>\n          }\n        >\n          <AutoSizeInput\n            type=\"text\"\n            aria-label=\"Set lower limit for the step parameter\"\n            placeholder={'auto'}\n            minWidth={10}\n            defaultValue={query.interval}\n            onCommitChange={(ev) => handlerChangeAnnotation(ev.currentTarget.value, 'step')}\n          />\n        </EditorField>\n        <EditorField\n          label=\"Title\"\n          tooltip={\n            'Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance.'\n          }\n        >\n          <Input\n            type=\"text\"\n            placeholder=\"{{alertname}}\"\n            value={annotation.titleFormat}\n            onChange={(ev) => handlerChangeAnnotation(ev.currentTarget.value, 'titleFormat')}\n          />\n        </EditorField>\n        <EditorField label=\"Tags\">\n          <Input\n            type=\"text\"\n            placeholder=\"label1,label2\"\n            value={annotation.tagKeys}\n            onChange={(ev) => handlerChangeAnnotation(ev.currentTarget.value, 'tagKeys')}\n          />\n        </EditorField>\n        <EditorField\n          label=\"Text\"\n          tooltip={\n            'Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance.'\n          }\n        >\n          <Input\n            type=\"text\"\n            placeholder=\"{{instance}}\"\n            value={annotation.textFormat}\n            onChange={(ev) => handlerChangeAnnotation(ev.currentTarget.value, 'textFormat')}\n          />\n        </EditorField>\n        <EditorField\n          label=\"Series value as timestamp\"\n          tooltip={\n            'The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000.'\n          }\n        >\n          <EditorSwitch\n            checked={annotation.useValueForTime}\n            onChange={(ev) => handlerChangeAnnotation(ev.currentTarget.value, 'useValueForTime')}\n          />\n        </EditorField>\n      </EditorRow>\n    </>\n  );\n}\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { Labels } from '@grafana/data';\n\n/** replace labels in a string.  Used for loki+prometheus legend formats */\nexport function renderLegendFormat(aliasPattern: string, aliasData: Labels): string {\n  const aliasRegex = /\\{\\{\\s*([^{}]+?)\\s*}}/g\n  return aliasPattern.replace(aliasRegex, (_, g1) => (aliasData[g1] || \"\"));\n}\n","// Copyright (c) 2024 Grafana Labs\n// Modifications Copyright (c) 2024 VictoriaMetrics\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { promQueryModeller } from '../querybuilder/PromQueryModeller';\nimport { buildVisualQueryFromString } from '../querybuilder/parsing';\nimport { PromVariableQuery, PromVariableQueryType as QueryType } from '../types';\n\nexport const PrometheusLabelNamesRegex = /^label_names\\(\\)\\s*$/;\n// Note that this regex is different from the one in metric_find_query.ts because this is used pre-interpolation\nexport const PrometheusLabelValuesRegex = /^label_values\\((?:(.+),\\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\\)\\s*$/;\nexport const PrometheusMetricNamesRegex = /^metrics\\((.+)\\)\\s*$/;\nexport const PrometheusQueryResultRegex = /^query_result\\((.+)\\)\\s*$/;\nexport const PrometheusLabelNamesRegexWithMatch = /^label_names\\((.+)\\)\\s*$/;\n\nexport function migrateVariableQueryToEditor(rawQuery: string | PromVariableQuery): PromVariableQuery {\n  // If not string, we assume PromVariableQuery\n  if (typeof rawQuery !== 'string') {\n    return rawQuery;\n  }\n\n  const queryBase = {\n    refId: 'PrometheusDatasource-VariableQuery',\n    qryType: QueryType.LabelNames,\n  };\n\n  const labelNamesMatchQuery = rawQuery.match(PrometheusLabelNamesRegexWithMatch);\n\n  if (labelNamesMatchQuery) {\n    return {\n      ...queryBase,\n      qryType: QueryType.LabelNames,\n      match: labelNamesMatchQuery[1],\n    };\n  }\n\n  const labelNames = rawQuery.match(PrometheusLabelNamesRegex);\n  if (labelNames) {\n    return {\n      ...queryBase,\n      qryType: QueryType.LabelNames,\n    };\n  }\n\n  const labelValuesCheck = rawQuery.match(/^label_values\\(/);\n  if (labelValuesCheck) {\n    const labelValues = rawQuery.match(PrometheusLabelValuesRegex);\n    const label = labelValues ? labelValues[2] : '';\n    const metric = labelValues ? labelValues[1] : '';\n\n    if (metric) {\n      const visQuery = buildVisualQueryFromString(metric);\n      return {\n        ...queryBase,\n        qryType: QueryType.LabelValues,\n        label,\n        metric: visQuery.query.metric,\n        labelFilters: visQuery.query.labels,\n      };\n    } else {\n      return {\n        ...queryBase,\n        qryType: QueryType.LabelValues,\n        label,\n      };\n    }\n  }\n\n  const metricNamesCheck = rawQuery.match(/^metrics\\(/);\n  if (metricNamesCheck) {\n    const metricNames = rawQuery.match(PrometheusMetricNamesRegex);\n    const metric = metricNames ? metricNames[1] : '';\n    return {\n      ...queryBase,\n      qryType: QueryType.MetricNames,\n      metric,\n    };\n  }\n\n  const queryResultCheck = rawQuery.match(/^query_result\\(/);\n  if (queryResultCheck) {\n    const queryResult = rawQuery.match(PrometheusQueryResultRegex);\n    const varQuery = queryResult ? queryResult[1] : '';\n    return {\n      ...queryBase,\n      qryType: QueryType.VarQueryResult,\n      varQuery,\n    };\n  }\n\n  // seriesQuery does not have a function and no regex above\n  if (!labelNames && !labelValuesCheck && !metricNamesCheck && !queryResultCheck) {\n    return {\n      ...queryBase,\n      qryType: QueryType.SeriesQuery,\n      seriesQuery: rawQuery,\n    };\n  }\n\n  return queryBase;\n}\n\n// migrate it back to a string with the correct varialbes in place\nexport function migrateVariableEditorBackToVariableSupport(QueryVariable: PromVariableQuery): string {\n  switch (QueryVariable.qryType) {\n    case QueryType.LabelNames:\n      if (QueryVariable.match) {\n        return `label_names(${QueryVariable.match})`;\n      }\n      return 'label_names()';\n    case QueryType.LabelValues:\n      if (QueryVariable.metric || (QueryVariable.labelFilters && QueryVariable.labelFilters.length !== 0)) {\n        const visualQueryQuery = {\n          metric: QueryVariable.metric,\n          labels: QueryVariable.labelFilters ?? [],\n          operations: [],\n        };\n\n        const metric = promQueryModeller.renderQuery(visualQueryQuery);\n        return `label_values(${metric},${QueryVariable.label})`;\n      } else {\n        return `label_values(${QueryVariable.label})`;\n      }\n    case QueryType.MetricNames:\n      return `metrics(${QueryVariable.metric})`;\n    case QueryType.VarQueryResult:\n      const varQuery = removeLineBreaks(QueryVariable.varQuery);\n      return `query_result(${varQuery})`;\n    case QueryType.SeriesQuery:\n      return QueryVariable.seriesQuery ?? '';\n    case QueryType.ClassicQuery:\n      return QueryVariable.classicQuery ?? '';\n  }\n\n  return '';\n}\n\n// allow line breaks in query result textarea\nfunction removeLineBreaks(input?: string) {\n  return input ? input.replace(/[\\r\\n]+/gm, '') : '';\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-13: change import for getTimeSrv\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { chain, map as _map } from 'lodash';\n\nimport { getDefaultTimeRange, MetricFindValue, TimeRange } from '@grafana/data';\n\nimport { PrometheusDatasource } from './datasource';\nimport { getVictoriaMetricsTime } from './language_utils';\nimport {\n  PrometheusLabelNamesRegex,\n  PrometheusLabelNamesRegexWithMatch,\n  PrometheusMetricNamesRegex,\n  PrometheusQueryResultRegex,\n} from './migrations/variableMigration';\n\nexport default class PrometheusMetricFindQuery {\n  range: TimeRange;\n\n  constructor(\n    private datasource: PrometheusDatasource,\n    private query: string\n  ) {\n    this.datasource = datasource;\n    this.query = query;\n    this.range = getDefaultTimeRange();\n  }\n\n  process(timeRange: TimeRange): Promise<MetricFindValue[]> {\n    this.range = timeRange;\n    const labelNamesRegex = PrometheusLabelNamesRegex;\n    const labelNamesRegexWithMatch = PrometheusLabelNamesRegexWithMatch;\n    const labelValuesRegex = /^label_values\\((?:(.+),\\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\\)\\s*$/;\n    const metricNamesRegex = PrometheusMetricNamesRegex;\n    const queryResultRegex = PrometheusQueryResultRegex;\n    const labelNamesQuery = this.query.match(labelNamesRegex);\n    const labelNamesMatchQuery = this.query.match(labelNamesRegexWithMatch);\n\n    if (labelNamesMatchQuery) {\n      const selector = `{__name__=~\".*${labelNamesMatchQuery[1]}.*\"}`;\n      return this.datasource.languageProvider.getSeriesLabels(selector, []).then((results) =>\n        results.map((result) => ({\n          text: result,\n        }))\n      );\n    }\n\n    if (labelNamesQuery) {\n      return this.datasource.getTagKeys({ filters: [], timeRange });\n    }\n\n    const labelValuesQuery = this.query.match(labelValuesRegex);\n    if (labelValuesQuery) {\n      const filter = labelValuesQuery[1];\n      const label = labelValuesQuery[2];\n      if (isFilterDefined(filter)) {\n        return this.labelValuesQuery(label, filter);\n      } else {\n        // Exclude the filter part of the expression because it is blank or empty\n        return this.labelValuesQuery(label);\n      }\n    }\n\n    const metricNamesQuery = this.query.match(metricNamesRegex);\n    if (metricNamesQuery) {\n      return this.metricNameQuery(metricNamesQuery[1]);\n    }\n\n    const queryResultQuery = this.query.match(queryResultRegex);\n    if (queryResultQuery) {\n      return this.queryResultQuery(queryResultQuery[1]);\n    }\n\n    // if query contains full metric name, return metric name and label list\n    const expressions = ['label_values()', 'metrics()', 'query_result()'];\n    if (!expressions.includes(this.query)) {\n      return this.metricNameAndLabelsQuery(this.query);\n    }\n\n    return Promise.resolve([]);\n  }\n\n  labelValuesQuery(label: string, metric?: string) {\n    const start = getVictoriaMetricsTime(this.range.from, false);\n    const end = getVictoriaMetricsTime(this.range.to, true);\n    const params = { ...(metric && { 'match[]': metric }), start: start.toString(), end: end.toString() };\n\n    const url = `/api/v1/label/${label}/values`;\n\n    return this.datasource.metadataRequest(url, params).then((result: any) => {\n      return _map(result.data.data, (value) => ({ text: value }));\n    });\n  }\n\n  metricNameQuery(metricFilterPattern: string) {\n    const start = getVictoriaMetricsTime(this.range.from, false);\n    const end = getVictoriaMetricsTime(this.range.to, true);\n    const params = {\n      start: start.toString(),\n      end: end.toString(),\n    };\n    const url = `/api/v1/label/__name__/values`;\n\n    return this.datasource.metadataRequest(url, params).then((result: any) => {\n      return chain(result.data.data)\n        .filter((metricName) => {\n          const r = new RegExp(metricFilterPattern);\n          return r.test(metricName);\n        })\n        .map((matchedMetricName) => {\n          return {\n            text: matchedMetricName,\n            expandable: true,\n          };\n        })\n        .value();\n    });\n  }\n\n  queryResultQuery(query: string) {\n    const url = '/api/v1/query';\n    const params = {\n      query,\n      time: getVictoriaMetricsTime(this.range.to, true).toString(),\n    };\n    return this.datasource.metadataRequest(url, params).then((result: any) => {\n      switch (result.data.data.resultType) {\n        case 'scalar': // [ <unix_time>, \"<scalar_value>\" ]\n        case 'string': // [ <unix_time>, \"<string_value>\" ]\n          return [\n            {\n              text: result.data.data.result[1] || '',\n              expandable: false,\n            },\n          ];\n        case 'vector':\n          return _map(result.data.data.result, (metricData) => {\n            let text = metricData.metric.__name__ || '';\n            delete metricData.metric.__name__;\n            text +=\n              '{' +\n              _map(metricData.metric, (v, k) => {\n                return k + '=\"' + v + '\"';\n              }).join(',') +\n              '}';\n            text += ' ' + metricData.value[1] + ' ' + metricData.value[0] * 1000;\n\n            return {\n              text: text,\n              expandable: true,\n            };\n          });\n        default:\n          throw Error(`Unknown/Unhandled result type: [${result.data.data.resultType}]`);\n      }\n    });\n  }\n\n  metricNameAndLabelsQuery(query: string): Promise<MetricFindValue[]> {\n    const start = getVictoriaMetricsTime(this.range.from, false);\n    const end = getVictoriaMetricsTime(this.range.to, true);\n    const params = {\n      'match[]': query,\n      start: start.toString(),\n      end: end.toString(),\n    };\n\n    const url = `/api/v1/series`;\n    const self = this;\n\n    return this.datasource.metadataRequest(url, params).then((result: any) => {\n      return _map(result.data.data, (metric: { [key: string]: string }) => {\n        return {\n          text: self.datasource.getOriginalMetricName(metric),\n          expandable: true,\n        };\n      });\n    });\n  }\n}\n\nfunction isFilterDefined(filter: string) {\n  // We consider blank strings or the empty filter {} as an undefined filter\n  return filter && filter.split(' ').join('') !== '{}';\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: change type for getQueryHints return\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { size } from 'lodash';\n\nimport { QueryHint, QueryFix } from '@grafana/data';\n\nimport { PrometheusDatasource } from './datasource';\n\n/**\n * Number of time series results needed before starting to suggest sum aggregation hints\n */\nexport const SUM_HINT_THRESHOLD_COUNT = 20;\n\nexport function getQueryHints(query: string, series?: any[], datasource?: PrometheusDatasource): QueryHint[] {\n  const hints = [];\n\n  // ..._bucket metric needs a histogram_quantile()\n  const histogramMetric = query.trim().match(/^\\w+_bucket$|^\\w+_bucket{.*}$/);\n  if (histogramMetric) {\n    const label = 'Selected metric has buckets.';\n    hints.push({\n      type: 'HISTOGRAM_QUANTILE',\n      label,\n      fix: {\n        label: 'Consider calculating aggregated quantile by adding histogram_quantile().',\n        action: {\n          type: 'ADD_HISTOGRAM_QUANTILE',\n          query,\n        },\n      } as QueryFix,\n    });\n  }\n\n  // Check for need of rate()\n  if (query.indexOf('rate(') === -1 && query.indexOf('increase(') === -1) {\n    // Use metric metadata for exact types\n    const nameMatch = query.match(/\\b(\\w+_(total|sum|count))\\b/);\n    let counterNameMetric = nameMatch ? nameMatch[1] : '';\n    const metricsMetadata = datasource?.languageProvider?.metricsMetadata;\n    let certain = false;\n\n    if (metricsMetadata) {\n      // Tokenize the query into its identifiers (see https://prometheus.io/docs/concepts/data_model/#metric-names-and-labels)\n      const queryTokens = Array.from(query.matchAll(/\\$?[a-zA-Z_:][a-zA-Z0-9_:]*/g))\n        .map(([match]) => match)\n        // Exclude variable identifiers\n        .filter((token) => !token.startsWith('$'))\n        // Split composite keys to match the tokens returned by the language provider\n        .flatMap((token) => token.split(':'));\n      // Determine whether any of the query identifier tokens refers to a counter metric\n      counterNameMetric =\n        queryTokens.find((metricName) => {\n          // Only considering first type information, could be non-deterministic\n          const metadata = metricsMetadata[metricName];\n          if (metadata && metadata.type.toLowerCase() === 'counter') {\n            certain = true;\n            return true;\n          } else {\n            return false;\n          }\n        }) ?? '';\n    }\n\n    if (counterNameMetric) {\n      // FixableQuery consists of metric name and optionally label-value pairs. We are not offering fix for complex queries yet.\n      const fixableQuery = query.trim().match(/^\\w+$|^\\w+{.*}$/);\n      const verb = certain ? 'is' : 'looks like';\n      let label = `Selected metric ${verb} a counter.`;\n      let fix: QueryFix | undefined;\n\n      if (fixableQuery) {\n        fix = {\n          label: 'Consider calculating rate of counter by adding rate().',\n          action: {\n            type: 'ADD_RATE',\n            query,\n          },\n        };\n      } else {\n        label = `${label} Consider calculating rate of counter by adding rate().`;\n      }\n\n      hints.push({\n        type: 'APPLY_RATE',\n        label,\n        fix,\n      });\n    }\n  }\n\n  // Check for recording rules expansion\n  if (datasource && datasource.ruleMappings) {\n    const mapping = datasource.ruleMappings;\n    const mappingForQuery = Object.keys(mapping).reduce((acc, ruleName) => {\n      if (query.search(ruleName) > -1) {\n        return {\n          ...acc,\n          [ruleName]: mapping[ruleName],\n        };\n      }\n      return acc;\n    }, {});\n    if (size(mappingForQuery) > 0) {\n      const label = 'Query contains recording rules.';\n      hints.push({\n        type: 'EXPAND_RULES',\n        label,\n        fix: {\n          label: 'Expand rules',\n          action: {\n            type: 'EXPAND_RULES',\n            query,\n            options: mappingForQuery,\n          },\n        } as any as QueryFix,\n      });\n    }\n  }\n\n  if (series && series.length >= SUM_HINT_THRESHOLD_COUNT) {\n    const simpleMetric = query.trim().match(/^\\w+$/);\n    if (simpleMetric) {\n      hints.push({\n        type: 'ADD_SUM',\n        label: 'Many time series results returned.',\n        fix: {\n          label: 'Consider aggregating with sum().',\n          action: {\n            type: 'ADD_SUM',\n            query: query,\n            preventSubmit: true,\n          },\n        } as QueryFix,\n      });\n    }\n  }\n\n  return hints;\n}\n\nexport function getInitHints(datasource: PrometheusDatasource): QueryHint[] {\n  const hints = [];\n  // Hint if using Loki as Prometheus data source\n  if (datasource.directUrl.includes('/loki') && !datasource.languageProvider.metrics.length) {\n    hints.push({\n      label: `Using Loki as a Prometheus data source is no longer supported. You must use the Loki data source for your Loki instance.`,\n      type: 'INFO',\n    });\n  }\n\n  // Hint for big disabled lookups\n  if (datasource.lookupsDisabled) {\n    hints.push({\n      label: `Labels and metrics lookup was disabled in data source settings.`,\n      type: 'INFO',\n    });\n  }\n\n  return hints;\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: change transform() return if isExemplarData\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { flatten, forOwn, groupBy, partition } from 'lodash';\n\nimport {\n  ArrayVector,\n  CoreApp,\n  DataFrame,\n  DataFrameType,\n  DataLink,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataTopic,\n  Field,\n  FieldType,\n  formatLabels,\n  getDisplayProcessor,\n  Labels,\n  MutableField,\n  PreferredVisualisationType,\n  QueryResultMetaNotice,\n  ScopedVars,\n  TIME_SERIES_TIME_FIELD_NAME,\n  TIME_SERIES_VALUE_FIELD_NAME,\n} from '@grafana/data';\nimport { FetchResponse, getDataSourceSrv, getTemplateSrv } from '@grafana/runtime';\n\nimport { renderLegendFormat } from './legend';\nimport {\n  ExemplarTraceIdDestination,\n  isExemplarData,\n  isMatrixData,\n  LegendFormatMode,\n  MatrixOrVectorResult,\n  PromDataSuccessResponse,\n  PromMetric,\n  PromQuery,\n  PromQueryRequest,\n  PromValue,\n  TransformOptions,\n} from './types';\n\n// handles case-insensitive Inf, +Inf, -Inf (with optional \"inity\" suffix)\nconst INFINITY_SAMPLE_REGEX = /^[+-]?inf(?:inity)?$/i;\n\nconst isTableResult = (dataFrame: DataFrame, options: DataQueryRequest<PromQuery>): boolean => {\n  // We want to process vector and scalar results in Explore as table\n  if (\n    options.app === CoreApp.Explore &&\n    (dataFrame.meta?.custom?.resultType === 'vector' || dataFrame.meta?.custom?.resultType === 'scalar')\n  ) {\n    return true;\n  }\n\n  // We want to process all dataFrames with target.format === 'table' as table\n  const target = options.targets.find((target) => target.refId === dataFrame.refId);\n  return target?.format === 'table';\n};\n\nconst isHeatmapResult = (dataFrame: DataFrame, options: DataQueryRequest<PromQuery>): boolean => {\n  const target = options.targets.find((target) => target.refId === dataFrame.refId);\n  return target?.format === 'heatmap';\n};\n\n// V2 result trasnformer used to transform query results from queries that were run trough prometheus backend\nexport function transformV2(\n  response: DataQueryResponse,\n  request: DataQueryRequest<PromQuery>,\n  options: { exemplarTraceIdDestinations?: ExemplarTraceIdDestination[] }\n) {\n  const [tableFrames, framesWithoutTable] = partition<DataFrame>(response.data, (df) => isTableResult(df, request));\n  const processedTableFrames = transformDFToTable(tableFrames);\n\n  const [exemplarFrames, framesWithoutTableAndExemplars] = partition<DataFrame>(\n    framesWithoutTable,\n    (df) => df.meta?.custom?.resultType === 'exemplar'\n  );\n\n  // EXEMPLAR FRAMES: We enrich exemplar frames with data links and add dataTopic meta info\n  const { exemplarTraceIdDestinations: destinations } = options;\n  const processedExemplarFrames = exemplarFrames.map((dataFrame) => {\n    if (destinations?.length) {\n      for (const exemplarTraceIdDestination of destinations) {\n        const traceIDField = dataFrame.fields.find((field) => field.name === exemplarTraceIdDestination.name);\n        if (traceIDField) {\n          const links = getDataLinks(exemplarTraceIdDestination);\n          traceIDField.config.links = traceIDField.config.links?.length\n            ? [...traceIDField.config.links, ...links]\n            : links;\n        }\n      }\n    }\n\n    return { ...dataFrame, meta: { ...dataFrame.meta, dataTopic: DataTopic.Annotations } };\n  });\n\n  const [heatmapResults, framesWithoutTableHeatmapsAndExemplars] = partition<DataFrame>(\n    framesWithoutTableAndExemplars,\n    (df) => isHeatmapResult(df, request)\n  );\n\n  // Group heatmaps by query\n  const heatmapResultsGroupedByQuery = groupBy<DataFrame>(heatmapResults, (h) => h.refId);\n\n  // Initialize empty array to push grouped histogram frames to\n  let processedHeatmapResultsGroupedByQuery: DataFrame[][] = [];\n\n  // Iterate through every query in this heatmap\n  for (const query in heatmapResultsGroupedByQuery) {\n    // Get reference to dataFrames for heatmap\n    const heatmapResultsGroup = heatmapResultsGroupedByQuery[query];\n\n    // Create a new grouping by iterating through the data frames...\n    const heatmapResultsGroupedByValues = groupBy<DataFrame>(heatmapResultsGroup, (dataFrame) => {\n      // Each data frame has `Time` and `Value` properties, we want to get the values\n      const values = dataFrame.fields.find((field) => field.name === TIME_SERIES_VALUE_FIELD_NAME);\n      // Specific functionality for special \"le\" quantile heatmap value, we know if this value exists, that we do not want to calculate the heatmap density across data frames from the same quartile\n      if (values?.labels && HISTOGRAM_QUANTILE_LABEL_NAME in values.labels) {\n        const { le, ...notLE } = values?.labels;\n        return Object.values(notLE).join();\n      }\n\n      // Return a string made from the concatenation of this frame's values to represent a grouping in the query\n      return Object.values(values?.labels ?? []).join();\n    });\n\n    // Then iterate through the resultant object\n    forOwn(heatmapResultsGroupedByValues, (dataFrames) => {\n      // Sort frames within each grouping\n      const sortedHeatmap = dataFrames.sort(sortSeriesByLabel);\n      // And push the sorted grouping with the rest\n      processedHeatmapResultsGroupedByQuery.push(mergeHeatmapFrames(transformToHistogramOverTime(sortedHeatmap)));\n    });\n  }\n\n  // Everything else is processed as time_series result and graph preferredVisualisationType\n  const otherFrames = framesWithoutTableHeatmapsAndExemplars.map((dataFrame) => {\n    return {\n      ...dataFrame,\n      meta: {\n        ...dataFrame.meta,\n        preferredVisualisationType: 'graph',\n      },\n    } as DataFrame;\n  });\n\n  const flattenedProcessedHeatmapFrames = flatten(processedHeatmapResultsGroupedByQuery);\n\n  return {\n    ...response,\n    data: [...otherFrames, ...processedTableFrames, ...flattenedProcessedHeatmapFrames, ...processedExemplarFrames],\n  };\n}\n\nconst HISTOGRAM_QUANTILE_LABEL_NAME = 'le';\n\nexport function transformDFToTable(dfs: DataFrame[]): DataFrame[] {\n  // If no dataFrames or if 1 dataFrames with no values, return original dataFrame\n  if (dfs.length === 0 || (dfs.length === 1 && dfs[0].length === 0)) {\n    return dfs;\n  }\n\n  // Group results by refId and process dataFrames with the same refId as 1 dataFrame\n  const dataFramesByRefId = groupBy(dfs, 'refId');\n  const refIds = Object.keys(dataFramesByRefId);\n\n  return refIds.map((refId) => {\n    // Create timeField, valueField and labelFields\n    const valueText = getValueText(refIds.length, refId);\n    const valueField = getValueField({ data: [], valueName: valueText });\n    const timeField = getTimeField([]);\n    const labelFields: MutableField[] = [];\n\n    // Fill labelsFields with labels from dataFrames\n    dataFramesByRefId[refId].forEach((df) => {\n      const frameValueField = df.fields[1];\n      const promLabels = frameValueField.labels ?? {};\n\n      Object.keys(promLabels)\n        .sort()\n        .forEach((label) => {\n          // If we don't have label in labelFields, add it\n          if (!labelFields.some((l) => l.name === label)) {\n            const numberField = label === HISTOGRAM_QUANTILE_LABEL_NAME;\n            labelFields.push({\n              name: label,\n              config: { filterable: true },\n              type: numberField ? FieldType.number : FieldType.string,\n              values: new ArrayVector(),\n            });\n          }\n        });\n    });\n\n    // Fill valueField, timeField and labelFields with values\n    dataFramesByRefId[refId].forEach((df) => {\n      df.fields[0].values.toArray().forEach((value) => timeField.values.add(value));\n      df.fields[1].values.toArray().forEach((value) => {\n        valueField.values.add(parseSampleValue(value));\n        const labelsForField = df.fields[1].labels ?? {};\n        labelFields.forEach((field) => field.values.add(getLabelValue(labelsForField, field.name)));\n      });\n    });\n\n    const fields = [timeField, ...labelFields, valueField];\n    return {\n      refId,\n      fields,\n      meta: { ...dfs[0].meta, preferredVisualisationType: 'table' as PreferredVisualisationType },\n      length: timeField.values.length,\n    };\n  });\n}\n\nfunction getValueText(responseLength: number, refId = '') {\n  return responseLength > 1 ? `Value #${refId}` : 'Value';\n}\n\nexport function transform(\n  response: FetchResponse<PromDataSuccessResponse>,\n  transformOptions: {\n    query: PromQueryRequest;\n    exemplarTraceIdDestinations?: ExemplarTraceIdDestination[];\n    target: PromQuery;\n    responseListLength: number;\n    scopedVars?: ScopedVars;\n  }\n) {\n  // Create options object from transformOptions\n  const options: TransformOptions = {\n    format: transformOptions.target.format,\n    step: transformOptions.query.step,\n    legendFormat: transformOptions.target.legendFormat,\n    start: transformOptions.query.start,\n    end: transformOptions.query.end,\n    query: transformOptions.query.expr,\n    responseListLength: transformOptions.responseListLength,\n    scopedVars: transformOptions.scopedVars,\n    refId: transformOptions.target.refId,\n    valueWithRefId: transformOptions.target.valueWithRefId,\n    meta: {\n      // Fix for showing of Prometheus results in Explore table\n      preferredVisualisationType: transformOptions.query.instant ? 'table' : 'graph',\n    },\n  };\n  const prometheusResult = response.data.data;\n  const traceResult = response.data?.trace\n\n  if (response.data.isPartial) {\n    const partialWarning = {\n      severity: \"warning\",\n      text: `The shown results are marked as PARTIAL. The result is marked as partial if one or more vmstorage nodes failed to respond to the query.`\n    } as QueryResultMetaNotice\n\n    Array.isArray(options.meta.notices)\n      ? options.meta.notices.push(partialWarning)\n      : options.meta.notices = [partialWarning]\n  }\n\n  if (isExemplarData(prometheusResult)) {\n    return {\n      dataFrame: [],\n      traceResult\n    };\n  }\n\n  if (!prometheusResult?.result) {\n    return {\n      dataFrame: [],\n      traceResult\n    };\n  }\n\n  // Return early if result type is scalar\n  if (prometheusResult.resultType === 'scalar') {\n    return {\n      dataFrame: [\n        {\n          meta: options.meta,\n          refId: options.refId,\n          length: 1,\n          fields: [getTimeField([prometheusResult.result]), getValueField({ data: [prometheusResult.result] })],\n        },\n      ],\n      traceResult\n    }\n  }\n\n  // Return early again if the format is table, this needs special transformation.\n  if (options.format === 'table') {\n    const tableData = transformMetricDataToTable(prometheusResult.result, options);\n    return {\n      dataFrame: [tableData],\n      traceResult\n    };\n  }\n\n  // Process matrix and vector results to DataFrame\n  const dataFrame: DataFrame[] = [];\n  prometheusResult.result.forEach((data: MatrixOrVectorResult) => dataFrame.push(transformToDataFrame(data, options)));\n\n  // When format is heatmap use the already created data frames and transform it more\n  if (options.format === 'heatmap') {\n    return {\n      dataFrame: mergeHeatmapFrames(transformToHistogramOverTime(dataFrame.sort(sortSeriesByLabel))),\n      traceResult\n    };\n  }\n\n  // Return matrix or vector result as DataFrame[]\n  return { dataFrame, traceResult };\n}\n\nfunction getDataLinks(options: ExemplarTraceIdDestination): DataLink[] {\n  const dataLinks: DataLink[] = [];\n\n  if (options.datasourceUid) {\n    const dataSourceSrv = getDataSourceSrv();\n    const dsSettings = dataSourceSrv.getInstanceSettings(options.datasourceUid);\n\n    // dsSettings is undefined because of the reasons below:\n    // - permissions issues (probably most likely)\n    // - deleted datasource\n    // - misconfiguration\n    if (dsSettings) {\n      dataLinks.push({\n        title: options.urlDisplayLabel || `Query with ${dsSettings?.name}`,\n        url: '',\n        internal: {\n          query: { query: '${__value.raw}', queryType: 'traceId' },\n          datasourceUid: options.datasourceUid,\n          datasourceName: dsSettings?.name ?? 'Data source not found',\n        },\n      });\n    }\n  }\n\n  if (options.url) {\n    dataLinks.push({\n      title: options.urlDisplayLabel || `Go to ${options.url}`,\n      url: options.url,\n      targetBlank: true,\n    });\n  }\n  return dataLinks;\n}\n\n/**\n * Transforms matrix and vector result from Prometheus result to DataFrame\n */\nfunction transformToDataFrame(data: MatrixOrVectorResult, options: TransformOptions): DataFrame {\n  const { name, labels } = createLabelInfo(data.metric, options);\n\n  const fields: Field[] = [];\n\n  if (isMatrixData(data)) {\n    const stepMs = options.step ? options.step * 1000 : NaN;\n    let baseTimestamp = options.start * 1000;\n    const dps: PromValue[] = [];\n\n    for (const value of data.values) {\n      let dpValue: number | null = parseSampleValue(value[1]);\n\n      if (isNaN(dpValue)) {\n        dpValue = null;\n      }\n\n      const timestamp = value[0] * 1000;\n      for (let t = baseTimestamp; t < timestamp; t += stepMs) {\n        dps.push([t, null]);\n      }\n      baseTimestamp = timestamp + stepMs;\n      dps.push([timestamp, dpValue]);\n    }\n\n    const endTimestamp = options.end * 1000;\n    for (let t = baseTimestamp; t <= endTimestamp; t += stepMs) {\n      dps.push([t, null]);\n    }\n    fields.push(getTimeField(dps, true));\n    fields.push(getValueField({ data: dps, parseValue: false, labels, displayNameFromDS: name }));\n  } else {\n    fields.push(getTimeField([data.value]));\n    fields.push(getValueField({ data: [data.value], labels, displayNameFromDS: name }));\n  }\n\n  return {\n    meta: options.meta,\n    refId: options.refId,\n    length: fields[0].values.length,\n    fields,\n    name,\n  };\n}\n\nfunction transformMetricDataToTable(md: MatrixOrVectorResult[], options: TransformOptions): DataFrame {\n  if (!md || md.length === 0) {\n    return {\n      meta: options.meta,\n      refId: options.refId,\n      length: 0,\n      fields: [],\n    };\n  }\n\n  const valueText = options.responseListLength > 1 || options.valueWithRefId ? `Value #${options.refId}` : 'Value';\n\n  const timeField = getTimeField([]);\n  const metricFields = Object.keys(md.reduce((acc, series) => ({ ...acc, ...series.metric }), {}))\n    .sort()\n    .map((label) => {\n      // Labels have string field type, otherwise table tries to figure out the type which can result in unexpected results\n      // Only \"le\" label has a number field type\n      const numberField = label === HISTOGRAM_QUANTILE_LABEL_NAME;\n      return {\n        name: label,\n        config: { filterable: true },\n        type: numberField ? FieldType.number : FieldType.string,\n        values: new ArrayVector(),\n      };\n    });\n  const valueField = getValueField({ data: [], valueName: valueText });\n\n  md.forEach((d) => {\n    if (isMatrixData(d)) {\n      d.values.forEach((val) => {\n        timeField.values.add(val[0] * 1000);\n        metricFields.forEach((metricField) => metricField.values.add(getLabelValue(d.metric, metricField.name)));\n        valueField.values.add(parseSampleValue(val[1]));\n      });\n    } else {\n      timeField.values.add(d.value[0] * 1000);\n      metricFields.forEach((metricField) => metricField.values.add(getLabelValue(d.metric, metricField.name)));\n      valueField.values.add(parseSampleValue(d.value[1]));\n    }\n  });\n\n  return {\n    meta: options.meta,\n    refId: options.refId,\n    length: timeField.values.length,\n    fields: [timeField, ...metricFields, valueField],\n  };\n}\n\nfunction getLabelValue(metric: PromMetric, label: string): string | number {\n  if (metric.hasOwnProperty(label)) {\n    if (label === HISTOGRAM_QUANTILE_LABEL_NAME) {\n      return parseSampleValue(metric[label]);\n    }\n    return metric[label];\n  }\n  return '';\n}\n\nfunction getTimeField(data: PromValue[], isMs = false): MutableField {\n  return {\n    name: TIME_SERIES_TIME_FIELD_NAME,\n    type: FieldType.time,\n    config: {},\n    values: new ArrayVector<number>(data.map((val) => (isMs ? val[0] : val[0] * 1000))),\n  };\n}\n\ntype ValueFieldOptions = {\n  data: PromValue[];\n  valueName?: string;\n  parseValue?: boolean;\n  labels?: Labels;\n  displayNameFromDS?: string;\n};\n\nfunction getValueField({\n                         data,\n                         valueName = TIME_SERIES_VALUE_FIELD_NAME,\n                         parseValue = true,\n                         labels,\n                         displayNameFromDS,\n                       }: ValueFieldOptions): MutableField {\n  return {\n    name: valueName,\n    type: FieldType.number,\n    display: getDisplayProcessor(),\n    config: {\n      displayNameFromDS,\n    },\n    labels,\n    values: new ArrayVector<number | null>(data.map((val) => (parseValue ? parseSampleValue(val[1]) : val[1]))),\n  };\n}\n\nfunction createLabelInfo(labels: { [key: string]: string }, options: TransformOptions) {\n  const legendFormat = options?.legendFormat\n  if (legendFormat && legendFormat !== LegendFormatMode.Auto) {\n    const title = renderLegendFormat(getTemplateSrv().replace(legendFormat, options?.scopedVars), labels);\n    return { name: title, labels };\n  }\n\n  if (legendFormat === LegendFormatMode.Auto && Object.keys(labels).length === 1) {\n    return { name: Object.values(labels)[0], labels }\n  }\n\n  const { __name__, ...labelsWithoutName } = labels;\n  const labelPart = formatLabels(labelsWithoutName);\n  let title = `${__name__ ?? ''}${labelPart}`;\n\n  return { name: title || options.query, labels: labelsWithoutName };\n}\n\nexport function getOriginalMetricName(labelData: { [key: string]: string }) {\n  const metricName = labelData.__name__ || '';\n  delete labelData.__name__;\n  const labelPart = Object.entries(labelData)\n    .map((label) => `${label[0]}=\"${label[1]}\"`)\n    .join(',');\n  return `${metricName}{${labelPart}}`;\n}\n\nfunction mergeHeatmapFrames(frames: DataFrame[]): DataFrame[] {\n  if (frames.length === 0) {\n    return [];\n  }\n\n  const timeField = frames[0].fields.find((field) => field.type === FieldType.time)!;\n  const countFields = frames.map((frame) => {\n    let field = frame.fields.find((field) => field.type === FieldType.number)!;\n\n    return {\n      ...field,\n      name: field.config.displayNameFromDS!,\n    };\n  });\n\n  return [\n    {\n      ...frames[0],\n      meta: {\n        ...frames[0].meta,\n        type: DataFrameType.HeatmapRows,\n      },\n      fields: [timeField!, ...countFields],\n    },\n  ];\n}\n\nfunction transformToHistogramOverTime(seriesList: DataFrame[]) {\n  /*      t1 = timestamp1, t2 = timestamp2 etc.\n            t1  t2  t3          t1  t2  t3\n    le10    10  10  0     =>    10  10  0\n    le20    20  10  30    =>    10  0   30\n    le30    30  10  35    =>    10  0   5\n    */\n  for (let i = seriesList.length - 1; i > 0; i--) {\n    const topSeries = seriesList[i].fields.find((s) => s.name === TIME_SERIES_VALUE_FIELD_NAME);\n    const bottomSeries = seriesList[i - 1].fields.find((s) => s.name === TIME_SERIES_VALUE_FIELD_NAME);\n    if (!topSeries || !bottomSeries) {\n      throw new Error('Prometheus heatmap transform error: data should be a time series');\n    }\n\n    for (let j = 0; j < topSeries.values.length; j++) {\n      const bottomPoint = bottomSeries.values.get(j) || [0];\n      topSeries.values.toArray()[j] -= bottomPoint;\n    }\n  }\n\n  return seriesList;\n}\n\nfunction sortSeriesByLabel(s1: DataFrame, s2: DataFrame): number {\n  let le1, le2;\n\n  try {\n    // fail if not integer. might happen with bad queries\n    le1 = parseSampleValue(s1.name ?? '');\n    le2 = parseSampleValue(s2.name ?? '');\n  } catch (err) {\n    console.error(err);\n    return 0;\n  }\n\n  if (le1 > le2) {\n    return 1;\n  }\n\n  if (le1 < le2) {\n    return -1;\n  }\n\n  return 0;\n}\n\n/** @internal */\nexport function parseSampleValue(value: string): number {\n  if (INFINITY_SAMPLE_REGEX.test(value)) {\n    return value[0] === '-' ? Number.NEGATIVE_INFINITY : Number.POSITIVE_INFINITY;\n  }\n  return parseFloat(value);\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-12-01: remove unused code\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { BusEventBase, BusEventWithPayload } from '@grafana/data';\nimport { IconName } from '@grafana/ui';\n\n\n/**\n * Event Payloads\n */\nexport interface ShowModalPayload {\n  model?: any;\n  modalClass?: string;\n  src?: string;\n  templateHtml?: string;\n  backdrop?: any;\n  scope?: any;\n}\n\nexport interface ShowModalReactPayload {\n  component: React.ComponentType<any>;\n  props?: any;\n}\n\nexport interface ShowConfirmModalPayload {\n  title?: string;\n  text?: string;\n  text2?: string;\n  text2htmlBind?: boolean;\n  confirmText?: string;\n  altActionText?: string;\n  yesText?: string;\n  noText?: string;\n  icon?: IconName;\n\n  onConfirm?: () => void;\n  onAltAction?: () => void;\n}\n\ninterface ZoomOutEventPayload {\n  scale: number;\n  updateUrl?: boolean;\n}\n\nexport class ZoomOutEvent extends BusEventWithPayload<ZoomOutEventPayload> {\n  static type = 'zoom-out';\n}\n\nexport enum ShiftTimeEventDirection {\n  Left = -1,\n  Right = 1,\n}\n\ninterface ShiftTimeEventPayload {\n  direction: ShiftTimeEventDirection;\n  updateUrl?: boolean;\n}\n\nexport class ShiftTimeEvent extends BusEventWithPayload<ShiftTimeEventPayload> {\n  static type = 'shift-time';\n}\n\nexport class AbsoluteTimeEvent extends BusEventBase {\n  static type = 'absolute-time';\n}\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { TimeRange, toUtc, AbsoluteTimeRange } from '@grafana/data';\n\nexport const getShiftedTimeRange = (direction: number, origRange: TimeRange): AbsoluteTimeRange => {\n  const range = {\n    from: toUtc(origRange.from),\n    to: toUtc(origRange.to),\n  };\n\n  const timespan = (range.to.valueOf() - range.from.valueOf()) / 2;\n  let to: number, from: number;\n\n  if (direction === -1) {\n    to = range.to.valueOf() - timespan;\n    from = range.from.valueOf() - timespan;\n  } else if (direction === 1) {\n    to = range.to.valueOf() + timespan;\n    from = range.from.valueOf() + timespan;\n    if (to > Date.now() && range.to.valueOf() < Date.now()) {\n      to = Date.now();\n      from = range.from.valueOf();\n    }\n  } else {\n    to = range.to.valueOf();\n    from = range.from.valueOf();\n  }\n\n  return { from, to };\n};\n\nexport const getZoomedTimeRange = (range: TimeRange, factor: number): AbsoluteTimeRange => {\n  const timespan = range.to.valueOf() - range.from.valueOf();\n  const center = range.to.valueOf() - timespan / 2;\n  // If the timepsan is 0, zooming out would do nothing, so we force a zoom out to 30s\n  const newTimespan = timespan === 0 ? 30000 : timespan * factor;\n\n  const to = center + newTimespan / 2;\n  const from = center - newTimespan / 2;\n\n  return { from, to };\n};\n","// Copyright (c) 2022 Grafana Labs\n//\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n\nimport { EventBusSrv, EventBusExtended } from '@grafana/data';\n\nexport const appEvents: EventBusExtended = new EventBusSrv();\n\nexport default appEvents;\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-13: optimization imports\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { extend } from 'lodash';\n\nimport { AnalyticsSettings, OrgRole, rangeUtil, WithAccessControlMetadata } from '@grafana/data';\nimport { config as config1 } from '@grafana/runtime';\n\nimport { AccessControlAction, UserPermission } from '../types/accessControl';\nimport { CurrentUserInternal } from '../types/config';\n\nexport class User implements Omit<CurrentUserInternal, 'lightTheme'> {\n  isSignedIn: boolean;\n  id: number;\n  login: string;\n  email: string;\n  name: string;\n  externalUserId: string;\n  theme: string;\n  orgCount: number;\n  orgId: number;\n  orgName: string;\n  orgRole: OrgRole | '';\n  isGrafanaAdmin: boolean;\n  gravatarUrl: string;\n  timezone: string;\n  weekStart: string;\n  locale: string;\n  language: string;\n  helpFlags1: number;\n  hasEditPermissionInFolders: boolean;\n  permissions?: UserPermission;\n  analytics: AnalyticsSettings;\n  fiscalYearStartMonth: number;\n  authenticatedBy: string;\n\n  constructor() {\n    this.id = 0;\n    this.isGrafanaAdmin = false;\n    this.isSignedIn = false;\n    this.orgRole = '';\n    this.orgId = 0;\n    this.orgName = '';\n    this.login = '';\n    this.externalUserId = '';\n    this.orgCount = 0;\n    this.timezone = '';\n    this.fiscalYearStartMonth = 0;\n    this.helpFlags1 = 0;\n    this.theme = 'dark';\n    this.hasEditPermissionInFolders = false;\n    this.email = '';\n    this.name = '';\n    this.locale = '';\n    this.language = '';\n    this.weekStart = '';\n    this.gravatarUrl = '';\n    this.analytics = {\n      identifier: '',\n    };\n    this.authenticatedBy = '';\n\n    if (config1.bootData.user) {\n      extend(this, config1.bootData.user);\n    }\n  }\n}\n\nexport class ContextSrv {\n  version: any;\n  user: User;\n  isSignedIn: any;\n  isGrafanaAdmin: any;\n  isEditor: any;\n  hasEditPermissionInFolders: boolean;\n  minRefreshInterval: string;\n\n  constructor() {\n    if (!config1.bootData) {\n      config1.bootData = { user: {}, settings: {} } as any;\n    }\n\n    this.user = new User();\n    this.isSignedIn = this.user.isSignedIn;\n    this.isGrafanaAdmin = this.user.isGrafanaAdmin;\n    this.isEditor = this.hasRole('Editor') || this.hasRole('Admin');\n    this.hasEditPermissionInFolders = this.user.hasEditPermissionInFolders;\n    this.minRefreshInterval = config1.minRefreshInterval;\n  }\n\n  hasRole(role: string) {\n    if (role === 'ServerAdmin') {\n      return this.isGrafanaAdmin;\n    } else {\n      return this.user.orgRole === role;\n    }\n  }\n\n  accessControlEnabled(): boolean {\n    return config1.rbacEnabled;\n  }\n\n  // Checks whether user has required permission\n  hasPermissionInMetadata(action: AccessControlAction | string, object: WithAccessControlMetadata): boolean {\n    // Fallback if access control disabled\n    if (!this.accessControlEnabled()) {\n      return true;\n    }\n\n    return !!object.accessControl?.[action];\n  }\n\n  // Checks whether user has required permission\n  hasPermission(action: AccessControlAction | string): boolean {\n    // Fallback if access control disabled\n    if (!this.accessControlEnabled()) {\n      return true;\n    }\n\n    return !!this.user.permissions?.[action];\n  }\n\n  isGrafanaVisible() {\n    return document.visibilityState === undefined || document.visibilityState === 'visible';\n  }\n\n  // checks whether the passed interval is longer than the configured minimum refresh rate\n  isAllowedInterval(interval: string) {\n    if (!config1.minRefreshInterval) {\n      return true;\n    }\n    return rangeUtil.intervalToMs(interval) >= rangeUtil.intervalToMs(config1.minRefreshInterval);\n  }\n\n  getValidInterval(interval: string) {\n    if (!this.isAllowedInterval(interval)) {\n      return config1.minRefreshInterval;\n    }\n    return interval;\n  }\n}\n\nlet contextSrv = new ContextSrv();\nexport { contextSrv };\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-13: correct imports\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { cloneDeep, extend, isString } from 'lodash';\n\nimport {\n  dateMath,\n  DateTime,\n  dateTime,\n  getDefaultTimeRange,\n  isDateTime,\n  rangeUtil,\n  RawTimeRange,\n  TimeRange,\n  TimeZone,\n  toUtc,\n} from '@grafana/data';\nimport { locationService, config, getTemplateSrv } from '@grafana/runtime';\n\nimport {\n  AbsoluteTimeEvent,\n  ShiftTimeEvent,\n  ShiftTimeEventDirection,\n  ZoomOutEvent\n} from '../types/events';\nimport { getRefreshFromUrl } from '../utils/getRefreshFromUrl';\nimport { getShiftedTimeRange, getZoomedTimeRange } from '../utils/timePicker';\n\nimport appEvents from \"./app_events\";\nimport { contextSrv, ContextSrv } from \"./context_srv\";\n\ndeclare module '@grafana/runtime' {\n  interface TemplateSrv {\n    timeRange: TimeRange;\n  }\n}\n\nexport const getTimeRange = (\n  time: { from: DateTime | string; to: DateTime | string },\n  timeModel?: TimeModel\n): TimeRange => {\n  // make copies if they are moment  (do not want to return out internal moment, because they are mutable!)\n  const raw = {\n    from: isDateTime(time.from) ? dateTime(time.from) : time.from,\n    to: isDateTime(time.to) ? dateTime(time.to) : time.to,\n  };\n\n  const timezone = timeModel ? timeModel.getTimezone() : undefined;\n\n  return {\n    from: dateMath.parse(raw.from, false, timezone, timeModel?.fiscalYearStartMonth)!,\n    to: dateMath.parse(raw.to, true, timezone, timeModel?.fiscalYearStartMonth)!,\n    raw: raw,\n  };\n};\n\nconst getCurrentTimeRange = (): RawTimeRange => {\n  return getTemplateSrv()?.timeRange?.raw || getDefaultTimeRange().raw;\n}\n\nexport interface TimeModel {\n  time: any;\n  fiscalYearStartMonth?: number;\n  refresh: any;\n  timepicker: any;\n  getTimezone(): TimeZone;\n  timeRangeUpdated(timeRange: TimeRange): void;\n}\n\nexport class TimeSrv {\n  time: any;\n  refreshTimer: any;\n  refresh: any;\n  autoRefreshPaused = false;\n  oldRefresh: string | null | undefined;\n  timeModel?: TimeModel;\n  timeAtLoad: any;\n  private autoRefreshBlocked?: boolean;\n\n  constructor(private contextSrv: ContextSrv) {\n    this.time = getCurrentTimeRange()\n    this.refreshTimeModel = this.refreshTimeModel.bind(this);\n\n    appEvents.subscribe(ZoomOutEvent, (e) => {\n      this.zoomOut(e.payload.scale, e.payload.updateUrl);\n    });\n\n    appEvents.subscribe(ShiftTimeEvent, (e) => {\n      this.shiftTime(e.payload.direction, e.payload.updateUrl);\n    });\n\n    appEvents.subscribe(AbsoluteTimeEvent, () => {\n      this.makeAbsoluteTime();\n    });\n\n    document.addEventListener('visibilitychange', () => {\n      if (this.autoRefreshBlocked && document.visibilityState === 'visible') {\n        this.autoRefreshBlocked = false;\n        this.refreshTimeModel();\n      }\n    });\n  }\n\n  init(timeModel: TimeModel) {\n    this.timeModel = timeModel;\n    this.time = timeModel.time;\n    this.refresh = timeModel.refresh;\n\n    this.initTimeFromUrl();\n    this.parseTime();\n\n    // remember time at load, so we can go back to it\n    this.timeAtLoad = cloneDeep(this.time);\n\n    const range = rangeUtil.convertRawToRange(\n      this.time,\n      this.timeModel?.getTimezone(),\n      this.timeModel?.fiscalYearStartMonth\n    );\n\n    if (range.to.isBefore(range.from)) {\n      this.setTime(\n        {\n          from: range.raw.to,\n          to: range.raw.from,\n        },\n        false\n      );\n    }\n\n    if (this.refresh) {\n      this.setAutoRefresh(this.refresh);\n    }\n  }\n\n  getValidIntervals(intervals: string[]): string[] {\n    if (!this.contextSrv.minRefreshInterval) {\n      return intervals;\n    }\n\n    return intervals.filter((str) => str !== '').filter(this.contextSrv.isAllowedInterval);\n  }\n\n  private parseTime() {\n    // when absolute time is saved in json it is turned to a string\n    if (isString(this.time.from) && this.time.from.indexOf('Z') >= 0) {\n      this.time.from = dateTime(this.time.from).utc();\n    }\n    if (isString(this.time.to) && this.time.to.indexOf('Z') >= 0) {\n      this.time.to = dateTime(this.time.to).utc();\n    }\n  }\n\n  private parseUrlParam(value: any) {\n    if (value.indexOf('now') !== -1) {\n      return value;\n    }\n    if (value.length === 8) {\n      const utcValue = toUtc(value, 'YYYYMMDD');\n      if (utcValue.isValid()) {\n        return utcValue;\n      }\n    } else if (value.length === 15) {\n      const utcValue = toUtc(value, 'YYYYMMDDTHHmmss');\n      if (utcValue.isValid()) {\n        return utcValue;\n      }\n    }\n\n    if (!isNaN(value)) {\n      const epoch = parseInt(value, 10);\n      return toUtc(epoch);\n    }\n\n    return null;\n  }\n\n  private getTimeWindow(time: string, timeWindow: string) {\n    const valueTime = parseInt(time, 10);\n    let timeWindowMs;\n\n    if (timeWindow.match(/^\\d+$/) && parseInt(timeWindow, 10)) {\n      // when time window specified in ms\n      timeWindowMs = parseInt(timeWindow, 10);\n    } else {\n      timeWindowMs = rangeUtil.intervalToMs(timeWindow);\n    }\n\n    return {\n      from: toUtc(valueTime - timeWindowMs / 2),\n      to: toUtc(valueTime + timeWindowMs / 2),\n    };\n  }\n\n  private initTimeFromUrl() {\n    // If we are in a public dashboard ignore the time range in the url\n    if (config.isPublicDashboardView) {\n      return;\n    }\n\n    const params = locationService.getSearch();\n\n    if (params.get('time') && params.get('time.window')) {\n      this.time = this.getTimeWindow(params.get('time')!, params.get('time.window')!);\n    }\n\n    if (params.get('from')) {\n      this.time.from = this.parseUrlParam(params.get('from')!) || this.time.from;\n    }\n\n    if (params.get('to')) {\n      this.time.to = this.parseUrlParam(params.get('to')!) || this.time.to;\n    }\n\n    // if absolute ignore refresh option saved to timeModel\n    if (params.get('to') && params.get('to')!.indexOf('now') === -1) {\n      this.refresh = false;\n      if (this.timeModel) {\n        this.timeModel.refresh = false;\n      }\n    }\n\n    // but if refresh explicitly set then use that\n    this.refresh = getRefreshFromUrl({\n      urlRefresh: params.get('refresh'),\n      currentRefresh: this.refresh,\n      refreshIntervals: Array.isArray(this.timeModel?.timepicker?.refresh_intervals)\n        ? this.timeModel?.timepicker?.refresh_intervals\n        : undefined,\n      isAllowedIntervalFn: this.contextSrv.isAllowedInterval,\n      minRefreshInterval: config.minRefreshInterval,\n    });\n  }\n\n  updateTimeRangeFromUrl() {\n    const params = locationService.getSearch();\n\n    if (params.get('left')) {\n      return; // explore handles this;\n    }\n\n    const urlRange = this.timeRangeForUrl();\n    const from = params.get('from');\n    const to = params.get('to');\n\n    // check if url has time range\n    if (from && to) {\n      // is it different from what our current time range?\n      if (from !== urlRange.from || to !== urlRange.to) {\n        // issue update\n        this.initTimeFromUrl();\n        this.setTime(this.time, false);\n      }\n    } else if (this.timeHasChangedSinceLoad()) {\n      this.setTime(this.timeAtLoad, true);\n    }\n  }\n\n  private timeHasChangedSinceLoad() {\n    return this.timeAtLoad && (this.timeAtLoad.from !== this.time.from || this.timeAtLoad.to !== this.time.to);\n  }\n\n  setAutoRefresh(interval: any) {\n    if (this.timeModel) {\n      this.timeModel.refresh = interval;\n    }\n\n    this.stopAutoRefresh();\n\n    const currentUrlState = locationService.getSearchObject();\n\n    if (!interval) {\n      // Clear URL state\n      if (currentUrlState.refresh) {\n        locationService.partial({ refresh: null }, true);\n      }\n\n      return;\n    }\n\n    const validInterval = this.contextSrv.getValidInterval(interval);\n    const intervalMs = rangeUtil.intervalToMs(validInterval);\n\n    this.refreshTimer = setTimeout(() => {\n      this.startNextRefreshTimer(intervalMs);\n      !this.autoRefreshPaused && this.refreshTimeModel();\n    }, intervalMs);\n\n    const refresh = this.contextSrv.getValidInterval(interval);\n\n    if (currentUrlState.refresh !== refresh) {\n      locationService.partial({ refresh }, true);\n    }\n  }\n\n  refreshTimeModel() {\n    this.timeModel?.timeRangeUpdated(this.timeRange());\n  }\n\n  private startNextRefreshTimer(afterMs: number) {\n    this.refreshTimer = setTimeout(() => {\n      this.startNextRefreshTimer(afterMs);\n      if (this.contextSrv.isGrafanaVisible()) {\n        !this.autoRefreshPaused && this.refreshTimeModel();\n      } else {\n        this.autoRefreshBlocked = true;\n      }\n    }, afterMs);\n  }\n\n  stopAutoRefresh() {\n    clearTimeout(this.refreshTimer);\n  }\n\n  // store timeModel refresh value and pause auto-refresh in some places\n  // i.e panel edit\n  pauseAutoRefresh() {\n    this.autoRefreshPaused = true;\n  }\n\n  // resume auto-refresh based on old dashboard refresh property\n  resumeAutoRefresh() {\n    this.autoRefreshPaused = false;\n    this.refreshTimeModel();\n  }\n\n  setTime(time: RawTimeRange, updateUrl = true) {\n    // If we are in a public dashboard ignore time range changes\n    if (config.isPublicDashboardView) {\n      return;\n    }\n\n    extend(this.time, time);\n\n    // disable refresh if zoom in or zoom out\n    if (isDateTime(time.to)) {\n      this.oldRefresh = this.timeModel?.refresh || this.oldRefresh;\n      this.setAutoRefresh(false);\n    } else if (this.oldRefresh && this.oldRefresh !== this.timeModel?.refresh) {\n      this.setAutoRefresh(this.oldRefresh);\n      this.oldRefresh = null;\n    }\n\n    if (updateUrl) {\n      const urlRange = this.timeRangeForUrl();\n      const urlParams = locationService.getSearchObject();\n\n      if (urlParams.from === urlRange.from.toString() && urlParams.to === urlRange.to.toString()) {\n        return;\n      }\n\n      urlParams.from = urlRange.from.toString();\n      urlParams.to = urlRange.to.toString();\n\n      locationService.partial(urlParams);\n    }\n\n    this.refreshTimeModel();\n  }\n\n  timeRangeForUrl = () => {\n    const range = getTimeRange(this.time, this.timeModel).raw;\n\n    if (isDateTime(range.from)) {\n      range.from = range.from.valueOf().toString();\n    }\n    if (isDateTime(range.to)) {\n      range.to = range.to.valueOf().toString();\n    }\n\n    return range;\n  };\n\n  timeRange(): TimeRange {\n    return getTimeRange(getCurrentTimeRange(), this.timeModel)\n  }\n\n  zoomOut(factor: number, updateUrl = true) {\n    const range = this.timeRange();\n    const { from, to } = getZoomedTimeRange(range, factor);\n\n    this.setTime({ from: toUtc(from), to: toUtc(to) }, updateUrl);\n  }\n\n  shiftTime(direction: ShiftTimeEventDirection, updateUrl = true) {\n    const range = this.timeRange();\n    const { from, to } = getShiftedTimeRange(direction, range);\n\n    this.setTime(\n      {\n        from: toUtc(from),\n        to: toUtc(to),\n      },\n      updateUrl\n    );\n  }\n\n  makeAbsoluteTime() {\n    const params = locationService.getSearch();\n    if (params.get('left')) {\n      return; // explore handles this;\n    }\n\n    const { from, to } = this.timeRange();\n    this.setTime({ from, to }, true);\n  }\n\n  // isRefreshOutsideThreshold function calculates the difference between last refresh and now\n  // if the difference is outside 5% of the current set time range then the function will return true\n  // if the difference is within 5% of the current set time range then the function will return false\n  // if the current time range is absolute (i.e. not using relative strings like now-5m) then the function will return false\n  isRefreshOutsideThreshold(lastRefresh: number, threshold = 0.05) {\n    const timeRange = this.timeRange();\n\n    if (dateMath.isMathString(timeRange.raw.from)) {\n      const totalRange = timeRange.to.diff(timeRange.from);\n      const msSinceLastRefresh = Date.now() - lastRefresh;\n      const msThreshold = totalRange * threshold;\n      return msSinceLastRefresh >= msThreshold;\n    }\n\n    return false;\n  }\n}\n\nlet singleton: TimeSrv | undefined;\n\nexport function setTimeSrv(srv: TimeSrv) {\n  singleton = srv;\n}\n\nexport function getTimeSrv(): TimeSrv {\n  if (!singleton) {\n    singleton = new TimeSrv(contextSrv);\n  }\n\n  return singleton;\n}\n","// Copyright (c) 2022 Grafana Labs\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { defaultIntervals } from '@grafana/ui';\n\ninterface Args {\n  urlRefresh: string | null;\n  currentRefresh: string | boolean | undefined;\n  isAllowedIntervalFn: (interval: string) => boolean;\n  minRefreshInterval: string;\n  refreshIntervals?: string[];\n}\n\n// getRefreshFromUrl function returns the value from the supplied &refresh= param in url.\n// If the supplied interval is not allowed or does not exist in the refresh intervals for the dashboard then we\n// try to find the first refresh interval that matches the minRefreshInterval (min_refresh_interval in ini)\n// or just take the first interval.\nexport function getRefreshFromUrl({\n                                    urlRefresh,\n                                    currentRefresh,\n                                    isAllowedIntervalFn,\n                                    minRefreshInterval,\n                                    refreshIntervals = defaultIntervals,\n                                  }: Args): string | boolean | undefined {\n  if (!urlRefresh) {\n    return currentRefresh;\n  }\n\n  const isAllowedInterval = isAllowedIntervalFn(urlRefresh);\n  const isExistingInterval = refreshIntervals.find((interval) => interval === urlRefresh);\n\n  if (!isAllowedInterval || !isExistingInterval) {\n    const minRefreshIntervalInIntervals = minRefreshInterval\n      ? refreshIntervals.find((interval) => interval === minRefreshInterval)\n      : undefined;\n    const lowestRefreshInterval = refreshIntervals?.length ? refreshIntervals[0] : undefined;\n\n    return minRefreshIntervalInIntervals ?? lowestRefreshInterval ?? currentRefresh;\n  }\n\n  return urlRefresh || currentRefresh;\n}\n","export const safeStringifyValue = (value: any, space?: number) => {\n  if (!value) {\n    return '';\n  }\n\n  try {\n    return JSON.stringify(value, null, space);\n  } catch (error) {\n    console.error(error);\n  }\n\n  return '';\n};\n","export const regexifyLabelValuesQueryString = (query: string) => {\n  const queryArray = query.split(' ');\n  return queryArray.map((query) => `${query}.*`).join('');\n};\n","// Copyright (c) 2024 Grafana Labs\n// Modifications Copyright (c) 2024 VictoriaMetrics\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport debounce from 'debounce-promise';\nimport React, { useState } from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { AccessoryButton, InputGroup } from '@grafana/experimental';\nimport { AsyncSelect, Select } from '@grafana/ui';\n\nimport { truncateResult } from '../../language_utils';\nimport { QueryBuilderLabelFilter } from '../shared/types';\n\nexport interface Props {\n  defaultOp: string;\n  item: Partial<QueryBuilderLabelFilter>;\n  onChange: (value: QueryBuilderLabelFilter) => void;\n  onGetLabelNames: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  onGetLabelValues: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  onDelete: () => void;\n  invalidLabel?: boolean;\n  invalidValue?: boolean;\n  getLabelValuesAutofillSuggestions: (query: string, labelName?: string) => Promise<SelectableValue[]>;\n  debounceDuration: number;\n}\n\nexport function LabelFilterItem({\n  item,\n  defaultOp,\n  onChange,\n  onDelete,\n  onGetLabelNames,\n  onGetLabelValues,\n  invalidLabel,\n  invalidValue,\n  getLabelValuesAutofillSuggestions,\n  debounceDuration,\n}: Props) {\n  const [state, setState] = useState<{\n    labelNames?: SelectableValue[];\n    labelValues?: SelectableValue[];\n    isLoadingLabelNames?: boolean;\n    isLoadingLabelValues?: boolean;\n  }>({});\n  // there's a bug in react-select where the menu doesn't recalculate its position when the options are loaded asynchronously\n  // see https://github.com/grafana/grafana/issues/63558\n  // instead, we explicitly control the menu visibility and prevent showing it until the options have fully loaded\n  const [labelNamesMenuOpen, setLabelNamesMenuOpen] = useState(false);\n  const [labelValuesMenuOpen, setLabelValuesMenuOpen] = useState(false);\n\n  const isMultiSelect = (operator = item.op) => {\n    return operators.find((op) => op.label === operator)?.isMultiValue;\n  };\n\n  const getSelectOptionsFromString = (item?: string): string[] => {\n    if (item) {\n      const regExp = /\\(([^)]+)\\)/;\n      const matches = item?.match(regExp);\n\n      if (matches && matches[0].indexOf('|') > 0) {\n        return [item];\n      }\n\n      if (item.indexOf('|') > 0) {\n        return item.split('|');\n      }\n\n      return [item];\n    }\n    return [];\n  };\n\n  const labelValueSearch = debounce(\n    (query: string) => getLabelValuesAutofillSuggestions(query, item.label),\n    debounceDuration);\n\n  const itemValue = item?.value ?? '';\n\n  return (\n    <div key={itemValue} data-testid=\"prometheus-dimensions-filter-item\">\n      <InputGroup>\n        {/* Label name select, loads all values at once */}\n        <Select\n          placeholder=\"Select label\"\n          data-testid={selectors.components.QueryBuilder.labelSelect}\n          inputId=\"prometheus-dimensions-filter-item-key\"\n          width=\"auto\"\n          value={item.label ? toOption(item.label) : null}\n          allowCustomValue\n          onOpenMenu={async () => {\n            setState({ isLoadingLabelNames: true });\n            const labelNames = await onGetLabelNames(item);\n            setLabelNamesMenuOpen(true);\n            setState({ labelNames, isLoadingLabelNames: undefined });\n          }}\n          onCloseMenu={() => {\n            setLabelNamesMenuOpen(false);\n          }}\n          isOpen={labelNamesMenuOpen}\n          isLoading={state.isLoadingLabelNames ?? false}\n          options={state.labelNames}\n          onChange={(change) => {\n            if (change.label) {\n              onChange({\n                ...item,\n                op: item.op ?? defaultOp,\n                label: change.label,\n                // eslint-ignore\n              } as QueryBuilderLabelFilter);\n            }\n          }}\n          invalid={invalidLabel}\n        />\n\n        {/* Operator select i.e.   = =~ != !~   */}\n        <Select\n          data-testid={selectors.components.QueryBuilder.matchOperatorSelect}\n          className=\"query-segment-operator\"\n          value={toOption(item.op ?? defaultOp)}\n          options={operators}\n          width=\"auto\"\n          onChange={(change) => {\n            if (change.value != null) {\n              onChange({\n                ...item,\n                op: change.value,\n                value: isMultiSelect(change.value) ? item.value : getSelectOptionsFromString(item?.value)[0],\n                // eslint-ignore\n              } as QueryBuilderLabelFilter);\n            }\n          }}\n        />\n\n        {/* Label value async select: autocomplete calls prometheus API */}\n        <AsyncSelect\n          placeholder=\"Select value\"\n          data-testid={selectors.components.QueryBuilder.valueSelect}\n          inputId=\"prometheus-dimensions-filter-item-value\"\n          width=\"auto\"\n          value={\n            isMultiSelect()\n              ? getSelectOptionsFromString(itemValue).map(toOption)\n              : getSelectOptionsFromString(itemValue).map(toOption)[0]\n          }\n          allowCustomValue\n          onOpenMenu={async () => {\n            setState({ isLoadingLabelValues: true });\n            const labelValues = await onGetLabelValues(item);\n            truncateResult(labelValues);\n            setLabelValuesMenuOpen(true);\n            setState({\n              ...state,\n              labelValues,\n              isLoadingLabelValues: undefined,\n            });\n          }}\n          onCloseMenu={() => {\n            setLabelValuesMenuOpen(false);\n          }}\n          isOpen={labelValuesMenuOpen}\n          defaultOptions={state.labelValues}\n          isMulti={isMultiSelect()}\n          isLoading={state.isLoadingLabelValues}\n          loadOptions={labelValueSearch}\n          onChange={(change) => {\n            if (change.value) {\n              onChange({\n                ...item,\n                value: change.value,\n                op: item.op ?? defaultOp,\n                // eslint-ignore\n              } as QueryBuilderLabelFilter);\n            } else {\n              const changes = change\n                .map((change: { label?: string }) => {\n                  return change.label;\n                })\n                .join('|');\n              // eslint-ignore\n              onChange({ ...item, value: changes, op: item.op ?? defaultOp } as QueryBuilderLabelFilter);\n            }\n          }}\n          invalid={invalidValue}\n        />\n        <AccessoryButton aria-label={`remove-${item.label}`} icon=\"times\" variant=\"secondary\" onClick={onDelete} />\n      </InputGroup>\n    </div>\n  );\n}\n\nconst operators = [\n  { label: '=', value: '=', isMultiValue: false },\n  { label: '!=', value: '!=', isMultiValue: false },\n  { label: '=~', value: '=~', isMultiValue: true },\n  { label: '!~', value: '!~', isMultiValue: true },\n];\n","// Copyright (c) 2024 Grafana Labs\n// Modifications Copyright (c) 2024 VictoriaMetrics\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { css, cx } from '@emotion/css';\nimport { isEqual } from 'lodash';\nimport React, { useEffect, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorFieldGroup, EditorField, EditorList } from '@grafana/experimental';\nimport { InlineFieldRow, InlineLabel } from '@grafana/ui';\n\nimport { QueryBuilderLabelFilter } from '../shared/types';\n\nimport { LabelFilterItem } from './LabelFilterItem';\n\nexport const MISSING_LABEL_FILTER_ERROR_MESSAGE = 'Select at least 1 label filter (label and value)';\n\nexport interface Props {\n  labelsFilters: QueryBuilderLabelFilter[];\n  onChange: (labelFilters: Array<Partial<QueryBuilderLabelFilter>>) => void;\n  onGetLabelNames: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  onGetLabelValues: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  /** If set to true, component will show error message until at least 1 filter is selected */\n  labelFilterRequired?: boolean;\n  getLabelValuesAutofillSuggestions: (query: string, labelName?: string) => Promise<SelectableValue[]>;\n  debounceDuration: number;\n  variableEditor?: boolean;\n}\n\nexport function LabelFilters({\n  labelsFilters,\n  onChange,\n  onGetLabelNames,\n  onGetLabelValues,\n  labelFilterRequired,\n  getLabelValuesAutofillSuggestions,\n  debounceDuration,\n  variableEditor,\n}: Props) {\n  const defaultOp = '=';\n  const [items, setItems] = useState<Array<Partial<QueryBuilderLabelFilter>>>([{ op: defaultOp }]);\n\n  useEffect(() => {\n    if (labelsFilters.length > 0) {\n      setItems(labelsFilters);\n    } else {\n      setItems([{ op: defaultOp }]);\n    }\n  }, [labelsFilters]);\n\n  const onLabelsChange = (newItems: Array<Partial<QueryBuilderLabelFilter>>) => {\n    setItems(newItems);\n\n    // Extract full label filters with both label & value\n    const newLabels = newItems.filter((x) => x.label != null && x.value != null);\n    if (!isEqual(newLabels, labelsFilters)) {\n      onChange(newLabels);\n    }\n  };\n\n  const hasLabelFilter = items.some((item) => item.label && item.value);\n\n  const editorList = () => {\n    return (\n      <EditorList\n        items={items}\n        onChange={onLabelsChange}\n        renderItem={(item: Partial<QueryBuilderLabelFilter>, onChangeItem, onDelete) => (\n          <LabelFilterItem\n            debounceDuration={debounceDuration}\n            item={item}\n            defaultOp={defaultOp}\n            onChange={onChangeItem}\n            onDelete={onDelete}\n            onGetLabelNames={onGetLabelNames}\n            onGetLabelValues={onGetLabelValues}\n            invalidLabel={labelFilterRequired && !item.label}\n            invalidValue={labelFilterRequired && !item.value}\n            getLabelValuesAutofillSuggestions={getLabelValuesAutofillSuggestions}\n          />\n        )}\n      />\n    );\n  };\n\n  return (\n    <>\n      {variableEditor ? (\n        <InlineFieldRow>\n          <div\n            className={cx(css`\n              display: flex;\n            `)}\n          >\n            <InlineLabel\n              width={20}\n              tooltip={<div>Optional: used to filter the metric select for this query type.</div>}\n            >\n              Label filters\n            </InlineLabel>\n            {editorList()}\n          </div>\n        </InlineFieldRow>\n      ) : (\n        <EditorFieldGroup>\n          <EditorField\n            label=\"Label filters\"\n            error={MISSING_LABEL_FILTER_ERROR_MESSAGE}\n            invalid={labelFilterRequired && !hasLabelFilter}\n          >\n            {editorList()}\n          </EditorField>\n        </EditorFieldGroup>\n      )}\n    </>\n  );\n}\n","// Copyright (c) 2024 Grafana Labs\n// Modifications Copyright (c) 2024 VictoriaMetrics\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useCallback } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\n\nimport { PrometheusDatasource } from '../../datasource';\nimport { getMetadataString } from '../../language_provider';\nimport { truncateResult } from '../../language_utils';\nimport { promQueryModeller } from '../PromQueryModeller';\nimport { regexifyLabelValuesQueryString } from '../parsingUtils';\nimport { QueryBuilderLabelFilter } from '../shared/types';\nimport { PromVisualQuery } from '../types';\n\nimport { LabelFilters } from './LabelFilters';\nimport { MetricSelect } from './MetricSelect';\n\nexport interface MetricsLabelsSectionProps {\n  query: PromVisualQuery;\n  datasource: PrometheusDatasource;\n  onChange: (update: PromVisualQuery) => void;\n  variableEditor?: boolean;\n  onBlur?: () => void;\n}\n\nexport function MetricsLabelsSection({\n  datasource,\n  query,\n  onChange,\n  onBlur,\n  variableEditor,\n}: MetricsLabelsSectionProps) {\n  // fixing the use of 'as' from refactoring\n  // @ts-ignore\n  const onChangeLabels = (labels) => {\n    onChange({ ...query, labels });\n  };\n  /**\n   * Map metric metadata to SelectableValue for Select component and also adds defined template variables to the list.\n   */\n  const withTemplateVariableOptions = useCallback(\n    async (optionsPromise: Promise<SelectableValue[]>): Promise<SelectableValue[]> => {\n      const variables = datasource.getVariables();\n      const options = await optionsPromise;\n      return [\n        ...variables.map((value: string) => ({ label: value, value })),\n        ...options.map((option: SelectableValue) => ({\n          label: option.value,\n          value: option.value,\n          title: option.description,\n        })),\n      ];\n    },\n    [datasource]\n  );\n\n  /**\n   * Function kicked off when user interacts with label in label filters.\n   * Formats a promQL expression and passes that off to helper functions depending on API support\n   * @param forLabel\n   */\n  const onGetLabelNames = async (forLabel: Partial<QueryBuilderLabelFilter>): Promise<SelectableValue[]> => {\n    // If no metric we need to use a different method\n    if (!query.metric) {\n      await datasource.languageProvider.fetchLabels();\n      return datasource.languageProvider.getLabelKeys().map((k) => ({ value: k }));\n    }\n\n    const labelsToConsider = query.labels.filter((x) => x !== forLabel);\n    labelsToConsider.push({ label: '__name__', op: '=', value: query.metric });\n    const expr = promQueryModeller.renderLabels(labelsToConsider);\n\n    const labelNames = await datasource.languageProvider.fetchSeriesLabelsMatch(expr);\n\n    // filter out already used labels\n    return labelNames\n      .filter((labelName) => !labelsToConsider.find((filter) => filter.label === labelName))\n      .map((k) => ({ value: k }));\n  };\n\n  const getLabelValuesAutocompleteSuggestions = (\n    queryString?: string,\n    labelName?: string\n  ): Promise<SelectableValue[]> => {\n    const forLabel = {\n      label: labelName ?? '__name__',\n      op: '=~',\n      value: regexifyLabelValuesQueryString(`.*${queryString}`),\n    };\n    const labelsToConsider = query.labels.filter((x) => x.label !== forLabel.label);\n    labelsToConsider.push(forLabel);\n    if (query.metric) {\n      labelsToConsider.push({ label: '__name__', op: '=', value: query.metric });\n    }\n    const interpolatedLabelsToConsider = labelsToConsider.map((labelObject) => ({\n      ...labelObject,\n      label: datasource.interpolateString(labelObject.label),\n      value: datasource.interpolateString(labelObject.value),\n    }));\n    const expr = promQueryModeller.renderLabels(interpolatedLabelsToConsider);\n    const response = getLabelValuesFromLabelValuesAPI(forLabel, expr);\n\n    return response.then((response: SelectableValue[]) => {\n      truncateResult(response);\n      return response;\n    });\n  };\n\n  /**\n   * Helper function to fetch label values from a promql string expression and a label\n   * @param forLabel\n   * @param promQLExpression\n   */\n  const getLabelValuesFromLabelValuesAPI = (\n    forLabel: Partial<QueryBuilderLabelFilter>,\n    promQLExpression: string\n  ): Promise<SelectableValue[]> => {\n    if (!forLabel.label) {\n      return Promise.resolve([]);\n    }\n    return datasource.languageProvider.fetchSeriesValuesWithMatch(forLabel.label, promQLExpression).then((response) => {\n      return response.map((v) => ({\n        value: v,\n        label: v,\n      }));\n    });\n  };\n\n  /**\n   * Function kicked off when users interact with the value of the label filters\n   * Formats a promQL expression and passes that into helper functions depending on API support\n   * @param forLabel\n   */\n  const onGetLabelValues = async (forLabel: Partial<QueryBuilderLabelFilter>): Promise<SelectableValue[]> => {\n    if (!forLabel.label) {\n      return [];\n    }\n    // If no metric is selected, we can get the raw list of labels\n    if (!query.metric) {\n      return (await datasource.languageProvider.getLabelValues(forLabel.label)).map((v) => ({ value: v }));\n    }\n\n    const labelsToConsider = query.labels.filter((x) => x !== forLabel);\n    labelsToConsider.push({ label: '__name__', op: '=', value: query.metric });\n\n    const interpolatedLabelsToConsider = labelsToConsider.map((labelObject) => ({\n      ...labelObject,\n      label: datasource.interpolateString(labelObject.label),\n      value: datasource.interpolateString(labelObject.value),\n    }));\n\n    const expr = promQueryModeller.renderLabels(interpolatedLabelsToConsider);\n\n    return getLabelValuesFromLabelValuesAPI(forLabel, expr);\n  };\n\n  const onGetMetrics = useCallback(() => {\n    return withTemplateVariableOptions(getMetrics(datasource, query));\n  }, [datasource, query, withTemplateVariableOptions]);\n\n  const handleGetLabelNames = (forLabel: Partial<QueryBuilderLabelFilter>) => {\n    return withTemplateVariableOptions(onGetLabelNames(forLabel))\n  }\n\n  const handleGetLabelValues = (forLabel: Partial<QueryBuilderLabelFilter>) => {\n    return withTemplateVariableOptions(onGetLabelValues(forLabel))\n  }\n\n  return (\n    <>\n      <MetricSelect\n        query={query}\n        onChange={onChange}\n        onGetMetrics={onGetMetrics}\n        variableEditor={variableEditor}\n      />\n      <LabelFilters\n        debounceDuration={350}\n        getLabelValuesAutofillSuggestions={getLabelValuesAutocompleteSuggestions}\n        labelsFilters={query.labels}\n        onChange={onChangeLabels}\n        onGetLabelNames={handleGetLabelNames}\n        onGetLabelValues={handleGetLabelValues}\n        variableEditor={variableEditor}\n      />\n    </>\n  );\n}\n\n/**\n * Returns list of metrics, either all or filtered by query param. It also adds description string to each metric if it\n * exists.\n * @param datasource\n * @param query\n */\nasync function getMetrics(\n  datasource: PrometheusDatasource,\n  query: PromVisualQuery\n): Promise<Array<{ value: string; description?: string }>> {\n  // Makes sure we loaded the metadata for metrics. Usually this is done in the start() method of the provider but we\n  // don't use it with the visual builder and there is no need to run all the start() setup anyway.\n  if (!datasource.languageProvider.metricsMetadata) {\n    await datasource.languageProvider.loadMetricsMetadata();\n  }\n\n  // Error handling for when metrics metadata returns as undefined\n  if (!datasource.languageProvider.metricsMetadata) {\n    datasource.languageProvider.metricsMetadata = {};\n  }\n\n  let metrics: string[];\n  if (query.labels.length > 0) {\n    const expr = promQueryModeller.renderLabels(query.labels);\n    metrics = (await datasource.languageProvider.getSeries(expr, true))['__name__'] ?? [];\n  } else {\n    metrics = (await datasource.languageProvider.getLabelValues('__name__')) ?? [];\n  }\n\n  return metrics.map((m) => ({\n    value: m,\n    description: getMetadataString(m, datasource.languageProvider.metricsMetadata!),\n  }));\n}\n","// Copyright (c) 2024 Grafana Labs\n// Modifications Copyright (c) 2024 VictoriaMetrics\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { FormEvent, useCallback, useEffect, useState } from 'react';\n\nimport { QueryEditorProps, SelectableValue } from '@grafana/data';\nimport { InlineField, InlineFieldRow, Input, Select, TextArea } from '@grafana/ui';\n\nimport { PrometheusDatasource } from '../datasource';\nimport {\n  migrateVariableEditorBackToVariableSupport,\n  migrateVariableQueryToEditor,\n} from '../migrations/variableMigration';\nimport { promQueryModeller } from '../querybuilder/PromQueryModeller';\nimport { MetricsLabelsSection } from '../querybuilder/components/MetricsLabelsSection';\nimport { QueryBuilderLabelFilter } from '../querybuilder/shared/types';\nimport { PromVisualQuery } from '../querybuilder/types';\nimport {\n  PromOptions,\n  PromQuery,\n  PromVariableQuery,\n  PromVariableQueryType as QueryType,\n  StandardPromVariableQuery,\n} from '../types';\n\nexport const variableOptions = [\n  { label: 'Label names', value: QueryType.LabelNames },\n  { label: 'Label values', value: QueryType.LabelValues },\n  { label: 'Metrics', value: QueryType.MetricNames },\n  { label: 'Query result', value: QueryType.VarQueryResult },\n  { label: 'Series query', value: QueryType.SeriesQuery },\n  { label: 'Classic query', value: QueryType.ClassicQuery },\n];\n\nexport type Props = QueryEditorProps<PrometheusDatasource, PromQuery, PromOptions, PromVariableQuery>;\n\nconst refId = 'VariableQueryEditor-VariableQuery';\n\nexport const VariableQueryEditor = ({ onChange, query, datasource, range }: Props) => {\n  // to select the query type, i.e. label_names, label_values, etc.\n  const [qryType, setQryType] = useState<number | undefined>(undefined);\n  // list of variables for each function\n  const [label, setLabel] = useState('');\n\n  const [labelNamesMatch, setLabelNamesMatch] = useState('');\n\n  // metric is used for both label_values() and metric()\n  // label_values() metric requires a whole/complete metric\n  // metric() is expected to be a part of a metric string\n  const [metric, setMetric] = useState('');\n  // varQuery is a whole query, can include math/rates/etc\n  const [varQuery, setVarQuery] = useState('');\n  // seriesQuery is only a whole\n  const [seriesQuery, setSeriesQuery] = useState('');\n\n  // the original variable query implementation, e.g. label_value(metric, label_name)\n  const [classicQuery, setClassicQuery] = useState('');\n\n  // list of label names for label_values(), /api/v1/labels, contains the same results as label_names() function\n  const [labelOptions, setLabelOptions] = useState<Array<SelectableValue<string>>>([]);\n\n  // label filters have been added as a filter for metrics in label values query type\n  const [labelFilters, setLabelFilters] = useState<QueryBuilderLabelFilter[]>([]);\n\n  useEffect(() => {\n    datasource.languageProvider.start(range);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (!query) {\n      return;\n    }\n\n    if (query.qryType === QueryType.ClassicQuery) {\n      setQryType(query.qryType);\n      setClassicQuery(query.query ?? '');\n    } else {\n      // 1. Changing from standard to custom variable editor changes the string attr from expr to query\n      // 2. jsonnet grafana as code passes a variable as a string\n      const variableQuery = variableMigration(query);\n\n      setLabelNamesMatch(variableQuery.match ?? '');\n      setQryType(variableQuery.qryType);\n      setLabel(variableQuery.label ?? '');\n      setMetric(variableQuery.metric ?? '');\n      setLabelFilters(variableQuery.labelFilters ?? []);\n      setVarQuery(variableQuery.varQuery ?? '');\n      setSeriesQuery(variableQuery.seriesQuery ?? '');\n      setClassicQuery(variableQuery.classicQuery ?? '');\n    }\n  }, [query]);\n\n  // set the label names options for the label values var query\n  useEffect(() => {\n    if (qryType !== QueryType.LabelValues) {\n      return;\n    }\n    const variables = datasource.getVariables().map((variable: string) => ({ label: variable, value: variable }));\n    if (!metric) {\n      // get all the labels\n      datasource.getTagKeys({ filters: [] }).then((labelNames: Array<{ text: string }>) => {\n        const names = labelNames.map(({ text }) => ({ label: text, value: text }));\n        setLabelOptions([...variables, ...names]);\n      });\n    } else {\n      // fetch the labels filtered by the metric\n      const labelToConsider = [{ label: '__name__', op: '=', value: metric }];\n      const expr = promQueryModeller.renderLabels(labelToConsider);\n\n      datasource.languageProvider.fetchSeriesLabelsMatch(expr).then((labelNames: string[]) => {\n        const names = labelNames.map((value) => ({ label: value, value: value }));\n        setLabelOptions([...variables, ...names]);\n      });\n    }\n  }, [datasource, qryType, metric]);\n\n  const onChangeWithVariableString = (\n    updateVar: { [key: string]: QueryType | string },\n    updLabelFilters?: QueryBuilderLabelFilter[]\n  ) => {\n    const queryVar = {\n      qryType,\n      label,\n      metric,\n      match: labelNamesMatch,\n      varQuery,\n      seriesQuery,\n      classicQuery,\n      refId,\n    };\n\n    let updateLabelFilters = updLabelFilters ? { labelFilters: updLabelFilters } : { labelFilters: labelFilters };\n\n    const updatedVar = { ...queryVar, ...updateVar, ...updateLabelFilters };\n\n    const queryString = migrateVariableEditorBackToVariableSupport(updatedVar);\n\n    // setting query.query property allows for update of variable definition\n    onChange({\n      query: queryString,\n      qryType: updatedVar.qryType,\n      refId,\n    });\n  };\n\n  /** Call onchange for label names query type change */\n  const onQueryTypeChange = (newType: SelectableValue<QueryType>) => {\n    setQryType(newType.value);\n    if (newType.value !== QueryType.SeriesQuery) {\n      onChangeWithVariableString({ qryType: newType.value ?? 0 });\n    }\n  };\n\n  /** Call onchange for label select when query type is label values */\n  const onLabelChange = (newLabel: SelectableValue<string>) => {\n    const newLabelvalue = newLabel && newLabel.value ? newLabel.value : '';\n    setLabel(newLabelvalue);\n    if (qryType === QueryType.LabelValues && newLabelvalue) {\n      onChangeWithVariableString({ label: newLabelvalue });\n    }\n  };\n\n  /**\n   * Call onChange for MetricsLabels component change for label values query type\n   * if there is a label (required) and\n   * if the labels or metric are updated.\n   */\n  const metricsLabelsChange = (update: PromVisualQuery) => {\n    setMetric(update.metric);\n    setLabelFilters(update.labels);\n\n    const updMetric = update.metric;\n    const updLabelFilters = update.labels ?? [];\n\n    if (qryType === QueryType.LabelValues && label && (updMetric || updLabelFilters)) {\n      onChangeWithVariableString({ qryType, metric: updMetric }, updLabelFilters);\n    }\n  };\n\n  const onLabelNamesMatchChange = (regex: string) => {\n    if (qryType === QueryType.LabelNames) {\n      onChangeWithVariableString({ qryType, match: regex });\n    }\n  };\n\n  /**\n   * Call onchange for metric change if metrics names (regex) query type\n   * Debounce this because to not call the API for every keystroke.\n   */\n  const onMetricChange = (value: string) => {\n    if (qryType === QueryType.MetricNames && value) {\n      onChangeWithVariableString({ metric: value });\n    }\n  };\n\n  /**\n   *  Do not call onchange for variable query result when query type is var query result\n   *  because the query may not be finished typing and an error is returned\n   *  for incorrectly formatted series. Call onchange for blur instead.\n   */\n  const onVarQueryChange = (e: FormEvent<HTMLTextAreaElement>) => {\n    setVarQuery(e.currentTarget.value);\n  };\n\n  /**\n   *  Do not call onchange for seriesQuery when query type is series query\n   *  because the series may not be finished typing and an error is returned\n   *  for incorrectly formatted series. Call onchange for blur instead.\n   */\n  const onSeriesQueryChange = (e: FormEvent<HTMLInputElement>) => {\n    setSeriesQuery(e.currentTarget.value);\n  };\n\n  const onClassicQueryChange = (e: FormEvent<HTMLInputElement>) => {\n    setClassicQuery(e.currentTarget.value);\n  };\n\n  const promVisualQuery = useCallback(() => {\n    return { metric: metric, labels: labelFilters, operations: [] };\n  }, [metric, labelFilters]);\n\n  return (\n    <>\n      <InlineFieldRow>\n        <InlineField\n          label=\"Query type\"\n          labelWidth={20}\n          tooltip={\n            <div>The Prometheus data source plugin provides the following query types for template variables.</div>\n          }\n        >\n          <Select\n            placeholder=\"Select query type\"\n            aria-label=\"Query type\"\n            onChange={onQueryTypeChange}\n            value={qryType}\n            options={variableOptions}\n            width={25}\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      {qryType === QueryType.LabelValues && (\n        <>\n          <InlineFieldRow>\n            <InlineField\n              label=\"Label\"\n              labelWidth={20}\n              required\n              aria-labelledby=\"label-select\"\n              tooltip={\n                <div>\n                  Returns a list of label values for the label name in all metrics unless the metric is specified.\n                </div>\n              }\n            >\n              <Select\n                aria-label=\"label-select\"\n                onChange={onLabelChange}\n                value={label}\n                options={labelOptions}\n                width={25}\n                allowCustomValue\n                isClearable={true}\n              />\n            </InlineField>\n          </InlineFieldRow>\n          {/* Used to select an optional metric with optional label filters */}\n          <MetricsLabelsSection\n            query={promVisualQuery()}\n            datasource={datasource}\n            onChange={metricsLabelsChange}\n            variableEditor={true}\n          />\n        </>\n      )}\n\n      {qryType === QueryType.LabelNames && (\n        <InlineFieldRow>\n          <InlineField\n            label=\"Metric regex\"\n            labelWidth={20}\n            aria-labelledby=\"Metric regex\"\n            tooltip={<div>Returns a list of label names, optionally filtering by specified metric regex.</div>}\n          >\n            <Input\n              type=\"text\"\n              aria-label=\"Metric regex\"\n              placeholder=\"Metric regex\"\n              value={labelNamesMatch}\n              onBlur={(event) => {\n                setLabelNamesMatch(event.currentTarget.value);\n                onLabelNamesMatchChange(event.currentTarget.value);\n              }}\n              onChange={(e) => {\n                setLabelNamesMatch(e.currentTarget.value);\n              }}\n              width={25}\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n\n      {qryType === QueryType.MetricNames && (\n        <InlineFieldRow>\n          <InlineField\n            label=\"Metric regex\"\n            labelWidth={20}\n            aria-labelledby=\"Metric selector\"\n            tooltip={<div>Returns a list of metrics matching the specified metric regex.</div>}\n          >\n            <Input\n              type=\"text\"\n              aria-label=\"Metric selector\"\n              placeholder=\"Metric regex\"\n              value={metric}\n              onChange={(e) => {\n                setMetric(e.currentTarget.value);\n              }}\n              onBlur={(e) => {\n                setMetric(e.currentTarget.value);\n                onMetricChange(e.currentTarget.value);\n              }}\n              width={25}\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n\n      {qryType === QueryType.VarQueryResult && (\n        <InlineFieldRow>\n          <InlineField\n            label=\"Query\"\n            labelWidth={20}\n            tooltip={\n              <div>\n                Returns a list of Prometheus query results for the query. This can include Prometheus functions, i.e.\n                sum(go_goroutines).\n              </div>\n            }\n          >\n            <TextArea\n              type=\"text\"\n              aria-label=\"Prometheus Query\"\n              placeholder=\"Prometheus Query\"\n              value={varQuery}\n              onChange={onVarQueryChange}\n              onBlur={() => {\n                if (qryType === QueryType.VarQueryResult && varQuery) {\n                  onChangeWithVariableString({ qryType });\n                }\n              }}\n              cols={100}\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n\n      {qryType === QueryType.SeriesQuery && (\n        <InlineFieldRow>\n          <InlineField\n            label=\"Series Query\"\n            labelWidth={20}\n            tooltip={\n              <div>\n                Enter enter a metric with labels, only a metric or only labels, i.e.\n                go_goroutines&#123;instance=&quot;localhost:9090&quot;&#125;, go_goroutines, or\n                &#123;instance=&quot;localhost:9090&quot;&#125;. Returns a list of time series associated with the\n                entered data.\n              </div>\n            }\n          >\n            <Input\n              type=\"text\"\n              aria-label=\"Series Query\"\n              placeholder=\"Series Query\"\n              value={seriesQuery}\n              onChange={onSeriesQueryChange}\n              onBlur={() => {\n                if (qryType === QueryType.SeriesQuery && seriesQuery) {\n                  onChangeWithVariableString({ qryType });\n                }\n              }}\n              width={100}\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n\n      {qryType === QueryType.ClassicQuery && (\n        <InlineFieldRow>\n          <InlineField\n            label=\"Classic Query\"\n            labelWidth={20}\n            tooltip={\n              <div>\n                The original implemetation of the Prometheus variable query editor. Enter a string with the correct\n                query type and parameters as described in these docs. For example, label_values(label, metric).\n              </div>\n            }\n          >\n            <Input\n              type=\"text\"\n              aria-label=\"Classic Query\"\n              placeholder=\"Classic Query\"\n              value={classicQuery}\n              onChange={onClassicQueryChange}\n              onBlur={() => {\n                if (qryType === QueryType.ClassicQuery && classicQuery) {\n                  onChangeWithVariableString({ qryType });\n                }\n              }}\n              width={100}\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n    </>\n  );\n};\n\nexport function variableMigration(query: string | PromVariableQuery | StandardPromVariableQuery): PromVariableQuery {\n  if (typeof query === 'string') {\n    return migrateVariableQueryToEditor(query);\n  } else if (query.query) {\n    return migrateVariableQueryToEditor(query.query);\n  } else {\n    return query;\n  }\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-13: change getTemplateSrv and TemplateSrv imports\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { from, Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport {\n  DataQueryRequest,\n  DataQueryResponse,\n  rangeUtil,\n  CustomVariableSupport,\n} from '@grafana/data';\nimport { getTemplateSrv, TemplateSrv } from '@grafana/runtime';\n\nimport { VariableQueryEditor } from './components/VariableQueryEditor';\nimport { PrometheusDatasource } from './datasource';\nimport PrometheusMetricFindQuery from './metric_find_query';\nimport { PromVariableQuery } from './types';\n\nexport class PrometheusVariableSupport extends CustomVariableSupport<PrometheusDatasource> {\n  constructor(\n    private readonly datasource: PrometheusDatasource,\n    private readonly templateSrv: TemplateSrv = getTemplateSrv()\n  ) {\n    super();\n  }\n\n  editor = VariableQueryEditor;\n\n  query = (request: DataQueryRequest<PromVariableQuery>): Observable<DataQueryResponse> => {\n    // Handling grafana as code from jsonnet variable queries which are strings and not objects\n    // Previously, when using StandardVariableSupport\n    // the variable query string was changed to be on the expr attribute\n    // Now, using CustomVariableSupport,\n    // the variable query is changed to the query attribute.\n    // So, without standard variable support changing the query string to the expr attribute,\n    // the variable query string is coming in as it is written in jsonnet,\n    // where it is just a string. Here is where we handle that.\n    let query: string | undefined;\n    if (typeof request.targets[0] === 'string') {\n      query = request.targets[0];\n    } else {\n      query = request.targets[0].query;\n    }\n\n    if (!query) {\n      return of({ data: [] });\n    }\n\n    const scopedVars = {\n      ...request.scopedVars,\n      __interval: { text: this.datasource.interval, value: this.datasource.interval },\n      __interval_ms: {\n        text: rangeUtil.intervalToMs(this.datasource.interval),\n        value: rangeUtil.intervalToMs(this.datasource.interval),\n      },\n      ...this.datasource.getRangeScopedVars(request.range),\n    };\n\n    const interpolated = this.templateSrv.replace(query, scopedVars, this.datasource.interpolateQueryExpr);\n    const metricFindQuery = new PrometheusMetricFindQuery(this.datasource, interpolated);\n    const metricFindStream = from(metricFindQuery.process(request.range));\n\n    return metricFindStream.pipe(map((results) => ({ data: results })));\n  }\n}\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-04: replace type to 'victoriametrics-datasource'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { cloneDeep, defaults } from 'lodash';\nimport { forkJoin, lastValueFrom, merge, Observable, of, OperatorFunction, pipe, throwError } from 'rxjs';\nimport { catchError, filter, map, tap } from 'rxjs/operators';\n\nimport {\n  AbstractQuery,\n  AnnotationEvent,\n  AnnotationQuery,\n  CoreApp,\n  DataFrame,\n  DataQueryError,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  DataSourceWithQueryExportSupport,\n  DataSourceWithQueryImportSupport,\n  dateMath,\n  DateTime,\n  dateTime,\n  getDefaultTimeRange,\n  LegacyMetricFindQueryOptions,\n  LoadingState,\n  QueryFixAction,\n  rangeUtil,\n  ScopedVars,\n  TimeRange,\n} from '@grafana/data';\nimport {\n  BackendSrvRequest,\n  DataSourceWithBackend,\n  FetchError,\n  FetchResponse,\n  TemplateSrv,\n  getBackendSrv,\n  getTemplateSrv,\n  isFetchError,\n  BackendDataSourceResponse,\n  toDataQueryResponse,\n} from '@grafana/runtime';\n\nimport { addLabelToQuery } from './add_label_to_query';\nimport { AnnotationQueryEditor } from \"./components/Annotations/AnnotationQueryEditor\";\nimport { getDefaultVmuiUrl } from \"./components/VmuiLink\";\nimport { WithTemplate } from \"./components/WithTemplateConfig/types\";\nimport { mergeTemplateWithQuery } from \"./components/WithTemplateConfig/utils/getArrayFromTemplate\";\nimport { ANNOTATION_QUERY_STEP_DEFAULT, DATASOURCE_TYPE } from \"./consts\";\nimport PrometheusLanguageProvider from './language_provider';\nimport {\n  escapeMetricNameSpecialCharacters,\n  expandRecordingRules,\n  getVictoriaMetricsTime,\n  unescapeMetricNameSpecialCharacters\n} from './language_utils';\nimport { renderLegendFormat } from './legend';\nimport PrometheusMetricFindQuery from './metric_find_query';\nimport { getInitHints, getQueryHints } from './query_hints';\nimport { getOriginalMetricName, transform, transformV2 } from './result_transformer';\nimport { getTimeSrv, TimeSrv } from './services/TimeSrv';\nimport {\n  ExemplarTraceIdDestination,\n  LimitMetrics,\n  PromDataErrorResponse,\n  PromDataSuccessResponse,\n  PromMatrixData,\n  PromOptions,\n  PromQuery,\n  PromQueryRequest,\n  PromQueryType,\n  PromScalarData,\n  PromVectorData,\n} from './types';\nimport { ExtendedDataQueryRequest } from \"./types/datasource\";\nimport { safeStringifyValue } from './utils/safeStringifyValue';\nimport { PrometheusVariableSupport } from './variables';\n\nenum PromApplication {\n  VictoriaMetrics = 'VictoriaMetrics',\n}\nconst GET_AND_POST_METADATA_ENDPOINTS = ['api/v1/query', 'api/v1/query_range', 'api/v1/series', 'api/v1/labels'];\n\nexport class PrometheusDatasource\n  extends DataSourceWithBackend<PromQuery, PromOptions>\n  implements DataSourceWithQueryImportSupport<PromQuery>, DataSourceWithQueryExportSupport<PromQuery> {\n  type: string;\n  ruleMappings: { [index: string]: string };\n  url: string;\n  id: number;\n  directUrl: string;\n  vmuiUrl: string;\n  access: 'direct' | 'proxy';\n  basicAuth: any;\n  withCredentials: any;\n  // metricsNameCache = new LRU<string, string[]>({max: 10});\n  interval: string;\n  queryTimeout: string | undefined;\n  httpMethod: string;\n  languageProvider: PrometheusLanguageProvider;\n  exemplarTraceIdDestinations: ExemplarTraceIdDestination[] | undefined;\n  lookupsDisabled: boolean;\n  customQueryParameters: any;\n  exemplarsAvailable: boolean;\n  subType: PromApplication;\n  rulerEnabled: boolean;\n  withTemplates: WithTemplate[];\n  limitMetrics: LimitMetrics;\n\n  constructor(\n    instanceSettings: DataSourceInstanceSettings<PromOptions>,\n    private readonly templateSrv: TemplateSrv = getTemplateSrv(),\n    private readonly timeSrv: TimeSrv = getTimeSrv(),\n    languageProvider?: PrometheusLanguageProvider\n  ) {\n    super(instanceSettings);\n\n    this.type = DATASOURCE_TYPE;\n    this.subType = PromApplication.VictoriaMetrics;\n    this.rulerEnabled = false;\n    this.id = instanceSettings.id;\n    this.url = instanceSettings.url!;\n    this.access = 'direct' //instanceSettings.access;\n    this.basicAuth = instanceSettings.basicAuth;\n    this.withCredentials = instanceSettings.withCredentials;\n    this.interval = instanceSettings.jsonData.timeInterval || '15s';\n    this.queryTimeout = instanceSettings.jsonData.queryTimeout;\n    this.httpMethod = instanceSettings.jsonData.httpMethod || 'GET';\n    this.directUrl = instanceSettings.jsonData.directUrl ?? this.url;\n    this.vmuiUrl = instanceSettings.jsonData.vmuiUrl || getDefaultVmuiUrl(this.url);\n    this.exemplarTraceIdDestinations = instanceSettings.jsonData.exemplarTraceIdDestinations;\n    this.ruleMappings = {};\n    this.languageProvider = languageProvider ?? new PrometheusLanguageProvider(this);\n    this.lookupsDisabled = instanceSettings.jsonData.disableMetricsLookup ?? false;\n    this.customQueryParameters = new URLSearchParams(instanceSettings.jsonData.customQueryParameters);\n    this.variables = new PrometheusVariableSupport(this, this.templateSrv);\n    this.exemplarsAvailable = false;\n    this.withTemplates = instanceSettings.jsonData.withTemplates ?? [];\n    this.limitMetrics = instanceSettings.jsonData.limitMetrics ?? {};\n    this.annotations = {\n      QueryEditor: AnnotationQueryEditor,\n      processEvents: this.processEvents,\n      prepareQuery: this.prepareQuery\n    }\n  }\n\n  init = async () => {\n    await this.loadRules();\n  };\n\n  getQueryDisplayText(query: PromQuery) {\n    return query.expr;\n  }\n\n  _addTracingHeaders(httpOptions: PromQueryRequest, options: ExtendedDataQueryRequest<PromQuery>) {\n    httpOptions.headers = {};\n    const proxyMode = !this.url.match(/^http/);\n    if (proxyMode) {\n      httpOptions.headers['X-Dashboard-UID'] = options.dashboardUID || \"\";\n      httpOptions.headers['X-Panel-Id'] = options.panelId;\n    }\n  }\n\n  /**\n   * Any request done from this data source should go through here as it contains some common processing for the\n   * request. Any processing done here needs to be also copied on the backend as this goes through data source proxy\n   * but not through the same code as alerting.\n   */\n  _request<T = any>(\n    url: string,\n    data: Record<string, string> | null,\n    overrides: Partial<BackendSrvRequest> = {}\n  ): Observable<FetchResponse<T>> {\n    data = data || {};\n    for (const [key, value] of this.customQueryParameters) {\n      if (data[key] == null) {\n        data[key] = value;\n      }\n    }\n\n    let queryUrl = this.url + url;\n    if (url.startsWith(`/api/datasources/proxy/${this.id}`)) {\n      // This url is meant to be a replacement for the whole URL. Replace the entire URL\n      queryUrl = url;\n    }\n\n    const options: BackendSrvRequest = defaults(overrides, {\n      url: queryUrl,\n      method: this.httpMethod,\n      headers: {},\n    });\n\n    if (options.method === 'GET') {\n      if (data && Object.keys(data).length) {\n        options.url =\n          options.url +\n          (options.url.search(/\\?/) >= 0 ? '&' : '?') +\n          Object.entries(data)\n            .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\n            .join('&');\n      }\n    } else {\n      options.headers!['Content-Type'] = 'application/x-www-form-urlencoded';\n      options.data = data;\n    }\n\n    if (this.basicAuth || this.withCredentials) {\n      options.withCredentials = true;\n    }\n\n    if (this.basicAuth) {\n      options.headers!.Authorization = this.basicAuth;\n    }\n\n    return getBackendSrv().fetch<T>(options);\n  }\n\n  async importFromAbstractQueries(abstractQueries: AbstractQuery[]): Promise<PromQuery[]> {\n    return abstractQueries.map((abstractQuery) => this.languageProvider.importFromAbstractQuery(abstractQuery));\n  }\n\n  async exportToAbstractQueries(queries: PromQuery[]): Promise<AbstractQuery[]> {\n    return queries.map((query) => this.languageProvider.exportToAbstractQuery(query));\n  }\n\n  // Use this for tab completion features, won't publish response to other components\n  async metadataRequest<T = any>(url: string, params = {}, options?: Partial<BackendSrvRequest>) {\n    // If URL includes endpoint that supports POST and GET method, try to use configured method. This might fail as POST is supported only in v2.10+.\n    if (GET_AND_POST_METADATA_ENDPOINTS.some((endpoint) => url.includes(endpoint))) {\n      try {\n        return await lastValueFrom(\n          // VM\n          this._request<T>(`/api/datasources/proxy/${this.id}${url}`, params, {\n            method: this.httpMethod,\n            hideFromInspector: true,\n            showErrorAlert: false,\n            ...options,\n          })\n        );\n      } catch (err) {\n        // If status code of error is Method Not Allowed (405) and HTTP method is POST, retry with GET\n        if (this.httpMethod === 'POST' && isFetchError(err) && (err.status === 405 || err.status === 400)) {\n          console.warn(`Couldn't use configured POST HTTP method for this request. Trying to use GET method instead.`);\n        } else {\n          throw err;\n        }\n      }\n    }\n\n    return await lastValueFrom(\n      this._request<T>(`/api/datasources/proxy/${this.id}${url}`, params, {\n        method: 'GET',\n        hideFromInspector: true,\n        ...options,\n      })\n    ); // toPromise until we change getTagValues, getTagKeys to Observable\n  }\n\n  async prettifyRequest<T = any>(query: string) {\n    // If URL includes endpoint that supports POST and GET method, try to use configured method. This might fail as POST is supported only in v2.10+.\n    try {\n      return await lastValueFrom(\n        this._request<T>(`/api/datasources/proxy/${this.id}/prettify-query`, { query }, {\n          method: 'GET',\n          hideFromInspector: true,\n          showErrorAlert: false\n        })\n      );\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  interpolateQueryExpr(value: string | string[] = [], variable: any) {\n    // if no multi or include all do not regexEscape\n    if (!variable.multi && !variable.includeAll) {\n      return prometheusRegularEscape(value);\n    }\n\n    if (typeof value === 'string') {\n      return prometheusSpecialRegexEscape(value);\n    }\n\n    const escapedValues = value.map((val) => prometheusSpecialRegexEscape(val));\n\n    if (escapedValues.length === 1) {\n      return escapedValues[0];\n    }\n\n    return '(' + escapedValues.join('|') + ')';\n  }\n\n  targetContainsTemplate(target: PromQuery) {\n    return this.templateSrv.containsTemplate(target.expr);\n  }\n\n  prepareTargets = (options: ExtendedDataQueryRequest<PromQuery>, start: number, end: number) => {\n    const queries: PromQueryRequest[] = [];\n    const activeTargets: PromQuery[] = [];\n    const clonedTargets = cloneDeep(options.targets);\n\n    for (const target of clonedTargets) {\n      if (!target.expr || target.hide) {\n        continue;\n      }\n\n      target.requestId = options.panelId + target.refId;\n      // const metricName = this.languageProvider.histogramMetrics.find((m) => target.expr.includes(m));\n\n      // In Explore, we run both (instant and range) queries if both are true (selected) or both are undefined (legacy Explore queries)\n      if (options.app === CoreApp.Explore && target.range === target.instant) {\n        // Create instant target\n        const instantTarget: any = cloneDeep(target);\n        instantTarget.format = 'table';\n        instantTarget.instant = true;\n        instantTarget.range = false;\n        instantTarget.valueWithRefId = true;\n        delete instantTarget.maxDataPoints;\n        instantTarget.requestId += '_instant';\n\n        // Create range target\n        const rangeTarget: any = cloneDeep(target);\n        rangeTarget.format = 'time_series';\n        rangeTarget.instant = false;\n        instantTarget.range = true;\n\n        // Add both targets to activeTargets and queries arrays\n        activeTargets.push(instantTarget, rangeTarget);\n        queries.push(\n          this.createQuery(instantTarget, options, start, end),\n          this.createQuery(rangeTarget, options, start, end)\n        );\n        // If running only instant query in Explore, format as table\n      } else if (target.instant && options.app === CoreApp.Explore) {\n        const instantTarget: any = cloneDeep(target);\n        instantTarget.format = 'table';\n        queries.push(this.createQuery(instantTarget, options, start, end));\n        activeTargets.push(instantTarget);\n      } else {\n        queries.push(this.createQuery(target, options, start, end));\n        activeTargets.push(target);\n      }\n    }\n\n    return {\n      queries,\n      activeTargets,\n    };\n  };\n\n  processTargetV2(target: PromQuery, request: DataQueryRequest<PromQuery>) {\n    return {\n      ...target,\n      queryType: PromQueryType.timeSeriesQuery,\n      requestId: request.panelId + target.refId,\n      // We need to pass utcOffsetSec to backend to calculate aligned range\n      utcOffsetSec: this.timeSrv.timeRange().to.utcOffset() * 60,\n    };\n  }\n\n  query(request: ExtendedDataQueryRequest<PromQuery>): Observable<DataQueryResponse> {\n    if (this.access === 'proxy') {\n      const targets = request.targets.map((target) => this.processTargetV2(target, request));\n      return super\n        .query({ ...request, targets })\n        .pipe(\n          map((response) =>\n            transformV2(response, request, {})\n          )\n        );\n      // Run queries trough browser/proxy\n    } else {\n      const start = this.getPrometheusTime(request.range.from, false);\n      const end = this.getPrometheusTime(request.range.to, true);\n      const { queries, activeTargets } = this.prepareTargets(request, start, end);\n\n\n      if (request.targets.every(t => t.refId === \"Anno\")) {\n        const query = { ...request.targets[0], expr: queries[0].expr } as PromQueryRequest\n        return this.performAnnotationQuery({ ...query, start, end })\n      }\n\n      // No valid targets, return the empty result to save a round trip.\n      if (!queries || !queries.length) {\n        return of({\n          data: [],\n          state: LoadingState.Done,\n        });\n      }\n\n      if (request.app === CoreApp.Explore) {\n        return this.exploreQuery(queries, activeTargets, end);\n      }\n\n      return this.panelsQuery(queries, activeTargets, end, request.requestId, request.scopedVars);\n    }\n  }\n\n  private exploreQuery(queries: PromQueryRequest[], activeTargets: PromQuery[], end: number) {\n    let runningQueriesCount = queries.length;\n\n    const subQueries = queries.map((query, index) => {\n      const target = activeTargets[index];\n\n      const filterAndMapResponse = pipe(\n        // Decrease the counter here. We assume that each request returns only single value and then completes\n        // (should hold until there is some streaming requests involved).\n        tap(() => runningQueriesCount--),\n        filter((response: any) => (!response.cancelled)),\n        map((response: any) => {\n          const data = transform(response, {\n            query,\n            target,\n            responseListLength: queries.length,\n          });\n          return {\n            data: data.dataFrame,\n            trace: data.traceResult ? [data.traceResult] : [],\n            key: query.requestId,\n            state: runningQueriesCount === 0 ? LoadingState.Done : LoadingState.Loading,\n          } as DataQueryResponse;\n        })\n      );\n\n      return this.runQuery(query, end, filterAndMapResponse);\n    });\n\n    return merge(...subQueries);\n  }\n\n  private panelsQuery(\n    queries: PromQueryRequest[],\n    activeTargets: PromQuery[],\n    end: number,\n    requestId: string,\n    scopedVars: ScopedVars\n  ) {\n    const observables = queries.map((query, index) => {\n      const target = activeTargets[index];\n\n      const filterAndMapResponse = pipe(\n        filter((response: any) => (!response.cancelled)),\n        map((response: any) => {\n          return transform(response, {\n            query,\n            target,\n            responseListLength: queries.length,\n            scopedVars,\n          });\n        })\n      );\n\n      return this.runQuery(query, end, filterAndMapResponse);\n    });\n\n    return forkJoin(observables).pipe(\n      map((results) => {\n        const data = results.map(r => r.dataFrame).reduce((result, current) => {\n          return [...result, ...current];\n        }, []);\n        return {\n          data: data,\n          trace: results.map((result) => result.traceResult).filter((result) => result),\n          key: requestId,\n          state: LoadingState.Done,\n        };\n      })\n    );\n  }\n\n  private runQuery<T>(query: PromQueryRequest, end: number, filter: OperatorFunction<any, T>): Observable<T> {\n    if (query.instant) {\n      return this.performInstantQuery(query, end).pipe(filter);\n    }\n\n    return this.performTimeSeriesQuery(query, query.start, query.end).pipe(filter);\n  }\n\n  createQuery(target: PromQuery, options: ExtendedDataQueryRequest<PromQuery>, start: number, end: number) {\n    const query: PromQueryRequest = {\n      hinting: target.hinting,\n      instant: target.instant,\n      exemplar: target.exemplar,\n      step: 0,\n      expr: '',\n      requestId: target.requestId,\n      refId: target.refId,\n      start: 0,\n      end: 0,\n    };\n    const range = Math.ceil(end - start);\n\n    // options.interval is the dynamically calculated interval\n    let interval: number = rangeUtil.intervalToSeconds(options.interval);\n    // Minimum interval (\"Min step\"), if specified for the query, or same as interval otherwise.\n    const minInterval = rangeUtil.intervalToSeconds(\n      this.templateSrv.replace(target.interval || options.interval, options.scopedVars)\n    );\n    // Scrape interval as specified for the query (\"Min step\") or otherwise taken from the datasource.\n    // Min step field can have template variables in it, make sure to replace it.\n    const scrapeInterval = target.interval\n      ? rangeUtil.intervalToSeconds(this.templateSrv.replace(target.interval, options.scopedVars))\n      : rangeUtil.intervalToSeconds(this.interval);\n\n    const intervalFactor = target.intervalFactor || 1;\n    // Adjust the interval to take into account any specified minimum and interval factor plus Prometheus limits\n    const adjustedInterval = this.adjustInterval(interval, minInterval, range, intervalFactor);\n    let scopedVars = {\n      ...options.scopedVars,\n      ...this.getRangeScopedVars(options.range),\n      ...this.getRateIntervalScopedVariable(adjustedInterval, scrapeInterval),\n    };\n    // If the interval was adjusted, make a shallow copy of scopedVars with updated interval vars\n    if (interval !== adjustedInterval) {\n      interval = adjustedInterval;\n      scopedVars = Object.assign({}, options.scopedVars, {\n        __interval: { text: interval + 's', value: interval + 's' },\n        __interval_ms: { text: interval * 1000, value: interval * 1000 },\n        ...this.getRateIntervalScopedVariable(interval, scrapeInterval),\n        ...this.getRangeScopedVars(options.range),\n      });\n    }\n    query.step = interval;\n\n    let expr = target.expr;\n\n    // Apply adhoc filters\n    expr = this.enhanceExprWithAdHocFilters(expr);\n\n    // Apply WITH templates\n    const dashboardUID = options.dashboardUID || options.app || \"\"\n    expr = mergeTemplateWithQuery(expr, this.withTemplates.find(t => t.uid === dashboardUID))\n\n    // Only replace vars in expression after having (possibly) updated interval vars\n    query.expr = this.templateSrv.replace(expr, scopedVars, this.interpolateQueryExpr);\n\n    // Align query interval with step to allow query caching and to ensure\n    // that about-same-time query results look the same.\n    const adjusted = alignRange(start, end, query.step, this.timeSrv.timeRange().to.utcOffset() * 60);\n    query.start = adjusted.start;\n    query.end = adjusted.end;\n    this._addTracingHeaders(query, options);\n\n    query.trace = target.trace\n\n    return query;\n  }\n\n  getRateIntervalScopedVariable(interval: number, scrapeInterval: number) {\n    // Fall back to the default scrape interval of 15s if scrapeInterval is 0 for some reason.\n    if (scrapeInterval === 0) {\n      scrapeInterval = 15;\n    }\n    const rateInterval = Math.max(interval + scrapeInterval, 4 * scrapeInterval);\n    return { __rate_interval: { text: rateInterval + 's', value: rateInterval + 's' } };\n  }\n\n  adjustInterval(interval: number, minInterval: number, range: number, intervalFactor: number) {\n    // Prometheus will drop queries that might return more than 11000 data points.\n    // Calculate a safe interval as an additional minimum to take into account.\n    // Fractional safeIntervals are allowed, however serve little purpose if the interval is greater than 1\n    // If this is the case take the ceil of the value.\n    let safeInterval = range / 11000;\n    if (safeInterval > 1) {\n      safeInterval = Math.ceil(safeInterval);\n    }\n    return Math.max(interval * intervalFactor, minInterval, safeInterval);\n  }\n\n  performTimeSeriesQuery(query: PromQueryRequest, start: number, end: number) {\n    if (start > end) {\n      throw { message: 'Invalid time range' };\n    }\n\n    const url = '/api/v1/query_range';\n    const data: any = {\n      query: query.expr,\n      start,\n      end,\n      step: query.step,\n    };\n    if (query.trace) {\n      data.trace = \"1\"\n    }\n\n    if (this.queryTimeout) {\n      data['timeout'] = this.queryTimeout;\n    }\n\n    return this._request<PromDataSuccessResponse<PromMatrixData>>(url, data, {\n      requestId: query.requestId,\n      headers: query.headers,\n    }).pipe(\n      catchError((err: FetchError<PromDataErrorResponse<PromMatrixData>>) => {\n        if (err.cancelled) {\n          return of(err);\n        }\n\n        return throwError(this.handleErrors(err, query));\n      })\n    );\n  }\n\n  performInstantQuery(\n    query: PromQueryRequest,\n    time: number\n  ): Observable<FetchResponse<PromDataSuccessResponse<PromVectorData | PromScalarData>> | FetchError> {\n    const url = '/api/v1/query';\n    const data: any = {\n      query: query.expr,\n      time,\n    };\n    if (query.trace) {\n      data.trace = \"1\"\n    }\n\n    if (this.queryTimeout) {\n      data['timeout'] = this.queryTimeout;\n    }\n\n    return this._request<PromDataSuccessResponse<PromVectorData | PromScalarData>>(url, data, {\n      requestId: query.requestId,\n      headers: query.headers,\n    }).pipe(\n      catchError((err: FetchError<PromDataErrorResponse<PromVectorData | PromScalarData>>) => {\n        if (err.cancelled) {\n          return of(err);\n        }\n\n        return throwError(this.handleErrors(err, query));\n      })\n    );\n  }\n\n  handleErrors = (err: any, target: PromQuery) => {\n    const error: DataQueryError = {\n      message: (err && err.statusText) || 'Unknown error during query transaction. Please check JS console logs.',\n      refId: target.refId,\n    };\n\n    if (err.data) {\n      if (typeof err.data === 'string') {\n        error.message = err.data;\n      } else if (err.data.error) {\n        error.message = safeStringifyValue(err.data.error);\n      }\n    } else if (err.message) {\n      error.message = err.message;\n    } else if (typeof err === 'string') {\n      error.message = err;\n    }\n\n    error.status = err.status;\n    error.statusText = err.statusText;\n\n    return error;\n  };\n\n  metricFindQuery(query: string, options?: LegacyMetricFindQueryOptions) {\n    if (!query) {\n      return Promise.resolve([]);\n    }\n\n    const range = options?.range ?? getDefaultTimeRange()\n    const scopedVars = {\n      __interval: { text: this.interval, value: this.interval },\n      __interval_ms: { text: rangeUtil.intervalToMs(this.interval), value: rangeUtil.intervalToMs(this.interval) },\n      ...this.getRangeScopedVars(range),\n    };\n    const interpolated = this.templateSrv.replace(query, scopedVars, this.interpolateQueryExpr);\n    const metricFindQuery = new PrometheusMetricFindQuery(this, interpolated);\n    return metricFindQuery.process(range);\n  }\n\n\n  getRangeScopedVars(range: TimeRange = this.timeSrv.timeRange()) {\n    const msRange = range.to.diff(range.from);\n    const sRange = Math.round(msRange / 1000);\n    return {\n      __range_ms: { text: msRange, value: msRange },\n      __range_s: { text: sRange, value: sRange },\n      __range: { text: sRange + 's', value: sRange + 's' },\n    };\n  }\n\n  prepareQuery = (annotation: AnnotationQuery<PromQuery>): PromQuery | undefined => {\n    const { expr = '', datasource, step, legendFormat } = annotation;\n\n    if (!expr) {\n      return undefined\n    }\n\n    return {\n      expr,\n      range: true,\n      instant: false,\n      exemplar: false,\n      interval: step || ANNOTATION_QUERY_STEP_DEFAULT,\n      refId: 'X',\n      datasource,\n      legendFormat: legendFormat ?? \"\"\n    };\n  };\n\n  performAnnotationQuery = (query: PromQueryRequest) => {\n    const datasource = {\n      uid: this.templateSrv.replace(query.datasource!.uid, {}),\n      type: query.datasource!.type\n    };\n    return getBackendSrv()\n      .fetch<BackendDataSourceResponse>({\n        url: '/api/ds/query',\n        method: 'POST',\n        data: {\n          from: (query.start * 1000).toString(),\n          to: (query.end * 1000).toString(),\n          queries: [{ ...query, datasource, refId: \"X\" }],\n        },\n        requestId: query.requestId,\n      }).pipe(\n        map((rsp: FetchResponse<BackendDataSourceResponse>) => {\n          return toDataQueryResponse({ data: rsp.data });\n        })\n      )\n  }\n\n  processEvents = (annotation: AnnotationQuery<PromQuery>, frames: DataFrame[]) => {\n    if (!frames || !frames.length) {\n      return of([])\n    }\n\n    const { tagKeys = '', titleFormat = '', textFormat = '', useValueForTime } = annotation;\n\n    const step = rangeUtil.intervalToSeconds(annotation.step || ANNOTATION_QUERY_STEP_DEFAULT) * 1000;\n    const tagKeysArray = tagKeys.split(',');\n\n    const eventList: AnnotationEvent[] = [];\n\n    for (const frame of frames) {\n      if (frame.fields.length === 0) {\n        continue;\n      }\n      const timeField = frame.fields[0];\n      const valueField = frame.fields[1];\n      const labels = valueField?.labels || {};\n\n      const tags = Object.keys(labels)\n        .filter((label) => tagKeysArray.includes(label))\n        .map((label) => labels[label]);\n\n      const timeValueTuple: Array<[number, number]> = [];\n\n      let idx = 0;\n      valueField.values.toArray().forEach((value: string) => {\n        let timeStampValue: number;\n        let valueValue: number;\n        const time = timeField.values.get(idx);\n\n        // If we want to use value as a time, we use value as timeStampValue and valueValue will be 1\n        if (useValueForTime) {\n          timeStampValue = Math.floor(parseFloat(value));\n          valueValue = 1;\n        } else {\n          timeStampValue = Math.floor(parseFloat(time));\n          valueValue = parseFloat(value);\n        }\n\n        idx++;\n        timeValueTuple.push([timeStampValue, valueValue]);\n      });\n\n      const activeValues = timeValueTuple.filter((value) => value[1] >= 1);\n      const activeValuesTimestamps = activeValues.map((value) => value[0]);\n\n      // Instead of creating singular annotation for each active event we group events into region if they are less\n      // or equal to `step` apart.\n      let latestEvent: AnnotationEvent | null = null;\n\n      for (const timestamp of activeValuesTimestamps) {\n        // We already have event `open` and we have new event that is inside the `step` so we just update the end.\n        if (latestEvent && (latestEvent.timeEnd ?? 0) + step >= timestamp) {\n          latestEvent.timeEnd = timestamp;\n          continue;\n        }\n\n        // Event exists but new one is outside the `step` so we add it to eventList.\n        if (latestEvent) {\n          eventList.push(latestEvent);\n        }\n\n        // We start a new region.\n        latestEvent = {\n          time: timestamp,\n          timeEnd: timestamp,\n          annotation,\n          title: renderLegendFormat(titleFormat, labels),\n          tags,\n          text: renderLegendFormat(textFormat, labels),\n        };\n      }\n\n      if (latestEvent) {\n        // Finish up last point if we have one\n        latestEvent.timeEnd = activeValuesTimestamps[activeValuesTimestamps.length - 1];\n        eventList.push(latestEvent);\n      }\n    }\n\n    return of(eventList);\n  };\n\n  async getTagKeys(options?: any) {\n    if (options?.series) {\n      // Get tags for the provided series only\n      const seriesLabels: Array<Record<string, string[]>> = await Promise.all(\n        options.series.map((series: string) => this.languageProvider.fetchSeriesLabels(series))\n      );\n      // Combines tags from all options.series provided\n      let tags: string[] = [];\n      seriesLabels.map((value) => (tags = tags.concat(Object.keys(value))));\n      const uniqueLabels = [...new Set(tags)];\n      return uniqueLabels.map((value: any) => ({ text: value }));\n    } else {\n      // Get all tags\n      const limit = this.getLimitMetrics('maxTagKeys');\n      const result = await this.metadataRequest('/api/v1/labels', { limit });\n      return result?.data?.data?.map((value: any) => ({ text: value })) ?? [];\n    }\n  }\n\n  async getTagValues(options: { key?: string } = {}) {\n    const limit = this.getLimitMetrics('maxTagValues');\n    const result = await this.metadataRequest(`/api/v1/label/${options.key}/values`, { limit });\n    return result?.data?.data?.map((value: any) => ({ text: value })) ?? [];\n  }\n\n  async testDatasource() {\n    const now = new Date().getTime();\n    const request: ExtendedDataQueryRequest<PromQuery> = {\n      targets: [{ refId: 'test', expr: '1+1', instant: true }],\n      requestId: `${this.id}-health`,\n      scopedVars: {},\n      dashboardId: 0,\n      panelId: 0,\n      interval: '1m',\n      intervalMs: 60000,\n      maxDataPoints: 1,\n      timezone: '',\n      app: DATASOURCE_TYPE,\n      startTime: 0,\n      range: {\n        from: dateTime(now - 1000),\n        to: dateTime(now),\n        raw: { from: 'now-1s', to: 'now' },\n      },\n    } as DataQueryRequest<PromQuery>;\n\n    return lastValueFrom(this.query(request))\n      .then((res: DataQueryResponse) => {\n        if (!res || !res.data || res.state !== LoadingState.Done) {\n          return { status: 'error', message: `Error reading Prometheus: ${res?.error?.message}` };\n        } else {\n          return {\n            status: 'success',\n            message: 'Data source is working',\n          };\n        }\n      })\n      .catch((err: any) => {\n        console.error('VictoriaMetrics Error', err);\n        return { status: 'error', message: err.message };\n      });\n  }\n\n  interpolateVariablesInQueries(queries: PromQuery[], scopedVars: ScopedVars): PromQuery[] {\n    let expandedQueries = queries;\n    if (queries && queries.length) {\n      expandedQueries = queries.map((query) => ({\n        ...query,\n        datasource: this.getRef(),\n        expr: this.templateSrv.replace(query.expr, scopedVars, this.interpolateQueryExpr),\n        interval: this.templateSrv.replace(query.interval, scopedVars),\n      }));\n    }\n    return expandedQueries;\n  }\n\n  getQueryHints(query: PromQuery, result: any[]) {\n    return getQueryHints(query.expr ?? '', result, this);\n  }\n\n  getInitHints() {\n    return getInitHints(this);\n  }\n\n  async loadRules() {\n    try {\n      const res = await this.metadataRequest('/api/v1/rules', {}, { showErrorAlert: false });\n      const groups = res.data?.data?.groups;\n\n      if (groups) {\n        this.ruleMappings = extractRuleMappingFromGroups(groups);\n      }\n    } catch (e) {\n      console.log('Rules API is experimental. Ignore next error.');\n      console.error(e);\n    }\n  }\n\n  modifyQuery(query: PromQuery, action: QueryFixAction): PromQuery {\n    let expression = query.expr ?? '';\n    switch (action.type) {\n      case 'ADD_FILTER': {\n        const { key, value } = action.options ?? {};\n        if (key && value) {\n          expression = addLabelToQuery(expression, key, value);\n        }\n\n        break;\n      }\n      case 'ADD_FILTER_OUT': {\n        const { key, value } = action.options ?? {};\n        if (key && value) {\n          expression = addLabelToQuery(expression, key, value, '!=');\n        }\n        break;\n      }\n      case 'ADD_HISTOGRAM_QUANTILE': {\n        expression = `histogram_quantile(0.95, sum(rate(${expression}[$__rate_interval])) by (le))`;\n        break;\n      }\n      case 'ADD_RATE': {\n        expression = `rate(${expression}[$__rate_interval])`;\n        break;\n      }\n      case 'ADD_SUM': {\n        expression = `sum(${expression.trim()}) by ($1)`;\n        break;\n      }\n      case 'EXPAND_RULES': {\n        if (action.options) {\n          expression = expandRecordingRules(expression, action.options);\n        }\n        break;\n      }\n      default:\n        break;\n    }\n    return { ...query, expr: expression };\n  }\n\n  getPrometheusTime(date: string | DateTime, roundUp: boolean) {\n    if (typeof date === 'string') {\n      date = dateMath.parse(date, roundUp)!;\n    }\n\n    return Math.ceil(date.valueOf() / 1000);\n  }\n\n  getTimeRangeParams(): { start: string; end: string } {\n    const range = this.timeSrv.timeRange();\n    return {\n      start: this.getPrometheusTime(range.from, false).toString(),\n      end: this.getPrometheusTime(range.to, true).toString(),\n    };\n  }\n\n  getLimitMetrics(key: keyof LimitMetrics): number {\n    return this.limitMetrics[key] || 0;\n  }\n\n  getOriginalMetricName(labelData: { [key: string]: string }) {\n    return getOriginalMetricName(labelData);\n  }\n\n  enhanceExprWithAdHocFilters(expr: string) {\n    // @ts-ignore\n    const adhocFilters = this.templateSrv.getAdhocFilters(this.name);\n\n    return adhocFilters.reduce((acc: string, filter: { key?: any; operator?: any; value?: any }) => {\n      const { key, operator } = filter;\n      let { value } = filter;\n      if (operator === '=~' || operator === '!~') {\n        value = prometheusRegularEscape(value);\n      }\n      return addLabelToQuery(acc, key, value, operator);\n    }, expr);\n  }\n\n  // Used when running queries trough backend\n  filterQuery(query: PromQuery): boolean {\n    return !(query.hide || !query.expr);\n  }\n\n  // Used when running queries trough backend\n  applyTemplateVariables(target: PromQuery, scopedVars: ScopedVars): Record<string, any> {\n    const variables = cloneDeep(scopedVars);\n\n    // We want to interpolate these variables on backend\n    delete variables.__interval;\n    delete variables.__interval_ms;\n\n    //Add ad hoc filters\n    const expr = this.enhanceExprWithAdHocFilters(target.expr);\n\n    return {\n      ...target,\n      legendFormat: this.templateSrv.replace(target.legendFormat, variables),\n      expr: this.templateSrv.replace(expr, variables, this.interpolateQueryExpr),\n      interval: this.templateSrv.replace(target.interval, variables),\n    };\n  }\n\n  getVariables(): string[] {\n    return this.templateSrv.getVariables().map((v) => `$${v.name}`);\n  }\n\n  interpolateString(string: string) {\n    const operation = string.includes(\"__name__\")\n      ? unescapeMetricNameSpecialCharacters\n      : escapeMetricNameSpecialCharacters;\n    return this.templateSrv.replace(operation(string), undefined, this.interpolateQueryExpr);\n  }\n\n  withTemplatesUpdate(withTemplates: WithTemplate[]) {\n    this.withTemplates = withTemplates ?? [];\n  }\n\n  getAdjustedInterval(timeRange: TimeRange): { start: string; end: string } {\n    return {\n      start: getVictoriaMetricsTime(timeRange.from, false).toString(),\n      end: getVictoriaMetricsTime(timeRange.to, true).toString(),\n    };\n  }\n}\n\n/**\n * Align query range to step.\n * Rounds start and end down to a multiple of step.\n * @param start Timestamp marking the beginning of the range.\n * @param end Timestamp marking the end of the range.\n * @param step Interval to align start and end with.\n * @param utcOffsetSec Number of seconds current timezone is offset from UTC\n */\n\nexport function alignRange(\n  start: number,\n  end: number,\n  step: number,\n  utcOffsetSec: number\n): { end: number; start: number } {\n  const alignedEnd = Math.floor((end + utcOffsetSec) / step) * step - utcOffsetSec;\n  const alignedStart = Math.floor((start + utcOffsetSec) / step) * step - utcOffsetSec;\n  return {\n    end: alignedEnd,\n    start: alignedStart,\n  };\n}\n\nexport function extractRuleMappingFromGroups(groups: any[]) {\n  return groups.reduce(\n    (mapping, group) =>\n      group.rules\n        .filter((rule: any) => rule.type === 'recording')\n        .reduce(\n          (acc: { [key: string]: string }, rule: any) => ({\n            ...acc,\n            [rule.name]: rule.query,\n          }),\n          mapping\n        ),\n    {}\n  );\n}\n\n// NOTE: these two functions are very similar to the escapeLabelValueIn* functions\n// in language_utils.ts, but they are not exactly the same algorithm, and we found\n// no way to reuse one in the another or vice versa.\nexport function prometheusRegularEscape(value: any) {\n  return typeof value === 'string' ? value.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\\\\\'\") : value;\n}\n\nexport function prometheusSpecialRegexEscape(value: any) {\n  return typeof value === 'string' ? value.replace(/\\\\/g, '\\\\\\\\\\\\\\\\').replace(/[$^*{}\\[\\]'+?.()|]/g, '\\\\\\\\$&') : value;\n}\n","import { isFunction } from '../util/isFunction';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { identity } from '../util/identity';\nexport function tap(observerOrNext, error, complete) {\n    var tapObserver = isFunction(observerOrNext) || error || complete\n        ?\n            { next: observerOrNext, error: error, complete: complete }\n        : observerOrNext;\n    return tapObserver\n        ? operate(function (source, subscriber) {\n            var _a;\n            (_a = tapObserver.subscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n            var isUnsub = true;\n            source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                var _a;\n                (_a = tapObserver.next) === null || _a === void 0 ? void 0 : _a.call(tapObserver, value);\n                subscriber.next(value);\n            }, function () {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.complete) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                subscriber.complete();\n            }, function (err) {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.error) === null || _a === void 0 ? void 0 : _a.call(tapObserver, err);\n                subscriber.error(err);\n            }, function () {\n                var _a, _b;\n                if (isUnsub) {\n                    (_a = tapObserver.unsubscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                }\n                (_b = tapObserver.finalize) === null || _b === void 0 ? void 0 : _b.call(tapObserver);\n            }));\n        })\n        :\n            identity;\n}\n//# sourceMappingURL=tap.js.map","import { DataSourcePlugin } from '@grafana/data';\n\nimport PromQueryEditorByApp from './components/PromQueryEditorByApp';\nimport { ConfigEditor } from './configuration/ConfigEditor';\nimport { PrometheusDatasource } from './datasource';\n\nexport const plugin = new DataSourcePlugin(PrometheusDatasource)\n  .setQueryEditor(PromQueryEditorByApp)\n  .setConfigEditor(ConfigEditor)\n","// Copyright (c) 2022 Grafana Labs\n// Modifications Copyright (c) 2022 VictoriaMetrics\n// 2022-10-09: switch imports 'packages/grafana-ui/src' to '@grafana/ui'\n// A detailed history of changes can be seen here - https://github.com/VictoriaMetrics/grafana-datasource\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useRef } from 'react';\n\nimport { SIGV4ConnectionConfig } from '@grafana/aws-sdk';\nimport { DataSourcePluginOptionsEditorProps, DataSourceSettings } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { AlertingSettings, DataSourceHttpSettings } from '@grafana/ui';\n\nimport { PromOptions } from '../types';\n\nimport { AzureAuthSettings } from './AzureAuthSettings';\nimport { hasCredentials, setDefaultCredentials, resetCredentials } from './AzureCredentialsConfig';\nimport { HelpfulLinks } from \"./HelpfulLinks\";\nimport { LimitsSettings } from \"./LimitsSettings\";\nimport { PromSettings } from './PromSettings';\n\nexport type Props = DataSourcePluginOptionsEditorProps<PromOptions>;\nexport const ConfigEditor = (props: Props) => {\n  const { options, onOptionsChange } = props;\n  // use ref so this is evaluated only first time it renders and the select does not disappear suddenly.\n  const showAccessOptions = useRef(props.options.access === 'direct');\n\n  const azureAuthSettings = {\n    azureAuthSupported: config.azureAuthEnabled,\n    getAzureAuthEnabled: (config: DataSourceSettings<any, any>): boolean => hasCredentials(config),\n    setAzureAuthEnabled: (config: DataSourceSettings<any, any>, enabled: boolean) =>\n      enabled ? setDefaultCredentials(config) : resetCredentials(config),\n    azureSettingsUI: AzureAuthSettings,\n  };\n\n  return (\n    <>\n      <HelpfulLinks/>\n\n      <DataSourceHttpSettings\n        defaultUrl=\"http://localhost:8428\"\n        dataSourceConfig={options}\n        showAccessOptions={showAccessOptions.current}\n        onChange={onOptionsChange}\n        sigV4AuthToggleEnabled={config.sigV4AuthEnabled}\n        azureAuthSettings={azureAuthSettings}\n        renderSigV4Editor={<SIGV4ConnectionConfig {...props}></SIGV4ConnectionConfig>}\n      />\n\n      <AlertingSettings<PromOptions> {...props}/>\n\n      <PromSettings {...props}/>\n\n      <LimitsSettings {...props}/>\n    </>\n  );\n};\n"],"names":["inProgress","Object","defineProperty","exports","value","runtime","rxjs","data","tslib","React","ui","_interopDefaultLegacy","e","React__default","isFunction","ctorFunc","UnsubscriptionError","errors","instance","this","Error","call","stack","message","length","map","err","i","toString","join","name","prototype","create","constructor","arrRemove","arr","item","index","indexOf","splice","Subscription","initialTeardown","closed","_parentage","_finalizers","empty","unsubscribe","e_1","_a","e_2","_b","Array","isArray","_parentage_1","__values","_parentage_1_1","next","done","remove","e_1_1","error","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","__spreadArray","__read","push","e_2_1","add","teardown","_hasParent","_addParent","parent","includes","_removeParent","EMPTY","timeoutProvider","handler","timeout","args","_i","arguments","setTimeout","apply","noop","Subscriber","_super","destination","_this","isStopped","EMPTY_OBSERVER","__extends","complete","SafeSubscriber","_next","_error","_complete","Function","bind","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","undefined","OperatorSubscriber","onNext","onComplete","onError","onFinalize","shouldUnsubscribe","closed_1","project","thisArg","init","source","subscriber","subscribe","lift","hasLift","liftedSource","TypeError","__defProp$1","__defProps$1","defineProperties","__getOwnPropDescs$1","getOwnPropertyDescriptors","__getOwnPropSymbols$1","getOwnPropertySymbols","__hasOwnProp$1","hasOwnProperty","__propIsEnum$1","propertyIsEnumerable","__defNormalProp$1","obj","key","enumerable","configurable","writable","__spreadValues$1","a","b","prop","__spreadProps$1","__defProp","__defProps","__getOwnPropDescs","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","__spreadProps","RUNNING_STATUSES","isRunning","status","DatasourceWithAsyncBackend","DataSourceWithBackend","instanceSettings","asyncQueryDataSupport","super","runningQueries","requestCounter","cancel","target","storeQuery","shouldCancel","query","request","targets","filterQuery","filter","of","all","hide","doSingle","merge","queryInfo","JSON","stringify","existingQueryInfo","getQuery","removeQuery","queryID","allData","req","requestId","options","getNextQuery","rsp","meta","custom","isCustomMeta","request2","range","intervalMs","maxDataPoints","_query","queryFlow","queries","datasource","getRef","datasourceId","id","applyTemplateVariables","scopedVars","from","valueOf","to","headers","method","url","getBackendSrv","fetch","pipe","result","toDataQueryResponse","process","frame","fields","onCancel","postResource","queryId","catch","isHandled","console","Observable","nextQuery","subscription","loadingState","LoadingState","Loading","nextRequestDelay","count","observer","state","checkstate","_shouldCancel","data$1","Streaming","Done","RunQueryButtons","props","running","setRunning","useState","stopping","setStopping","lastState","setLastState","lastQuery","setLastQuery","useEffect","onCancelQuery","createElement","Fragment","Button","variant","enableRun","size","onClick","onRunQuery","icon","disabled","standardRegions","AwsAuthType","AwsAuthType2","awsAuthProviderOptions","label","EC2IAMRole","GrafanaAssumeRole","Default","Keys","Credentials","StyleSheet","_insertTag","tag","before","tags","insertionPoint","nextSibling","prepend","container","firstChild","insertBefore","isSpeedy","speedy","ctr","nonce","_proto","hydrate","nodes","forEach","insert","rule","document","setAttribute","appendChild","createTextNode","createStyleElement","sheet","styleSheets","ownerNode","sheetForTag","insertRule","cssRules","flush","parentNode","removeChild","MS","MOZ","WEBKIT","COMMENT","RULESET","DECLARATION","KEYFRAMES","abs","Math","String","fromCharCode","assign","trim","replace","pattern","replacement","indexof","search","charat","charCodeAt","substr","begin","end","slice","strlen","sizeof","append","array","line","column","position","character","characters","node","root","type","children","copy","prev","peek","caret","token","alloc","dealloc","delimit","delimiter","whitespace","escaping","commenter","identifier","compile","parse","rules","rulesets","pseudo","points","declarations","offset","atrule","property","previous","variable","scanning","ampersand","reference","comment","declaration","ruleset","post","j","k","x","y","z","serialize","callback","output","element","middleware","collection","memoize","fn","cache","arg","identifierWithPointTracking","fixedElements","WeakMap","compat","isImplicitRule","get","set","parsed","toRules","getRules","parentRules","removeLabel","prefix","hash","func","isBrowser$1","getServerStylisCache","has","ret","defaultStylisPlugins","combine","exec","match","createCache","ssrStyles","querySelectorAll","getAttribute","head","_insert","stylisPlugins","inserted","nodesToHydrate","attrib","split","omnipresentPlugins","currentSheet","finalizingPlugins","serializer","concat","selector","serialized","shouldCache","styles","_finalizingPlugins","_serializer","serverStylisCache","registered","unitlessKeys","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","fontWeight","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","WebkitLineClamp","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","hyphenateRegex","animationRegex","isCustomProperty","isProcessableValue","processStyleName","styleName","toLowerCase","processStyleValue","p1","p2","cursor","handleInterpolation","mergedProps","interpolation","__emotion_styles","anim","string","_key","interpolated","createStringFromObject","previousCursor","cached","labelPattern","serializeStyles","stringMode","strings","raw","lastIndex","identifierName","str","h","len","murmur2","isBrowser","getRegisteredStyles","registeredStyles","classNames","rawClassName","className","insertWithoutScoping","css","classnames","cls","toAdd","_createEmotion","_len","isStringTag","registerStyles","stylesForSSR","current","maybeStyles","insertStyles","cx","_len4","_key4","injectGlobal","_len3","_key3","keyframes","_len2","_key2","animation","ids","createEmotion","__defProp$7","__defProps$6","__getOwnPropDescs$6","__getOwnPropSymbols$7","__hasOwnProp$7","__propIsEnum$7","__defNormalProp$7","__spreadValues$7","__spreadProps$6","DEFAULT_LABEL_WIDTH","DS_TYPES_THAT_SUPPORT_TEMP_CREDS","toOption","isAwsAuthType","some","opt","ConnectionConfig","_c","_d","_e","_f","_g","_h","isARNInstructionsOpen","setIsARNInstructionsOpen","regions","setRegions","loadRegions","onOptionsChange","skipHeader","skipEndpoint","labelWidth","inExperimentalAuthComponent","profile","jsonData","database","tempCredsFeatureEnabled","config","featureToggles","awsDatasourcesTempCredentials","awsAssumeRoleEnabled","awsAllowedAuthProviders","useMemo","provider","currentProvider","find","p","authType","then","regions2","inputWidth","useStyles2","getStyles","FieldSet","InlineField","tooltip","Select","defaultValue","onChange","option","onUpdateDatasourceJsonDataOptionSelect","menuShouldPortal","Input","placeholder","onUpdateDatasourceJsonDataOption","secureJsonFields","accessKey","ButtonGroup","ToolbarButton","onUpdateDatasourceResetOption","secureJsonData","onUpdateDatasourceSecureJsonDataOption","secretKey","assumeRoleInstructions","Collapse","collapsible","isOpen","onToggle","externalId","href","rel","assumeRoleArn","defaultEndpoint","endpoint","region","defaultRegion","allowCustomValue","formatCreateLabel","r","maxWidth","__defProp$6","__defProps$5","__getOwnPropDescs$5","__getOwnPropSymbols$6","__hasOwnProp$6","__propIsEnum$6","__defNormalProp$6","__spreadValues$6","__spreadProps$5","connectionConfigProps","awsDataSourceSettings","_a2","_b2","_c2","_d2","dataSourceSettings","sigV4AuthType","sigV4Profile","sigV4AssumeRoleArn","sigV4ExternalId","sigV4Region","sigV4Endpoint","sigV4AccessKey","sigV4SecretKey","t","o","n","s","l","u","f","g","default","d","c","m","E","q","Promise","throw","T","sent","trys","ops","Symbol","iterator","pop","S","R","I","A","getPreviousNonWhiteSpaceToken","getPreviousKeyword","is","TokenType","Operator","list","resolve","Boolean","StatementPosition","Unknown","OperatorType","Comparison","Logical","MacroType","Value","Filter","Group","Column","Table","Parenthesis","Whitespace","Keyword","Delimiter","Identifier","IdentifierQuote","Type","Number","Variable","SelectKeyword","WithKeyword","AfterSelectKeyword","AfterSelectArguments","AfterSelectFuncFirstArgument","SelectAlias","AfterFromKeyword","AfterTable","SchemaFuncFirstArgument","SchemaFuncExtraArgument","FromKeyword","AfterFrom","WhereKeyword","WhereComparisonOperator","WhereValue","AfterWhereFunctionArgument","AfterGroupByFunctionArgument","AfterWhereValue","AfterGroupByKeywords","AfterGroupBy","AfterOrderByKeywords","AfterOrderByFunction","AfterOrderByDirection","AfterIsOperator","AfterIsNotOperator","AfterSchema","SuggestionKind","Schemas","Tables","Columns","FunctionsWithArguments","GroupByKeywords","OrderByKeywords","FunctionsWithoutArguments","LimitKeyword","SortOrderDirectionKeyword","ComparisonOperators","LogicalOperators","SelectMacro","TableMacro","FilterMacro","GroupMacro","BoolValues","NullValue","NotKeyword","TemplateVariables","StarWildCard","CompletionItemPriority","High","MediumHigh","Medium","MediumLow","Low","CompletionItemKind","Method","Constructor","Field","Class","Struct","Interface","Module","Property","Event","Unit","Constant","Enum","EnumMember","Text","Color","File","Reference","Customcolor","Folder","TypeParameter","User","Issue","Snippet","CompletionItemInsertTextRule","KeepWhitespace","InsertAsSnippet","EditorMode","Builder","Code","isWhiteSpace","isParenthesis","isIdentifier","endsWith","Range","fromPositions","Set","getIfExists","suggestions","insertText","kind","sortText","w","isKeyword","isString","isNumber","isDoubleQuotedString","isVariable","isOperator","isTemplateVariable","v","getPreviousOfType","getPreviousUntil","getNextUntil","getNextNonWhiteSpaceToken","getNextOfType","O","editor","tokenize","getValue","language","_tokenBrand","getLineLength","startLineNumber","startColumn","endLineNumber","endColumn","getValueInRange","containsPosition","C","N","P","L","K","D","F","comments","lineComment","blockComment","brackets","autoClosingPairs","open","close","surroundingPairs","U","defaultToken","tokenPostfix","ignoreCase","keywords","operators","logicalOperators","comparisonOperators","builtinFunctions","builtinVariables","pseudoColumns","tokenizer","include","cases","templateVariables","macros","schemaTable","numbers","complexIdentifiers","bracketedIdentifier","quotedIdentifier","scopes","B","freeze","__proto__","SELECT","FROM","WHERE","GROUP","ORDER","BY","DESC","ASC","LIMIT","WITH","AS","SCHEMA","AND","OR","LOGICAL_OPERATORS","EQUALS","NOT_EQUALS","COMPARISON_OPERATORS","STD_OPERATORS","conf","G","_","W","table","schema","Y","title","V","Uint8Array","H","crypto","getRandomValues","msCrypto","X","Q","random","rng","test","$","Z","text","J","insertTextRules","documentation","description","command","ee","startsWith","te","logger","oe","attachDebugger","createLogger","ne","se","triggerCharacters","supportedFunctions","toLocaleLowerCase","operator","supportedOperators","supportedMacros","re","extensions","aliases","mimetypes","loader","completionProvider","ie","Map","le","ae","languages","getLanguages","register","setMonarchTokensProvider","setLanguageConfiguration","formatter","registerDocumentFormattingEditProvider","provideDocumentFormattingEdits","getFullModelRange","functions","Registry","suggestionKinds","positionResolvers","getTemplateSrv","getVariables","detail","M","customStatementPlacement","overrideDefault","customSuggestionKinds","applyTo","suggestionsResolver","schemas","completion","tables","currentToken","parseName","statementPosition","registerCompletionItemProvider","provideCompletionItems","ue","testData","singleLineFullQuery","tokens","singleLineFullQueryWithAggregation","multiLineFullQuery","multiLineFullQueryWithAggregation","singleLineEmptyQuery","singleLineTwoQueries","singleLineTwoQueriesWithAggregation","singleLineMultipleColumns","multiLineMultipleColumns","testStatementPosition","describe","beforeEach","lineNumber","expect","toContain","pe","button","paddingLeft","spacing","paddingRight","fe","useCallback","ge","display","flexDirection","direction","flexWrap","wrap","alignItems","gap","de","minHeight","ye","ce","wrapper","defaultProps","layout","paddingBottom","Ee","padding","backgroundColor","colors","background","secondary","borderRadius","shape","qe","forwardRef","items","renderItem","ref","Se","Ie","SelectContainer","Re","valueContainer","fontSize","color","whiteSpace","borderColor","Ae","xe","marginLeft","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","invalidChild","AccessoryButton","EditorField","optional","tooltipInteractive","width","minWidth","typography","fontWeightMedium","fontStyle","field","marginBottom","primary","me","htmlFor","ReactUtils","getChildId","Tooltip","placement","content","theme","interactive","Icon","tabIndex","EditorFieldGroup","EditorHeader","EditorList","EditorRow","EditorRows","EditorSwitch","switch","Switch","FlexItem","grow","shrink","style","InlineSelect","ValueContainer","SingleValue","openMenuOnFocus","inputId","components","InputGroup","Children","isValidElement","invalid","cloneElement","LinkedToken","SQLEditor","onBlur","height","useRef","delete","getAction","run","CodeEditor","showMiniMap","showLineNumbers","onEditorDidMount","onDidChangeModelContent","addCommand","KeyMod","CtrlCmd","KeyCode","Enter","onKeyUp","keyCode","trigger","formatQuery","SQLEditorTestUtils","Space","Stack","getStandardSQLCompletionProvider","grafanaStandardSQLLanguage","grafanaStandardSQLLanguageConf","module","wait","lastCallAt","deferred","timer","pendingArgs","currentWait","getWait","currentTime","Date","getTime","isCold","leading","accumulate","clearTimeout","promise","reject","defer","argsIndex","results","thisDeferred","pluralRules","singularRules","uncountables","irregularPlurals","irregularSingles","sanitizeRule","RegExp","restoreCase","word","toUpperCase","charAt","sanitizeWord","replaceWord","replaceMap","keepMap","checkWord","bool","pluralize","inclusive","singular","plural","isPlural","isSingular","addPluralRule","addSingularRule","addUncountableRule","addIrregularRule","single","hasElementType","Element","hasMap","hasSet","hasArrayBuffer","ArrayBuffer","isView","equal","keys","it","entries","flags","$$typeof","warn","modules","installedModules","moduleId","loaded","_Highlighter2","__esModule","_extends","_interopRequireDefault","Highlighter","_highlightWordsCore","_propTypes2","_react","_memoizeOne2","_ref","_ref$activeClassName","activeClassName","_ref$activeIndex","activeIndex","activeStyle","autoEscape","_ref$caseSensitive","caseSensitive","findChunks","_ref$highlightClassName","highlightClassName","_ref$highlightStyle","highlightStyle","_ref$highlightTag","highlightTag","sanitize","searchWords","textToHighlight","_ref$unhighlightTag","unhighlightTag","_ref$unhighlightClassName","unhighlightClassName","unhighlightStyle","rest","_objectWithoutProperties","chunks","findAll","HighlightTag","highlightIndex","highlightClassNames","highlightStyles","memoizedLowercaseProps","object","mapped","chunk","start","highlight","highlightClass","isActive","propTypes","number","oneOfType","arrayOf","instanceOf","isRequired","_utils","combineChunks","fillInChunks","_ref$findChunks","defaultFindChunks","chunksToHighlight","totalLength","_ref2","sort","first","second","reduce","processedChunks","nextChunk","prevChunk","endIndex","max","_ref3","_ref3$sanitize","identity","searchWord","regex","_ref4","allChunks","env","NODE_ENV","REACT_ELEMENT_TYPE","for","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","marker","runClearTimeout","Item","nextTick","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","emptyFunction","invariant","warning","ReactPropTypesSecret","checkPropTypes","throwOnDirectAccess","ITERATOR_SYMBOL","ANONYMOUS","ReactPropTypes","createPrimitiveTypeChecker","symbol","any","createChainableTypeChecker","thatReturnsNull","typeChecker","propName","componentName","location","propFullName","PropTypeError","propValue","getPropType","expectedClass","expectedClassName","isNode","objectOf","propType","oneOf","expectedValues","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","shapeTypes","exact","allKeys","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","secret","cacheKey","chainedCheckType","expectedType","getPreciseType","every","iteratorFn","maybeIterable","getIteratorFn","step","entry","isSymbol","PropTypes","makeEmptyFunction","thatReturns","thatReturnsFalse","thatReturnsTrue","thatReturnsThis","thatReturnsArgument","validateFormat","format","condition","argIndex","framesToPop","printWarning","propIsEnumerable","test1","getOwnPropertyNames","test2","test3","letter","shouldUseNative","symbols","val","toObject","loggedTypeFailures","typeSpecs","values","getStack","typeSpecName","ex","shim","getShim","simpleIsEqual","resultFn","isEqual","lastThis","lastArgs","lastResult","calledOnce","isNewArgEqualToLast","newArg","newArgs","__WEBPACK_EXTERNAL_MODULE__7644__","__WEBPACK_EXTERNAL_MODULE__3305__","__WEBPACK_EXTERNAL_MODULE__3545__","__WEBPACK_EXTERNAL_MODULE__7388__","__WEBPACK_EXTERNAL_MODULE__5980__","__WEBPACK_EXTERNAL_MODULE__3342__","__WEBPACK_EXTERNAL_MODULE__2650__","__WEBPACK_EXTERNAL_MODULE__2729__","__WEBPACK_EXTERNAL_MODULE__3929__","__WEBPACK_EXTERNAL_MODULE__3129__","__WEBPACK_EXTERNAL_MODULE__1177__","extendStatics","setPrototypeOf","__","__assign","__rest","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__esDecorate","ctor","descriptorIn","contextIn","initializers","extraInitializers","accept","descriptor","context","access","addInitializer","unshift","__runInitializers","useValue","__propKey","__setFunctionName","__metadata","metadataKey","metadataValue","metadata","__awaiter","_arguments","generator","fulfilled","rejected","__generator","body","verb","op","__createBinding","k2","__exportStar","ar","__spread","__spreadArrays","il","jl","pack","__await","__asyncGenerator","asyncIterator","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","__setModuleDefault","__importStar","mod","__importDefault","__classPrivateFieldGet","receiver","__classPrivateFieldSet","__classPrivateFieldIn","__addDisposableResource","async","dispose","asyncDispose","_SuppressedError","SuppressedError","suppressed","__disposeResources","fail","hasError","rec","__webpack_module_cache__","__webpack_require__","cachedModule","__webpack_modules__","amdO","getter","definition","chunkId","promises","globalThis","window","script","needAttach","scripts","getElementsByTagName","charset","nc","src","onScriptComplete","event","onerror","onload","doneFns","toStringTag","baseURI","self","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","chunkLoadingGlobal","ResponseStatus","PrettifyQuery","loading","setLoading","handleClickPrettify","response","prettifyRequest","expr","IconButton","memo","useTheme2","getButtonStyles","stylesFactory","div","span","fieldProps","childInputId","labelEl","newItem","itemIndex","newItems","onChangeItem","onDeleteItem","aria-label","labelProp","getSelectStyles","BaseSelectContainer","getDurationFromMilliseconds","ms","milliseconds","floor","seconds","minutes","hours","days","durs","getDefaultVmuiUrl","serverUrl","relativeTimeOptionsVMUI","duration","VmuiLink","panelData","dashboardUID","setHref","getExternalLink","dataSourceSrv","dsSettings","relativeTimeId","interval","rangeRaw","getPrometheusTime","rangeDiff","ceil","endTime","utc","enrichedScopedVars","getRateIntervalScopedVariable","rangeUtil","intervalToSeconds","customQueryParameters","queryOptions","createQuery","encodeURIComponent","vmuiUrl","textUtil","sanitizeUrl","justifyContent","onClose","onAccept","Alert","severity","elevated","HorizontalGroup","justify","fill","perf","performance","now","warned","PROCESS","emitWarning","msg","code","AC","AbortController","AbortSignal","onabort","_onabort","reason","aborted","addEventListener","warnACPolyfill","signal","abort","printACPolyfillWarning","LRU_CACHE_IGNORE_AC_WARNING","isPosInt","isFinite","getUintArray","pow","Uint16Array","Uint32Array","MAX_SAFE_INTEGER","ZeroArray","heap","static","HeapCls","LRUCache","ttl","ttlResolution","ttlAutopurge","updateAgeOnGet","updateAgeOnHas","allowStale","noDisposeOnSet","noUpdateTTL","maxEntrySize","sizeCalculation","noDeleteOnFetchRejection","noDeleteOnStaleGet","allowStaleOnFetchAbort","allowStaleOnFetchRejection","ignoreFetchAbort","unsafeExposeInternals","starts","ttls","sizes","keyMap","keyList","valList","tail","free","isBackgroundFetch","backgroundFetch","moveToTail","indexes","rindexes","isStale","maxSize","calculatedSize","fetchMethod","disposeAfter","UintArray","shouldWarn","getRemainingTTL","Infinity","unref","cachedNow","getNow","age","remainingTTL","entrySize","totalCalculatedSize","_s","_st","_k","_v","rentries","rkeys","rvalues","getOptions","__staleWhileFetching","thisp","rforEach","purgeStale","deleted","dump","load","clear","setOptions","maxEntrySizeExceeded","oldVal","__abortController","oldValue","dt","task","hasOptions","peekOptions","ac","fetchOpts","cb","updateCache","ignoreAbort","fetchAborted","fetchError","fetchAbortIgnored","fetchResolved","fetchFail","bf","fetchUpdated","er","allowStaleAborted","noDelete","returnedStale","__returned","fetchDispatched","res","rej","fmp","fetchRejected","fetchOptions","forceRefresh","stale","staleVal","fetching","DefaultBufferLength","nextPropID","perNode","deserialize","RangeError","NodeType","closedBy","openedBy","group","isolate","contextHash","lookAhead","mounted","MountedTree","tree","overlay","parser","noProps","define","spec","top","skipped","isTop","isSkipped","isError","isAnonymous","direct","groups","found","none","NodeSet","types","extend","newTypes","newProps","CachedNode","CachedInnerNode","IterMode","Tree","positions","ch","mode","TreeCursor","topNode","cursorAt","pos","side","scope","moveTo","_tree","TreeNode","resolveNode","resolveInner","resolveStack","inner","layers","scan","mount","iterStack","stackIterator","iterate","enter","leave","anon","IncludeAnonymous","entered","propValues","balance","balanceRange","makeTree","build","buffer","nodeSet","maxBufferLength","reused","minRepeatType","FlatBufferCursor","takeNode","parentStart","minPos","inRepeat","depth","lookAheadAtStart","startPos","fork","skip","minStart","nodeSize","localSkipped","nodeStart","findBufferSize","endPos","copyToBuffer","TreeBuffer","localChildren","localPositions","localInRepeat","lastGroup","lastEnd","makeRepeatLeaf","takeFlatNode","reverse","make","last","lookAheadProp","lastI","makeBalanced","nodeCount","stopAt","base","pair","bufferStart","startIndex","topID","buildTree","childString","findChild","pick","checkSide","startI","endI","overlays","IgnoreOverlays","BaseNode","getChild","after","getChildren","matchContext","matchNodeContext","enterUnfinishedNodesBefore","childBefore","lastChild","prevSibling","_parent","nextChild","ExcludeBuffers","BufferNode","BufferContext","hasChild","IgnoreMounts","childAfter","rPos","nextSignificantParent","toTree","cur","child","externalSibling","heads","picked","newHeads","StackIterator","bufferNode","yieldNode","yieldBuf","yield","enterChild","sibling","atLastNode","move","mustLeave","nodeSizeCache","balanceType","mkTop","mkTree","total","maxChild","divide","groupFrom","groupStart","groupSize","nextSize","only","Parser","startParse","input","fragments","ranges","StringInput","createParse","advance","lineChunks","read","reducePos","score","bufferBase","curContext","StackContext","pushState","action","dPrec","dynamicPrecedence","getGoto","minRepeatTerm","storeNode","reduceContext","lastBigReductionStart","bigReductionCount","lastBigReductionSize","stateFlag","baseStateID","term","isReduce","nextState","maxNode","shiftContext","nextStart","nextEnd","useNode","updateContext","tracker","reuse","stream","reset","recoverByDelete","canShift","sim","SimulatedStack","stateSlot","hasAction","recoverByInsert","nextStates","best","forceReduce","validAction","backup","findForcedReduction","seen","explore","allActions","rDepth","forceAll","deadEnd","restart","sameState","other","dialectEnabled","dialectID","dialect","emitContext","emitLookAhead","newCx","setLookAhead","strict","goto","StackBufferCursor","maybeNext","decodeArray","out","stop","digit","CachedToken","extended","mask","nullToken","InputStream","chunkOff","chunk2","chunk2Pos","rangeIndex","chunkPos","readNext","resolveOffset","assoc","clipPos","idx","resolved","acceptToken","endOffset","acceptTokenTo","getChunk","setDone","min","TokenGroup","precTable","precOffset","groupMask","accEnd","allows","overrides","low","high","mid","readToken","tokenPrecTable","findOffset","tableData","tableOffset","iPrev","contextual","fallback","verbose","LOG","stackIDs","cutAt","fragment","safeFrom","safeTo","trees","nextFragment","fr","openStart","openEnd","nodeAt","TokenCache","mainToken","actions","tokenizers","getActions","actionIndex","main","updateCachedToken","addActions","eofTerm","getMainToken","specialized","specializers","putAction","Parse","recovering","nextStackID","minStackPos","stoppedAt","topTerm","stacks","bufferLength","parsedPos","stopped","stoppedTokens","newStacks","advanceStack","tok","finished","findFinished","log","stackID","stackToTree","getName","SyntaxError","runRecovery","maxRemaining","outer","strictCx","cxHash","defaultReduce","localStack","advanceFully","pushStackDedup","restarted","tokenEnd","force","forceBase","fromCodePoint","Dialect","LRParser","wrappers","nodeNames","repeatNodeCount","topTerms","topRules","nodeProps","setProp","nodeID","propSpec","skippedNodes","propSources","tokenArray","tokenData","specializerSpecs","getSpecializer","states","stateData","maxTerm","dialects","dynamicPrecedences","tokenPrec","termNames","parseDialect","loose","groupTag","terminal","slot","flag","deflt","configure","info","external","contextTracker","hasWrappers","prec","part","nextTagID","Tag","modified","defineModifier","Modifier","nextModifierID","instances","mods","exists","sameArray","configs","sets","powerSet","ruleNodeProp","Rule","opaque","inherit","typeName","propertyName","literal","heading","keyword","punctuation","bracket","docComment","variableName","tagName","attributeName","labelName","namespace","macroName","docString","attributeValue","integer","float","regexp","escape","null","atom","unit","modifier","operatorKeyword","controlKeyword","definitionKeyword","moduleKeyword","derefOperator","arithmeticOperator","logicOperator","bitwiseOperator","compareOperator","updateOperator","definitionOperator","typeOperator","controlOperator","separator","angleBracket","squareBracket","paren","brace","heading1","heading2","heading3","heading4","heading5","heading6","contentSeparator","quote","emphasis","strong","link","monospace","strikethrough","changed","documentMeta","annotation","processingInstruction","constant","function","standard","local","special","keywordTokens","class","tagHighlighter","inf","nan","ignoring","group_left","group_right","specializeIdentifier","contextualKeywordTokens","avg","atan2","bottomk","count_values","quantile","stddev","stdvar","sum","topk","by","without","and","or","unless","extendIdentifier","metricsQLHighLight","byName","pieces","styleTags","LineComment","LabelName","StringLiteral","NumberLiteral","Duration","UnaryOp","spec_Identifier","absent_over_time","absent","acos","acosh","asin","asinh","atan","atanh","avg_over_time","changes","clamp","clamp_max","clamp_min","cos","cosh","count_over_time","days_in_month","day_of_month","day_of_week","day_of_year","deg","delta","deriv","exp","histogram_quantile","holt_winters","hour","idelta","increase","irate","label_replace","label_join","last_over_time","ln","log10","log2","max_over_time","min_over_time","minute","month","pi","predict_linear","present_over_time","quantile_over_time","rad","rate","resets","round","scalar","sgn","sin","sinh","sort_desc","sqrt","stddev_over_time","stdvar_over_time","sum_over_time","tan","tanh","timestamp","time","vector","year","ascent_over_time","changes_prometheus","decreases_over_time","default_rollup","delta_prometheus","deriv_fast","descent_over_time","distinct_over_time","first_over_time","geomean_over_time","histogram_over_time","ideriv","increase_prometheus","increase_pure","increases_over_time","integrate","lag","lifetime","mad_over_time","median_over_time","mode_over_time","range_over_time","rate_over_sum","rollup","rollup_candlestick","rollup_delta","rollup_deriv","rollup_increase","rollup_rate","rollup_scrape_interval","scrape_interval","stale_samples_over_time","sum2_over_time","timestamp_with_name","tfirst_over_time","tlast_change_over_time","tlast_over_time","tmax_over_time","tmin_over_time","zscore_over_time","histogram_avg","histogram_stddev","histogram_stdvar","prometheus_buckets","interpolate","keep_last_value","keep_next_value","range_avg","range_first","range_last","range_linear_regression","range_mad","range_max","range_median","range_min","range_stddev","range_stdvar","range_sum","range_zscore","remove_resets","running_avg","running_max","running_min","running_sum","distinct","geomean","histogram","bottomk_avg","bottomk_last","bottomk_max","bottomk_median","bottomk_min","topk_avg","topk_last","topk_max","topk_median","topk_min","limitk","mad","median","share","sum2","zscore","label_del","label_keep","label_lowercase","label_uppercase","sort_by_label","sort_by_label_desc","sort_by_label_numeric","sort_by_label_numeric_desc","count_eq_over_time","count_gt_over_time","count_le_over_time","count_ne_over_time","duration_over_time","share_gt_over_time","share_le_over_time","share_eq_over_time","bitmap_and","bitmap_or","bitmap_xor","rand","rand_exponential","rand_normal","timezone_offset","label_set","label_copy","label_move","label_map","On","Without","Expr","AggregateExpr","AggregateOp","AggregateModifier","GroupingLabels","GroupingLabelList","GroupingLabel","FunctionCallBody","FunctionCallArgs","BinaryExpr","BinModifiers","OnOrIgnoring","FunctionCall","FunctionIdentifier","ParenExpr","VectorSelector","MetricIdentifier","LabelMatchers","LabelMatchList","LabelMatcher","MatchOp","RATE_RANGES","sortValue","FUNCTIONS","metricsqlGrammar","lookbehind","inside","alias","greedy","idList","DATASOURCE_TYPE","FORMAT_OPTIONS","INTERVAL_FACTOR_OPTIONS","LabelParamEditor","operationIndex","setState","getOperationParamId","autoFocus","onOpenMenu","isLoading","loadGroupByLabels","noOptionsMessage","loadingMessage","labels","metric","promQueryModeller","renderLabels","languageProvider","fetchSeriesLabels","functionRendererLeft","model","def","innerExpr","params","renderParams","functionRendererRight","rangeRendererWithParams","renderLeft","rangeVector","defaultParams","rangeRendererRightWithParams","rangeRendererLeftWithParams","paramDef","defaultAddOperationHandler","newOperation","operations","getPromAndLokiOperationDisplayName","funcName","capitalize","getRangeVectorParamDef","withRateInterval","param","createAggregationOperation","restParam","alternativesKey","category","PromVisualQueryOperationCategory","Aggregations","renderer","paramChangedHandler","changeToOperationId","explainHandler","getAggregationExplainer","addOperationHandler","aggregation","getLastLabelRemovedHandler","hideFromList","getAggregationWithoutRenderer","createAggregationOperationWithParam","paramsDef","getAggregationByRendererWithParameter","aggregationName","labelWord","restParamIndex","findIndex","restParams","PromOperationId","binaryScalarDefs","Addition","sign","Subtraction","MultiplyBy","DivideBy","Modulo","Exponent","EqualTo","comparison","NotEqualTo","GreaterThan","LessThan","GreaterOrEqual","LessOrEqual","binaryScalarOperatorToOperatorName","acc","binaryScalarOperations","opDef","BinaryOps","getSimpleBinaryRenderer","createFunction","Functions","createRangeFunction","RangeFunctions","operationWithRangeVectorRenderer","addOperationWithRangeVector","changeTypeHandler","operationTypeChangedHandlerForRangeFunction","operation","newDef","modeller","getOperationDef","addNestedQueryHandler","binaryQueries","labelJoinRenderer","labelJoinAddOperationHandler","createAggregationOverTime","operationFunctions","Any","Limitk","Mad","Median","Mode","Share","Stdvar","Sum2","Zscore","overTimeFunctions","AscentOverTime","ChangesPrometheus","DecreasesOverTime","DefaultRollup","DeltaPrometheus","DerivFast","DescentOverTime","DistinctOverTime","FirstOverTime","GeomeanOverTime","HistogramOverTime","Ideriv","IncreasePrometheus","IncreasePure","IncreasesOverTime","Integrate","Lag","Lifetime","MadOverTime","MedianOverTime","ModeOverTime","RangeOverTime","RateOverSum","Rollup","RollupCandlestick","RollupDelta","RollupDeriv","RollupIncrease","RollupRate","RollupScrapeInterval","ScrapeInterval","StaleSamplesOverTime","StdvarOverTime","Sum2OverTime","TimestampWithName","TfirstOverTime","TlastChangeOverTime","TlastOverTime","TmaxOverTime","TminOverTime","ZscoreOverTime","HistogramAvg","HistogramStddev","HistogramStdvar","PrometheusBuckets","basicFunctions","Abs","Interpolate","KeepLastValue","KeepNextValue","RangeAvg","RangeFirst","RangeLast","RangeLinearRegression","RangeMad","RangeMax","RangeMedian","RangeMin","RangeStddev","RangeStdvar","RangeSum","RangeZscore","RemoveResets","RunningAvg","RunningMax","RunningMin","RunningSum","Distinct","Geomean","Histogram","bitmapFunctions","BitmapAnd","BitmapOr","BitmapXor","labelFunctions","LabelDel","LabelKeep","LabelLowercase","LabelUppercase","SortByLabel","SortByLabelDesc","SortByLabelNumeric","SortByLabelNumericDesc","getBaseLabelFunctions","copyMoveLabelFunctions","LabelCopy","LabelMove","randFunctions","Rand","RandExponential","RandNormal","rangeFunctions","CountEqOverTime","CountGtOverTime","CountLeOverTime","CountNeOverTime","DurationOverTime","ShareGtOverTime","ShareLeOverTime","ShareEqOverTime","simpleTimeFunctions","End","Now","Start","Step","Intl","timezones","supportedValuesOf","TopBottomKFunctions","BottomkAvg","BottomkLast","BottomkMax","BottomkMedian","BottomkMin","TopkAvg","TopkLast","TopkMax","TopkMedian","TopkMin","LokiAndPromQueryModellerBase","setOperationCategories","categories","getOperationsForCategory","operationsRegistry","getAlternativeOperations","getCategories","renderOperations","queryString","renderBinaryQueries","binQuery","renderBinaryQuery","leftOperand","binaryQuery","vectorMatches","vectorMatchesType","renderQuery","nested","hasBinaryOp","getOperations","PromQueryModeller","getQueryPatterns","allOperations","HistogramQuantile","LabelReplace","Ln","Changes","Rate","Irate","Increase","Idelta","Delta","HoltWinters","PredictLinear","QuantileOverTime","NestedQuery","Absent","Acos","Trigonometric","Acosh","Asin","Asinh","Atan","Atanh","Ceil","Clamp","ClampMax","ClampMin","Cos","Cosh","DayOfMonth","Time","DayOfWeek","DaysInMonth","Deg","Deriv","Exp","Floor","Hour","LabelJoin","Log10","Log2","Minute","Month","Pi","Quantile","Rad","Resets","Round","Scalar","Sgn","Sin","Sinh","Sort","SortDesc","Sqrt","Stddev","Tan","Tanh","Timestamp","Vector","Year","Sum","Avg","Min","Max","Count","TopK","BottomK","CountValues","SumOverTime","AvgOverTime","MinOverTime","MaxOverTime","CountOverTime","LastOverTime","PresentOverTime","AbsentOverTime","StddevOverTime","flat","LabelMap","LabelSet","TimezoneOffset","ErrorName","getLeftMostChild","makeError","getString","parentType","variableRegex","varTypeFunc","parseInt","returnVariables","substring","makeBinOp","numberNode","hasBool","parseFloat","getAllByType","buildVisualQueryFromString","replacedExpr","var1","var2","fmt2","var3","fieldPath","fmt3","fmt","varType","replaceVariables","handleExpression","ErrorId","visQuery","getLabel","callArgs","updateFunctionArgs","handleFunction","handleAggregation","left","binModifier","isBool","isMatcher","matcher","matches","matchType","getBinaryModifier","right","leftNumber","rightNumber","rightBinary","leftMostChild","handleBinary","isIntervalVariableError","addLabelToQuery","vectorSelectorPositions","getVectorSelectorPositions","toLabelFilter","newQuery","isLast","labelExists","addFilter","selectorRegexp","labelRegexp","parseSelector","cursorOffset","labelKeys","prefixOpen","lastIndexOf","prefixClose","suffix","suffixClose","suffixOpenIndex","suffixOpen","labelOffset","valueStart","valueEnd","metricMatch","cleanSelector","roundMsToMin","roundSecToMin","limitSuggestions","SUGGESTIONS_LIMIT","addLimitInfo","RE2_METACHARACTERS","escapeLabelValueInExactSelector","labelValue","escapeLabelValueInRegexSelector","escapeMetricNameSpecialCharacters","metricName","unescapeMetricNameSpecialCharacters","escapedMetricName","AbstractLabelOperator","FromPromLikeMap","ToPromLikeMap","invert","toPromLikeExpr","labelBasedQuery","labelMatchers","getVictoriaMetricsTime","date","roundUp","dateMath","truncateResult","limit","DEFAULT_KEYS","wrapLabel","setFunctionKind","suggestion","getMetadataString","help","PromQlLanguageProvider","LanguageProvider","syntax","PromqlSyntax","loadMetricsMetadata","metricsMetadata","baseMetadata","summaryMetadata","syntheticMetadata","fixSummariesMetadata","showErrorAlert","getLabelKeys","getRangeCompletionItems","importFromAbstractQuery","refId","toPromLikeQuery","exportToAbstractQuery","promQuery","Prism","Token","labelKey","labelOperator","contentTokens","currentStr","labelComparator","extractLabelMatchers","nameLabelValue","getNameLabelValue","Equal","getSeries","withName","lookupsDisabled","fetchDefaultSeries","getLabelValues","fetchLabelValues","getTimeRangeParams","getLimitMetrics","labelFetchTs","initialValues","histogramMetrics","timeRange","metrics","withTemplates","labelsCache","LRU","metadataRequest","getDefaultTimeRange","resultSet","processHistogramMetrics","fetchLabels","wrapperClasses","emptyResult","selectedLines","getTextsAtRange","selection","currentLine","getText","nextCharacter","anchor","tokenRecognized","prefixUnrecognized","noSuffix","safePrefix","isNextOperand","getLabelCompletionItems","getAggregationCompletionItems","getEmptyCompletionItems","getBeginningCompletionItems","getTermCompletionItems","history","historyItems","chain","uniq","take","cutoffTs","historyForItem","ts","recent","hint","dateTime","fromNow","addHistoryMetadata","searchFunctionType","SearchFunctionType","Prefix","skipSort","addMetricsMetadata","Fuzzy","queryOffset","queryText","getBlocks","block","blockText","anchorBlock","openParensAggregationIndex","openParensSelectorIndex","closeParensSelectorIndex","closeParensAggregationIndex","selectorString","series","limitInfo","isValueStart","isValueEnd","isPreValue","parsedSelector","containsMetric","existingKeys","possibleKeys","difference","newSuggestion","getSeriesLabels","otherLabels","possibleLabelNames","fetchSeriesLabelsMatch","usedLabelNames","interpolatedName","interpolateString","urlParams","getAdjustedInterval","fetchSeriesValuesWithMatch","interpolatedMatch","URLSearchParams","valueSet","__name__","valueArray","processLabels","fetchSeries","promLanguageDefinition","Components","Breadcrumbs","breadcrumb","TimePicker","openButton","fromField","toField","applyTimeRange","calendar","closeButton","absoluteTimeRangeTitle","DataSourcePermissions","form","roleType","rolePicker","permissionLevel","DataSource","TestData","QueryTab","scenarioSelectContainer","scenarioSelect","noise","seriesCount","spread","startValue","drop","DataSourceHttpSettings","urlInput","Jaeger","traceIDInput","Prometheus","configPage","exemplarsAddButton","internalLinkSwitch","exemplarMarker","Menu","MenuComponent","MenuGroup","MenuItem","SubMenu","Panels","Panel","headerItems","menuItems","menu","containerByTitle","headerCornerInfo","loadingBar","HoverWidget","dragIcon","Visualization","Graph","VisualizationTab","legendSection","Legend","legendItemAlias","showLegendSwitch","xAxis","BarGauge","valueV2","PieChart","svgSlice","header","footer","VizLegend","seriesName","Drawer","General","expand","contract","rcContentWrapper","PanelEditor","OptionsPane","select","fieldLabel","DataPane","applyButton","toggleVizPicker","toggleVizOptions","toggleTableView","measureButton","PanelInspector","Data","Stats","Json","Query","refreshButton","jsonObjectKeys","Tab","active","RefreshPicker","runButton","intervalButton","runButtonV2","intervalButtonV2","queryInspectorButton","queryHistoryButton","addQuery","QueryHistory","QueryEditorRows","rows","QueryEditorRow","actionButton","AlertTab","alert","alertV2","TransformTab","newTransform","transformationEditor","transformationEditorDebugger","Transforms","card","Reduce","modeLabel","calculationsLabel","SpatialOperations","actionLabel","locationLabel","autoOption","coords","latitudeFieldLabel","longitudeFieldLabel","geohash","geohashFieldLabel","lookup","lookupFieldLabel","gazetteerFieldLabel","searchInput","addTransformationButton","NavBar","Configuration","Toggle","Reporting","NavMenu","NavToolbar","PageToolbar","itemButton","QueryEditorToolbarItem","BackButton","backArrow","OptionsGroup","toggle","PluginVisualization","singleValue","FieldConfigEditor","OverridesConfigEditor","FolderPicker","containerV2","ReadonlyFolderPicker","DataSourcePicker","inputV2","TimeZonePicker","WeekStartPicker","TraceViewer","spanBar","QueryField","QueryBuilder","queryPatterns","labelSelect","valueSelect","matchOperatorSelect","ValuePicker","Search","section","sectionV2","itemsV2","cards","collapseFolder","sectionId","expandFolder","dashboardItem","dashboardItems","dashboardCard","folderHeader","folderName","folderContent","DashboardLinks","dropDown","LoadingIndicator","CallToActionCard","buttonV2","DataLinksContextMenu","singleLink","DashboardImportPage","textarea","submit","ImportDashboardForm","PanelAlertTabContent","VisualizationPreview","ColorSwatch","DashboardRow","UserProfile","profileSaveButton","preferencesSaveButton","orgsTable","sessionsTable","FileUpload","inputField","fileNameSpan","DebugOverlay","OrgRolePicker","AnalyticsToolbarButton","Variables","variableOption","Annotations","annotationsTypeInput","annotationsChoosePanelInput","selectors","pages","Login","username","password","Home","readOnly","saveAndTest","DataSources","dataSources","dataSourceName","EditDataSource","dataSourceUid","settings","AddDataSource","dataSourcePlugins","pluginName","dataSourcePluginsV2","ConfirmModal","AddDashboard","addNewPanel","addNewRow","addNewPanelLibrary","Dashboard","uid","DashNav","nav","navV2","publicDashboardTag","submenu","submenuItem","submenuItemLabels","submenuItemValueDropDownValueLinkTexts","submenuItemValueDropDownDropDown","submenuItemValueDropDownOptionTexts","annotationsWrapper","annotationLabel","annotationToggle","Settings","Actions","deleteDashBoard","sectionItems","saveDashBoard","saveAsDashBoard","timezone","List","addAnnotationCTA","addAnnotationCTAV2","NewAnnotation","panelFilterSelect","showInLabel","previewInDashboard","addVariableCTA","addVariableCTAV2","newButton","tableRowNameFields","tableRowDefinitionFields","tableRowArrowUpButtons","tableRowArrowDownButtons","tableRowDuplicateButtons","tableRowRemoveButtons","Edit","headerLink","modeLabelNew","modeLabelEdit","generalNameInput","generalNameInputV2","generalTypeSelect","generalTypeSelectV2","generalLabelInput","generalLabelInputV2","generalHideSelect","generalHideSelectV2","selectionOptionsMultiSwitch","selectionOptionsIncludeAllSwitch","selectionOptionsCustomAllInput","selectionOptionsCustomAllInputV2","previewOfValuesOption","submitButton","QueryVariable","queryOptionsDataSourceSelect","queryOptionsRefreshSelect","queryOptionsRefreshSelectV2","queryOptionsRegExInput","queryOptionsRegExInputV2","queryOptionsSortSelect","queryOptionsSortSelectV2","queryOptionsQueryInput","valueGroupsTagsEnabledSwitch","valueGroupsTagsTagsQueryInput","valueGroupsTagsTagsValuesQueryInput","ConstantVariable","constantOptionsQueryInput","constantOptionsQueryInputV2","DatasourceVariable","datasourceSelect","TextBoxVariable","textBoxOptionsQueryInput","textBoxOptionsQueryInputV2","CustomVariable","customValueInput","IntervalVariable","intervalsValueInput","Dashboards","dashboards","SaveDashboardAsModal","newName","save","SaveDashboardModal","saveVariables","saveTimerange","SharePanelModal","linkToRenderedImage","ShareDashboardModal","shareButton","PublicDashboard","WillBePublicCheckbox","LimitedDSCheckbox","CostIncreaseCheckbox","PauseSwitch","EnableAnnotationsSwitch","CreateButton","DeleteButton","CopyUrlInput","CopyUrlButton","SettingsDropdown","TemplateVariablesWarningAlert","UnsupportedDataSourcesWarningAlert","NoUpsertPermissionsWarningAlert","EnableTimeRangeSwitch","EmailSharingConfiguration","Container","ShareType","EmailSharingInput","EmailSharingInviteButton","EmailSharingList","DeleteEmail","ReshareLink","page","NotAvailable","pausedDescription","RequestViewAccess","recipientInput","Explore","graph","scrollView","SoloPanel","PluginsList","listItem","signatureErrorNotice","PluginPage","signatureInfo","disabledInfo","PlaylistForm","itemDelete","BrowseDashbards","row","checkbox","FolderView","PublicDashboards","ListItem","linkButton","configButton","trashcanButton","pauseSwitch","UserListPage","tabs","allUsers","orgUsers","publicDashboardsUsers","users","org","admin","publicDashboards","UserListAdminPage","UsersListPage","UsersListPublicDashboardsPage","DashboardsListModal","makeStorageService","onDidChangeValue","onDidChangeTarget","onWillSaveState","fallbackValue","getBoolean","getNumber","store","logStorage","migrate","isNew","overrideServices","NeverCaseError","getAllMetricNamesCompletions","dataProvider","getAllMetricNames","getAllWithTemplatesCompletions","getAllWithTemplates","CompletionType","FUNCTION_COMPLETIONS","getAllFunctionsAndMetricNamesCompletions","metricNames","DURATION_COMPLETIONS","getAllHistoryCompletions","getHistory","makeSelector","allLabels","getLabelNames","getAllLabelNames","getLabelNamesForCompletions","triggerOnInsert","labelNames","labelNamesCompletion","withTemplatesCompletionsLabels","getLabelNamesForSelectorCompletions","getLabelNamesForByCompletions","getLabelValuesForMetricCompletions","betweenQuotes","getCompletions","situation","historyCompletions","walk","path","getNodeText","isPathMatch","resolverPath","cursorPath","RESOLVERS","getNodeInSubtree","subTreeHasError","metricNameNode","getLabels","resolveLabelMatcher","aggrExpNode","bodyNode","metricIdNode","idNode","LABEL_OP_MAP","labelMatcherNode","nameNode","opNode","opChild","getLabelOp","valueNode","parsePromQLStringLiteral","labelMatchersNode","listNode","matcherNode","typeId","getNodeChildren","inStringNode","labelNameNode","firstListNode","getMonacoCompletionItemKind","monaco","withTemplate","codeLens","contextmenu","fixedOverflowWidgets","folding","lineDecorationsWidth","lineNumbers","minimap","enabled","overviewRulerBorder","overviewRulerLanes","bottom","renderLineHighlight","scrollbar","vertical","verticalScrollbarSize","horizontal","horizontalScrollbarSize","scrollBeyondLastLine","suggest","showWords","suggestFontSize","wordWrap","PROMQL_LANG_ID","PROMQL_SETUP_STARTED","overrideServicesRef","storageService","containerRef","initialValue","lpRef","useLatest","historyRef","onRunQueryRef","onBlurRef","autocompleteDisposeFun","fontFamilyMonospace","ReactMonacoEditor","beforeMount","languageConfiguration","ensurePromQL","onMount","onDidBlurEditorWidget","metaItem","getWordAtPosition","positionClone","getOffsetAt","maybeErrorNode","getErrorNode","currentNode","resolver","getSituation","completionsPromise","maxIndexDigits","padStart","getCompletionProvider","filteringCompletionProvider","getModel","updateElementHeight","containerDiv","pixelHeight","getContentHeight","pixelWidth","clientWidth","onDidContentSizeChange","addAction","keybindings","Shift","KeyK","global","dispatchEvent","KeyboardEvent","metaKey","placeholderDecorators","contents","isWholeLine","checkDecorators","newDecorators","getValueLength","deltaDecorations","MonacoQueryFieldLazy","Suspense","MonacoQueryFieldWrapper","lastRunValueRef","runQueryOnBlur","handleRunQuery","PrometheusLanguageProvider","datasourceUID","fetchDatasource","lastValueFrom","getDatasourceBody","targetTemplate","updateDatasource","validateStatus","noValidate","success","await","serverError","validateResult","setValidateResult","isValidExpr","template","setTemplate","handleClose","useValidateExpr","useUpdateDatasource","setValue","setIsLoading","handleSave","templates","withTemplatesUpdate","TemplateEditor","Badge","getDashboardByUID","app","isValidDashboard","setIsValidDashboard","CoreApp","dashboardResponse","setDashboardResponse","modalTitle","templatesTitle","fullTitle","folderTitle","dashboard","showTemplates","setShowTemplates","fetchDashboard","Modal","closeOnEscape","closeOnBackdropClick","onDismiss","WithTemplateBody","WarningNewDashboard","getArrayFromTemplate","bracketsCount","quotesCount","char","isQuote","isOpeningBracket","isClosingBracket","shouldSplit","splitByCommaOutsideBrackets","commentMatch","variableMatch","mergeTemplateWithQuery","templateExpr","includesWithTemplate","formatTemplateString","QueryEditorMode","editorModes","QueryEditorModeToggle","data-testid","RadioButtonGroup","QueryHeaderSwitch","inputProps","dashedLabel","switchIdRef","uniqueId","switchLabel","bodySmall","localStorage","getObject","json","setObject","errorToThrow","removeItem","isMatrixData","PromQueryType","LegendFormatMode","PromVariableQueryType","queryEditorModeDefaultLocalStorageKey","changeEditorMode","editorMode","getDefaultEditorMode","getPrototypeOf","nn","rn","isFrozen","tn","en","Proxy","revocable","revoke","proxy","ownKeys","isNaN","deleteProperty","un","produce","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","an","createAction","prepareAction","actionCreator","prepared","payload","freezeDraftable","executeReducerBuilderCallback","builderCallback","defaultCaseReducer","actionsMap","actionMatchers","builder","addCase","typeOrActionCreator","reducer","addMatcher","addDefaultCase","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","__REDUX_DEVTOOLS_EXTENSION__","MiddlewareArray","species","EnhancerArray","commonProperties","RejectWithValue","FulfillWithMeta","miniSerializeError","simpleError","commonProperties_1","unwrapResult","rejectedWithValue","createAsyncThunk2","typePrefix","payloadCreator","requestStatus","pending","serializeError","class_1","removeEventListener","throwIfAborted","dispatch","getState","extra","abortReason","idGenerator","nanoid","abortController","promise2","__this","__arguments","finalAction","conditionResult","abortedPromise","err_1","getPendingMeta","race","rejectWithValue","fulfillWithValue","dispatchConditionRejection","unwrap","withTypes","alm","queueMicrotask","LabelFilterItem","defaultOp","onDelete","onGetLabelNames","onGetLabelValues","isMultiSelect","isMultiValue","getSelectOptionsFromString","isLoadingLabelNames","change","isLoadingLabelValues","labelValues","isMulti","selectedOptions","uniqBy","requestAnimationFrame","LabelFilters","labelsFilters","setItems","newLabels","OperationExplainedBox","stepNumber","markdown","box","boxInner","dangerouslySetInnerHTML","__html","renderMarkdown","fontFamily","margin","textDecoration","_setPrototypeOf","_inheritsLoose","subClass","superClass","useMemoOne","getResult","inputs","initial","isFirstRun","committed","useCache","newInputs","lastInputs","areInputsEqual","getRect","center","expandBy","shrinkBy","noSpacing","createBox","borderBox","_ref2$margin","_ref2$border","border","_ref2$padding","marginBox","paddingBox","contentBox","original","shiftBy","shifted","withScroll","scroll","pageXOffset","pageYOffset","calculateBox","marginTop","marginRight","paddingTop","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","getBox","el","getBoundingClientRect","getComputedStyle","safeIsNaN","frameId","wrapperFn","cancelAnimationFrame","bindEvents","bindings","sharedOptions","unbindings","shared","fromBinding","eventName","unbind","isProduction$1","RbdInvariant","ErrorBoundary","_React$Component","callbacks","onWindowError","getCallbacks","isDragging","tryAbort","preventDefault","setCallbacks","componentDidMount","componentDidCatch","componentWillUnmount","render","withLocation","isInHomeList","droppableId","startPosition","endPosition","withCombine","draggableId","returnedToStart","preset","dragHandleUsageInstructions","onDragStart","onDragUpdate","update","onDragEnd","origin","point1","point2","subtract","negate","point","patch","otherValue","distance","closest","offsetByPosition","getCorners","clip","shouldClipSubject","subject","executeClip","pageMarginBox","getSubject","withPlaceholder","axis","scrolled","diff","displacement","increased","_extends2","increasedBy","scrollDroppable","droppable","newScroll","scrollable","scrollDiff","scrollDisplacement","predicate","toArray","toDroppableMap","droppables","toDraggableMap","draggables","toDroppableList","toDraggableList","getDraggablesInsideDroppable","draggable","tryGetDestination","impact","at","tryGetCombine","removeDraggableFromList","isHomeOf","noDisplacedBy","emptyGroups","invisible","visible","noImpact","displaced","displacedBy","isWithin","lowerBound","upperBound","isPartiallyVisibleThroughFrame","isWithinVertical","isWithinHorizontal","isPartiallyVisibleVertically","isPartiallyVisibleHorizontally","isBiggerVertically","isBiggerHorizontally","isTotallyVisibleThroughFrame","crossAxisLine","crossAxisStart","crossAxisEnd","crossAxisSize","isVisible","toBeDisplaced","viewport","withDroppableDisplacement","isVisibleThroughFrameFn","displacedTarget","getDroppableDisplaced","isVisibleInDroppable","isVisibleInViewport","isPartiallyVisible","isTotallyVisible","getShouldAnimate","forceShouldAnimate","shouldAnimate","getDisplacementGroups","afterDragging","getTarget","goAtEnd","insideDestination","inHomeList","newIndex","indexOfLastItem","getIndexOfLastItem","calculateReorderImpact","withoutDragging","sliceFrom","didStartAfterCritical","afterCritical","effected","distanceFromStartToBorderBoxCenter","getCrossAxisBorderBoxCenter","isMoving","goAfter","moveRelativeTo","goBefore","distanceFromEndToBorderBoxCenter","getPageBorderBoxCenterFromImpact","withoutDisplacement","draggablePage","moveInto","goIntoStart","closestAfter","withDisplacement","whenReordering","combineWith","displaceBy","isDisplaced","getCombinedItemDisplacement","whenCombining","getResultWithoutDroppableDisplacement","scrollViewport","getDraggables","getClientFromPageBorderBoxCenter","pageBorderBoxCenter","withoutPageScrollChange","withViewportDisplacement","client","isTotallyVisibleInNewLocation","newPageBorderBoxCenter","_ref$onlyOnMainAxis","onlyOnMainAxis","changeNeeded","isTotallyVisibleOnAxis","moveToNextPlace","isMovingForward","previousImpact","previousPageBorderBoxCenter","previousClientSelection","isEnabled","isCombineEnabled","getImpact","closestId","withoutDraggable","indexOfClosest","proposedIndex","moveToNextCombine","wasAt","_newIndex","currentIndex","firstIndex","fromReorder","combineId","combineWithIndex","fromCombine","moveToNextIndex","clientSelection","scrollJumpRequest","cautious","maxScrollChange","scrolledViewport","scrolledDroppable","withViewportScroll","withDroppableScroll","tryGetVisible","speculativelyIncrease","getKnownActive","rect","getCurrentPageBorderBoxCenter","getCurrentPageBorderBox","getDisplacedBy","withMaxScroll","addPlaceholder","placeholderSize","requiredGrowth","availableSpace","needsToGrowBy","dimension","getRequiredGrowthForPlaceholder","added","oldFrameMaxScroll","maxScroll","newFrame","whatIsDraggedOver","moveInDirection","isActuallyOver","getDroppableOver","dimensions","isMainAxisMovementAllowed","home","critical","isOver","isMovingOnMainAxis","borderBoxCenter","_state$dimensions","isBetweenSourceClipped","candidates","activeOfTarget","isBetweenDestinationClipped","contains","isWithinDroppable","getBestCrossAxisDroppable","sorted","distanceToA","distanceToB","getClosestDraggable","proposed","proposedPageBorderBoxCenter","relativeTo","isGoingBeforeTarget","moveToNewDroppable","moveCrossAxis","isMovementAllowed","phase","isPositionInFrame","offsetRectByPosition","getIsDisplaced","getDragImpact","pageOffset","pageBorderBox","destinationId","childCenter","isContained","isStartContained","isEndContained","startCenter","candidate","getFurthestAway","getDroppableOver$1","pageBorderBoxWithDroppableScroll","area","targetRect","targetStart","targetEnd","childRect","threshold","didStartAfterCritical$1","getCombineImpact","atIndex","getReorderImpact","patchDroppableMap","updated","forcedClientSelection","forcedDimensions","forcedViewport","forcedImpact","newImpact","withUpdatedPlaceholders","cleaned","lastDroppable","oldMaxScroll","removePlaceholder","clearUnusedPlaceholder","patched","recomputePlaceholders","recompute","getDraggables$1","getClientBorderBoxCenter","refreshSnap","movementMode","needsVisibilityCheck","getLiftEffect","insideHome","rawIndex","inVirtualList","isSnapping","postDroppableChange","isEnabledChanging","patchDimensionMap","removeScrollJumpRequest","idle","completed","shouldFlush","_action$payload","isWindowScrollAllowed","isFixedOnPage","_getLiftEffect","onLiftImpact","published","withScrollChange","existing","updatedAdditions","additions","updatedDroppables","windowScrollChange","getFrame","droppableScrollChange","moved","offset$1","initialWindowScroll","offsetDraggable","adjustAdditionsForScrollChanges","removals","wasOverId","wasOver","draggingState","isWaiting","publishWhileDraggingInVirtual","_clientSelection","_action$payload2","_action$payload3","_id","_target","_action$payload4","_id2","_target2","_updated","_newScroll","_viewport","_result2","_action$payload5","dropDuration","newHomeClientOffset","publishWhileDragging","collectionStarting","updateDroppableScroll","updateDroppableIsEnabled","updateDroppableIsCombineEnabled","moveUp","moveDown","moveRight","moveLeft","completeDrop","curves","outOfTheWayTiming","timings","transitions","fluid","snap","timing","outOfTheWay","transforms","isCombining","translate","minDropTime","drop$1","_getDropImpact","lastImpact","didDropInsideDroppable","getDropImpact","newClientCenter","getNewHomeClientOffset","distance$1","maxDropTime","toFixed","getDropDuration","dropPending","scrollListener","listener","onWindowScroll","scheduled","passive","capture","getWindowScrollBinding","getScrollListener","shouldEnd","withTimings","getDragStart","execute","responder","announce","getDefaultMessage","willExpire","wasCalled","isExpired","timeoutId","getExpiringAnnounce","responders","getResponders","publisher","asyncMarshal","timerId","shallow","dragging","beforeCapture","onBeforeCapture","beforeStart","onBeforeDragStart","lastCritical","lastLocation","lastCombine","hasCriticalChanged","isDraggableEqual","isDroppableEqual","isCriticalEqual","hasLocationChanged","hasGroupingChanged","isCombineEqual","getPublisher","dropAnimationFinish","dropAnimationFlushOnScroll","pendingDrop","postActionState","composeEnhancers","compose","marshal","dimensionMarshal","focusMarshal","styleMarshal","autoScroller","createStore","applyMiddleware","dropping","resting","stopPublishing","dimensionMarshalStopper","scrollOptions","shouldPublishImmediately","_marshal$startPublish","startPublishing","lift$1","shouldStop","autoScroll","isWatching","tryRecordFocus","tryRestoreFocusRecorded","tryShiftRecord","getMaxScroll","scrollHeight","scrollWidth","getDocumentElement","doc","documentElement","getMaxWindowScroll","clientHeight","shouldPublishUpdate","registry","getById","getRemainder","createDimensionMarshal","staging","collect","_staging","getDimension","getScrollWhileDragging","publish","createPublisher","getViewport","windowScroll","getDimensionAndWatchScroll","getInitialPublish","dragStopped","canStartDrag","scrollWindow","scrollBy","getScrollableDroppables","percentage","getPercentage","startOfRange","endOfRange","accelerateAt","distanceToEdge","thresholds","dragStartTime","shouldUseTimeDampening","startScrollingFrom","maxScrollValueAt","percentageFromMaxScrollValueAt","getValueFromDistance","proposedScroll","runTime","betweenAccelerateAtAndStopAtPercentage","dampenValueByTime","getScrollOnAxis","distanceToEdges","getDistanceThresholds","clean$2","getScroll","required","limited","isTooBigVertically","isTooBigHorizontally","adjustForSizeLimits","smallestSigned","getOverlap","targetScroll","overlap","canPartiallyScroll","rawMax","smallestChange","canScrollWindow","canScrollDroppable","scroll$1","_change","getWindowScrollChange","_dimension","maybe","getScrollableDroppableOver","getBestScrollableDroppable","getDroppableScrollChange","createJumpScroller","droppableRemainder","getDroppableOverlap","whatTheDroppableCanScroll","scrollDroppableAsMuchAsItCan","windowRemainder","getWindowOverlap","whatTheWindowCanScroll","scrollWindowAsMuchAsItCan","moveByOffset","createAutoScroller","fluidScroller","scheduleWindowScroll","scheduleDroppableScroll","tryScroll","_dragging","wasScrollNeeded","fakeScrollCallback","createFluidScroller","jumpScroll","prefix$1","dragHandle","contextId","scrollContainer","getStyles$1","grabCursor","transition","getSelector","attribute","makeGetSelector","dragHandle$1","always","dropAnimating","userCancel","useIsomorphicLayoutEffect","useLayoutEffect","getHead","querySelector","createStyleEl","getWindowFromEl","ownerDocument","defaultView","isHtmlElement","HTMLElement","createRegistry","subscribers","notify","findDraggableById","findDroppableById","unregister","findById","clean","StoreContext","getBodyElement","visuallyHidden","overflow","getId","defaults","useUniqueId","AppContext","usePrevious","_preventedKeys","_scrollJumpKeys","preventedKeys","preventStandardKeyEvents","supportedEventName","idle$1","noop$1","scrollJumpKeys","idle$2","interactiveTagNames","optgroup","video","audio","isAnInteractiveElement","parentElement","isEventInInteractiveElement","getBorderBoxCenterPosition","supportedMatchesName","closestPonyfill","closest$1","_isActive","expected","isLockActive","canStart","lockAPI","isClaimed","defaultSensors","api","phaseRef","unbindEventsRef","startCaptureBinding","defaultPrevented","ctrlKey","shiftKey","altKey","findClosestDraggableId","tryGetLock","sourceEvent","clientX","clientY","startPendingDrag","preventForcePressBinding","findOptionsForDraggable","shouldRespectForcePress","canGetLock","listenForCapture","shouldBlockNextClick","bindCapturingEvents","getPhase","setPhase","fluidLift","getCaptureBindings","preDrag","isCapturing","snapLift","getDraggingBindings","touch","touches","longPressTimerId","unbindTarget","hasMoved","_event$touches$","shouldRespect","getHandleBindings","unbindWindow","getWindowBindings","startDragging","useSensorMarshal","customSensors","enableDefaultSensors","useSensors","lock","release","claim","abandon","newLock","tryAbandon","tryAbandonLock","forceStop","forceSensorStop","draggable$1","findDraggable","canDragInteractiveElements","getShouldRespectForcePress","tryDispatchWhenDragging","finish","cleanup","liftActionArgs","move$1","tryStart","handle","findClosestDragHandleFromEvent","tryGetClosestDraggableIdFromEvent","tryReleaseLock","isLockClaimed","createResponders","getStore","lazyRef","App","sensors","lazyStoreRef","lastPropsRef","textContent","useAnnouncer","dragHandleUsageInstructionsId","getElementId","useHiddenTextElement","alwaysRef","dynamicRef","setDynamicStyle","setAlwaysStyle","dynamic","useStyleMarshal","lazyDispatch","marshalCallbacks","bindActionCreators","useRegistry","entriesRef","recordRef","restoreFocusFrameRef","isMountedRef","focus","tryGiveFocus","tryGiveFocusTo","possible","findDragHandle","activeElement","redirectTo","record","focused","useFocusMarshal","tryResetStore","getCanLift","getIsMovementAllowed","appContext","canLift","Provider","count$1","DragDropContext","isEqual$1","isScroll","isAuto","isEither","overflowX","overflowY","getClosestScrollable","isElementScrollable","getScroll$1","scrollLeft","scrollTop","getIsFixed","immediate","delayed","getListenerOptions","useRequiredContext","Context","useContext","getClosestScrollableFromDrag","closestScrollable","noop$2","Placeholder$1","animateOpenTimerRef","tryClearAnimateOpenTimer","animate","onTransitionEnd","_useState","isAnimatingOpenOnMount","setIsAnimatingOpenOnMount","onSizeChangeEnd","getSize","boxSizing","pointerEvents","getStyle","innerRef","DroppableContext","AnimateInOut","_React$PureComponent","getDerivedStateFromProps","provided","zIndexOptions","getDraggingTransition","shouldAnimateDragMovement","getDraggingOpacity","isDropAnimating","preventHtml5Dnd","isStrictEqual","whatIsDraggedOverFromResult","getSecondarySnapshot","combineTargetFor","isClone","dropAnimation","draggingOver","atRest","shouldAnimateDisplacement","snapshot","mapDispatchToProps","dropAnimationFinished","ConnectedDraggable","connect","memoizedOffset","getMemoizedSnapshot","getMemoizedProps","draggingSelector","ownProps","_draggingOver","_combineWith","getCombineWithFromResult","curve","scale","secondarySelector","getFallback","getProps","ownId","draggingId","visualDisplacement","isAfterCriticalInVirtualList","_offset","getSecondarySelector","pure","areStatePropsEqual","setRef","_useRequiredContext","_useRequiredContext2","dropAnimationFinishedAction","getDraggableRef","computedStyles","getDimension$1","publishedRef","isFirstPublishRef","useDraggablePublisher","dragHandleProps","role","onMoveEnd","getShouldDraggingAnimate","transform","getDraggingStyle","getStyle$1","draggableProps","rubric","PrivateDraggable","isUsingCloneFor","PublicDraggable","isDragDisabled","disableInteractiveElementBlocking","isMatchingType","getDraggable","isDropDisabled","ignoreContainerClipping","renderClone","getContainerForClone","ConnectedDroppable","idleWithAnimation","shouldAnimatePlaceholder","isDraggingOver","draggingOverWith","draggingFromThisWith","isUsingPlaceholder","useClone","idleWithoutAnimation","getDraggableRubric","getMapProps","isDraggingOverForConsumer","isDraggingOverForImpact","_snapshot","_completed","wasCombining","isHome","updateViewportMaxScroll","droppableRef","placeholderRef","getDroppableRef","setDroppableRef","setPlaceholderRef","onPlaceholderTransitionEnd","whileDraggingRef","previousRef","publishedDescriptorRef","memoizedUpdateScroll","getClosestScroll","updateScroll","scheduleScrollUpdate","onClosestScroll","getEnv","targetRef","getClient","frameClient","scrollSize","getDroppableDimension","removeAttribute","useDroppablePublisher","droppableProps","droppableContext","draggableProvided","draggableSnapshot","getClone","getWindow","isHTMLElement","isShadowRoot","ShadowRoot","getUAString","uaData","navigator","userAgentData","brands","brand","userAgent","isLayoutViewport","includeScale","isFixedStrategy","clientRect","scaleX","scaleY","offsetWidth","offsetHeight","visualViewport","addVisualOffsets","offsetLeft","offsetTop","win","getNodeName","nodeName","getWindowScrollBarX","isScrollParent","_getComputedStyle","getCompositeRect","elementOrVirtualElement","offsetParent","isFixed","isOffsetParentAnElement","offsetParentIsScaled","isElementScaled","offsets","clientLeft","clientTop","getLayoutRect","getParentNode","assignedSlot","host","getScrollParent","listScrollParents","_element$ownerDocumen","scrollParent","isBody","updatedList","isTableElement","getTrueOffsetParent","getOffsetParent","isFirefox","perspective","contain","willChange","getContainingBlock","auto","basePlacements","popper","variationPlacements","modifierPhases","modifiers","visited","requires","requiresIfExists","dep","depModifier","debounce","DEFAULT_OPTIONS","strategy","areValidElements","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","orderedModifiers","modifiersData","elements","attributes","effectCleanupFns","isDestroyed","setOptionsAction","cleanupModifierEffects","scrollParents","contextElement","merged","orderModifiers","_ref3$options","effect","cleanupFn","forceUpdate","_state$elements","rects","_state$orderedModifie","_state$orderedModifie2","_options","destroy","onFirstUpdate","_options$scroll","_options$resize","resize","getBasePlacement","getVariation","getMainAxisFromPlacement","computeOffsets","basePlacement","variation","commonX","commonY","mainAxis","unsetSides","mapToStyles","_Object$assign2","popperRect","gpuAcceleration","adaptive","roundOffsets","_offsets$x","_offsets$y","hasX","hasY","sideX","sideY","heightProp","widthProp","_Object$assign","commonStyles","dpr","devicePixelRatio","roundOffsetsByDPR","_ref5","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","popperOffsets","arrow","initialStyles","_options$offset","invertDistance","skidding","distanceAndSkiddingToXY","_data$state$placement","getOppositePlacement","matched","getOppositeVariationPlacement","rootNode","getRootNode","isSameNode","rectToClientRect","getClientRectFromMixedType","clippingParent","html","layoutViewport","getViewportRect","getInnerBoundingClientRect","winScroll","getDocumentRect","mergePaddingObject","paddingObject","expandToHashMap","hashMap","detectOverflow","_options$placement","_options$strategy","_options$boundary","boundary","_options$rootBoundary","rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","altContext","clippingClientRect","mainClippingParents","clippingParents","clipperElement","getClippingParents","firstClippingParent","clippingRect","accRect","getClippingRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","_skip","_options$mainAxis","checkMainAxis","_options$altAxis","altAxis","checkAltAxis","specifiedFallbackPlacements","fallbackPlacements","_options$flipVariatio","flipVariations","allowedAutoPlacements","preferredPlacement","oppositePlacement","getExpandedFallbackPlacements","placements","_options$allowedAutoP","allowedPlacements","overflows","computeAutoPlacement","referenceRect","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","isVertical","mainVariationSide","altVariationSide","checks","check","_loop","fittingPlacement","within","_options$tether","tether","_options$tetherOffset","tetherOffset","isBasePlacement","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","minLen","maxLen","arrowElement","arrowRect","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","arrowOffsetParent","clientOffset","offsetModifierValue","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","withinMaxClamp","_state$modifiersData$","toPaddingObject","minProp","maxProp","endDiff","startDiff","clientSize","centerToReference","axisProp","centerOffset","_options$element","getSideOffsets","preventedOffsets","isAnySideFullyClipped","preventOverflow","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","eventListeners","fromEntries","EMPTY_MODIFIERS","useGetLatest","generateBoundingClientRect","toJSON","_excluded","virtualElement","defaultConfig","closeOnOutsideClick","closeOnTriggerHidden","defaultVisible","delayHide","delayShow","followCursor","mutationObserverOptions","childList","subtree","OperationInfoButton","show","setShow","getTooltipProps","setTooltipRef","setTriggerRef","popperOptions","_popperProps$state","_popperProps$state$mo","_popperProps$state$mo2","finalConfig","finalPopperOptions","_React$useState","triggerRef","_React$useState2","tooltipRef","_useControlledState","_ref$onChange","getLatest","updater","updatedState","persist","isControlled","useControlledState","onVisibleChange","setVisible","_usePopper","referenceElement","popperElement","prevOptions","optionsWithDefaults","updateStateModifier","newOptions","popperInstanceRef","popperInstance","createPopper","usePopper","popperProps","excluded","sourceKeys","isTriggeredBy","hideTooltip","showTooltip","toggleTooltip","handleClickOutside","_event$composedPath","_getLatest","composedPath","Node","preventDefaultAndToggle","setMousePosition","MutationObserver","observe","disconnect","getArrowProps","usePopperTooltip","Portal","docBox","docBoxHeader","docBoxBody","getOperationDocs","displayName","boxShadow","shadows","z3","h5","signature","dropdown","OperationHeader","onRemove","queryModeller","onToggleSwitcher","alternatives","alt","operationHeaderButtons","selectWrapper","onCloseMenu","newParams","changedOp","borderBottom","medium","short","AutoSizeInput","onCommitChange","onKeyDown","restProps","setInputWidth","realWidth","measureText","getWidthFor","currentTarget","getOperationParamEditor","SelectInputParamEditor","BoolInputParamEditor","SimpleInputParamEditor","evt","runQueryOnEnter","Checkbox","checked","selectOptions","valueOption","optionalParam","onAddRestParam","cardHighlight","infoIcon","paramRow","verticalAlign","paramName","paramValue","arrowLine","arrowArrow","borderTop","borderLeft","flash","keepFlash","setKeepFlash","OperationEditor","shouldFlash","useFlash","onParamValueChanged","paramIdx","callParamChangedThenOnChange","restParamsToAdd","onRemoveRestParam","operationElements","restParamsCount","totalParamsCount","paramDefIndex","Editor","hideName","renderAddRestParamButton","Draggable","OperationList","highlightedOp","opsToHighlight","isMounted","mountedRef","prevOperations","newOps","newOp","op1","op2","useOperationsHighlight","cascaderOpen","setCascaderOpen","onOperationChange","addOptions","isLeaf","Droppable","operationList","addButton","Cascader","onSelect","operationDef","alwaysOpen","hideActiveLevelLabel","RawQuery","lang","highlighted","grammar","editorField","OperationListExplained","onMouseEnter","onMouseLeave","OperationsEditorRow","QueryBuilderHints","visualQuery","hints","setHints","getQueryHints","fix","modifyQuery","newVisualQuery","splitSeparator","MetricSelect","onGetMetrics","variableEditor","customFilterOption","searchQuery","formatOptionLabel","inputValue","handleOpenMenu","handleChange","metricSelect","filterOption","InlineFieldRow","contrastText","nestedQuery","showExplain","vectorMatchWrapper","vectorMatchInput","PromQueryBuilder","NestedQueryList","nestedQueries","onNestedQueryUpdate","EXPLAIN_LABEL_FILTER_CONTENT","PromQueryBuilderExplained","setHighlightedOp","withTemplateVariableOptions","optionsPromise","variables","forLabel","labelsToConsider","labelsIndex","getMetrics","PromQueryBuilderContainer","useReducer","stateSlice","exprChanged","visualQueryChange","_reducer","initialState","reducers","reducerNames","sliceCaseReducersByName","sliceCaseReducersByType","actionCreators","buildReducer","extraReducers","finalCaseReducers","mapOrBuilderCallback","getInitialState","finalActionMatchers","finalDefaultCaseReducer","isStateFunction","frozenInitialState_1","caseReducers","cr","previousState","caseReducer","draft","createReducer","actionMatchers_1","reducerName","prepareCallback","maybeReducerWithPrepare","prepare","createSlice","parseResult","getQueryTypeOptions","includeBoth","rangeOptions","getQueryTypeChangeHandler","queryType","instant","exemplar","onQueryTypeChange","testIds","extraFieldEditor","queryTypeField","InlineFormLabel","stepField","toggleReducer","nextValue","QueryOptionGroup","collapsedInfo","toggleOpen","h6","emphasize","legendModeOptions","Auto","Verbose","Custom","PromQueryLegendEditor","legendFormat","getLegendMode","inputRef","newFormat","isSearchable","setSelectionRange","PromQueryBuilderOptions","queryTypeOptions","formatOption","queryTypeValue","getQueryTypeValue","getCollapsedInfo","intervalFactor","getLegendModeLabel","LocalStorageValueProvider","PureComponent","onSaveToStore","onDeleteFromStore","storageKey","_assertThisInitialized","ReferenceError","cancelTimeout","timeoutID","getScrollbarSize","recalculate","cachedRTLResult","getRTLOffsetType","outerDiv","outerStyle","innerDiv","innerStyle","defaultItemKey$1","createListComponent","_class","getItemOffset","getEstimatedTotalSize","getItemSize","getOffsetForIndexAndAlignment","getStartIndexForOffset","getStopIndexForStartIndex","initInstanceProps","shouldResetStyleCacheOnItemSizeChange","validateProps","_PureComponent","_instanceProps","_outerRef","_resetIsScrollingTimeoutId","isScrolling","scrollDirection","scrollOffset","initialScrollOffset","scrollUpdateWasRequested","_callOnItemsRendered","overscanStartIndex","overscanStopIndex","visibleStartIndex","visibleStopIndex","onItemsRendered","_callOnScroll","onScroll","_getItemStyle","_this$props","itemSize","itemStyleCache","_getItemStyleCache","isHorizontal","isRtl","offsetHorizontal","___","_onScrollHorizontal","_event$currentTarget","prevState","_resetIsScrollingDebounced","_onScrollVertical","_event$currentTarget2","_outerRefSetter","outerRef","delay","tick","requestTimeout","_resetIsScrolling","nextProps","validateSharedProps$1","scrollTo","scrollToItem","align","_this$props2","itemCount","scrollbarSize","_this$props3","_callPropsCallbacks","componentDidUpdate","_this$props4","_this$state","_this$props5","innerElementType","innerTagName","itemData","_this$props5$itemKey","itemKey","outerElementType","outerTagName","useIsScrolling","_this$_getRangeToRend","_getRangeToRender","stopIndex","_index","estimatedTotalSize","WebkitOverflowScrolling","_this$_getRangeToRend2","_overscanStartIndex","_overscanStopIndex","_visibleStartIndex","_visibleStopIndex","_this$state2","_scrollDirection","_scrollOffset","_scrollUpdateWasRequested","_this$props6","overscanCount","_this$state3","overscanBackward","overscanForward","FixedSizeList","instanceProps","lastItemOffset","middleOffset","_ref6","numVisibleItems","_ref7","EMPTY_SELECTOR","METRIC_LABEL","buildSelector","singleMetric","selectedLabels","selected","selectedValues","bg2","sm","md","xs","textSemiWeak","statusShowing","palette","brandDanger","valueList","valueListWrapper","border2","valueListArea","valueTitle","validationStatus","textStrong","UnthemedPrometheusMetricsBrowser","updateLabelState","updatedFields","lastUsedLabels","rawLabels","fetchValues","doFacettingForLabel","storeLastUsedLabels","doFacetting","rawValues","details","lastFacetted","possibleLabels","possibleValues","existingValues","hidden","facets","facetLabels","validateSelector","streams","labelSearchTerm","metricSearchTerm","valueSearchTerm","LoadingPlaceholder","nonMetricLabels","metricCount","Label","onChangeMetricSearch","PromLabel","onClickMetric","searchTerm","onChangeLabelSearch","onClickLabel","onChangeValueSearch","valueListsRef","onClickValue","onClickRunQuery","onClickRunRateQuery","onClickValidate","onClickClear","deleteLastUsedLabels","PrometheusMetricsBrowser","withTheme","PromQueryField","refreshMetrics","refreshHint","languageProviderInitializationPromise","prevProps","syntaxLoaded","changedRangeToRefresh","rangeChangedToRefresh","prevRange","sameMinuteFrom","sameMinuteTo","ExtraFieldElement","labelBrowserVisible","hasMetrics","chooserText","metricsLookupDisabled","hasSyntax","getChooserText","buttonDisabled","onLastUsedLabelsSave","onLastUsedLabelsDelete","onClickChooserButton","onChangeQuery","onChangeLabelBrowser","onClickHintFix","plugins","initHints","getInitHints","initHint","isDataFrame","toLegacyResponseData","queryHints","queryHint","hasCanceled_","canceledPromiseRejection","isCanceled","makePromiseCancelable","remainingTasks","onUpdateLanguage","isCancelablePromiseRejection","override","BracesPlugin","SlatePrism","onlyIn","getSyntax","prismLanguages","promql","PromQueryCodeEditor","QueryPreview","weak","topRow","progressWrapper","progressLine","progressNum","NestedNav","trace","totalMsec","openLevels","setOpenLevels","hasChildren","progress","level","idValue","traceId","Trace","queryValue","tracingChildren","tracing","duration_msec","originalJSON","originalTracing","setTracing","tracingData","setQuery","resetTracing","gridTemplateColumns","maxHeight","TraceView","setTrace","openModal","setOpenModal","copied","setCopied","copyError","setCopyError","clearInterval","traceData","pre","ButtonRow","clipboard","writeText","PromQueryEditorSelector","parseModalOpen","setParseModalOpen","rawQuery","setRawQuery","explain","setFlag","setExplain","updateFlag","getFlagValue","setFlagValue","useFlag","templateByDashboard","setTemplateByDashboard","getQueryWithDefaults","onEditorModeChange","newMetricEditorMode","reportInteraction","newEditor","previousEditor","UnifiedAlerting","confirmText","onConfirm","WithTemplateConfig","PromQueryEditorForAlerting","PromQueryEditorByApp","CloudAlerting","AzureCloud","KnownAzureClouds","concealed","getDefaultAzureCloud","azure","cloud","Public","getSecret","azureClientSecret","getDefaultCredentials","managedIdentityEnabled","azureCloud","authTypeOptions","AzureCredentialsForm","credentials","azureCloudOptions","onCredentialsChange","getSubscriptions","hasRequiredFields","tenantId","clientId","clientSecret","isCredentialsComplete","subscriptions","setSubscriptions","loadSubscriptionsClicked","onLoadSubscriptions","updateSubscriptions","canceled","received","autoSelect","defaultSubscriptionId","onSubscriptionChange","isDisabled","AzureAuthSettings","dataSourceConfig","overrideAudienceChecked","setOverrideAudienceChecked","azureEndpointResourceId","azureCredentials","getCredentials","prometheusConfigOverhaulAuth","updateCredentials","InlineSwitch","ev","tips","HelpfulLinks","h3","FormField","LegacyForms","httpOptions","PromSettings","httpMethod","inputEl","timeInterval","spellCheck","onChangeHandler","validationEvents","promSettingsValidationEvents","queryTimeout","disableMetricsLookup","onUpdateDatasourceJsonDataOptionChecked","EventsWithValidation","regexValidation","getValueFromEventItem","eventItem","limitsSettingsValidationEvents","limitFields","LimitsSettings","limitMetrics","operate","createImpl","isSubscription","onUnhandledError","onStoppedNotification","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","delegate","reportUnhandledError","COMPLETE_NOTIFICATION","createNotification","handleStoppedNotification","nextNotification","_bind","context_1","errorThrown","notification","createOperatorSubscriber","isArrayLike","observable","_subscribe","isObserver","isRoot","errorContext","_trySubscribe","sink","promiseCtor","getPromiseCtor","fns","toPromise","fromAsyncIterable","asyncIterable","asyncIterable_1","asyncIterable_1_1","catchError","handledResult","innerSub","syncUnsub","isInteropObservable","obs","fromPromise","isAsyncIterable","isIterable","iterable","iterable_1","iterable_1_1","getReader","isReadableStreamLike","readableStream","reader","releaseLock","readableStreamLikeToAsyncGenerator","createInvalidObservableTypeError","innerFrom","AnnotationQueryEditor","onAnnotationChange","handlerChangeAnnotation","titleFormat","tagKeys","textFormat","useValueForTime","renderLegendFormat","aliasPattern","aliasData","g1","PrometheusLabelNamesRegex","PrometheusLabelValuesRegex","PrometheusMetricNamesRegex","PrometheusQueryResultRegex","PrometheusLabelNamesRegexWithMatch","migrateVariableQueryToEditor","queryBase","qryType","QueryType","LabelNames","labelNamesMatchQuery","labelValuesCheck","LabelValues","labelFilters","metricNamesCheck","MetricNames","queryResultCheck","queryResult","varQuery","VarQueryResult","SeriesQuery","seriesQuery","PrometheusMetricFindQuery","labelNamesRegex","labelNamesRegexWithMatch","metricNamesRegex","queryResultRegex","labelNamesQuery","getTagKeys","filters","labelValuesQuery","isFilterDefined","metricNamesQuery","metricNameQuery","queryResultQuery","metricNameAndLabelsQuery","_map","metricFilterPattern","matchedMetricName","expandable","resultType","metricData","getOriginalMetricName","nameMatch","counterNameMetric","certain","queryTokens","matchAll","flatMap","fixableQuery","ruleMappings","mapping","mappingForQuery","ruleName","preventSubmit","INFINITY_SAMPLE_REGEX","HISTOGRAM_QUANTILE_LABEL_NAME","transformOptions","responseListLength","valueWithRefId","preferredVisualisationType","prometheusResult","traceResult","isPartial","partialWarning","notices","dataFrame","getTimeField","getValueField","valueText","timeField","metricFields","filterable","FieldType","ArrayVector","valueField","valueName","metricField","getLabelValue","parseSampleValue","transformMetricDataToTable","labelsWithoutName","formatLabels","createLabelInfo","stepMs","NaN","baseTimestamp","dps","dpValue","endTimestamp","parseValue","displayNameFromDS","transformToDataFrame","mergeHeatmapFrames","transformToHistogramOverTime","sortSeriesByLabel","getDataLinks","dataLinks","datasourceUid","getDataSourceSrv","getInstanceSettings","urlDisplayLabel","internal","datasourceName","targetBlank","isMs","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","getDisplayProcessor","frames","countFields","DataFrameType","HeatmapRows","seriesList","topSeries","bottomSeries","bottomPoint","s1","s2","le1","le2","NEGATIVE_INFINITY","POSITIVE_INFINITY","ZoomOutEvent","BusEventWithPayload","ShiftTimeEventDirection","ShiftTimeEvent","AbsoluteTimeEvent","BusEventBase","EventBusSrv","isSignedIn","login","email","externalUserId","orgCount","orgId","orgName","orgRole","isGrafanaAdmin","gravatarUrl","weekStart","locale","helpFlags1","hasEditPermissionInFolders","permissions","analytics","fiscalYearStartMonth","authenticatedBy","config1","bootData","user","contextSrv","hasRole","accessControlEnabled","rbacEnabled","hasPermissionInMetadata","accessControl","hasPermission","isGrafanaVisible","visibilityState","isAllowedInterval","minRefreshInterval","intervalToMs","getValidInterval","isEditor","getTimeRange","timeModel","isDateTime","getTimezone","getCurrentTimeRange","TimeSrv","refresh","initTimeFromUrl","parseTime","timeAtLoad","cloneDeep","convertRawToRange","isBefore","setTime","setAutoRefresh","getValidIntervals","intervals","parseUrlParam","utcValue","toUtc","isValid","epoch","getTimeWindow","timeWindow","valueTime","timeWindowMs","isPublicDashboardView","locationService","getSearch","urlRefresh","currentRefresh","isAllowedIntervalFn","refreshIntervals","defaultIntervals","isExistingInterval","minRefreshIntervalInIntervals","lowestRefreshInterval","getRefreshFromUrl","timepicker","refresh_intervals","updateTimeRangeFromUrl","urlRange","timeRangeForUrl","timeHasChangedSinceLoad","stopAutoRefresh","currentUrlState","getSearchObject","partial","validInterval","refreshTimer","startNextRefreshTimer","autoRefreshPaused","refreshTimeModel","timeRangeUpdated","afterMs","autoRefreshBlocked","pauseAutoRefresh","resumeAutoRefresh","updateUrl","oldRefresh","zoomOut","factor","timespan","newTimespan","getZoomedTimeRange","shiftTime","origRange","getShiftedTimeRange","makeAbsoluteTime","isRefreshOutsideThreshold","lastRefresh","isMathString","totalRange","appEvents","singleton","regexifyLabelValuesQueryString","invalidLabel","invalidValue","getLabelValuesAutofillSuggestions","debounceDuration","labelNamesMenuOpen","setLabelNamesMenuOpen","labelValuesMenuOpen","setLabelValuesMenuOpen","regExp","labelValueSearch","itemValue","AsyncSelect","loadOptions","MISSING_LABEL_FILTER_ERROR_MESSAGE","labelFilterRequired","onLabelsChange","hasLabelFilter","editorList","InlineLabel","MetricsLabelsSection","getLabelValuesFromLabelValuesAPI","promQLExpression","interpolatedLabelsToConsider","labelObject","variableOptions","ClassicQuery","VariableQueryEditor","setQryType","setLabel","labelNamesMatch","setLabelNamesMatch","setMetric","setVarQuery","setSeriesQuery","classicQuery","setClassicQuery","labelOptions","setLabelOptions","setLabelFilters","variableQuery","variableMigration","labelToConsider","names","onChangeWithVariableString","updateVar","updLabelFilters","updatedVar","visualQueryQuery","migrateVariableEditorBackToVariableSupport","promVisualQuery","newType","aria-labelledby","newLabel","newLabelvalue","isClearable","updMetric","TextArea","cols","PrometheusVariableSupport","CustomVariableSupport","templateSrv","__interval","__interval_ms","getRangeScopedVars","interpolateQueryExpr","metricFindQuery","PromApplication","GET_AND_POST_METADATA_ENDPOINTS","PrometheusDatasource","getQueryDisplayText","_addTracingHeaders","panelId","_request","queryUrl","basicAuth","withCredentials","Authorization","importFromAbstractQueries","abstractQueries","abstractQuery","exportToAbstractQueries","hideFromInspector","isFetchError","multi","includeAll","prometheusRegularEscape","prometheusSpecialRegexEscape","escapedValues","targetContainsTemplate","containsTemplate","processTargetV2","timeSeriesQuery","utcOffsetSec","timeSrv","utcOffset","tableFrames","framesWithoutTable","partition","df","isTableResult","processedTableFrames","dfs","dataFramesByRefId","groupBy","refIds","responseLength","getValueText","labelFields","frameValueField","promLabels","numberField","labelsForField","transformDFToTable","exemplarFrames","framesWithoutTableAndExemplars","exemplarTraceIdDestinations","destinations","processedExemplarFrames","exemplarTraceIdDestination","traceIDField","links","dataTopic","DataTopic","heatmapResults","framesWithoutTableHeatmapsAndExemplars","isHeatmapResult","heatmapResultsGroupedByQuery","processedHeatmapResultsGroupedByQuery","heatmapResultsGroup","heatmapResultsGroupedByValues","notLE","forOwn","dataFrames","sortedHeatmap","otherFrames","flattenedProcessedHeatmapFrames","flatten","transformV2","activeTargets","prepareTargets","performAnnotationQuery","exploreQuery","panelsQuery","runningQueriesCount","subQueries","filterAndMapResponse","tapObserver","isUnsub","finalize","cancelled","runQuery","observables","forkJoin","performInstantQuery","performTimeSeriesQuery","hinting","minInterval","scrapeInterval","adjustedInterval","adjustInterval","enhanceExprWithAdHocFilters","adjusted","alignRange","rateInterval","__rate_interval","safeInterval","throwError","handleErrors","msRange","sRange","__range_ms","__range_s","__range","seriesLabels","getTagValues","testDatasource","dashboardId","startTime","interpolateVariablesInQueries","expandedQueries","directUrl","loadRules","extractRuleMappingFromGroups","expression","ruleNames","rulesRegex","queryArray","invalidLabelsRegex","correctlyExpandedQueryArray","invalidLabelsRegexp","indexOfRegexMatch","exprBeforeRegexMatch","exprAfterRegexMatch","arrayOfLabelObjects","addLabelsToExpression","expandRecordingRules","labelData","getAdhocFilters","getTimeSrv","exemplarsAvailable","subType","rulerEnabled","prepareQuery","processEvents","clonedTargets","instantTarget","rangeTarget","statusText","space","safeStringifyValue","tagKeysArray","eventList","timeValueTuple","timeStampValue","valueValue","activeValuesTimestamps","latestEvent","timeEnd","annotations","QueryEditor","plugin","DataSourcePlugin","setQueryEditor","setConfigEditor","showAccessOptions","azureAuthSettings","azureAuthSupported","azureAuthEnabled","getAzureAuthEnabled","hasCredentials","setAzureAuthEnabled","setDefaultCredentials","azureAuth","resetCredentials","azureSettingsUI","defaultUrl","sigV4AuthToggleEnabled","sigV4AuthEnabled","renderSigV4Editor","SIGV4ConnectionConfig","AlertingSettings"],"sourceRoot":""}